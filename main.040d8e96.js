"use strict";(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([[179],{7186:(e,n,t)=>{t.d(n,{qe:()=>i,vT:()=>r});const s="nmemonica-9d977",i={apiKey:"AIzaSyD0R3dzI2GREIuA0irO3dMT0n4CP59-GjQ",authDomain:s+".firebaseapp.com",databaseURL:"https://"+s+".firebaseio.com",projectId:s,storageBucket:s+".appspot.com",messagingSenderId:"839840260761",appId:"1:839840260761:web:6d72438c4131e3ce368e08"},r="https://us-east1-"+s+".cloudfunctions.net/g_translate_pronounce"},9180:(e,n,t)=>{t.d(n,{w:()=>c});var s=t(5893),i=t(195),r=t(5697),a=t.n(r),o=t(7294),l=t(4953);function c(e){var n;const{resetOn:t}=e,r=(0,o.useRef)(0);r.current=null!==(n=e.accuracy)&&void 0!==n?n:0;const[a,c]=(0,o.useState)(r.current),u=(0,o.useRef)(!1);(0,o.useEffect)((()=>{u.current=!1,c(r.current)}),[t]);const d=[{value:100*l._9}],[h,g,p]=a>=100*l._9?[13,110,256]:[255,0,0],v=`rgb(${h},${g},${p},0.25)`;return(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,s.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Accuracy"}),(0,s.jsx)(i.ZP,{orientation:"vertical",sx:{color:0!==a&&u.current?v:"rgb(189,189,189,0.25)"},value:a,disabled:a<0,onChange:(e,n)=>{"number"==typeof n&&(u.current=!0,c(n))},onChangeCommitted:(n,t)=>{if(u.current=!0,"function"==typeof e.onChange&&"number"==typeof t){const n=0===t?null:t;e.onChange(n)}},marks:d,valueLabelFormat:e=>e>=100*l._9?"Correct":"Incorrect"})]})}c.propTypes={accuracy:a().number,onChange:a().func,resetOn:a().string}},3968:(e,n,t)=>{t.d(n,{Z:()=>u});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(5529),o=t(7186),l=t(7962),c=t(5965);function u(e){let n;const t=e.word;return(0,s.jsx)("div",{className:"clickable",onTouchStart:e.visible?()=>{n=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?()=>{const s=~~(Date.now()-n)<500&&!e.reCache?"":"/override_cache",i=(0,l.b1)(o.vT+s,t);(0,c.R$)(i)}:void 0,children:e.visible&&(0,s.jsx)(a.Ibz,{size:"medium","aria-label":"pronunciation"})})}u.defaultProps={visible:!1},u.propTypes={word:r().shape({tl:r().string.isRequired,q:r().string.isRequired,uid:r().string.isRequired}).isRequired,reCache:r().bool,onPushedPlay:r().func,visible:r().bool}},5626:(e,n,t)=>{t.d(n,{Y:()=>u});var s=t(5893),i=t(195),r=t(5697),a=t.n(r),o=t(7294),l=t(1683),c=t(3162);function u(e){var n;const{resetOn:t}=e,r=(0,o.useRef)(0);r.current=null!==(n=e.difficulty)&&void 0!==n?n:c.$t;const[a,u]=(0,o.useState)(r.current),d=(0,o.useRef)(!1);(0,o.useEffect)((()=>{d.current=!1,u(r.current)}),[t]);const h=(0,l.O)(a/100),g=[{value:c.YZ},{value:c.$t}];return(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,s.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Difficulty"}),(0,s.jsx)(i.ZP,{orientation:"vertical",sx:{color:0!==a&&d.current?h:"rgb(189,189,189,0.25)"},value:a,onChange:(e,n)=>{"number"==typeof n&&(d.current=!0,u(n))},onChangeCommitted:(n,t)=>{if(d.current=!0,"function"==typeof e.onChange&&"number"==typeof t){const n=0===t?null:t;e.onChange(n)}},marks:g,step:10,valueLabelFormat:e=>e>c.$t?"Pass":"Fail"})]})}u.propTypes={difficulty:a().number,onChange:a().func,resetOn:a().string}},8737:(e,n,t)=>{t.d(n,{M:()=>c});var s=t(5893),i=t(4184),r=t.n(i),a=t(5697),o=t.n(a),l=t(5529);function c(e){const n=r()({[""+e.addlStyle]:!!e.addlStyle,"p-0 px-2":!0,"font-weight-bold":e.active});return(0,s.jsxs)("div",{className:n,onClick:e.onClick,children:[(0,s.jsx)("span",{className:"p-1",children:e.active?(0,s.jsx)(l.oOx,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,s.jsx)(l.wl8,{className:"clickable",size:"small","aria-label":"add"})}),(0,s.jsx)("span",{className:"p-1",children:e.children})]})}t(7294),c.propTypes={addlStyle:o().string,active:o().bool,onClick:o().func,children:o().string}},6537:(e,n,t)=>{t.d(n,{n:()=>l});var s=t(5893),i=(t(7294),t(4184)),r=t.n(i),a=t(5697),o=t.n(a);function l(e){var n;const t=r()({[e.addlStyle]:!0,"d-flex flex-column justify-content-around text-center h-100":!0});return(0,s.jsx)("div",{className:t,children:(0,s.jsx)("div",{children:null!==(n=e.text)&&void 0!==n?n:"Awaiting data ..."})})}l.propTypes={addlStyle:o().string}},2405:(e,n,t)=>{t.d(n,{A:()=>g,D4:()=>b,R_:()=>v,Ro:()=>j,lh:()=>w,ph:()=>m,uY:()=>x,y8:()=>f});var s=t(5893),i=t(1436),r=t(7625),a=t(5529),o=t(4184),l=t.n(o),c=t(5697),u=t.n(c),d=t(7294),h=t(6989);function g(e){const{active:n,toggle:t,toggleFurigana:i,vocabulary:r}=e;return!1===e.visible?null:(0,s.jsx)("div",{className:l()({clickable:n,"sm-icon-grp":!0,"sm-kanji":n}),onClick:n?()=>i(r.uid):void 0,"aria-label":"Toggle furigana",children:n?(0,s.jsxs)("ruby",{children:["漢",(0,s.jsx)("rt",{className:l()({"disabled disabled-color":!t}),children:"ふりがな"})]}):(0,s.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function p(e){const n=(0,d.useRef)(0),{isReinforced:t,addFrequencyTerm:o,removeFrequencyTerm:c,hasReinforce:u,term:g,count:p=n.current}=e,v=(0,h.o)(),f=n.current===p;return(0,d.useEffect)((()=>{n.current=p,f||v()}),[p,f,v]),!1===e.visible?null:(0,s.jsxs)("div",{"aria-label":u?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:()=>{u?c(g.uid):o(g.uid)},children:[u?(0,s.jsx)(a.oOx,{size:"small"}):(0,s.jsx)(a.wl8,{size:"small"}),t?(0,s.jsx)("span",{className:"notification",children:(0,s.jsx)(r.G,{icon:i.RJo})}):(0,s.jsx)("span",{className:l()({notification:!0,"notification-fade":f}),children:p})]})}g.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,toggleFurigana:u().func,hasFurigana:u().bool,vocabulary:u().object},p.propTypes={visible:u().bool,isReinforced:u().bool,addFrequencyTerm:u().func,removeFrequencyTerm:u().func,hasReinforce:u().bool,term:u().object,count:u().number};const v=(0,d.memo)(p);function f(e){const{active:n,setShowHint:t}=e;return e.visible?(0,s.jsx)("div",{className:l()({"sm-icon-grp":!0,clickable:n,"disabled disabled-color":!n}),onClick:n?()=>{t(!0),setTimeout((()=>{t(!1)}),1500)}:void 0,"aria-label":n?"Show hint":"Hint unavailable",children:(0,s.jsx)(a.OgN,{size:"small"})}):null}function m(e){const{toggleAutoVerbView:n,autoVerbView:t}=e;return e.visible?(0,s.jsxs)("div",{className:"sm-icon-grp clickable",onClick:()=>n(),"aria-label":"Toggle auto verb view",children:[(0,s.jsx)(r.G,{icon:t?i.gPx:i.Bxq}),(0,s.jsx)("span",{className:"notification",children:(0,s.jsx)(r.G,{icon:t?i.Bxq:i.gPx})})]}):null}function j(e){const{active:n,action:t}=e;return!1===e.visible?null:(0,s.jsx)("div",{className:l()({clickable:!0,"sm-icon-grp":!0,"disabled-color":n}),onClick:()=>{"function"==typeof t&&t()},"aria-label":"Override audio",children:(0,s.jsx)(r.G,{icon:i.TZC})})}function x(e){const{action:n,toggle:t}=e;return!1===e.visible?null:(0,s.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,s.jsx)(r.G,{className:"clickable",onClick:n,icon:t?i.dzc:i.UJf}),(0,s.jsx)("span",{className:"notification",children:(0,s.jsx)(r.G,{icon:t?i.UJf:i.dzc})})]})}function b(e){const{action:n,toggle:t}=e;return e.visible?(0,s.jsx)("div",{className:l()({clickable:!0,"sm-icon-grp":!0,"info-color":t}),onClick:()=>{"function"==typeof n&&n()},"aria-label":"Literal english translation",children:(0,s.jsx)(a.Rg1,{size:"small"})}):null}function w(e){return e.visible?(0,s.jsxs)(d.Fragment,{children:[(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,s.jsx)("span",{className:l()({underline:"incorrect"===e.hover}),children:"-1"})},0),(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,s.jsx)("span",{className:l()({underline:"pronunciation"===e.hover||"reset"!==e.hover&&e.prevMissPronu}),children:"P"})},1),(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,s.jsx)("span",{className:l()({underline:"reset"===e.hover}),children:"0"})},2)]}):null}f.propTypes={visible:u().bool,active:u().bool,setShowHint:u().func},m.propTypes={visible:u().bool,active:u().bool,toggleAutoVerbView:u().func,autoVerbView:u().bool},j.propTypes={visible:u().bool,active:u().bool,action:u().func},x.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,action:u().func},b.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,action:u().func},w.propTypes={visible:u().bool,hover:u().string,onClick:u().func,onIncorrect:u().func,onPronunciation:u().func,onReset:u().func,prevMissPronu:u().bool}},7567:(e,n,t)=>{t.d(n,{Z:()=>u});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(6259),o=t(4184),l=t.n(o);function c(e){const n={disabled:!!e.disabled||void 0};return(0,s.jsxs)("div",{className:"settings-switch-root",children:[(0,s.jsx)("p",{className:l()({"disabled-color":n.disabled}),children:e.statusText}),(0,s.jsx)(a.Z,Object.assign({},n,{checked:e.active,onChange:()=>e.action(),color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}}))]})}c.propTypes={active:r().bool,action:r().func.isRequired,statusText:r().string.isRequired,color:r().string,disabled:r().bool};const u=c},3392:(e,n,t)=>{t.d(n,{Z:()=>f});var s=t(5893),i=t(5834),r=t(6867),a=t(2440),o=t(9334),l=t(1664),c=t(7182),u=t(5529),d=t(4184),h=t.n(d),g=t(5697),p=t.n(g),v=t(7294);function f(e){var n;const[t,d]=(0,v.useState)(null),[g,p]=(0,v.useState)(e.initial),f=(0,v.useRef)(e.options),m=(0,v.useRef)(null!==(n=e.allowed)&&void 0!==n?n:e.options.map(((e,n)=>n))),j=f.current,x=m.current;(0,v.useEffect)((()=>{p(e.initial)}),[e.initial]);const b=Boolean(t),w=e=>{d(e.currentTarget)};return(0,s.jsxs)("div",{className:h()({clickable:!0!==e.disabled,"d-flex":!0,"flex-row-reverse":!0===e.flip||void 0,"justify-content-end":!0}),children:[(0,s.jsx)(a.Z,{component:"nav",disablePadding:!0,children:(0,s.jsx)(i.Z,{disableGutters:!0,disabled:!0===e.disabled,id:"filter-button","aria-haspopup":"listbox","aria-controls":"filter-menu","aria-expanded":b?"true":void 0,onClick:w,children:(0,s.jsx)(o.Z,{primary:e.title,secondary:j[g],secondaryTypographyProps:{color:"unset"}})})}),(0,s.jsx)(l.Z,{id:"filter-menu",anchorEl:t,open:b,onClose:()=>{d(null)},MenuListProps:{"aria-labelledby":"filter-button",role:"listbox"},children:j.map(((n,t)=>(0,s.jsx)(c.Z,{selected:t===g,onClick:n=>{x.includes(t)&&((n,t)=>{p(t),d(null),e.onChange(t)})(0,t)},children:x.includes(t)?n:(0,s.jsx)("span",{className:"disabled-color",children:n})},n)))}),(0,s.jsx)(r.Z,{"aria-labelledby":"filter-button",sx:{color:"unset",minWidth:"55px"},"aria-haspopup":"listbox",disabled:!0===e.disabled,onClick:w,children:(0,s.jsx)(u.Ui8,{size:"medium",className:h()({"rotate-transition":!0,"rotate-90":b})})})]})}f.propTypes={disabled:p().bool,flip:p().bool,title:p().string,options:p().arrayOf(p().string),initial:p().number,onChange:p().func}},9775:(e,n,t)=>{t.d(n,{Z:()=>c});var s=t(5893),i=t(7294),r=t(5697),a=t.n(r),o=t(4184),l=t.n(o);function c(e){let n,t;e.children&&(n=e.children,t=e.children),e.largeValue&&(n=e.largeValue),e.smallValue&&(t=e.smallValue);const r=void 0!==e.rootClassName&&l()(e.rootClassName)||void 0,a=void 0!==e.className&&e.className||{},o="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+l()(e.largeClassName):""),c="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+l()(e.smallClassName):""),u=()=>{"function"==typeof e.onClick&&e.onClick()},d=[(0,s.jsx)("span",{"data-name":"large",className:l()(Object.assign(Object.assign({[o]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:n},0),(0,s.jsx)("span",{"data-name":"small",className:l()(Object.assign(Object.assign({[c]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:t},1)];return!0===e.fragment?(0,s.jsx)(i.Fragment,{children:d}):(0,s.jsx)("div",{className:r,children:d})}c.propTypes={fragment:a().bool,breakPoint:a().string,rootClassName:a().object,className:a().object,largeClassName:a().object,smallClassName:a().object,onClick:a().func,children:a().oneOfType([a().string,a().element]),largeValue:a().oneOfType([a().string,a().element]),smallValue:a().oneOfType([a().string,a().element])}},7127:(e,n,t)=>{t.d(n,{Z:()=>l});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(6914);function o(e){return(0,s.jsx)(a.Z,{size:"small",className:"MuiButton",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}o.propTypes={action:r().func.isRequired,color:r().string,ariaLabel:r().string.isRequired,children:r().object.isRequired};const l=o},7791:(e,n,t)=>{t.d(n,{u:()=>f});var s=t(5893),i=t(2409),r=t(8301),a=t(1436),o=t(7625),l=t(5529),c=t(4184),u=t.n(c),d=t(5697),h=t.n(d),g=t(7294),p=t(8916),v=t(4699);function f(e){var n,t;const{children:c}=e,d=(0,v.i)(),[h,f]=(0,g.useState)(!1),m=(0,g.useRef)(null),{x:j,y:x,strategy:b,refs:w,middlewareData:y,update:k}=(0,i.YF)({placement:"top",middleware:[(0,r.cv)({mainAxis:8,crossAxis:10}),(0,r.uY)(),(0,i.x7)({element:m})]});return(0,g.useEffect)((()=>{k(),f(!1)}),[k,d.height,d.width,c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:w.setReference,className:u()(Object.assign({"sm-icon-grp clickable":!0},e.className?{[e.className]:!0}:{})),"aria-label":"Set difficulty",onClick:()=>f((e=>!e)),children:(0,s.jsx)(o.G,{icon:a.scR})}),(0,s.jsxs)("div",{id:"tooltip",ref:w.setFloating,style:{height:"200px",position:b,top:null!=x?x:0,left:null!=j?j:0,width:"max-content"},className:u()({invisible:!h,"tooltip-fade":!h,[p.pK]:!0,"d-flex":!0}),children:[e.children,(0,s.jsx)("div",{className:"x-button",onClick:()=>f(!1),children:(0,s.jsx)(l.b0D,{className:"clickable",size:"small","aria-label":"remove"})}),(0,s.jsx)("div",{ref:m,id:"arrow",style:{position:b,height:8,width:8,bottom:-4,left:8+(null!==(t=null===(n=y.arrow)||void 0===n?void 0:n.x)&&void 0!==t?t:0)}})]})]})}f.propTypes={value:h().number,onChange:h().func,manualUpdate:h().string}},2937:(e,n,t)=>{t.d(n,{yv:()=>h});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),l=t(6989),c=t(7127);function u(e,n){const[t,r]=(0,o.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:!1}),l=(0,o.useRef)(Date.now()),u=(0,o.useRef)(void 0),{gotoNext:h,gotoPrev:g}=e;(0,o.useLayoutEffect)((()=>{!1!==e.fadeInAnswers&&(l.current=Date.now(),u.current=void 0),r({showMeaning:!1,correct:!1,incorrect:[]})}),[e.question,e.fadeInAnswers]);const p=(n,s)=>{t.correct||(e.isCorrect(n)?(u.current=Date.now(),r({correct:!0,showMeaning:!0})):2===t.incorrect.length?r({incorrect:[...t.incorrect,s],correct:!0,showMeaning:!0}):r({incorrect:[...t.incorrect,s]}))},v=e.question,f=e.choices;let m=void 0!==v.english?"[English]":"";void 0===e.hint?t.showMeaning&&v.english&&(m=v.english):m=t.showMeaning&&v.english?v.english:e.hint;const j=void 0===n.current?void 0:n;return(0,s.jsxs)("div",{ref:j,className:"pick4game main-panel h-100 d-flex",children:[(0,s.jsx)(c.Z,{ariaLabel:"Previous",action:g,children:(0,s.jsx)(i.wyc,{size:16})}),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row row-cols-1 row-cols-sm-2 h-100",children:[(0,s.jsxs)("div",{className:a()({"col question d-flex flex-column justify-content-center text-center":!0}),children:[(0,s.jsx)("div",{children:v.toHTML(t.correct)}),(0,s.jsx)("span",{className:a()({invisible:!e.qRomaji}),children:v.romaji}),void 0!==m&&(0,s.jsx)("span",{className:"clickable",onClick:()=>{r({showMeaning:!t.showMeaning})},children:m})]}),(0,s.jsx)("div",{className:"col choices d-flex justify-content-around flex-wrap",children:f.map(((n,i)=>{var r;const a=e.isCorrect(f[i])&&t.correct,o=t.incorrect.includes(i);let c;const h=Math.abs((null!==(r=u.current)&&void 0!==r?r:Date.now())-l.current);return c=e.fadeInAnswers&&t.correct?a||o||1e3*(i+1)<h?(0,s.jsx)(d,{css:a?void 0:"disabled-color",fadeIn:!1,c:n,i,isRight:a,isWrong:o,aRomaji:e.aRomaji},String(l.current)+n.compare):(0,s.jsx)("div",{className:"invisible w-50 h-50 pt-3",children:n.toHTML()},n.compare):(0,s.jsx)(d,{c:n,i,isRight:a,isWrong:o,checkAnswer:p,aRomaji:e.aRomaji,fadeIn:e.fadeInAnswers,elapsed:h},String(l.current)+n.compare),c}))})]})}),(0,s.jsx)(c.Z,{ariaLabel:"Next",action:h,children:(0,s.jsx)(i.XCv,{size:16})})]})}function d(e){var n,t,i;const{c:r,i:o,isRight:c,isWrong:u,checkAnswer:d,aRomaji:h,fadeIn:g,elapsed:p}=e;let v=1e3*(o+1);if(p){const e=1e3*(o+1)-p;v=e<0?1:e}const[f]=(0,l.d)(!1===g?0:v),m=a()(Object.assign(Object.assign({"d-flex flex-column justify-content-evenly":!0,"w-50 h-50 pt-3 text-center clickable":!0,"text-break":!0},e.css?{[e.css]:!0}:{}),{"correct-color":c,"incorrect-color":u}));return(0,s.jsx)("div",{className:m,onClick:()=>{"function"==typeof d&&d(r,o)},children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("div",{children:r.toHTML({fadeIn:f})}),c&&(0,s.jsx)("div",{children:r.english}),(0,s.jsx)("span",{className:a()({invisible:!h}),children:r.romaji})]})},`${null!==(n=r.compare)&&void 0!==n?n:""}${null!==(t=r.english)&&void 0!==t?t:""}${null!==(i=r.japanese)&&void 0!==i?i:""}`)}const h=(0,o.memo)((0,o.forwardRef)(u));(0,o.memo)(u)},8012:(e,n,t)=>{t.r(n),t.d(n,{KanjiGameMeta:()=>M,choiceToHtml:()=>V,createEnglishChoices:()=>F,default:()=>P,oneFromList:()=>L,properCase:()=>I});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(5472),l=t.n(o),c=t(7294),u=t(743),d=t(9655),h=t(2937),g=t(2959),p=t(6892),v=t(5863),f=t(8527),m=t(9983),j=t(2850),x=t(9815),b=t(3162),w=t(6278),y=t(4933),k=t(9226),N=t(6693),S=t(8056),T=t(8673),R=t(4133),C=t(7891),O=t(5626),A=t(6537),D=t(2405),E=t(7791);const M={location:"/kanji-game/",label:"Kanji Game"};function P(){var e,n;const t=(0,u.I0)(),{kanjiList:r,activeTags:o,repetition:p,fadeInAnswers:M,memoThreshold:P,filterType:I,orderType:W,reinforce:Z}=(0,w.R)(),G=(0,c.useRef)(P);G.current=P;const{vocabList:q}=(0,y.Z)(),U=(0,c.useRef)(p);U.current=p;const _=(0,c.useRef)([]),[J,$]=(0,c.useState)(0),[z,K]=(0,c.useState)(null);(0,c.useEffect)((()=>{0===r.length&&t((0,T.tk)()),0===q.length&&t((0,C.Rz)())}),[]);const H=(0,c.useMemo)((()=>{if(0===r.length)return[];if(0===Object.keys(U.current).length&&0===o.length)return r;const e=Object.keys(U.current).reduce(((e,n)=>{var t;return!0===(null===(t=U.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,m.Dm)(I.current,r,e,I.current===R.Lx.TAGS?o:[],void 0);if(Z.current&&I.current===R.Lx.TAGS){const t=n.map((e=>e.uid)),s=r.filter((n=>e.includes(n.uid)&&!t.includes(n.uid)));n=[...n,...s]}switch(W.current){case R.vl.DIFFICULTY:{const e=(0,b.WU)(G.current,n,U.current);e.length>0?n=e:console.warn("Excluded all terms. Discarding memorized subfiltering.");break}}const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=U.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return _.current=t,n}),[r,o,Z,I]),B=(0,c.useMemo)((()=>{const e=U.current;if(0===H.length)return[];let n;switch(W.current){case R.vl.VIEW_DATE:n=(0,b.EL)(H,e);break;case R.vl.DIFFICULTY:n=(0,b.J0)(H,U.current);break;default:n=(0,b.tq)(H)}return n}),[H]),Y=(0,c.useRef)(null),X=(0,c.useRef)(0),[Q,ee]=(0,c.useState)(Date.now()),ne=(0,c.useRef)(Date.now());(0,c.useEffect)((()=>{var e;const n={selectedIndex:X.current,reinforcedUID:Y.current,lastNext:ne.current};if(z!==n.reinforcedUID||J!==n.selectedIndex){const s=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,m.vr)(n.selectedIndex,H,B);if((0,m.Zc)(n.lastNext)){const e=(0,m.cc)(s,H),i=s!==n.reinforcedUID,r=null!==n.reinforcedUID;t((0,T.cX)({uid:s,shouldIncrement:i})).unwrap().then((n=>{var i;const{value:a,prevVal:o}=n,l=null!==(i=o.lastView)&&void 0!==i?i:a.lastView,c={[s]:Object.assign(Object.assign({},a),{lastView:l})};(0,v.Ps)(((e,n)=>t((0,S.kg)(e,n))),e,c,{frequency:r})}))}X.current=J,Y.current=z}}),[t,z,J,H,B]);const te=(0,c.useMemo)((()=>0===H.length||0===q.length?[]:H.map((e=>{const n=q.reduce(((n,t)=>{var s,i;const r=t.english.includes(e.english),a=t.japanese.includes(e.kanji);return e.radical&&a&&(0,x.xn)(e.kanji)?n:e.radical&&(null===(s=e.radical)||void 0===s?void 0:s.example.length)>0?(null===(i=e.radical)||void 0===i?void 0:i.example.filter((e=>t.japanese.includes(e)))).length>0?[...n,t]:n:(a&&r?n=[t,...n]:a&&(n=[...n,t]),n)}),[]);return n}))),[H,q]),se=(0,c.useCallback)((()=>{const e=H.length;let n=(J+1)%e;ne.current=Q,ee(Date.now()),X.current=J,$(n),K(null)}),[H,J,Q]),ie=(0,c.useCallback)((()=>{(0,m.hY)(Z.current,I.current,_.current,H,U.current,z,(e=>{K(e)}),se)}),[_,H,z,se,Z,I]),re=(0,c.useCallback)((()=>{const e=H.length;let n;n=z?J:(e+(J-1))%e,ne.current=Q,ee(Date.now()),X.current=J,$(n),K(null)}),[H,J,z,Q]),ae=(0,c.useCallback)((e=>{_.current=[..._.current,e],t((0,T.Mh)(e))}),[t]),oe=(0,c.useCallback)((e=>{_.current=_.current.filter((n=>n!==e)),t((0,T.SI)(e))}),[t]),{kanji:le,game:ce}=(0,c.useMemo)((()=>{if(0===B.length||0===te.length)return{};const e=null!=z?z:(0,m.vr)(J,H,B),n=(0,m.cc)(e,r),t=te[B[J]],i=function(e,n,t){const{uid:i,kanji:r,on:o,kun:c}=e,u=F(e,n,t),d=o&&c?2:o||c?3:5,h=l()(t,(e=>j.TZ.parse(e).getSpelling().length)).slice(0,d);return{question:{toHTML:e=>(0,s.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,s.jsx)("div",{className:"position-absolute w-100",children:e&&(0,s.jsxs)("div",{className:"d-flex flex-column fs-4",children:[o&&(0,s.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,s.jsx)("div",{className:"fs-6",children:j.TZ.parse({japanese:"おんよみ\n音読み"}).toHTML()}),(0,s.jsx)("div",{className:"fs-5",children:o})]},o),c&&(0,s.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,s.jsx)("div",{className:"fs-6",children:j.TZ.parse({japanese:"くんよみ\n訓読み"}).toHTML()}),(0,s.jsx)("div",{className:"fs-5",children:c})]},c),h.map((n=>(0,s.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,s.jsx)("div",{className:"fs-5 mw-50 text-break text-start",children:L(n.english)}),(0,s.jsx)("div",{children:j.TZ.parse(n).toHTML()})]},n.uid)))]})}),(0,s.jsx)("div",{className:a()({"fs-kanji-huge":!0,"position-absolute w-100":!0,"opacity-25":!0,"correct-color":e}),children:(0,s.jsx)("span",{children:r})})]})},answer:i,choices:u.map((e=>({compare:e.uid,toHTML:V(e)})))}}(n,r,t);return{kanji:n,game:i}}),[z,r,H,B,J,te]),ue=(0,c.useCallback)((e=>{switch(e){case"right":re();break;case"left":ie()}return Promise.resolve()}),[re,ie]),{HTMLDivElementSwipeRef:de}=(0,N.M)(ue);(0,k.q)(ue,(()=>{}));const he=(0,c.useCallback)((e=>e.compare===(null==ce?void 0:ce.answer)),[ce]);if(!ce)return(0,s.jsx)(A.n,{addlStyle:"main-panel"});const ge=le&&!0===(null===(e=p[le.uid])||void 0===e?void 0:e.rein),pe=(J+1)/H.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.yv,{ref:de,question:ce.question,isCorrect:he,choices:ce.choices,gotoPrev:re,gotoNext:ie,fadeInAnswers:M}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start",children:(0,s.jsx)(d.rU,{to:g.KanjiGridMeta.location,children:(0,s.jsx)(D.uY,{toggle:!0,action:null})})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)(E.u,{children:(0,s.jsx)(O.Y,{difficulty:null===(n=U.current[le.uid])||void 0===n?void 0:n.difficulty,onChange:(0,f.c)(t,(e=>(0,T.F$)(le.uid,e))),resetOn:le.uid})}),(0,s.jsx)(D.R_,{addFrequencyTerm:ae,removeFrequencyTerm:oe,hasReinforce:ge,term:le,isReinforced:null!==z})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:pe,color:ge?"secondary":"primary"})})]})}function I(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function L(e){let n=e;const t=e.split(",");return n=t.length>1?I(t[Math.floor(Math.random()*t.length)].trim()):I(e),n}function F(e,n,t){const s=e=>e.split(",").map((e=>e.trim())),i=s(e.english),r=Object.assign(Object.assign({},e),{english:L(e.english)}),a=t.reduce(((e,n)=>{const t=n.english.split(",").map((e=>e.trim()));return[...e,...t]}),[]),{firstLetter:o}=W(r.english),l=new Set([...i,...o?[o]:[],...a]);let c=[r];const u=new Set([e.uid]);for(;c.length<4&&n.length!==u.size;){const e=n[Math.floor(Math.random()*n.length)],t=s(e.english),i=t.reduce(((e,n)=>{const{firstLetter:t}=W(n);return t&&(e=[...e,t]),e}),[]);if(t.every((e=>!l.has(e)))&&(0===i.length||i.every((e=>!l.has(e))))){const n=L(e.english);l.add(n);const{firstLetter:t}=W(n);t&&l.add(t),c=[...c,Object.assign(Object.assign({},e),{english:n})]}u.add(e.uid)}return(0,p.Sy)(c),c}function W(e){let n,t,s,i;if(new RegExp(/^[^a-zA-Z]/).test(e)){const i=new RegExp(/[^a-zA-Z\s]/);1===e.split("").filter((e=>i.test(e))).length&&(s=e.slice(0,1),n=e.slice(1,2),t=e.slice(2))}else e.startsWith("To ")?(i=e.slice(0,3),n=e.slice(3,4),t=e.slice(4)):(n=e.slice(0,1),t=e.slice(1));return{firstLetter:n,restLetters:t,nonAlpha:s,toDo:i}}function V(e){return function(n={}){const{fadeIn:t}=n,i={"notification-fade":void 0!==t?!t:void 0,"notification-fade-in":t},{firstLetter:r,restLetters:o,nonAlpha:l,toDo:c}=W(e.english);return r?(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)("span",{className:a()(i),children:l}),c&&(0,s.jsx)("span",{className:a()(i),children:c}),r&&(0,s.jsx)("span",{className:"fw-bold",children:r}),o&&(0,s.jsx)("span",{className:a()(i),children:o})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:a()(i),children:e.english})})}}},2959:(e,n,t)=>{t.r(n),t.d(n,{KanjiGridMeta:()=>C,createChoices:()=>A,default:()=>O});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(7294),l=t(743),c=t(9655),u=t(8012),d=t(5529),h=t(5697),g=t.n(h),p=t(7127);function v(e){const[n,t]=(0,o.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:-1}),i=(0,o.useCallback)((()=>{t({showMeaning:!1,correct:-1,incorrect:[]})}),[t]),{isCorrect:r,choices:l,gotoNext:c,gotoPrev:u}=e,h=(0,o.useCallback)((()=>{i(),u()}),[i,u]),g=(0,o.useCallback)((()=>{i(),c()}),[i,c]),v=a()({"pickXgame main-panel h-100":!0});return(0,s.jsx)("div",{className:v,children:(0,s.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(p.Z,{ariaLabel:"Previous",action:h,children:(0,s.jsx)(d.wyc,{size:16})}),(0,s.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:l.map(((e,o)=>(e=>{const o=l.length,u=n.incorrect.includes(e),d=n.correct===e,h=a()({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":d,"incorrect-color":u}),g=a()({"mb-0":!0}),p=`${Math.trunc(1/Math.ceil(Math.sqrt(o))*.75*100)}%`;return(0,s.jsx)("div",{onClick:()=>((e,s)=>{const[a,o]=r(e);a?(t({correct:s,showMeaning:!0}),setTimeout((()=>{i(),c()}),1e3)):2===n.incorrect.length?(t({incorrect:[...n.incorrect,s],correct:o,showMeaning:!0}),setTimeout((()=>{i(),c()}),2500)):t({incorrect:[...n.incorrect,s]})})(l[e],e),className:h,style:{width:p},children:(0,s.jsx)("h2",{className:g,children:l[e].toHTML()})},e)})(o)))}),(0,s.jsx)(p.Z,{ariaLabel:"Next",action:g,children:(0,s.jsx)(d.XCv,{size:16})})]})},0)}v.propTypes={question:g().object,isCorrect:g().func.isRequired,choices:g().array,gotoNext:g().func.isRequired,gotoPrev:g().func.isRequired};var f=t(6892),m=t(8527),j=t(9983),x=t(3162),b=t(2409),w=t(8301),y=t(4699),k=t(6278),N=t(8673),S=t(4133),T=t(6537),R=t(2405);const C={location:"/kanji-grid/",label:"Kanji Grid Game"};function O(){var e;const n=(0,l.I0)(),{kanjiList:t,activeTags:r,repetition:d,filterType:h,reinforce:g,choiceN:p}=(0,k.R)();(0,o.useEffect)((()=>{0===t.length&&n((0,N.tk)())}),[]);const f=(0,o.useRef)(d);f.current=d;const[O,D]=(0,o.useState)([]),[E,M]=(0,o.useState)(0),[P,I]=(0,o.useState)(null),L=(0,o.useRef)(""),[F,W]=(0,o.useState)(!1),V=(0,o.useRef)([]),[Z,G]=(0,o.useState)(null),q=(0,o.useMemo)((()=>{if(0===t.length)return[];if(0===Object.keys(f.current).length&&0===r.length)return t;const e=Object.keys(f.current).reduce(((e,n)=>{var t;return!0===(null===(t=f.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,j.Dm)(h.current,t,e,h.current===S.Lx.TAGS?r:[],(()=>{}));if(g.current&&h.current===S.Lx.TAGS){const s=n.map((e=>e.uid)),i=t.filter((n=>e.includes(n.uid)&&!s.includes(n.uid)));n=[...n,...i]}const s=n.reduce(((e,n)=>{var t;return!0===(null===(t=f.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return D(s),n}),[t,r,g,h]),U=(0,o.useMemo)((()=>(0,x.tq)(q)),[q]),_=(0,o.useCallback)((()=>{const e=q.length;M((E+1)%e),I(null),G(null)}),[q,E]),J=(0,o.useCallback)((()=>{(0,j.hY)(g.current,h.current,O,q,f.current,P,(e=>{I(e)}),_)}),[O,q,P,_,g,h]),$=(0,o.useCallback)((()=>{const e=q.length;let n;n=P?E:(e+(E-1))%e,M(n),I(null),G(null)}),[q,E,P]),z=(0,o.useRef)(-1),{blastElRef:K,anchorElRef:H,text:B,setText:Y}=function(){const[e,n]=(0,o.useState)(""),[t,s]=(0,o.useState)({w:0,h:0}),i=(0,y.i)(),{x:r,y:l,strategy:c,refs:u,update:d}=(0,b.YF)({placement:"bottom",middleware:[(0,w.cv)({mainAxis:void 0===i.height?0:i.height/2-t.h,crossAxis:0}),(0,w.uY)()]});if((0,o.useEffect)((()=>{var n,t;const i=null===(n=u.floating.current)||void 0===n?void 0:n.clientWidth,r=null===(t=u.floating.current)||void 0===t?void 0:t.clientHeight;e.length>0&&i&&i>0&&r&&r>0&&(s({w:i,h:r}),d())}),[e,s,u.floating,d]),null!==u.floating.current){u.floating.current.style.top="";const n={position:c,top:`${null!=l?l:0}px`,left:`${null!=r?r:0}px`,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"};u.floating.current.className=a()({"dark-mode-color":!0,"notification-fade":e.length>0}),Object.keys(n).forEach((e=>{if(null!==u.floating.current){const t=e;u.floating.current.style[t]=n[t]}}))}return{blastElRef:u.setFloating,anchorElRef:u.setReference,text:e,setText:n}}(),X=(0,o.useCallback)((e=>{D((n=>[...n,e])),n((0,N.Mh)(e))}),[n]),Q=(0,o.useCallback)((e=>{D((n=>n.filter((n=>n!==e)))),n((0,N.SI)(e))}),[n]);if(0===U.length)return(0,s.jsx)(T.n,{addlStyle:"main-panel"});const ee=null!=P?P:(0,j.vr)(E,q,U),ne=(0,j.cc)(ee,t);let te;L.current!==ne.uid?(L.current=ne.uid,V.current=A(p,ne,t),te=(0,u.oneFromList)(ne.english)):te=null!=Z?Z:(0,u.oneFromList)(ne.english);const se=function(e,n,t){return function(){if(null==e?void 0:e.english.includes(",")){let s=(0,u.oneFromList)(e.english);for(;s===n;)s=(0,u.oneFromList)(e.english);t(s)}}}(ne,te,G),ie=function(e,n,t,[i,r]){const{english:o,kanji:l,on:c,kun:u,uid:d}=e,h=i!==o;return{question:{toHTML:e=>t?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:a()({"correct-color":e}),children:(0,s.jsx)("span",{children:l})}),(void 0!==c||void 0!==u)&&(0,s.jsxs)("div",{className:a()({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,s.jsx)("span",{children:c}),(0,s.jsx)("span",{children:u})]})]}):(0,s.jsx)("div",{onClick:h?r:void 0,children:i+(h?"...":"")})},answer:d,choices:n.map((e=>({compare:e.uid,toString:n=>(null!=n?n:t)?e.english:e.kanji,toHTML:({side:n}={})=>(0,s.jsx)(s.Fragment,{children:(null!=n?n:t)?e.english:e.kanji})})))}}(ne,V.current,F,[te,se]),re=function(e,n,t,s,i){return function(r){const a=r.compare===(null==n?void 0:n.answer),o=(null==n?void 0:n.choices.findIndex((e=>e.compare===(null==n?void 0:n.answer))))||-1;return a||(i.current>-1&&t.length>0?(clearTimeout(i.current),s(""),setTimeout((()=>s(r.toString(!e))),100)):(s(r.toString(!e)),i.current=window.setTimeout((()=>s("")),2500))),[a,o]}}(F,ie,B,Y,z),ae=ne&&!0===(null===(e=d[ne.uid])||void 0===e?void 0:e.rein),oe=(E+1)/q.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"tooltip-anchor",ref:H}),(0,s.jsx)("div",{ref:K,children:B}),(0,s.jsx)(v,{question:ie.question,isCorrect:re,choices:ie.choices,gotoPrev:$,gotoNext:J}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start",children:(0,s.jsx)(c.rU,{to:F?C.location:u.KanjiGameMeta.location,children:(0,s.jsx)(R.uY,{toggle:F,action:(0,m.k)(W,(e=>!e))})})})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)("span",{children:ie.question.toHTML(!1)}),(0,s.jsx)(R.R_,{addFrequencyTerm:X,removeFrequencyTerm:Q,hasReinforce:ae,term:ne,isReinforced:null!==P})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:oe,color:ae?"secondary":"primary"})})]})}function A(e,n,t){const s="english",i=e=>e.split(",").map((e=>e.trim()));let r=[n];const a=i(n[s]),o=new Set([...a]),l=new Set([n.uid]);for(;r.length<e&&t.length!==l.size;){const e=t[Math.floor(Math.random()*t.length)],n=i(e[s]);n.every((e=>!o.has(e)))&&(r=[...r,e],n.forEach((e=>{o.add(e)}))),l.add(e.uid)}return(0,f.Sy)(r),r}},1540:(e,n,t)=>{t.r(n),t.d(n,{OppositesGameMeta:()=>f,default:()=>m});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(7294),l=t(743),c=t(2937),u=t(6892),d=t(2850),h=t(3162),g=t(6693),p=t(9385),v=t(6537);const f={location:"/opposites/",label:"Opposites Game"};function m(){const e=(0,l.I0)(),{value:n}=(0,l.v9)((({opposite:e})=>e),((e,n)=>e.version===n.version)),[t,r,f]=(0,l.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t,fadeInAnswers:s}=e;return[n,t,s]}),l.wU);(0,o.useEffect)((()=>{0===n.length&&e((0,p.bt)())}),[]);const m=(0,o.useMemo)((()=>0===n.length?[]:(0,h.tq)(n)),[n]),[j,x]=(0,o.useState)(0),b=(0,o.useCallback)((()=>{const e=n.length;x((j+1)%e)}),[j,n]),w=(0,o.useCallback)((()=>{const e=n.length,t=j-1;x(t<0?(e+t)%e:t%e)}),[j,n]),y=(0,o.useCallback)((e=>{switch(e){case"right":w();break;case"left":b()}return Promise.resolve()}),[w,b]),{HTMLDivElementSwipeRef:k}=(0,g.M)(y);if(0===m.length)return(0,s.jsx)(v.n,{addlStyle:"main-panel"});const N=function(e,n,t){let[i,r]=e[n[t]];const o=d.TZ.parse(i),l=d.TZ.parse(r),c="fs-2",h=Object.assign(Object.assign({},i),{toHTML:e=>(0,s.jsx)("span",{className:a()({"fs-1":!0,"correct-color":e}),children:o.toHTML()})}),g=Object.assign(Object.assign({},r),{compare:r.japanese,toHTML:()=>(0,s.jsx)("span",{className:c,children:l.toHTML()})});let p=[g],v=[r.romaji,i.romaji];for(;p.length<4;){const n=Math.floor(Math.random()*e.length),[t,i]=e[n];if(!v.includes(t.romaji)&&!v.includes(i.romaji))if(0===Math.floor(2*Math.random())){const e=d.TZ.parse(t);p=[...p,Object.assign(Object.assign({},t),{compare:t.japanese,toHTML:()=>(0,s.jsx)("span",{className:c,children:e.toHTML()})})],v=[...v,t.romaji]}else{const e=d.TZ.parse(i);p=[...p,Object.assign(Object.assign({},i),{compare:i.japanese,toHTML:()=>(0,s.jsx)("span",{className:c,children:e.toHTML()})})],v=[...v,i.romaji]}}return(0,u.Sy)(p),{question:h,answer:g,choices:p}}(n,m,j),S=(j+1)/n.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.yv,{ref:k,question:N.question,isCorrect:e=>e.compare===N.answer.compare,choices:N.choices,qRomaji:t,aRomaji:r,gotoPrev:w,gotoNext:b,fadeInAnswers:f}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:S})},1)]})}},4921:(e,n,t)=>{t.r(n),t.d(n,{ParticlesGameMeta:()=>v,default:()=>f});var s=t(5893),i=t(9041),r=t(7294),a=t(743),o=t(2937),l=t(6892),c=t(2850),u=t(3996),d=t(3162),h=t(6693),g=t(7988),p=t(6537);const v={location:"/particles/",label:"Particles Game"};function f(){const e=(0,a.I0)(),{phrases:n,particles:t}=(0,a.v9)((({particle:e})=>e.particleGame)),[u,v]=(0,a.v9)((({particle:e})=>{const{aRomaji:n,fadeInAnswers:t}=e.setting;return[n,t]}));(0,r.useEffect)((()=>{0===n.length&&e((0,g.aq)())}),[]);const f=(0,r.useRef)([]),[j,x]=(0,r.useState)(0),b=(0,r.useCallback)((()=>{const e=n.length;x((j+1)%e)}),[j,n]),w=(0,r.useCallback)((()=>{const e=n.length,t=j-1;x(t<0?(e+t)%e:t%e)}),[j,n]),y=function(e,n,t){if(0===n.length||0===t.length)return;0===f.current.length&&(f.current=(0,d.tq)(n));const i=n[f.current[e]],{answer:r,question:a,english:o,literal:u}=i,h=Object.assign(Object.assign({},r),{toHTML:()=>(0,s.jsx)(s.Fragment,{children:r.japanese})});t=t.map((e=>Object.assign(Object.assign({},e),{toHTML:()=>(0,s.jsx)(s.Fragment,{children:e.japanese})})));const g=function(e,n){const t="fs-1";let i=[Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,s.jsx)("span",{className:t,children:e.japanese})})];for(;i.length<4;){const e=n[Math.floor(Math.random()*n.length)];i.every((n=>n.compare!==e.japanese))&&(i=[...i,Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,s.jsx)("span",{className:t,children:e.japanese})})])}return(0,l.Sy)(i),i}(h,t);return{question:{english:o,toHTML:e=>(0,s.jsx)("div",{className:"fs-1",children:m(c.TZ.parse(a),h,e)})},answer:h,choices:g,literal:u}}(j,n,t),k=(0,r.useCallback)((e=>{switch(e){case"right":w();break;case"left":b()}return Promise.resolve()}),[w,b]),{HTMLDivElementSwipeRef:N}=(0,h.M)(k);if(!y)return(0,s.jsx)(p.n,{addlStyle:"main-panel"});const S=(j+1)/n.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.yv,{ref:N,question:y.question,isCorrect:e=>e.japanese===y.answer.japanese,hint:y.literal,choices:y.choices,aRomaji:u,gotoPrev:w,gotoNext:b,fadeInAnswers:v}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:S})})]})}const m=(e,{start:n,end:t},s)=>{const i=s?"correct-color":"transparent-font underline";return(0,u.tn)(null==e?void 0:e.parseObj,{hidden:i},n,t)}},3762:(e,n,t)=>{t.r(n),t.d(n,{KanaGameMeta:()=>m,buildChoiceButton:()=>w,default:()=>j,usePrepareGame:()=>b});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),l=t(6892),c=t(8527),u=t(9815),d=t(8084),h=t(4699),g=t(4133),p=t(6537),v=t(2405),f=t(7127);const m={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function j(){const{hiragana:e,katakana:n,vowels:t,consonants:r,sounds:l,choiceN:g,wideMode:m,easyMode:j,charSet:x}=(0,d.P)(),y=(0,o.useRef)(t),k=(0,o.useRef)(r),N=(0,o.useRef)(l),S=(0,o.useRef)(e),T=(0,o.useRef)(n),R=(0,o.useRef)(m),C=(0,o.useRef)(j),O=(0,o.useRef)(g),[A,D]=(0,o.useState)(0),[E,M]=(0,o.useState)([]),P=(0,o.useState)(!1),I=P[0],L=P[1],{prepareGame:F,setWrongs:W,setCorrect:V,answer:Z,correct:G,question:q,wrongs:U,choices:_,gameOrder:J}=b({charSet:x,choiceN:O.current,wideMode:R.current,practiceSide:I,reinforce:E,selectedIndex:A,vowelsR:y,consonantsR:k,soundsR:N,hiraganaR:S,katakanaR:T}),$=(0,o.useCallback)((()=>{const e=J.length;D((A+1)%e),W([]),V(!1)}),[V,W,J,A]),z=(0,o.useCallback)((()=>{const e=J.length,n=A-1;D(n<0?(e+n)%e:n%e),W([]),V(!1)}),[V,W,J,A]),K=function({setCorrect:e,setWrongs:n,setReinforce:t,gotoNext:s,answer:i,choices:r,wrongs:a,reinforce:o,practiceSide:l}){return function(c){if(c.val===(null==i?void 0:i.val))e(!0),setTimeout(s,500);else{const e=r.findIndex((e=>e.val===c.val));n([...a,e]),t([...o,Object.assign(Object.assign({},c),{practiceSide:l})])}}}({setCorrect:V,setWrongs:W,setReinforce:M,gotoNext:$,practiceSide:I,answer:Z,choices:_,wrongs:U,reinforce:E}),{width:H,height:B}=(0,h.i)(),Y=w({checkAnswer:K,charSet:x,practiceSide:I,wrongs:U,choices:_,answer:Z,correct:G,isLandscape:!H||!B||H>B,wideMode:R.current,easyMode:C.current,choiceN:O.current});if((0,o.useEffect)((()=>{S.current.length>0&&F()}),[A,I,x]),!q)return(0,s.jsx)(p.n,{addlStyle:"kana"});const X=a()({"kana main-panel h-100":!0}),Q=a()({"choices-row d-flex justify-content-around":!0,"w-100 w-sm-50":!R.current,"w-100 h-100":R.current});return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("div",{className:X,children:(0,s.jsxs)("div",{className:"d-flex justify-content-between w-100 h-100",children:[(0,s.jsx)(f.Z,{ariaLabel:"Previous",action:z,children:(0,s.jsx)(i.wyc,{size:16})}),(0,s.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-around w-100",children:[!R.current&&(0,s.jsxs)("div",{className:a()({"pt-3 d-flex flex-column justify-content-center text-center w-100 w-sm-50 h-100":!0,"correct-color":G}),children:[(0,s.jsx)("h1",{className:"clickable",children:q}),C.current&&!I&&(0,s.jsx)("div",{className:"d-flex justify-content-around",children:(0,s.jsx)("h6",{children:(0,u.Vj)(q)})})]}),(0,s.jsx)("div",{className:Q,children:(0,s.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:_.map(((e,n)=>Y(n)))})})]}),(0,s.jsx)(f.Z,{ariaLabel:"Next",action:$,children:(0,s.jsx)(i.XCv,{size:16})})]})}),(0,s.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(v.uY,{toggle:I,action:(0,c.k)(L,(e=>!e))})}),(0,s.jsx)("div",{className:"col"}),(0,s.jsx)("div",{className:"col"})]})})]})}function x(e){let n;return n=e===g.kS.MIXED?Math.floor(2*Math.random()):e,n}function b({charSet:e,choiceN:n,wideMode:t,vowelsR:s,consonantsR:i,soundsR:r,hiraganaR:a,katakanaR:c,practiceSide:u,reinforce:d,selectedIndex:h}){const[p,v]=(0,o.useState)("undefined"),[f,m]=(0,o.useState)({val:"",hint:"",cSet:g.kS.HIRAGANA}),[j,b]=(0,o.useState)([]),[w,y]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[S,T]=(0,o.useState)(!1),R=(0,o.useCallback)((()=>{const o=a.current,p=c.current;let f,j,k;f=w.length>0?w:function(e){let n=[];const t=e[0].length,s=e.length;for(let e=0;e<t;e++)for(let t=0;t<s;t++)1===e&&12===t||3===e&&12===t||2===e&&14===t||0!==e&&15===t||(n=[...n,{vowel:e,consonant:t}]);return(0,l.Sy)(n),n}(o);const S=Math.random()<1/3,R=function({vowels:e,consonants:n,sounds:t}){return(s,i)=>{const r=n[s]+e[i];return t[r]||r}}({vowels:s.current,consonants:i.current,sounds:r.current}),C=function({hiragana:e,katakana:n}){return(t,s,i)=>{let r;return r=i===g.kS.HIRAGANA?e[t][s]:n[t][s],r}}({hiragana:o,katakana:p});if(S&&d.length>0){const e=d[d.length-1];if(u===e.practiceSide)k=e;else{const{val:n,hint:t,cSet:s}=e;k={val:t,hint:n,cSet:s}}}else{const{consonant:n,vowel:t}=f[h];let s=x(e);const i=R(n,t),r=C(n,t,s);k=u?{val:r,hint:i,cSet:s}:{val:i,hint:r,cSet:s}}j=k.hint;let O=function({getPronunciation:e,getKanaCharacter:n,charSet:t,choiceN:s,practiceSide:i},r,a){let o=[r];const c=i;for(;o.length<s;){const s=0,i=a.length,r=Math.floor(Math.random()*(i-s)+s);let l=x(t);const u=e(a[r].consonant,a[r].vowel),d=n(a[r].consonant,a[r].vowel,l);let h;h=c?{val:d,hint:u,cSet:l}:{val:u,hint:d,cSet:l},(c&&!o.some((e=>e.hint===h.hint))||!c&&!o.some((e=>e.val===h.val)))&&(o=[...o,h])}return(0,l.Sy)(o),o}({getPronunciation:R,getKanaCharacter:C,charSet:e,choiceN:n,practiceSide:u},k,f);t&&(O=[...O,{val:j,hint:j,cSet:k.cSet,q:!0}]),v(j),m(k),b(O),y(f),N([]),T(!1)}),[e,w,i,s,r,a,c,u,d,h,t,n]);return{prepareGame:R,setWrongs:N,setCorrect:T,answer:f,correct:S,wrongs:k,question:p,choices:j,gameOrder:w}}function w({checkAnswer:e,isLandscape:n,wideMode:t,easyMode:i,charSet:r,practiceSide:o,wrongs:l,choices:c,answer:d,correct:h,choiceN:p}){return function(v){const f=l.includes(v),m=c[v].val===d.val&&h,j=a()({clickable:!c[v].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":m||t&&c[v].q&&h,"incorrect-color":f,"question-color":t&&c[v].q&&!h}),x=a()({"mb-0":t}),b="d-flex justify-content-around",w=a()({"mb-0":!0,invisible:!f}),y=t?n?3/4:4/3:1,k=`${Math.trunc(1/Math.ceil(Math.sqrt(p))*y*100)}%`,N=!o;let S;return S=!i||i&&!N?i&&!N&&!0!==c[v].q&&r===g.kS.MIXED?(0,s.jsxs)("div",{className:b,children:[(0,s.jsx)("h6",{className:w,children:c[v].hint}),(0,s.jsx)("h6",{className:w,children:(0,u.Vj)(c[v].val)})]}):!0!==c[v].q?(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:w,children:c[v].cSet===d.cSet?c[v].hint:(0,u.Vj)(c[v].hint)})}):(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:"mb-0 invisible",children:(0,u.Vj)(c[v].val)})}):!0!==c[v].q?(0,s.jsxs)("div",{className:b,children:[(0,s.jsx)("h6",{className:w,children:c[v].cSet===g.kS.HIRAGANA?c[v].hint:(0,u.Vj)(c[v].hint)}),(0,s.jsx)("h6",{className:w,children:c[v].cSet===g.kS.HIRAGANA?(0,u.Vj)(c[v].hint):c[v].hint})]}):(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:"mb-0",children:(0,u.Vj)(c[v].val)})}),(0,s.jsxs)("div",{onClick:()=>{c[v].q||e(c[v])},className:j,style:{width:k},children:[(0,s.jsx)("h2",{className:x,children:c[v].val}),S]},v)}}},6291:(e,n,t)=>{t.r(n),t.d(n,{KanjiMeta:()=>L,default:()=>F});var s=t(5893),i=t(2409),r=t(8301),a=t(9041),o=t(5529),l=t(4184),c=t.n(l),u=t(5472),d=t.n(u),h=t(7294),g=t(743),p=t(6176),v=t(6892),f=t(5863),m=t(8527),j=t(9983),x=t(2850),b=t(4953),w=t(3162),y=t(6278),k=t(4933),N=t(6693),S=t(4699),T=t(8056),R=t(8673),C=t(4133),O=t(7891),A=t(9180),D=t(5626),E=t(6537),M=t(2405),P=t(7127),I=t(7791);const L={location:"/kanji/",label:"Kanji"};function F(){var e,n,t,l,u,L,F,W;const V=(0,g.I0)(),Z=(0,h.useCallback)((e=>{se((n=>[...n,e])),V((0,R.Mh)(e))}),[V]),G=(0,h.useCallback)((e=>{se((n=>n.filter((n=>n!==e)))),V((0,R.SI)(e))}),[V]),{kanjiList:q,filterType:U,reinforce:_,activeTags:J,repetition:$,orderType:z}=(0,y.R)(),{vocabList:K}=(0,k.Z)();(0,h.useEffect)((()=>{0===q.length&&V((0,R.tk)()),0===K.length&&V((0,O.Rz)())}),[]);const H=(0,h.useRef)($);H.current=$;const[B,Y]=(0,h.useState)(0),[X,Q]=(0,h.useState)(null),ee=(0,h.useRef)(null),ne=(0,h.useRef)(0),[te,se]=(0,h.useState)([]),[ie,re]=(0,h.useState)(!1),[ae,oe]=(0,h.useState)(!1),[le,ce]=(0,h.useState)(!1),[ue,de]=(0,h.useState)(!1),[he,ge]=(0,h.useState)([]),pe=(0,h.useRef)(),ve=(0,h.useMemo)((()=>{if(0===q.length)return[];if(0===Object.keys(H.current).length&&0===J.length)return q;const e=Object.keys(H.current).reduce(((e,n)=>{var t;return!0===(null===(t=H.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,j.Dm)(U.current,q,e,U.current===C.Lx.TAGS?J:[],(0,m.c)(V,R.cy));if(z.current===C.vl.RECALL){const{failed:e,overdue:t}=(0,b.fC)(n,H.current,20),s=[...e,...t];s.length>0&&(n=s.map((e=>n[e])))}const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=H.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return se(t),n}),[V,q,U,J]),{order:fe,recallGame:me}=(0,h.useMemo)((()=>{if(0===ve.length)return{order:[]};let e,n;switch(z.current){case C.vl.DIFFICULTY:e=(0,w.J0)(ve,H.current),ge((n=>[...n,{msg:`Difficulty (${e.length})`,lvl:C.x6.DEBUG}]));break;case C.vl.VIEW_DATE:e=(0,w.EL)(ve,H.current);let t=0,s=NaN;const i=e.map((e=>{var n;const i=null===(n=H.current[ve[e].uid])||void 0===n?void 0:n.lastView;return t=i?t:t+1,s=i&&Number.isNaN(s)?(0,f.O5)(i):s,i?(0,f.O5)(i):0}));ge((e=>[...e,{msg:`Date Viewed (${i.length}) New:${t} Old:${s}d`,lvl:C.x6.DEBUG}]));break;case C.vl.RECALL:const{failed:r,overdue:a,notPlayed:o,todayDone:l}=(0,b.fC)(ve,H.current,20),c=[...r,...a];e=c.length>0?c:[...o,...l],n=c.length;const u=c.map((e=>{var n,t;return(null!==(t=null===(n=H.current[ve[e].uid])||void 0===n?void 0:n.percentOverdue)&&void 0!==t?t:0).toFixed(2).replace(".00","").replace("0.",".")}));ge((e=>[...e,{msg:`Space Rep 2 (${u.length}) [${u.toString()}]`,lvl:0===c.length?C.x6.WARN:C.x6.DEBUG}]));break;default:e=(0,w.tq)(ve),ge((n=>[...n,{msg:`Random (${e.length})`,lvl:C.x6.DEBUG}]))}return{order:e,recallGame:n}}),[ve]),je=(0,h.useCallback)((()=>{const e=ve.length;Y((B+1)%e),ne.current=B,Q(null),re(!1),oe(!1),ce(!1),de(!1)}),[ve,B]),xe=(0,h.useCallback)((()=>{let e=ve;if(_.current&&U.current===C.Lx.TAGS){const n=Object.keys($).reduce(((e,n)=>{var t;return!0===(null===(t=$[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]),t=q.filter((e=>n.includes(e.uid)));e=[...ve,...t]}(0,j.hY)(_.current,U.current,te,e,$,X,(e=>{ee.current=X,Q(e)}),je)}),[je,q,ve,te,X,$,_,U]),be=(0,h.useCallback)((()=>{const e=ve.length,n=B-1;Y(n<0?(e+n)%e:n%e),ne.current=B,Q(null),re(!1),oe(!1),ce(!1),de(!1)}),[ve,B]),we=(0,h.useCallback)((e=>("left"===e?xe():"right"===e&&be(),Promise.resolve())),[xe,be]),{HTMLDivElementSwipeRef:ye}=(0,N.M)(we),ke=(0,S.i)(),Ne=!ke.width||!ke.height||ke.width>ke.height?0:70,Se=0-(ke.width?ke.width/2:0)+Ne,{x:Te,y:Re,strategy:Ce,refs:Oe,update:Ae}=(0,i.YF)({placement:"bottom",middleware:[(0,r.cv)({mainAxis:0,crossAxis:Se}),(0,r.uY)()]});if((0,h.useEffect)((()=>{Ae()}),[Ae,ke.height,ke.width]),(0,h.useEffect)((()=>{var e,n;const t={selectedIndex:ne.current,reinforcedUID:ee.current};if(X!==t.reinforcedUID||B!==t.selectedIndex){const s=null!==(e=t.reinforcedUID)&&void 0!==e?e:(0,j.vr)(t.selectedIndex,ve,fe),i=(0,j.cc)(s,ve);let r=Promise.resolve();(null===(n=H.current[s])||void 0===n?void 0:n.difficulty)&&pe.current?r=V((0,R.Jg)({uid:s})):null===pe.current&&(r=V((0,R.Qs)({uid:s}))),me&&me>0&&B===me+1&&V((0,T.kg)("No more pending items",C.x6.DEBUG)),r.then((e=>{var n,t;if(e&&"payload"in e){const{newValue:r,oldValue:a}=e.payload,o=null===(n=a[s])||void 0===n?void 0:n.lastReview,l=o?`${(0,f.O5)(o)}d -> `:"",c=null===(t=r[s].daysBetweenReviews)||void 0===t?void 0:t.toFixed(2),u=(0,f.xr)(i.english,30),d=void 0===c?`Space Rep [${u}] removed`:`Space Rep [${u}] updated ${l}${c}d`;V((0,T.kg)(d,C.x6.WARN))}})),ne.current=B,ee.current=X,pe.current=void 0}}),[V,K,X,B,ve,fe,me]),(0,h.useEffect)((()=>{he.forEach((e=>{V((0,T.kg)(e.msg,e.lvl))}))}),[V,he]),0===me)return(0,s.jsx)(E.n,{addlStyle:"main-panel",text:"No pending items"});if(fe.length<1)return(0,s.jsx)(E.n,{addlStyle:"main-panel"});const De=null!=X?X:(0,j.vr)(B,ve,fe),Ee=(0,j.cc)(De,q),Me=K.filter((e=>x.TZ.parse(e).getSpelling().includes(Ee.kanji)&&e.english.toLowerCase()===Ee.english.toLowerCase()||x.TZ.parse(e).getSpelling().includes(Ee.kanji)&&e.english.toLowerCase().includes(Ee.english.toLowerCase())&&"Verb"===e.grp||x.TZ.parse(e).getSpelling()===Ee.kanji&&(e.english.toLowerCase().includes(Ee.english.toLowerCase())||Ee.english.toLowerCase().includes(e.english.toLowerCase()))));let Pe=[];if(Me.length>0){const[e,...n]=d()(Me,(e=>e.english.length));Pe=[e,...(0,v.Sy)(n)]}const Ie=null!==(l=null!==(n=null===(e=Ee.tags.find((e=>J.includes(e)&&(0,p.F)(e))))||void 0===e?void 0:e.replace("_"," "))&&void 0!==n?n:null===(t=Ee.tags.find((e=>(0,p.F)(e))))||void 0===t?void 0:t.replace("_"," "))&&void 0!==l?l:"",Le=!0===(null===(u=$[Ee.uid])||void 0===u?void 0:u.rein),Fe=Pe.slice(0,3).map(((e,n,t)=>(0,s.jsxs)(h.Fragment,{children:[e.english+" ",x.TZ.parse(e).toHTML(),n<t.length-1?"; ":"",(0,s.jsx)("wbr",{})]},e.uid))),We=(0,s.jsx)("span",{children:Ee.english}),Ve=(B+1)/ve.length*100,Ze=null===(L=H.current[De])||void 0===L?void 0:L.lastReview,Ge=void 0!==Ze&&0===(0,f.O5)(Ze);return(0,s.jsxs)(h.Fragment,{children:[(0,s.jsxs)("div",{className:"kanji main-panel h-100",children:[(0,s.jsx)("div",{ref:Oe.setReference}),(0,s.jsx)("div",{ref:Oe.setFloating,style:{position:Ce,top:null!=Re?Re:0,left:null!=Te?Te:0,width:"max-content"},className:"grp-info",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:Ee.grp}),(0,s.jsx)("div",{children:Ie})]})}),(0,s.jsxs)("div",{ref:ye,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(P.Z,{ariaLabel:"Previous",action:be,children:(0,s.jsx)(o.wyc,{size:16})}),(0,s.jsxs)("div",{className:"d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)("h1",{className:"pt-0",children:(0,s.jsx)("span",{children:Ee.kanji})}),Ee.on&&(0,s.jsx)("h4",{className:"pt-0",onClick:(0,m.k)(re,(e=>!e)),children:(0,s.jsx)("span",{children:ie?Ee.on:"[On]"})})||(0,s.jsx)("h4",{className:"pt-0",children:"."}),Ee.kun&&(0,s.jsx)("h4",{className:"pt-2",onClick:(0,m.k)(oe,(e=>!e)),children:(0,s.jsx)("span",{children:ae?Ee.kun:"[Kun]"})})||(0,s.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("span",{className:c()({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===Fe.length}),onClick:(0,m.k)(ce,(e=>!e)),children:(0,s.jsx)("span",{className:"text-nowrap",children:le&&Fe.length>0?Fe:"[Examples]"})}),(0,s.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:(0,m.k)(de,(e=>!e)),children:ue?We:(0,s.jsx)("span",{children:"[Meaning]"})})]})]}),(0,s.jsx)(P.Z,{ariaLabel:"Next",action:xe,children:(0,s.jsx)(o.XCv,{size:16})})]})]}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start"})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsxs)(I.u,{className:c()({"question-color opacity-50":z.current===C.vl.RECALL&&!Ge,"done-color opacity-50":Ge}),children:[(0,s.jsx)(D.Y,{difficulty:null===(F=H.current[De])||void 0===F?void 0:F.difficulty,onChange:e=>{void 0!==e&&V((0,R.F$)(De,e))},resetOn:De}),(0,s.jsx)(A.w,{accuracy:null===(W=H.current[De])||void 0===W?void 0:W.accuracy,resetOn:De,onChange:e=>{void 0!==e&&(V((0,R.EE)(De,e)),pe.current=e)}})]}),(0,s.jsx)(M.R_,{addFrequencyTerm:Z,removeFrequencyTerm:G,hasReinforce:Le,term:Ee,count:te.length,isReinforced:null!==X})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(a.Z,{variant:"determinate",value:Ve,color:Le?"secondary":"primary"})})]})}},9406:(e,n,t)=>{t.r(n),t.d(n,{PhrasesMeta:()=>M,default:()=>P});var s=t(5893),i=t(9041),r=t(5529),a=t(4184),o=t.n(a),l=t(7294),c=t(743),u=t(7186),d=t(5965),h=t(5863),g=t(8527),p=t(9983),v=t(2850),f=t(4953),m=t(3162),j=t(7962),x=t(158),b=t(9226),w=t(6693),y=t(8056),k=t(7652),N=t(4133),S=t(9180),T=t(3968),R=t(5626),C=t(6537),O=t(2405),A=t(9775),D=t(7127),E=t(7791);const M={location:"/phrases/",label:"Phrases"};function P(){var e,n,t,a,M,P;const W=(0,c.I0)(),V=(0,l.useRef)(null),Z=(0,l.useRef)(0),[G,q]=(0,l.useState)(null),[U,_]=(0,l.useState)(Date.now()),J=(0,l.useRef)(Date.now()),[$,z]=(0,l.useState)(0),[K,H]=(0,l.useState)(!1),[B,Y]=(0,l.useState)(!1),[X,Q]=(0,l.useState)(!1),[ee,ne]=(0,l.useState)([]),[te,se]=(0,l.useState)(!1),[ie,re]=(0,l.useState)([]),ae=(0,l.useRef)(),{englishSideUp:oe,repetition:le,swipeThreshold:ce,phraseList:ue,activeGroup:de,reinforce:he,romajiActive:ge,filterType:pe,sortMethod:ve}=(0,x.Q)(),fe=(0,l.useRef)(le);fe.current=le,(0,l.useEffect)((()=>{0===ue.length&&W((0,k.cC)())}),[]);const me=(0,l.useMemo)((()=>{const e=fe.current;if(0===ue.length)return[];if(0===Object.keys(e).length&&0===de.length)return ue;const n=Object.keys(e).reduce(((n,t)=>{var s;return!0===(null===(s=e[t])||void 0===s?void 0:s.rein)&&(n=[...n,t]),n}),[]),t=(0,p.Dm)(pe.current,ue,n,de,(0,g.c)(W,k.f6)),s=t.reduce(((n,t)=>{var s;return!0===(null===(s=e[t.uid])||void 0===s?void 0:s.rein)&&(n=[...n,t.uid]),n}),[]);return ne(s),t}),[W,ue,pe,de]),{order:je,recallGame:xe}=(0,l.useMemo)((()=>{const e=fe.current;if(0===me.length)return{order:[]};let n,t;switch(ve.current){case N.vl.VIEW_DATE:n=(0,m.EL)(me,e);let s=0,i=NaN;const r=n.map((e=>{var n;const t=null===(n=fe.current[me[e].uid])||void 0===n?void 0:n.lastView;return s=t?s:s+1,i=t&&Number.isNaN(i)?(0,h.O5)(t):i,t?(0,h.O5)(t):0}));re((e=>[...e,{msg:`Date Viewed (${r.length}) New:${s} Old:${i}d`,lvl:N.x6.DEBUG}]));break;case N.vl.RECALL:const{failed:a,overdue:o,notPlayed:l,todayDone:c}=(0,f.fC)(me,fe.current,20),u=[...a,...o];n=u.length>0?u:[...l,...c],t=u.length;const d=u.map((e=>{var n,t;return(null!==(t=null===(n=fe.current[me[e].uid])||void 0===n?void 0:n.percentOverdue)&&void 0!==t?t:0).toFixed(2).replace(".00","").replace("0.",".")}));re((e=>[...e,{msg:`Space Rep 2 (${d.length}) [${d.toString()}]`,lvl:0===u.length?N.x6.WARN:N.x6.DEBUG}]));break;default:n=(0,m.tq)(me),re((e=>[...e,{msg:`Random (${n.length})`,lvl:N.x6.DEBUG}]))}return{order:n,recallGame:t}}),[me]),be=(0,l.useCallback)((()=>{const e=me.length;let n=($+1)%e;J.current=U,_(Date.now()),Z.current=$,z(n),q(null)}),[me,$,U]),we=(0,l.useCallback)((()=>{(0,p.hY)(he.current,pe.current,ee,me,fe.current,G,(e=>{V.current=G,q(e)}),be)}),[he,pe,ee,me,G,be]),ye=(0,l.useCallback)((()=>{const e=me.length;let n;n=G?$:(e+($-1))%e,J.current=U,_(Date.now()),Z.current=$,z(n),q(null)}),[me,$,G,U]),ke=function(e,n,t,s,i,r,a,o){return function(l,c){let h;if("left"===l)e(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===l)n(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else{const e=null!=t?t:(0,p.vr)(s,a,r),n=(0,p.cc)(e,i),g=o?"/override_cache":"";if("up"===l){const t=(0,v._I)(n),s=(0,j.b1)(u.vT+g,{tl:"ja",q:t,uid:e});h=(0,d.R$)(s,c)}else if("down"===l){const e=n.english,t=(0,j.b1)(u.vT+g,{tl:"en",q:e,uid:n.uid+".en"});h=(0,d.R$)(t,c)}}return null!=h?h:Promise.reject()}}(we,ye,G,$,ue,je,me,te);(0,l.useLayoutEffect)((()=>{var e,n;const t={selectedIndex:Z.current,reinforcedUID:V.current,lastNext:J.current};if(G!==t.reinforcedUID||$!==t.selectedIndex){const s=null!==(e=t.reinforcedUID)&&void 0!==e?e:(0,p.vr)(t.selectedIndex,me,je),i=(0,p.cc)(s,me);let r=Promise.resolve();(null===(n=fe.current[s])||void 0===n?void 0:n.difficulty)&&ae.current?r=W((0,k.Jg)({uid:s})):null===ae.current&&(r=W((0,k.Qs)({uid:s}))),xe&&xe>0&&$===xe+1&&W((0,y.kg)("No more pending items",N.x6.DEBUG)),r.then((e=>{var n,r;if(e&&"payload"in e){const{newValue:t,oldValue:a}=e.payload,o=null===(n=a[s])||void 0===n?void 0:n.lastReview,l=o?`${(0,h.O5)(o)}d -> `:"",c=null===(r=t[s].daysBetweenReviews)||void 0===r?void 0:r.toFixed(2),u=(0,h.xr)(i.english,30),d=void 0===c?`Space Rep [${u}] removed`:`Space Rep [${u}] updated ${l}${c}d`;W((0,y.kg)(d,N.x6.WARN))}if((0,p.Zc)(t.lastNext)){const e=s!==t.reinforcedUID,n=null!==t.reinforcedUID;W((0,k.s5)({uid:s,shouldIncrement:e})).unwrap().then((e=>{var t;const{value:r,prevVal:a}=e;let o;o=ae.current&&a.lastReview?a.lastReview:null!==(t=a.lastView)&&void 0!==t?t:r.lastView;const l={[s]:Object.assign(Object.assign({},r),{lastView:o})};(0,h.Ps)(((e,n)=>W((0,y.kg)(e,n))),i,l,{frequency:n})}))}})),H(!1),Y(!1),Q(!1),Z.current=$,V.current=G,ae.current=void 0}}),[W,ue,G,$,me,je,xe]),(0,l.useEffect)((()=>{ie.forEach((e=>{W((0,y.kg)(e.msg,e.lvl))}))}),[W,ie]),(0,b.q)(ke,(0,g.c)(W,k.d1));const{HTMLDivElementSwipeRef:Ne}=(0,w.M)(ke);if(0===xe)return(0,s.jsx)(C.n,{addlStyle:"main-panel",text:"No pending items"});if(me.length<1||je.length<1)return(0,s.jsx)(C.n,{addlStyle:"main-panel"});const Se=null!=G?G:(0,p.vr)($,me,je),Te=(0,p.cc)(Se,ue),Re=function(e,n,t,i,r){const a=n?{tl:"en",q:t.english,uid:t.uid+".en"}:{tl:"ja",q:(0,v._I)(t),uid:(0,p.gW)(t)};return(0,s.jsx)(T.Z,{visible:0===e&&!0,word:a,reCache:i})}(ce,oe,Te,te),[Ce,Oe]=function(e){const n=v.TZ.parse(e);return[n,n.toHTML()]}(Te),Ae=function(e,n,t){return(0,s.jsx)("span",{onClick:e.lit?()=>{t((e=>!e))}:void 0,children:n?e.lit:e.english})}(Te,X,Q),De=(0,p.yT)(oe,Ce,Ae,(e=>q(e)),Te),Ee=(0,p.hF)(oe,Ce,Oe,(e=>q(e)),Te),{topValue:Me,bottomValue:Pe,bottomLabel:Ie}=(0,p.JS)(oe,De,Ee,I,L),Le=(null!==(n=null===(e=Te.lit)||void 0===e?void 0:e.length)&&void 0!==n?n:Te.english.length)<55,Fe=(null==Ce?void 0:Ce.getSpelling().length)<55,{aboveSmallCss:We,aboveLargeCss:Ve,belowNoInterruptCss:Ze,belowSmallCss:Ge,belowLargeCss:qe}=function(e,n,t){const s={"fs-display-5":!0},i=s;return{aboveSmallCss:Object.assign({},e?{[t?"h1":"h3"]:!0}:{[n?"h1":"h3"]:!0}),aboveLargeCss:s,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:Object.assign({},e?{[n?"h1":"h3"]:!0}:{[t?"h1":"h3"]:!0}),belowLargeCss:i}}(oe,Fe,Le),Ue=!0===(null===(t=le[Te.uid])||void 0===t?void 0:t.rein),_e=Te.romaji,Je=($+1)/me.length*100,$e=null===(a=fe.current[Se])||void 0===a?void 0:a.lastReview,ze=void 0!==$e&&0===(0,h.O5)($e);return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("div",{className:"phrases main-panel h-100",children:(0,s.jsxs)("div",{ref:Ne,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(D.Z,{ariaLabel:"Previous",action:ye,children:(0,s.jsx)(r.wyc,{size:16})}),(0,s.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(A.Z,{breakPoint:"md",largeClassName:Ve,smallClassName:We,children:Me}),ge.current&&_e&&(0,s.jsx)("h5",{children:(0,s.jsx)("span",{onClick:(0,g.k)(Y,(e=>!e)),className:"clickable loop-no-interrupt",children:B?_e:"[Romaji]"})}),(0,s.jsx)(A.Z,{className:Ze,breakPoint:"md",onClick:(0,g.k)(H,(e=>!e)),largeClassName:qe,smallClassName:Ge,children:K?Pe:Ie}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:Re})]}),(0,s.jsx)(D.Z,{ariaLabel:"Next",action:we,children:(0,s.jsx)(r.XCv,{size:16})})]})}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,s.jsx)(O.uY,{toggle:oe,action:(0,g.c)(W,k.d1)}),(0,s.jsx)(O.Ro,{active:te,action:F(te,se)})]})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsxs)(E.u,{className:o()({"question-color opacity-50":ve.current===N.vl.RECALL&&!ze,"done-color opacity-50":ze}),children:[(0,s.jsx)(R.Y,{difficulty:null===(M=fe.current[Se])||void 0===M?void 0:M.difficulty,resetOn:Se,onChange:e=>{void 0!==e&&W((0,k.g0)(Se,e))}}),(0,s.jsx)(S.w,{accuracy:null===(P=fe.current[Se])||void 0===P?void 0:P.accuracy,resetOn:Se,onChange:e=>{void 0!==e&&(W((0,k.xH)(Se,e)),ae.current=e)}})]}),(0,s.jsx)(O.D4,{visible:oe&&void 0!==Te.lit&&""!==Te.lit,toggle:X,action:(0,g.k)(Q,(e=>!e))}),(0,s.jsx)(O.R_,{addFrequencyTerm:e=>{ne((n=>[...n,e])),(0,g.c)(W,k.Lp)(e)},removeFrequencyTerm:e=>{ne((n=>n.filter((n=>n!==e)))),(0,g.c)(W,k.gP)(e)},hasReinforce:Ue,isReinforced:null!==G,term:Te,count:ee.length})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:Je,color:Ue?"secondary":"primary"})})]})}const I=(0,s.jsx)("span",{children:"[English]"}),L=(0,s.jsx)("span",{children:"[Japanese]"});function F(e,n){return function(){if(!e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},6176:(e,n,t)=>{t.d(n,{E:()=>g,F:()=>h});var s=t(5893),i=t(5472),r=t.n(i),a=t(3174),o=t.n(a),l=t(5697),c=t.n(l),u=t(7294),d=t(8737);function h(e){return e.includes("_")&&Number.isInteger(parseInt(e.split("_")[1],10))}function g(e){const{termsActive:n,termsTags:t,toggleTermActive:i,selectedCount:a}=e;(0,u.useEffect)((()=>{n.forEach((e=>{t.includes(e)||i(e)}))}),[n,t,i]);const[l,c]=o()(t,(e=>h(e))),g=Object.values(l.reduce(((e,n)=>{const t=n.split("_")[0];return e[t]?e[t]=[...e[t],n]:e[t]=[n],e}),{})),p=[...r()(c),...g.reduce(((e,n)=>[...e,...r()(n,(e=>{const[,n]=e.split("_");return Number.isInteger(parseInt(n,10))?parseInt(n,10):e}))]),[])],v=a&&a>0&&"("+a+")"||"";return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h5",{children:["Tag List ",v]},0),p.map(((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(d.M,{active:n.includes(e),onClick:()=>{i(e)},children:e},t)},t+1)))]})}g.propTypes={termsTags:c().array,termsActive:c().array,toggleTermActive:c().func,selectedCount:c().number}},6247:(e,n,t)=>{t.r(n),t.d(n,{SettingsMeta:()=>L,default:()=>G});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),l=t(743),c=t(8527),u=t(9983),d=t(2850),h=t(8084),g=t(6278),p=t(158),v=t(4933),f=t(8056),m=t(1659),j=t(8673),x=t(9385),b=t(7988),w=t(7652),y=t(4133),k=t(7891),N=t(245),S=t(195),T=t(5697),R=t.n(T);function C(e){var n;const[t]=(0,o.useState)(e.initial),i=null!==(n=e.wideN)&&void 0!==n?n:32;let r=[],a={};for(let e=4;e<17;e++){const n=(e-4)/13*75;r=[...r,{value:n,raw:e}],a[`r ${n}`]=e,a[`s ${e}`]=n}r=[...r,{value:100,raw:i}],a["r 100"]=i,a[`s ${i}`]=100;const l=e=>a[`r ${e}`];return(0,s.jsxs)("div",{className:"kana-slider",children:[(0,s.jsx)(N.Z,{id:"discrete-slider-restrict",gutterBottom:!0,children:"Difficulty"}),(0,s.jsx)(S.ZP,{defaultValue:(c=t,a[`s ${c}`]),valueLabelFormat:l,getAriaValueText:e=>String(l(e)),"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:r,onChangeCommitted:(n,t)=>{"number"==typeof t&&(n=>{const t=e.initial,s=l(n);s!==i&&t!==i&&s!==t||s!==i&&t===i&&s!==t?(e.setChoiceN(s),!0===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide()):s===i&&s!==t&&(e.setChoiceN(s),!1===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide())})(t)}})]});var c}function O(e){const{memoThreshold:n,setThreshold:t}=e,[r]=(0,o.useState)(Math.abs(n));return(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)(S.ZP,{defaultValue:r,track:n<0?void 0:"inverted",onChangeCommitted:(e,s)=>{"number"==typeof s&&t((n<0?-1:1)*s)},valueLabelDisplay:"auto"}),(0,s.jsx)("div",{className:"mt-2 ms-3 ",onClick:()=>t(-1*n),children:n<0?(0,s.jsx)(i.k6S,{}):(0,s.jsx)(i.aoE,{})})]})}C.propTypes={initial:R().number,wideMode:R().bool,setChoiceN:R().func,toggleWide:R().func},O.propTypes={memoThreshold:R().number,setThreshold:R().func};var A=t(6537),D=t(7567),E=t(3392);const M=(0,o.lazy)((()=>Promise.all([t.e(567),t.e(184)]).then(t.bind(t,3184)))),P=(0,o.lazy)((()=>Promise.all([t.e(567),t.e(557),t.e(251)]).then(t.bind(t,598)))),I=(0,o.lazy)((()=>Promise.all([t.e(567),t.e(557),t.e(698)]).then(t.bind(t,6698)))),L={location:"/settings/",label:"Settings"};function F(e,n){const t=n.cause;switch(e((0,f.zA)(y.x6.DEBUG)),null==t?void 0:t.code){case"StaleVocabActiveGrp":{const s=t.value;e((0,f.kg)("Error: "+n.message,y.x6.ERROR)),e((0,f.kg)("Group "+JSON.stringify(s)+" Removed",y.x6.ERROR)),e((0,k.sG)(s))}break;case"StalePhraseActiveGrp":{const s=t.value;e((0,f.kg)("Error: "+n.message,y.x6.ERROR)),e((0,f.kg)("Group "+JSON.stringify(s)+" Removed",y.x6.ERROR)),e((0,w.cz)(s))}break;case"DeviceMotionEvent":e((0,f.kg)("Error: "+n.message,y.x6.ERROR)),e((0,f.cv)(0))}}function W(e,n,t){return function(s){try{(0,u.Mm)(s,n,(e=>{t(Number(e.toFixed(2))),setTimeout((()=>{t(void 0)}),300)}))}catch(n){n instanceof Error&&F(e,n)}}}function V(e,n){const t=e?(0,s.jsx)(i.oOx,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,s.jsx)(i.wl8,{className:"clickable",size:"medium","aria-label":"expand"});return(0,s.jsx)("h2",{onClick:()=>n((e=>!e)),children:t})}const Z=a()({"mb-5":!0});function G(){const e=(0,l.I0)(),n=(0,o.useRef)(void 0),{darkMode:t,swipeThreshold:r,motionThreshold:N,memory:S,debug:T,oppositesQRomaji:R,oppositesARomaji:L,oppositeFadeInAnswers:G,particlesARomaji:q,particleFadeInAnswer:U}=function(){const[e,n,t,s]=(0,l.v9)((({global:e})=>{const{darkMode:n,swipeThreshold:t,motionThreshold:s,debug:i}=e;return[n,t,s,i]}),l.wU),i=(0,l.v9)((({global:e})=>{const{memory:n}=e;return n}),((e,n)=>e.usage===n.usage)),[r,a,o]=(0,l.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t,fadeInAnswers:s}=e;return[n,t,s]}),l.wU),[c,u]=(0,l.v9)((({particle:e})=>{const{aRomaji:n,fadeInAnswers:t}=e.setting;return[n,t]}),l.wU);return{darkMode:e,swipeThreshold:n,motionThreshold:t,memory:i,debug:s,oppositesQRomaji:r,oppositesARomaji:a,oppositeFadeInAnswers:o,particlesARomaji:c,particleFadeInAnswer:u}}(),{vocabList:_,repetition:J}=(0,v.Z)(),{phraseList:$,repetition:z}=(0,p.Q)(),{kanjiList:K,orderType:H,repetition:B,kanjiTagObj:Y,fadeInAnswers:X,choiceN:Q}=(0,g.R)(),{charSet:ee,easyMode:ne,wideMode:te,choiceN:se}=(0,h.P)(),{memoThreshold:ie}=(0,g.R)(),[re,ae]=(0,o.useState)(!1),[oe,le]=(0,o.useState)(!1),[ce,ue]=(0,o.useState)(!1),[de,he]=(0,o.useState)(!1),[ge,pe]=(0,o.useState)(!1),[ve,fe]=(0,o.useState)(""),[me,je]=(0,o.useState)(""),[xe,be]=(0,o.useState)(""),[we,ye]=(0,o.useState)(!1),[ke,Ne]=(0,o.useState)([]),[Se,Te]=(0,o.useState)(0);(0,o.useEffect)((()=>{var t;return e((0,f.M4)()),0===_.length&&e((0,k.Rz)()),0===Y.length&&e((0,j.tk)()),0===$.length&&e((0,w.cC)()),navigator.serviceWorker.addEventListener("message",Re),null===(t=navigator.serviceWorker.controller)||void 0===t||t.postMessage({type:"SW_VERSION"}),()=>{navigator.serviceWorker.removeEventListener("message",Re),n.current&&window.removeEventListener("devicemotion",n.current)}}),[]),(0,o.useEffect)((()=>{N>0&&void 0===n.current?(n.current=W(e,N,Te),(0,u.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>F(e,n)))):0===N&&void 0!==n.current?(window.removeEventListener("devicemotion",n.current),n.current=void 0):(n.current&&window.removeEventListener("devicemotion",n.current),n.current=W(e,N,Te),(0,u.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>F(e,n))))}),[e,N]);const Re=(0,o.useCallback)((n=>{const{type:t,error:s}=n.data;if("DO_HARD_REFRESH"===t)s&&e((0,f.kg)(s,y.x6.ERROR)),setTimeout((()=>{ae(!1),ye(!0)}),2e3);else if("SW_VERSION"===t){const{swVersion:e,jsVersion:t,bundleVersion:s}=n.data;fe(e),je(t),be(s)}}),[e]),{keys:Ce,list:Oe}=(0,o.useMemo)((()=>(0,u.XQ)(J,_,"[Stale Vocabulary]")),[_,J]),{keys:Ae,list:De}=(0,o.useMemo)((()=>(0,u.XQ)(z,$,"[Stale Phrase]")),[$,z]),{keys:Ee,list:Me}=(0,o.useMemo)((()=>(0,u.XQ)(B,K,"[Stale Kanji]")),[K,B]),Pe=(0,o.useMemo)((()=>{return(e=[...$,..._]).reduce(((n,t,i)=>{const r=d.TZ.parse(t);if(r.hasFurigana())try{(0,d.Wp)(r.getPronunciation(),r.getSpelling())}catch(a){if(a instanceof Error&&"cause"in a){const o=a.cause;if("ParseError"===o.code||"InputError"===o.code){const l=(0,s.jsx)("hr",{},`parse-err-sep-${t.uid}`),c=(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("span",{className:"col p-0",children:r.toHTML({showError:!1})}),(0,s.jsx)("span",{className:"col p-0",children:t.english}),(0,s.jsxs)("span",{className:"col p-0 app-sm-fs-xx-small",children:[(0,s.jsx)("div",{children:a.message}),(0,s.jsx)("div",{children:o.info?JSON.stringify(o.info):""})]})]},`parse-err-${t.uid}`);return n.length>0&&i<e.length-1?[...n,l,c]:[...n,c]}}}return n}),[]);var e}),[_,$]),Ie=(0,o.useMemo)((()=>new Set([...Ce,...Ae,...Ee])),[Ce,Ae,Ee]),Le=(0,o.useMemo)((()=>{return(e=[...Oe,...De,...Me]).reduce(((n,t,i)=>{const r=(0,s.jsx)("hr",{},`stale-meta-${t.uid}`),a=(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("span",{className:"col p-0",children:t.key}),(0,s.jsx)("span",{className:"col p-0",children:t.english}),(0,s.jsx)("span",{className:"col p-0 app-sm-fs-xx-small",children:(0,s.jsx)("div",{children:t.uid})})]},t.uid);return n.length>0&&i<e.length?[...n,r,a]:[...n,a]}),[]);var e}),[Oe,De,Me]);return _.length<1||$.length<1||Y.length<1?(0,s.jsx)(A.n,{addlStyle:"main-panel"}):(0,s.jsx)("div",{className:"settings",children:(0,s.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,s.jsxs)("div",{className:Z,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Global"}),(0,s.jsx)("h2",{})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,s.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===r}),children:[(0,s.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(r-1<=0?(0,f.nh)(0):(0,f.nh)(r-1))},children:"-"}),(0,s.jsx)("div",{className:"px-2",children:r}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>e((0,f.nh)(r+1)),children:"+"})]}),(0,s.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===N}),children:[(0,s.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(N-.5<=0?(0,f.cv)(0):(0,f.cv)(N-.5))},children:"-"}),(0,s.jsx)("div",{className:a()({"px-2":!0,"correct-color":Se&&Se>N&&Se<=N+1,"question-color":Se&&Se>N+1&&Se<=N+2,"incorrect-color":Se&&Se>N+2}),children:null!=Se?Se:N}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>{e((0,f.cv)(N+.5))},children:"+"})]})]}),(0,s.jsxs)("div",{className:"column-2",children:[(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(D.Z,{active:t,action:(0,c.c)(e,f.In),statusText:(t?"Dark":"Light")+" Mode"})}),(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(D.Z,{active:r>0,action:()=>{e(r>0?(0,f.nh)(0):(0,f.nh)(1))},statusText:"Touch Swipes"})}),(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(D.Z,{active:N>0,action:()=>{e(0===N?(0,f.cv)(6):(0,f.cv)(0))},statusText:"Accelerometer"})})]})]})})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Phrases"}),V(de,he)]}),de&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(A.n,{addlStyle:"phrases-settings",text:"Loading..."}),children:(0,s.jsx)(P,{})})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Vocabulary"}),V(ce,ue)]}),ce&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(A.n,{addlStyle:"vocabulary-settings",text:"Loading..."}),children:(0,s.jsx)(I,{})})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Kanji"}),V(oe,le)]}),oe&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(A.n,{addlStyle:"kanji-settings",text:"Loading..."}),children:(0,s.jsx)(M,{})})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Opposites Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(D.Z,{active:R,action:(0,c.c)(e,x.Cz),statusText:"Question Romaji"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(D.Z,{active:L,action:(0,c.c)(e,x.CO),statusText:"Answer Romaji"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(D.Z,{active:G,action:(0,c.c)(e,x.tI),statusText:"Fade in answers"})})]})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Kana Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)("div",{children:(0,s.jsx)(D.Z,{active:ee===y.kS.HIRAGANA,action:(0,c.c)(e,m.I_),statusText:(0,u.w_)(ee,["Hiragana","Katakana","Mixed"])})}),(0,s.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,s.jsx)(C,{initial:se,setChoiceN:(0,c.c)(e,m.Bs),wideMode:te,wideN:31,toggleWide:(0,c.c)(e,m.PD)})}),(0,s.jsx)("div",{children:(0,s.jsx)(D.Z,{active:ne,action:(0,c.c)(e,m._S),statusText:"Kana Hints"})})]})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Kanji Game"})}),(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsx)("div",{className:"column-1"}),(0,s.jsxs)("div",{className:"column-2",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)(E.Z,{title:"Sort by:",options:y.iU,allowed:[y.vl.DIFFICULTY,y.vl.RANDOM,y.vl.VIEW_DATE],initial:H.current,onChange:(0,c.c)(e,j.vX)}),H.current===y.vl.DIFFICULTY&&(0,s.jsx)(O,{memoThreshold:ie,setThreshold:(0,c.c)(e,j.Fc)})]}),(0,s.jsx)("div",{className:"d-flex justify-content-end p-2 text-end",children:(0,s.jsx)(C,{initial:Q,setChoiceN:(0,c.c)(e,j.ow)})}),(0,s.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,s.jsx)(D.Z,{active:X,action:(0,c.c)(e,j.im),statusText:"Fade in answers"})})]})]})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Particles Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)(D.Z,{active:q,action:(0,c.c)(e,b.ro),statusText:"Answer Romaji"}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(D.Z,{active:U,action:(0,c.c)(e,b.C_),statusText:"Fade in answers"})})]})]}),(0,s.jsxs)("div",{className:Z,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Application"})}),(0,s.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[(0,s.jsx)("div",{className:"column-1",children:(0,s.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,s.jsxs)("div",{className:"d-flex flex-row w-50 w-sm-100 justify-content-between clickable",onClick:()=>{fe(""),je(""),be(""),setTimeout((()=>{var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"SW_VERSION"})}),1e3)},children:[(0,s.jsxs)("div",{className:"pe-2",children:[(0,s.jsx)("div",{children:"swVersion:"}),(0,s.jsx)("div",{children:"jsVersion:"}),(0,s.jsx)("div",{children:"bundleVersion:"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:ve}),(0,s.jsx)("div",{children:me}),(0,s.jsx)("div",{children:xe})]})]})})}),(0,s.jsxs)("div",{className:"column-2",children:[(0,s.jsx)("div",{className:"setting-block mb-2",children:(0,s.jsx)(D.Z,{active:T>y.x6.OFF,action:(0,c.c)(e,f.zA),color:"default",statusText:(0,u.w_)(T,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,s.jsxs)("div",{className:a()({"d-flex justify-content-end mb-2":!0,"disabled-color":we}),children:[(0,s.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,s.jsx)("div",{className:a()({"spin-a-bit":re}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:()=>{var e;ae(!0),ye(!1),setTimeout((()=>{re&&(ae(!1),ye(!0))}),3e3),null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"DO_HARD_REFRESH"})},children:(0,s.jsx)(i.bnu,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,s.jsx)("div",{className:"setting-block mb-2",children:(0,s.jsx)(D.Z,{active:S.persistent,action:(0,c.c)(e,f.TJ),disabled:S.persistent,color:"default",statusText:S.persistent?`Persistent ${~~(S.usage/1024/1024)}\n                        /\n                        ${~~(S.quota/1024/1024)}\n                        MB`:"Persistent off"})})]})]}),Le.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h5",{children:"Stale Space Repetition"}),V(ge,pe)]}),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsx)("span",{children:"keys: "+JSON.stringify(Array.from(Ie))})}),ge&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(A.n,{addlStyle:"failed-spacerep-view"}),children:(0,s.jsx)("div",{className:"failed-spacerep-view container mt-2 p-0",children:Le})})]}),Pe.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("h5",{children:"Failed Furigana Parse"}),(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(A.n,{addlStyle:"failed-furigana-view"}),children:(0,s.jsx)("div",{className:"failed-furigana-view container mt-2 p-0",children:Pe})})]})]})]})})}},7509:(e,n,t)=>{t.r(n),t.d(n,{VocabularyMeta:()=>ee,default:()=>ne});var s=t(5893),i=t(6514),r=t(8223),a=t(9041),o=t(5529),l=t(4184),c=t.n(l),u=t(3174),d=t.n(u),h=t(7294),g=t(743),p=t(5697),v=t.n(p),f=t(9983),m=t(2850),j=t(9841),x=t(4933),b=t(7891),w=t(3968),y=t(9775);function k(e){const n=(0,g.I0)(),{verb:t,reCache:i,linkToOtherTerm:r,showHint:a}=e,[o,l]=(0,h.useState)(!1),[u,d]=(0,h.useState)(!1),{verbForm:p,swipeThreshold:v,repetition:k,romajiEnabled:S,englishSideUp:T,hintEnabled:R,verbFormsOrder:C,verbColSplit:O}=(0,x.Z)();(0,h.useLayoutEffect)((()=>{l(!1),d(!1)}),[t]);const A=(e,t)=>{const i=c()({"pt-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"ps-sm-3":0===e,"pe-sm-3":0!==e,"text-end":0!==e}),r=t.map((e=>{const t=c()({clickable:!0}),i=c()({invisible:p===e.name});return(0,s.jsxs)("div",{className:t,onClick:()=>{p===e.name?n((0,b.rZ)("dictionary")):n((0,b.rZ)(e.name))},children:[(0,s.jsx)("span",{className:i,children:"["}),(0,s.jsx)("span",{children:e.name}),(0,s.jsx)("span",{className:i,children:"]"})]},e.name)}));return(0,s.jsx)("div",{className:i,children:r},e)},D=(0,f.kf)(t,C),{t1:E,t2:M}=function(e,n){const t=N(e,n);return{t1:e.slice(0,t),t2:e.slice(t)}}(D,O),P=(0,f.$q)(t.uid,k,T,(()=>{n((0,b._n)(t.uid))})),{inJapanese:I,inEnglish:L,romaji:F,japaneseObj:W}=function(e,n,t,i,r){var a,o;const l=null!==(a=e.romaji)&&void 0!==a?a:".",c=N(n,i),u=n.find((e=>e.name===t)),d=null!==(o=null==u?void 0:u.value)&&void 0!==o?o:n[c].value;return{inJapanese:d.toHTML(r),inEnglish:(0,s.jsx)(s.Fragment,{children:e.english}),romaji:l,japaneseObj:d}}(t,D,p,O,P),V=(0,h.useMemo)((()=>j.R.parse(t)),[t]),Z=(0,f.hF)(T,V,I,r),G=(0,f.yT)(T,V,L,r),{jLabel:q,eLabel:U}=(0,h.useMemo)((()=>{let e=(0,s.jsx)("span",{children:"[English]"}),n=(0,s.jsx)(y.Z,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(R&&a)if(T){const e=(0,f.tu)(W);e&&(n=e)}else{const n=(0,f.iz)(t);n&&(e=n)}return{jLabel:n,eLabel:e}}),[R,a,T,W,t]),{topValue:_,bottomValue:J,bottomLabel:$}=(0,f.JS)(T,G,Z,U,q),z=(0,h.useMemo)((()=>Object.assign(Object.assign({},t),{japanese:W.toString(),pronounce:t.pronounce&&W.getPronunciation(),form:p})),[t,W,p]),K=(0,h.useMemo)((()=>T?{tl:"en",q:z.english,uid:z.uid+".en"}:{tl:"ja",q:(0,m._I)(z),uid:(0,f.gW)(z)}),[T,z]),H=(0,s.jsx)(w.Z,{visible:0===v,word:K,reCache:i});return(0,s.jsxs)(s.Fragment,{children:[A(0,E),(0,s.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(y.Z,{breakPoint:"md",smallClassName:Object.assign({},T?{h5:!0}:{"fs-display-6":!0}),largeClassName:{"fs-display-6":!0},children:_}),S&&F&&(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"clickable loop-no-interrupt",onClick:()=>d((e=>!e)),children:u?F:"[romaji]"})}),(0,s.jsx)(y.Z,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:Object.assign({},T?{"fs-display-6":!0}:{h5:!0}),largeClassName:{"fs-display-6":!0},onClick:()=>l((e=>!e)),children:o?J:$}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:H})]},1),A(2,M)]})}function N(e,n){const t=Math.trunc(e.length/2)+(e.length%2==0?0:1)-n;return Math.trunc(e.length/2)+t}k.propTypes={verb:v().object.isRequired,reCache:v().bool,linkToOtherTerm:v().func,showHint:v().bool};var S=t(8527);function T(e){var n;const t=(0,g.I0)(),{vocabulary:i,reCache:r,showHint:a}=e,[o,l]=(0,h.useState)(!1),[c,u]=(0,h.useState)(!1),[d,p]=(0,h.useState)(void 0),{swipeThreshold:v,repetition:j,romajiEnabled:k,englishSideUp:N,hintEnabled:T,bareKanji:R}=(0,x.Z)();(0,h.useLayoutEffect)((()=>{l(!1),u(!1)}),[i]);const C=(0,h.useCallback)((()=>t((0,b._n)(i.uid))),[t,i.uid]),O=(0,h.useMemo)((()=>(0,f.$q)(i.uid,j,N,C)),[C,i.uid,j,N]);let A=(0,s.jsx)("span",{children:"[Japanese]"}),D=(0,s.jsx)("span",{children:"[English]"});const E=m.TZ.parse(i),M=E.toHTML(O),P=(0,s.jsx)(h.Fragment,{children:i.english}),I=i.romaji,L=(0,f.hF)(N,E,M),F=(0,f.yT)(N,E,P);if(T&&a)if(N){const e=(0,f.tu)(E);A=null!=e?e:A}else{const e=(0,f.iz)(i);D=null!=e?e:D}const{topValue:W,bottomValue:V,bottomLabel:Z}=(0,f.JS)(N,F,L,D,A),G=N&&R&&!1===(null===(n=j[i.uid])||void 0===n?void 0:n.f),q=(0,h.useMemo)((()=>{let e=i;if(m.TZ.parse(i).isNaAdj()){const n=m.TZ.parse(i).append(d&&"な");e=Object.assign(Object.assign({},i),{japanese:n.toString(),pronounce:i.pronounce&&n.getPronunciation(),form:d})}return N?{tl:"en",q:i.english,uid:i.uid+".en"}:{tl:N?"en":"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)}}),[i,N,d]),U=(0,h.useCallback)((()=>p((e=>e?void 0:"-na"))),[]),_=(0,s.jsx)(w.Z,{visible:0===v,word:q,reCache:r,onPushedPlay:U}),J=i.english.length<55;return(0,s.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(y.Z,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},N?Object.assign({[J?"fs-display-6":"h3"]:!0},J?{"lh-xs":!0}:{}):{"fs-display-6":!0}),children:W}),k&&I&&(0,s.jsx)("h5",{children:(0,s.jsx)("span",{onClick:(0,S.k)(u,(e=>!e)),className:"clickable loop-no-interrupt",children:c?I:"[Romaji]"})}),(0,s.jsx)(y.Z,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},N?{"fs-display-6":!0}:{[J?"fs-display-6":"h3"]:!0}),onClick:G?void 0:(0,S.k)(l,(e=>!e)),children:o||G?V:Z}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:_})]})}T.propTypes={vocabulary:v().object.isRequired,reCache:v().bool,showHint:v().bool};var R=t(7186),C=t(5965),O=t(5863);function A(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{n.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}var D=t(4953),E=t(3162),M=t(7962),P=t(9226);var I=t(6693),L=t(6989),F=t(7625),W=t(6024);function V(e){return e.visible?null:(0,s.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,s.jsx)(o.reW,{className:c()({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,s.jsx)("span",{className:"notification",children:e.loop})]})}function Z(e){const{className:n}=e;return e.visible?null:(0,s.jsxs)("div",{className:c()(Object.assign({"loop-btn loop-start-btn clickable":!0},n||{})),"aria-label":"Loop start button",children:[(0,s.jsx)(F.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:W.aQ}),null!=e.countDown&&(0,s.jsx)("span",{className:"notification",children:e.countDown})]})}function G(e){const{className:n}=e;return e.visible?null:(0,s.jsx)("div",{className:c()(Object.assign({"loop-btn loop-stop-btn clickable":!0},n||{})),"aria-label":"Loop stop button",children:(0,s.jsx)(F.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:W.oD})})}V.propTypes={visible:v().bool,active:v().bool,loop:v().number,onClick:v().func},Z.propTypes={visible:v().bool,onClick:v().func,className:v().object,countDown:v().number},G.propTypes={visible:v().bool,onClick:v().func,className:v().object};var q=t(2405);const U=15e3;function _(e,n){null!==e&&setTimeout((()=>{n(0),setTimeout((()=>{n((e=>0===e?null:e))}),1e3)}),1500)}var J=t(8056),$=t(4133),z=t(9180),K=t(5626),H=t(6537),B=t(7127),Y=t(7791),X=t(195);function Q(e){const n=e.list.length-1,[t,i]=(0,h.useState)((()=>Math.min(n,e.initial)));return(0,s.jsx)("div",{className:"vocabulary-slider",children:(0,s.jsx)(X.ZP,{defaultValue:t,valueLabelFormat:n=>e.list[n].label,getAriaValueText:n=>e.list[n].label,"aria-label":"Alphabetic quick scroll",step:1,min:0,max:n,valueLabelDisplay:"auto",onChangeCommitted:(n,t)=>{"number"==typeof t&&(e.setIndex(t),i(t))}},t)})}Q.propTypes={initial:v().number.isRequired,list:v().array.isRequired,setIndex:v().func.isRequired};const ee={location:"/vocabulary/",label:"Vocabulary"};function ne(){var e,n;const t=(0,g.I0)(),[l,u]=(0,h.useState)(!1),p=(0,h.useRef)(!1),v=(0,h.useRef)(null),j=(0,h.useRef)(0),[w,y]=(0,h.useState)(null),[N,F]=(0,h.useState)(Date.now()),W=(0,h.useRef)(Date.now()),[X,ee]=(0,h.useState)(0),[ne,se]=(0,h.useState)(void 0),[ie,re]=(0,h.useState)([]),[ae,oe]=(0,h.useState)(!1),le=(0,h.useRef)(),[ce,ue]=(0,h.useState)(!1),[de,he]=(0,h.useState)([]),ge=(0,h.useRef)(),{motionThreshold:pe,vocabList:ve,memoThreshold:fe,reinforce:me,filterType:je,hintEnabled:xe,sortMethod:be,activeGroup:we,autoVerbView:ye,englishSideUp:ke,verbForm:Ne,repetition:Se,spaRepMaxReviewItem:Te}=(0,x.Z)(),Re=(0,h.useRef)(Te),Ce=(0,h.useRef)(Se);Ce.current=Se,(0,h.useEffect)((()=>{0===ve.length&&t((0,b.Rz)())}),[]);const{filteredVocab:Oe}=(0,h.useMemo)((()=>{if(0===ve.length)return{filteredVocab:[]};if(0===Object.keys(Ce.current).length&&0===we.length)return{filteredVocab:ve};const e=Object.keys(Ce.current).reduce(((e,n)=>{var t;return!0===(null===(t=Ce.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,f.Dm)(je.current,ve,e,we,(0,S.c)(t,b.ZZ));switch(be.current){case $.vl.DIFFICULTY:{const e=(0,E.WU)(fe.current,n,Ce.current);e.length>0?n=e:he((e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:$.x6.WARN}]));break}case $.vl.GAME:if(me.current){const[e,t]=d()(n,(e=>{var n;return!0===(null===(n=Ce.current[e.uid])||void 0===n?void 0:n.rein)}));n=[...t,...e]}break;case $.vl.RECALL:const{failed:e,overdue:t}=(0,D.fC)(n,Ce.current,Re.current),s=[...e,...t];s.length>0&&(n=s.map((e=>n[e])))}const s=n.reduce(((e,n)=>{var t;return!0===(null===(t=Ce.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return re(s),{filteredVocab:n}}),[t,ve,we]),{newOrder:Ae,ebare:De,jbare:Ee,recallGame:Me}=(0,h.useMemo)((()=>{if(0===Oe.length)return{newOrder:[]};let e,n,t,s=[];switch(be.current){case $.vl.RANDOM:s=(0,E.tq)(Oe),he((e=>[...e,{msg:`Random (${s.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.VIEW_DATE:s=(0,E.EL)(Oe,Ce.current);let i=0,r=NaN;const a=s.map((e=>{var n;const t=null===(n=Ce.current[Oe[e].uid])||void 0===n?void 0:n.lastView;return i=t?i:i+1,r=t&&Number.isNaN(r)?(0,O.O5)(t):r,t?(0,O.O5)(t):0}));he((e=>[...e,{msg:`Date Viewed (${a.length}) New:${i} Old:${r}d`,lvl:$.x6.DEBUG}]));break;case $.vl.GAME:if(me.current){let e=-1;for(let n=Oe.length-1;n>-1;n--){const t=Ce.current[Oe[n].uid],s=n-1>-1?n-1:0,i=Ce.current[Oe[s].uid];if(!0===(null==t?void 0:t.rein)&&!(null==i?void 0:i.rein)){e=n;break}}if(-1!==e){const n=Oe.slice(0,e),t=Oe.slice(e),i=(0,E.rU)(n,Ce.current),r=t.map(((e,t)=>n.length+t));s=[...i,...r]}}0===s.length&&(s=(0,E.rU)(Oe,Ce.current)),he((e=>[...e,{msg:`Space Rep 1 (${s.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.DIFFICULTY:s=(0,E.J0)(Oe,Ce.current),he((e=>[...e,{msg:`Difficulty (${s.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.RECALL:const{failed:o,overdue:l,notPlayed:c,todayDone:u}=(0,D.fC)(Oe,Ce.current,Re.current),d=[...o,...l];s=d.length>0?d:[...c,...u],t=d.length;const h=d.map((e=>{var n,t;return(null!==(t=null===(n=Ce.current[Oe[e].uid])||void 0===n?void 0:n.percentOverdue)&&void 0!==t?t:0).toFixed(2).replace(".00","").replace("0.",".")}));he((e=>[...e,{msg:`Space Rep 2 (${h.length}) [${h.toString()}]`,lvl:0===d.length?$.x6.WARN:$.x6.DEBUG}]));break;default:({order:s,jOrder:e,eOrder:n}=(0,E.fx)(Oe)),he((e=>[...e,{msg:`Alphabetic (${s.length})`,lvl:$.x6.DEBUG}]))}return ue(!0),{newOrder:s,jbare:e,ebare:n,recallGame:t}}),[Oe]);(0,h.useEffect)((()=>{de.forEach((e=>{t((0,J.kg)(e.msg,e.lvl))}))}),[t,de]);const Pe=(0,h.useCallback)((()=>{const e=Oe.length;let n=(X+1)%e;W.current=N,F(Date.now()),j.current=X,ee(n),y(null)}),[Oe,X,N]),Ie=(0,h.useCallback)((()=>{(0,f.hY)(me.current,je.current,ie,Oe,Ce.current,w,(e=>{v.current=w,y(e)}),Pe)}),[t,ie,Oe,w,Pe]),Le=(0,h.useCallback)((()=>{const e=Oe.length;let n;n=w?X:(e+(X-1))%e,W.current=N,F(Date.now()),j.current=X,ee(n),y(null)}),[Oe,X,w,N]),Fe=function(e,n,t,s,i,r,a,o,l,c){return function(u,d){let h;if("left"===u)e(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===u)n(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else{const e=null!=t?t:(0,f.vr)(s,o,a),n=(0,f.cc)(e,i),g=l?"/override_cache":"";if("up"===u){let e;if(A("playing"),"Verb"===n.grp&&"dictionary"!==r){const t=(0,f.dP)(n,r);e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:r})}else if(m.TZ.parse(n).isNaAdj()){const t=m.TZ.parse(n).append(c.current&&"な");e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:c.current}),c.current=c.current?void 0:"-na"}else e=n;const t=(0,M.b1)(R.vT+g,{tl:"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)});h=(0,C.R$)(t,d)}else if("down"===u){A("playing");const e=n.english,t=(0,M.b1)(R.vT+g,{tl:"en",q:e,uid:n.uid+".en"});h=(0,C.R$)(t,d)}}return null!=h?h:Promise.reject()}}(Ie,Le,w,X,ve,Ne,Ae,Oe,ae,le),We=function(e){return function(n){const t=t=>{try{(0,f.Mm)(t,e,n)}catch(e){Error}};return{addDeviceMotionEvent:function(){e>0&&(0,f.HG)((()=>{window.addEventListener("devicemotion",t)}),(()=>{}))},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",t)}}}}(pe),{beginLoop:Ve,abortLoop:Ze,looperSwipe:Ge,loopSettingBtn:qe,loopActionBtn:Ue,timedPlayVerifyBtn:_e,timedPlayAnswerHandlerWrapper:Je,gradeTimedPlayEvent:$e,resetTimedPlay:ze,loop:Ke,tpAnswered:He,tpAnimation:Be}=function(e,n,t){var i;const r=(0,h.useRef)(void 0),a=(0,h.useRef)(null),[o,l]=(0,h.useState)(0),[c,u]=(0,h.useState)(U/1e3),d=(0,h.useRef)(void 0),[g,p]=(0,h.useState)(null),v=(0,h.useRef)(void 0),m=(0,h.useRef)(void 0),[j,x]=(0,h.useState)(void 0);(0,h.useEffect)((()=>{const e=r;return()=>{var n;null===(n=e.current)||void 0===n||n.forEach((e=>e.abort()))}}),[]);const w=(0,L.o)();let y;0===o?y=null:0===(null===(i=r.current)||void 0===i?void 0:i.length)?y=(0,s.jsx)(G,{}):void 0===r.current?y=(0,s.jsx)(Z,{countDown:Array.isArray(a.current)?c:void 0,onClick:()=>{if(Array.isArray(r.current));else{if(Array.isArray(a.current)){const[e]=a.current;clearInterval(e),u(U/1e3)}d.current=void 0,x(void 0),r.current=[],setTimeout(N,100),w()}}}):void 0!==r.current&&(y=(0,s.jsx)(G,{onClick:()=>{S(),C(),l(0)}}));const k=(0,s.jsx)(V,{active:o>0,loop:o,onClick:()=>{const e=S();a.current=null,e&&_(g,p),l((e=>{const n=3===e;return d.current=n?void 0:d.current,n?0:e+1}))}});function N(){S();const e=new AbortController,s=new AbortController,i=new AbortController,a=new AbortController,c=new AbortController,u=()=>{void 0!==v&&(S(),C(),l(0))};let d,h,g;if("function"==typeof t){const{addDeviceMotionEvent:e,removeDeviceMotionEvent:n}=t(u);e(),d=n}r.current=[e,s,i,a,c],n?(h=e=>T("down",e),g=e=>(0,f.nD)(o,(()=>T("up",e)),1500,e)):(h=e=>T("up",e),g=e=>(0,f.nD)(o,(()=>T("down",e)),1500,e));const m=(e,n)=>{p((t=>{let s;return s=null===t||100-t<1?e/n*100:t+e/n*100,s}))};(0,f.wO)(700,e).then((()=>(v.current=Date.now(),h(s).catch((e=>{var n;if("UserAborted"===(null===(n=e.cause)||void 0===n?void 0:n.code))throw e}))))).then((()=>(0,f.wO)(3e3,i,m))).then((()=>(p(null),v.current=void 0,g(a).then((()=>(r.current=void 0,T("left")))).catch((e=>{var n;if("UserAborted"!==(null===(n=e.cause)||void 0===n?void 0:n.code))return r.current=void 0,T("left")}))))).then((()=>(0,f.wO)(100,c))).catch((()=>{})).then((()=>{"function"==typeof d&&d()}))}const S=(0,h.useCallback)((()=>{var e;let n=!1;return null===(e=r.current)||void 0===e||e.forEach((e=>{n=!0,e.abort()})),r.current=void 0,n}),[r]);function T(n,t){let s;return o>0&&(s=e(n,t)),null!=s?s:Promise.reject(new Error("loop disabled"))}function R(){let e;if(void 0!==v.current){const n=v.current;e=Math.abs(Date.now()-n)}return{tpElapsed:e}}function C(){var e;let n=!1;return o>0&&void 0===r.current&&(null===(e=a.current)||void 0===e||e.forEach((e=>{clearTimeout(e)})),a.current=null,u(U/1e3),d.current=void 0,x(void 0),v.current=void 0,m.current=void 0,p(null),n=!0),n}return{beginLoop:N,abortLoop:S,looperSwipe:T,gradeTimedPlayEvent:function(e,n,t){var s;if(o>0&&void 0!==d.current)if("reset"===j)!0===(null===(s=t[n])||void 0===s?void 0:s.pron)&&void 0!==m.current&&e((0,b.Gy)(n,m.current,{pronunciation:void 0}));else if(d.current)void 0!==m.current&&e((0,b.Gy)(n,m.current));else{const t={pronunciation:"pronunciation"===j||void 0};e((0,b.d1)(n,t))}},resetTimedPlay:C,loopSettingBtn:k,loopActionBtn:y,timedPlayVerifyBtn:e=>(0,s.jsx)(q.lh,{visible:void 0!==d.current,hover:j,prevMissPronu:e,onPronunciation:()=>{e?(d.current=!1,x((e=>"reset"===e?void 0:"reset"))):(d.current=!1,x((e=>"pronunciation"===e?void 0:"pronunciation")))},onIncorrect:()=>{d.current=!1,x((e=>"incorrect"===e?void 0:"incorrect"))},onReset:()=>{d.current=!1,x((e=>"reset"===e?void 0:"reset"))}}),timedPlayAnswerHandlerWrapper:function(e,t){if(0===o)return t;let s=t;if("up"===e||"down"===e){const e=n?"up":"down";s=()=>t(e)}const i=function(e,n,t,s,i,r,a,o,l,c,u,d){let h=n,g=!0;if(l()){const n=null===s&&void 0!==o.current,l=null!==s&&void 0!==o.current,p=null===s&&void 0===o.current;if("up"===e||"down"===e){const e=c();d.current=e.tpElapsed,u.current=!0,n?(g=!1,u.current=void 0,setTimeout((()=>{u.current=!0}),1500),i(0),setTimeout((()=>{i(null)}),1500)):l||p&&(u.current=!1,h=()=>Promise.resolve(),g=!1)}else{p&&(g=!1);const e=function(e,n){const t=setInterval((()=>{n((n=>{const s=1===n;return e((e=>s?0:e)),s&&clearTimeout(t),s?U/1e3:n-1}))}),1e3);return t}(t,r);a.current=[e]}g&&_(s,i),A("paused")}return h}(e,s,l,g,p,u,a,v,S,R,d,m);return i},loop:o,setLoop:l,tpAnimation:g,tpAnswered:d}}(Fe,ke,We);(0,P.q)(Fe,(0,S.c)(t,b.$u),Je);const{HTMLDivElementSwipeRef:Ye}=(0,I.M)(Fe,Je);(function(e,n,t,s,i){(0,h.useEffect)((()=>(function(e,n="Nmemonica App",t){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:n,album:t,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]}))}(e),function(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{for(const[t,s]of e)try{n.setActionHandler(t,s)}catch(e){console.error(e)}}catch(e){console.error(e)}}else console.error("mediaSession not available")}([["play",()=>{n&&(t(),A("playing"))}],["pause",()=>{n&&(s(),A("paused"))}],["stop",()=>{n&&(s(),A("paused"))}],["previoustrack",()=>{n&&(s(),i("right"))}],["nexttrack",()=>{n&&(s(),i("left"))}]]),()=>{!function(){if("mediaSession"in navigator){const e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}()})),[e,n,t,s,i])})("Vocabulary Loop",Ke,Ve,Ze,Ge),(0,h.useEffect)((()=>{var e,n;const s={selectedIndex:j.current,reinforcedUID:v.current,lastNext:W.current};if(w!==s.reinforcedUID||X!==s.selectedIndex){const i=null!==(e=s.reinforcedUID)&&void 0!==e?e:(0,f.vr)(s.selectedIndex,Oe,Ae),r=(0,f.cc)(i,ve);$e(t,i,Ce.current);let a=Promise.resolve();(null===(n=Ce.current[i])||void 0===n?void 0:n.difficulty)&&ge.current?a=t((0,b.Jg)({uid:i})):null===ge.current&&(a=t((0,b.Qs)({uid:i}))),Me&&Me>0&&X===Me+1&&t((0,J.kg)("No more pending items",$.x6.DEBUG)),a.then((e=>{var n,a;if(e&&"payload"in e){const{newValue:s,oldValue:o}=e.payload,l=null===(n=o[i])||void 0===n?void 0:n.lastReview,c=l?`${(0,O.O5)(l)}d -> `:"",u=null===(a=s[i].daysBetweenReviews)||void 0===a?void 0:a.toFixed(2),d=(0,O.xr)(r.english,30),h=void 0===u?`Space Rep [${d}] removed`:`Space Rep [${d}] updated ${c}${u}d`;t((0,J.kg)(h,$.x6.WARN))}if((0,f.Zc)(s.lastNext)){const e=i!==s.reinforcedUID,n=null!==s.reinforcedUID;t((0,b.Wo)({uid:i,shouldIncrement:e})).unwrap().then((e=>{var s;const{value:a,prevVal:o}=e;let l;l=ge.current&&o.lastReview?o.lastReview:null!==(s=o.lastView)&&void 0!==s?s:a.lastView;const c={[i]:Object.assign(Object.assign({},a),{lastView:l})},u=(e,n)=>t((0,J.kg)(e,n));void 0!==He.current?(0,O.lP)(u,r,c,{frequency:n}):(0,O.Ps)(u,r,c,{frequency:n})}))}})),ze()&&(0,f.u3)(s.lastNext)&&Ve(),se(void 0),j.current=X,v.current=w,ge.current=void 0}}),[t,Ve,$e,ze,ve,w,X,Oe,Ae,Me]);const Xe=(0,h.useCallback)(((e,n,t)=>(0,s.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,s.jsxs)("div",{ref:Ye,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(B.Z,{ariaLabel:"Previous",action:Le,children:(0,s.jsx)(o.wyc,{size:16})}),t&&ye?(0,s.jsx)(k,{verb:n,reCache:ae,linkToOtherTerm:e=>y(e),showHint:ne===e}):(0,s.jsx)(T,{vocabulary:n,reCache:ae,showHint:ne===e}),(0,s.jsx)(B.Z,{ariaLabel:"Next",action:Ie,children:(0,s.jsx)(o.XCv,{size:16})})]})})),[Ie,Le,Ye,ye,ae,ne]),Qe=(0,h.useCallback)(((e,n,i,r,a,o,l)=>{var u,d,h;return(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,s.jsx)(q.uY,{toggle:ke,action:()=>{Ze()&&ze(),t((0,b.$u)())}}),(0,s.jsx)(q.Ro,{active:ae,action:te(ae,oe)}),(0,s.jsx)(q.ph,{visible:i,toggleAutoVerbView:(0,S.c)(t,b.eK),autoVerbView:ye}),(0,s.jsx)("div",{className:"sm-icon-grp",children:qe}),(0,s.jsx)("div",{className:"sm-icon-grp",children:Ue})]})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[_e(!0===(null===(u=Ce.current[e])||void 0===u?void 0:u.pron)),(0,s.jsxs)(Y.u,{className:c()({"question-color opacity-50":be.current===$.vl.RECALL&&!l,"done-color opacity-50":l}),children:[(0,s.jsx)(K.Y,{difficulty:null===(d=Ce.current[e])||void 0===d?void 0:d.difficulty,resetOn:e,onChange:n=>{void 0!==n&&t((0,b.kn)(e,n))}}),(0,s.jsx)(z.w,{accuracy:null===(h=Ce.current[e])||void 0===h?void 0:h.accuracy,resetOn:e,onChange:n=>{void 0!==n&&(t((0,b.s)(e,n)),ge.current=n)}})]}),(0,s.jsx)(q.y8,{visible:xe.current,active:a,setShowHint:(0,S.k)(se,(n=>n?void 0:e))}),(0,s.jsx)(q.A,{active:r,toggle:(0,f.$q)(n.uid,Ce.current).furigana.show,toggleFurigana:(0,S.c)(t,b._n),vocabulary:n}),(0,s.jsx)(q.R_,{term:n,count:ie.length,isReinforced:null!==w,hasReinforce:o,addFrequencyTerm:e=>{re((n=>[...n,e])),(0,S.c)(t,b.S5)(e)},removeFrequencyTerm:e=>{re((n=>n.filter((n=>n!==e)))),(0,S.c)(t,b.xz)(e)}})]})})]})})}),[Ze,ye,t,ke,ie.length,xe,Ue,qe,ae,w,ze,be,_e]),{pList:en,pIdx:nn}=(0,h.useMemo)((()=>{let e=[],n=X;return ce?Ee&&(e=Ee):(Ee&&(n=Ee[X].idx),De&&(e=De)),{pList:e,pIdx:n}}),[X,ce,Ee,De]),tn=(0,h.useMemo)((()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{in:l,timeout:500,children:(0,s.jsx)(r.Z,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,s.jsx)("div",{onClick:(0,S.k)(ue,(e=>!e)),children:ce?"JP":"EN"})})}),(0,s.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:()=>{p.current=!0},onTouchEnd:()=>{p.current=!1},onMouseDown:()=>{p.current=!0},onMouseUp:()=>{p.current=!1},children:(0,s.jsx)(Q,{initial:nn,list:en,setIndex:e=>{if(ce)ee(e);else if(De){const n=De[e].idx;ee(n)}}})})]})),[De,nn,en,ce,l]);if(0===Me)return(0,s.jsx)(H.n,{addlStyle:"main-panel",text:"No pending items"});if(Oe.length<1||Ae.length<1)return(0,s.jsx)(H.n,{addlStyle:"main-panel"});const sn=null!=w?w:(0,f.vr)(X,Oe,Ae),rn=(0,f.cc)(sn,ve),an=!0===(null===(e=Ce.current[rn.uid])||void 0===e?void 0:e.rein),on="Verb"===rn.grp,ln=m.TZ.parse(rn),cn=ln.hasFurigana(),un=ln.isHintable(3),dn=void 0!==rn.grp&&""!==rn.grp,hn=ne!==sn&&ke?un:dn,gn=(X+1)/Oe.length*100,pn=null===(n=Ce.current[sn])||void 0===n?void 0:n.lastReview,vn=void 0!==pn&&0===(0,O.O5)(pn),fn=(0,s.jsx)("div",{className:"progress-line flex-shrink-1",onClick:()=>{if(be.current===$.vl.ALPHABETIC){const e=4e3;u(!0);const n=()=>{p.current?setTimeout(n,e):u(!1)};setTimeout(n,e)}},children:(0,s.jsx)(a.Z,{variant:null===Be?"determinate":"buffer",value:null===Be?gn:0,valueBuffer:null!=Be?Be:void 0,color:an?"secondary":"primary"})});let mn;return mn=l?(0,s.jsxs)(h.Fragment,{children:[Xe(sn,rn,on),tn]}):(0,s.jsxs)(h.Fragment,{children:[Xe(sn,rn,on),Qe(sn,rn,on,cn,hn,an,vn),fn]}),mn}function te(e,n){return function(){if(!e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},5665:(e,n,t)=>{t.d(n,{L6:()=>r,jP:()=>s,kh:()=>i});const s="add_frequency_word",i="add_frequency_phrase",r="service_worker_logger_msg"},5741:(e,n,t)=>{t.d(n,{_:()=>s});const s="userSettings"},2850:(e,n,t)=>{t.d(n,{TZ:()=>l,Wp:()=>u,_I:()=>h});var s=t(5893),i=t(4184),r=t.n(i),a=(t(7294),t(9815)),o=t(3996);class l{constructor(e,n){this._furigana=e,this._kanji=n,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}get[Symbol.toStringTag](){return"JapaneseText"}get furigana(){return this._furigana}set furigana(e){this._furigana=e}get kanji(){return this._kanji}set kanji(e){this._kanji=e}get parseObj(){return 0!==this._parseObj.furiganas.length||0!==this._parseObj.kanjis.length||0!==this._parseObj.okuriganas.length||this._parseObj.startsWKana||(this.hasFurigana()?this._parseObj=u(this.getPronunciation(),this.getSpelling()):this._parseObj={okuriganas:[this.getSpelling()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj}hasFurigana(){return!!this._kanji}getSpelling(){return this._kanji?this._kanji:this._furigana}getPronunciation(){return this._furigana}getObject(){return{furigana:this._furigana,kanji:this._kanji}}isSlang(){return this.slang}isKeigo(){return this.keigo}isNaAdj(){return"na"===this.adj}isIAdj(){return"i"===this.adj}debug(){return JSON.stringify(this)}append(e=""){return this.hasFurigana()?new l(this.getPronunciation()+e,this.getSpelling()+e):new l(this.getSpelling()+e)}toString(){return this._furigana+(this._kanji?"\n"+this._kanji:"")}isHintable(e=3){let n=!0;if(!this.toString().split("").every((e=>(0,a.AF)(e)||(0,a.f_)(e)||(0,a.xn)(e)||"\n"===e)))return!1;if(this.hasFurigana()){const t=this.getPronunciation(),s=this.getSpelling();if(t.length<e)n=!1;else try{u(t,s)}catch(e){console.log(e),n=!1}}else this.getSpelling().length<e&&(n=!1);return n}getHint(e,n,t=3,s=1){const i={shown:"hint-mora",hidden:"invisible"};let r;if(this.isHintable(t))if(this.hasFurigana()){const e=this.getPronunciation(),t=this.getSpelling(),{kanjis:a,furiganas:o,okuriganas:l,startsWKana:c}=u(e,t);r=n(i,a,o,l,c,s)}else r=e(i,this.getSpelling(),s);else r=null;return r}toHTML(e){var n,t;let i;const a=!1===(null===(n=null==e?void 0:e.furigana)||void 0===n?void 0:n.show),l=null===(t=null==e?void 0:e.furigana)||void 0===t?void 0:t.toggle,c=r()({"incorrect-color":!0,"d-block":!0}),u=(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:c,children:this.getPronunciation()}),(0,s.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{const{kanjis:e,furiganas:n,okuriganas:t,startsWKana:c}=this.parseObj,u=(0,o.je)(this.parseObj),d=r()({clickable:!!l})||void 0,h=l||void 0,g=a?"transparent-font":void 0;i=(0,s.jsx)("span",{className:d,onClick:h,children:u.map(((s,i)=>{const r=(0,o.re)(e[i]),a=(0,o.re)(),l=(0,o.re)(n[i],g),u=(0,o.re)(),d=(0,o.re)(t[i]),h=(0,o.re)();return(0,o.v5)(i,{sk:r,hk:a},{sf:l,hf:u},{so:d,ho:h},c)}))})}catch(n){!1!==(null==e?void 0:e.showError)&&console.error(n),i=u}else i=(0,s.jsx)("span",{children:this.getSpelling()});return i}}function c(e,n){const t=e.japanese.split("\n");let s;if("function"==typeof n)s=n(e);else{const[e,n]=t;s=new l(e,n)}return e.slang&&e.slang&&(s.slang=!0),e.keigo&&e.keigo&&(s.keigo=!0),!e.adj||"na"!==e.adj&&"i"!==e.adj||(s.adj=e.adj),s}function u(e,n){let t,s,i,r;try{({kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}=d(e,n))}catch(o){if(o instanceof Error){const l=o.cause;if("ParseError"===(null==l?void 0:l.code))try{const o=e.split("").reverse().join(""),l=n.split("").reverse().join(""),{kanjis:c,furiganas:u,okuriganas:h}=d(o,l);return t=c.map((e=>e.split("").reverse().join(""))).reverse(),s=u.map((e=>e.split("").reverse().join(""))).reverse(),i=h.map((e=>e.split("").reverse().join(""))).reverse(),r=!(0,a.AF)(n.charAt(0)),{kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}}catch(e){}}throw o}return{kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}}function d(e,n){if(n.split("").every((e=>(0,a.AF)(e)||(0,a.BE)(e))))return{kanjis:[n],furiganas:[e],okuriganas:[],startsWKana:!1};const t=new RegExp(/\s/g),s=t.test(e)||t.test(n),i=!(0,a.AF)(n.charAt(0))&&!(0,a.IE)(n.charAt(0));let r=0,o=[],l=[],c=[],u="",d="",h="",g=!1;n.split("").forEach(((t,i)=>{if((0,a.AF)(t)||function(e,n,t){const s=t.charAt(e);return Number.isInteger((0,a.F8)(s))||Number.isInteger(Number.parseInt(s))&&!n.includes(s)&&!(0,a.AF)(s)&&!(0,a.f_)(s)&&!(0,a.xn)(s)&&e<t.length-1}(i,e,n))" "!==e.charAt(r)&&(u+=e.charAt(r))," "!==t&&(d+=t),g=!0,r++,""!==h&&(c.push(h),h=""),n.length-i==1&&(" "!==e.slice(r)&&(u+=e.slice(r)),o.push(u),l.push(d));else{if(g){for(;e.charAt(r)!=t;)if(" "!==e.charAt(r)&&(u+=e.charAt(r)),r++,r>e.length)throw new Error("The two phrases do not match"+(s?" (contains white space)":""),{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:n},kanjis:l,furiganas:o,okuriganas:c}}});o.push(u),u=""}" "!==t&&(h+=t),""!==d&&(l.push(d),d=""),r++,g=!1}})),""!==h&&c.push(h);const[p,v]=function(e,n,t,s){let i,r;return s?(r=t.reduce(((n,t,s)=>n+t+(e[s]||"")),""),i=t.reduce(((e,t,s)=>e+t+(n[s]||"")),"")):(r=e.reduce(((e,n,s)=>e+n+(t[s]||"")),""),i=n.reduce(((e,n,s)=>e+n+(t[s]||"")),"")),[i,r]}(l,o,c,i),f=e.replaceAll(" ",""),m=n.replaceAll(" ","");if(p!==f||v!==m)throw new Error("Failed to parse text to build furigana"+(s?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:n},output:{pronunciation:p,orthography:v}}}});return{kanjis:l,furiganas:o,okuriganas:c,startsWKana:i}}function h(e){let n;if(e.pronounce){if(!e.pronounce.split("").every((e=>(0,a.f_)(e)||(0,a.xn)(e))))throw new Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});n=e.pronounce}else n=l.parse(e).getSpelling().replaceAll(" ","");return n}l.parse=e=>c(e),l.parser=c},9841:(e,n,t)=>{t.d(n,{R:()=>a});var s=t(6954),i=t(9815),r=t(2850);class a extends r.TZ{constructor(e,n){super(e,n),this.trans=void 0,this.intr=void 0,this.exv=void 0}get[Symbol.toStringTag](){return"JapaneseVerb"}isExceptionVerb(){return void 0!==this.exv}isIntransitive(){return void 0!==this.trans||!0===this.intr}getTransitivePair(){return this.isIntransitive()&&this.trans?this.trans:void 0}getIntransitivePair(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr}getVerbClass(){const e=super.getPronunciation(),n=super.getSpelling();if(this.exv&&this.isExceptionVerb())return this.exv;const t=e.slice(-1),s=e.slice(-2,-1),{iVowel:r}=(0,i.dv)(s);return"する"===n.slice(-2)||"くる"===e||"だ"===e||"ある"===e?3:1===r&&"る"===t||3===r&&"る"===t?2:1}getStem(){let e;const n=s.Bw;let t;super.hasFurigana()&&(t=super.getSpelling().slice(0,-1));const r=super.getPronunciation().slice(-1),a=super.getPronunciation().slice(0,-1);if(1===this.getVerbClass()||"る"!==r){const s=1,{iConsonant:o}=(0,i.dv)(r);e=t?[a+n[o][s],t+n[o][s]]:[a+n[o][s]]}else{if("る"!==r)throw new Error("Unknown verb type");e=t?[a,t]:[a]}return e}naiForm(){let e,n="ない";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],l=s.Bw,c=s.Be.indexOf("a"),{iConsonant:u}=(0,i.dv)(t),d=l[0===u?14:u][c]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){const[t,s]=this.getStem();e=s?new r.TZ(t+n,s+n):new r.TZ(t+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こない","来ない");else if("する"===a)e=new r.TZ("しない");else if("ある"===a)e=new r.TZ("ない");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"しない",n+"しない")}else e=new r.TZ(n+"しない")}}return e}saseruForm(){let e,n="せる";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],l=s.Bw,c=s.Be.indexOf("a"),{iConsonant:u}=(0,i.dv)(t),d=l[0===u?14:u][c]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){"居る"!==a&&"いる"!==a||(e=new r.TZ("いる","居る"));const[t,s]=this.getStem();e=o?new r.TZ(t+"さ"+n,s+"さ"+n):new r.TZ(t+"さ"+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こさせる","来させる");else if("する"===a)e=new r.TZ("させる");else if("ある"===a)e=new r.TZ("ある");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"させる",n+"させる")}else e=new r.TZ(n+"させる")}}return e}reruForm(){let e;const n=this.getVerbClass();let t=super.getSpelling(),a=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===n){const n=t[t.length-1],o=s.Bw,l=s.Be.indexOf("e"),{iConsonant:c}=(0,i.dv)(n),u=o[c][l]+"る",d=super.getSpelling().slice(0,-1);if(a){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+u,d+u)}else e=new r.TZ(d+u)}else if(2===n){const[n,t]=this.getStem();e=a?new r.TZ(n+"られる",t+"られる"):new r.TZ(n+"られる")}else if("来る"===t||"くる"===t)e=new r.TZ("こられる","来られる");else if("する"===t)e=new r.TZ("できる");else if("する"===t.slice(-2)){const n=super.getSpelling().slice(0,-2);if(a){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"できる",n+"できる")}else e=new r.TZ(n+"できる")}else{if("ある"!==t&&"いる"!==t)throw new Error("Unknown exception verb type");e=null}return e}masuForm(){const e="ます";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きます","来ます");break;case"ある":n=new r.TZ("あります");break;case"だ":n=new r.TZ("です")}if("する"===super.getSpelling().slice(-2)){const e="します",t=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,s+e):new r.TZ(t+e)}if(!n){const[t,s]=this.getStem();n=s?new r.TZ(t+e,s+e):new r.TZ(t+e)}return n}mashouForm(){const e="ましょう";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きましょう","来ましょう");break;case"ある":n=new r.TZ("ありましょう");break;case"だ":n=new r.TZ("でしょう")}if("する"===super.getSpelling().slice(-2)){const e="しましょう",t=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,s+e):new r.TZ(t+e)}if(!n){const[t,s]=this.getStem();n=s?new r.TZ(t+e,s+e):new r.TZ(t+e)}return n}taForm(){return this.t_Form(o)}chattaForm(){if(3===this.getVerbClass())return null;const e=super.hasFurigana()?super.getSpelling():super.getPronunciation();let n;switch(e[e.length-1]){case"ぶ":case"む":case"ぬ":case"ぐ":n="じゃった";break;default:n="ちゃった"}const t=this.t_Form(o);return new r.TZ(t.getPronunciation().slice(0,-1)+n,t.getSpelling().slice(0,-1)+n)}teForm(){return this.t_Form(l)}t_Form(e){const n=this.getVerbClass();let t,s,i,a=this.furigana;this.hasFurigana()&&this.kanji&&(s=this.furigana,a=this.kanji);const o=a[a.length-1];if(1===n)if("行く"===a||"いく"===a)t=r.TZ.parse({japanese:e.g1.iku});else{switch(o){case"う":case"つ":case"る":i=e.g1.u_tsu_ru;break;case"く":i=e.g1.ku;break;case"ぐ":i=e.g1.gu;break;case"ぬ":case"ぶ":case"む":i=e.g1.mu_nu_bu;break;case"す":i=e.g1.su}t=s?new r.TZ(s.slice(0,-1)+i,a.slice(0,-1)+i):new r.TZ(a.slice(0,-1)+i)}else if(2===n)i=e.g2.ru,t=s?new r.TZ(s.slice(0,-1)+i,a.slice(0,-1)+i):new r.TZ(a.slice(0,-1)+i);else if("来る"===a||"くる"===a)t=r.TZ.parse({japanese:e.g3.kuru});else if("する"===a)t=r.TZ.parse({japanese:e.g3.suru});else if("だ"===a)t=r.TZ.parse({japanese:e.g3.da});else if("ある"===a)t=r.TZ.parse({japanese:e.g3.aru});else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=e.g3.suru,i=a.slice(0,-2);if(s){const e=s.slice(0,-2);t=new r.TZ(e+n,i+n)}else t=new r.TZ(i+n)}}return t}}a.parse=e=>{const n=r.TZ.parser(e,(e=>{const[n,t]=e.japanese.split("\n");return new a(n,t)}));return e.intr&&(n.intr=e.intr),e.trans&&(n.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(n.exv=e.exv),n};const o={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},l={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}}},8916:(e,n,t)=>{t.d(n,{IY:()=>r,Kd:()=>o,Si:()=>a,Yg:()=>i,pK:()=>s});const s="slick-swipe-ignore";function i(e,n=!1){let t,s,i,r;return t=e.startX-e.curX,s=e.startY-e.curY,i=Math.atan2(s,t),r=Math.round(180*i/Math.PI),r<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===n?r>=35&&r<=135?"up":"down":"vertical"}function r(e,{verticalSwiping:n,touchThreshold:t}={verticalSwiping:!1,touchThreshold:5}){return e.target.tagName,{verticalSwiping:n,touchThreshold:t,touchObject:{startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}function a(e,n){const t=n.verticalSwiping,s=n.touchThreshold,r=n.swiped,a=n.swiping,o=n.touchObject,l=n.swipeEvent;o.curX="touches"in e?e.touches[0].pageX:e.clientX,o.curY="touches"in e?e.touches[0].pageY:e.clientY,o.swipeLength=Math.abs(o.curX-o.startX);const c=Math.abs(o.curY-o.startY);if(!t&&!a&&c>10)return{touchObject:o,touchThreshold:s,scrolling:!0};t&&(o.swipeLength=Math.sqrt(Math.pow(c,2)+Math.pow(o.swipeLength,2)));const u=i(n.touchObject,t);let d={touchObject:o,verticalSwiping:t,touchThreshold:s,swiped:!1,swiping:!1};return!r&&l&&(l(u),d=Object.assign(Object.assign({},d),{swiped:!0})),o.swipeLength>10&&(d=Object.assign(Object.assign({},d),{swiping:!0})),d}function o(e,n){let t=n.touchObject,s=n.touchThreshold,r=n.verticalSwiping,a=n.onSwipe;const o=s;let l;return t.swipeLength&&(l=i(t,r)),t.swipeLength>o&&a&&a(l),Object.assign({swipeDirection:l},n)}},6892:(e,n,t)=>{function s(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}function i(e,n,t,{clamped:s=!0}={}){const i=Math.min(1,t),r=s?Math.max(i,0):t;return(1-r)*e+r*n}t.d(n,{Sy:()=>s,t7:()=>i})},5965:(e,n,t)=>{t.d(n,{R$:()=>r});const s=new Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),i=new AudioContext;function r(e,n){const t=i.createBufferSource(),r=fetch(e).then((e=>e.arrayBuffer())).then((e=>i.decodeAudioData(e).then((e=>{t.buffer=e,t.connect(i.destination),t.start()})))),a=new Promise(((e,i)=>{const r=()=>{t.stop(),i(s)};t.addEventListener("ended",(()=>{null==n||n.signal.removeEventListener("abort",r),e()})),(null==n?void 0:n.signal.aborted)&&r(),null==n||n.signal.addEventListener("abort",r)}));return Promise.all([a,r])}},2647:(e,n,t)=>{function s(){return window}t.d(n,{J:()=>s})},1683:(e,n,t)=>{t.d(n,{O:()=>i});var s=t(6892);function i(e,n=.25){const[t,i,r]=[13,110,256],a=[t,(0,s.t7)(i,255,e),(0,s.t7)(r,0,e)],o=[(0,s.t7)(0,255,e),255,0],l=[255,(0,s.t7)(255,0,e),0],c=[(0,s.t7)(a[0],o[0],e),(0,s.t7)(a[1],o[1],e),(0,s.t7)(a[2],o[2],e)],u=[(0,s.t7)(o[0],l[0],e),(0,s.t7)(o[1],l[1],e),(0,s.t7)(o[2],l[2],e)],d=[(0,s.t7)(c[0],u[0],e),(0,s.t7)(c[1],u[1],e),(0,s.t7)(c[2],u[2],e)],[h,g,p]=d.map((e=>Math.floor(e)));return`rgb(${h},${g},${p},${n})`}},5863:(e,n,t)=>{t.d(n,{Gd:()=>a,O5:()=>r,Ps:()=>o,Y3:()=>c,lP:()=>l,xr:()=>i});var s=t(4133);function i(e,n){const t=Math.ceil(n/2);return e.length<n?e:e.slice(0,t)+"..."+e.slice(-(n-t))}function r(e){const[n]=e.split("T"),t=Date.parse(n),s=Math.abs(Date.now()-t);return Math.floor(s/864e5)}function a(e){const n=Date.parse(e),t=Math.abs(Date.now()-n);return Math.ceil(t/6e4)}function o(e,n,t,a){var o,l,c;const u=null===(o=t[n.uid])||void 0===o?void 0:o.lastView;if(u){const o=i(n.english,30),d=(null==a?void 0:a.frequency)?" F[w]":"",h=` ${r(u)}d`,g=null===(l=t[n.uid])||void 0===l?void 0:l.vC,p=` ${null!=g?g:0}v`,v=null===(c=t[n.uid])||void 0===c?void 0:c.tpAcc;e("Space Rep ["+o+"]"+d+h+p+(void 0!==v?" "+(100*v).toFixed(0)+"%":""),s.x6.DEBUG)}}function l(e,n,t,a){var o,l,c,u;const d=null===(o=t[n.uid])||void 0===o?void 0:o.lastView;if(d){const o=i(n.english,30),g=(null==a?void 0:a.frequency)?" F[w]":"",p=` ${r(d)}d`,v=null===(l=t[n.uid])||void 0===l?void 0:l.tpPc,f=void 0!==v?` ${v}v`:"",m=null===(c=t[n.uid])||void 0===c?void 0:c.tpAcc,j=void 0!==m?" "+(100*m).toFixed(0)+"%":"",x=null===(u=t[n.uid])||void 0===u?void 0:u.tpCAvg;e("Timed Play ["+o+"]"+g+p+f+j+(void 0!==x?" "+(h=x,(Math.round(h)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"")+"s"):""),s.x6.DEBUG)}var h}function c(e){let n=[];if(e.length<2)return e;const[t,s]=e,i=t.msg===s.msg,r=t.msg.endsWith("+")&&t.msg.slice(0,-4)===s.msg;if(i||r)if(i)n=[Object.assign(Object.assign({},s),{msg:`${s.msg} 1 +`})];else{const e=Number(t.msg.slice(-3).slice(0,1));n=[Object.assign(Object.assign({},s),{msg:`${s.msg} ${e+1} +`})]}else n=e;return n}},8527:(e,n,t)=>{function s(e,n){return function(){(n||"function"==typeof n)&&e(n)}}function i(e,n,t){return function(s){e(t?n(t):s instanceof Object&&"_reactName"in s||void 0===s?n():n(s))}}t.d(n,{c:()=>i,k:()=>s})},9983:(e,n,t)=>{t.d(n,{$q:()=>A,Dm:()=>p,HG:()=>P,II:()=>w,JS:()=>T,Mm:()=>M,XQ:()=>m,Zc:()=>j,cc:()=>g,dP:()=>k,gW:()=>O,hF:()=>N,hY:()=>d,iz:()=>R,kf:()=>y,nD:()=>E,tu:()=>C,u3:()=>x,vr:()=>h,wG:()=>f,wO:()=>D,w_:()=>b,yT:()=>S});var s=t(5893),i=t(4184),r=t.n(i),a=(t(7294),t(5863)),o=t(9841),l=t(9815),c=t(3996),u=t(4133);function d(e,n,t,s,i,r,o,l){const c=e&&Math.random()<1/3;if(n!==u.Lx.FREQUENCY&&c&&t.length>0){const e=0,n=t.filter((e=>{var n;const s=null===(n=i[e])||void 0===n?void 0:n.lastView;return s&&(0,a.Gd)(s)>t.length})),l=n.length,c=Math.floor(Math.random()*(l-e)+e),u=s.find((e=>n[c]===e.uid));if(u&&r!==u.uid)return void o(u.uid)}l()}function h(e,n,t){let s;if(s=t?n[t[e]]:n[e],!s)throw new Error("No term found");return s.uid}function g(e,n){const t=n.find((n=>e===n.uid));if(!t)throw new Error("No term found");return t}function p(e,n,t=[],s,i){let r=n;if(e===u.Lx.FREQUENCY){if(!t)throw new TypeError("Filter type requires frequencyList");t.length>0?r=s.length>0?n.filter((e=>t.includes(e.uid)&&v(s,e))):n.filter((e=>t.includes(e.uid))):"function"==typeof i&&i(u.Lx.GROUP)}else e===u.Lx.TAGS?s.length>0&&(r=n.filter((e=>e.tags.some((e=>s.includes(e)))))):s.length>0&&(r=n.filter((e=>v(s,e))));return r}function v(e,n){return void 0!==n.grp&&(e.includes(n.grp)||void 0!==n.subGrp&&e.includes(`${n.grp}.${n.subGrp}`))||void 0===n.grp&&(e.includes("undefined")||void 0!==n.subGrp&&e.includes(`undefined.${n.subGrp}`))}function f(e,n){const t=Object.keys(e).reduce(((n,t)=>[...n,t,...e[t].map((e=>t+"."+e))]),[]);return n.reduce(((e,n)=>(t.includes(n)||(e=[...e,n]),e)),[])}function m(e,n,t){const s=new Set(Object.keys({lastView:null,vC:null,f:null,rein:null,pron:null,tpPc:null,tpAcc:null,tpCAvg:null,lastReview:null,consecutiveRight:null,difficulty:null,accuracy:null,daysBetweenReviews:null,percentOverdue:null}));let i=new Set,r=[];return Object.keys(e).forEach((a=>{const o=e[a];void 0!==o&&Object.keys(o).forEach((e=>{let o;if(!s.has(e)){let s;try{s=g(a,n)}catch(e){s={english:t}}o={key:e,uid:a,english:s.english}}void 0!==o&&(i.add(e),r=[...r,o])}))})),{keys:i,list:r}}function j(e){return~~(Date.now()-e)>1500}function x(e){return~~(Date.now()-e)>300}function b(e,n){return n[e]}function w(e,n){return e+1<n.length?e+1:0}function y(e,n){var t,s,i,r,a,l,c,u;const d={dictionary:void 0===e?void 0:o.R.parse(e)},h=[{name:"-masu",value:null===(t=d.dictionary)||void 0===t?void 0:t.masuForm()},{name:"-mashou",value:null===(s=d.dictionary)||void 0===s?void 0:s.mashouForm()},{name:"dictionary",value:d.dictionary},{name:"-nai",value:null===(i=d.dictionary)||void 0===i?void 0:i.naiForm()},{name:"-saseru",value:null===(r=d.dictionary)||void 0===r?void 0:r.saseruForm()},{name:"-te",value:null===(a=d.dictionary)||void 0===a?void 0:a.teForm()},{name:"-ta",value:null===(l=d.dictionary)||void 0===l?void 0:l.taForm()},{name:"-chatta",value:null===(c=d.dictionary)||void 0===c?void 0:c.chattaForm()},{name:"-reru",value:null===(u=d.dictionary)||void 0===u?void 0:u.reruForm()}];if(void 0===e)return h.map((e=>({name:e.name})));{const e=h.filter((e=>null!==e.value));let t=[];return n&&n.length>0&&(t=n.reduce(((n,t)=>{const s=e.find((e=>e.name===t));return void 0!==s&&(n=[...n,s]),n}),[])),0===t.length&&(t=e),t}}function k(e,n){const t=y(e).find((e=>e.name===n));if(!t)throw new Error("Invalid targetForm");return t.value}function N(e,n,t,i,a){var l;const c=!e;let u,d=[],h=!1,g=!1;n.constructor.name===o.R.name&&"isExceptionVerb"in n&&(h=n.isExceptionVerb()||3===n.getVerbClass(),g=n.isIntransitive(),u=null!==(l=n.getTransitivePair())&&void 0!==l?l:n.getIntransitivePair());const p=n.isNaAdj(),v=n.isSlang(),f=n.isKeigo(),m=null==a?void 0:a.inverse;if(c&&(g||u)){let e;if(void 0!==u&&"function"==typeof i){const n=u;e=()=>{i(n)}}d=[...d,(0,s.jsx)("span",{className:r()({clickable:u,"question-color":u}),onClick:e,children:g?"intr":"trans"},d.length+1)]}if(c&&v&&(d=[...d,(0,s.jsx)("span",{children:"slang"},d.length+1)]),c&&f&&(d=[...d,(0,s.jsx)("span",{children:"keigo"},d.length+1)]),h&&d.length>0&&(d=[(0,s.jsx)("span",{children:"*"},d.length+1),...d]),c&&void 0!==m){let e;"function"==typeof i&&(e=()=>{i(m)}),d=[...d,(0,s.jsx)("span",{className:r()({clickable:m,"question-color":m}),onClick:e,children:"inv"},d.length+1)]}let j;return j=d.length>0?(0,s.jsxs)("span",{children:[t,p&&(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,s.jsxs)("span",{className:"fs-5",children:[(0,s.jsx)("span",{children:" ("}),d.reduce(((e,n,t)=>{if(t>0&&t<d.length){const i=(0,s.jsx)("span",{children:" , "},d.length+t);return[...e,i,n]}return[...e,n]}),[]),(0,s.jsx)("span",{children:")"})]})]}):h?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{children:[" ","*"]})]}):p?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t,j}function S(e,n,t,i,a){var l;let c,u=[],d=!1;n.constructor.name===o.R.name&&"isExceptionVerb"in n&&(d=n.isIntransitive(),c=null!==(l=n.getTransitivePair())&&void 0!==l?l:n.getIntransitivePair());const h=n.isSlang(),g=n.isKeigo();if(e&&(d||c)){let e;if(void 0!==c&&"function"==typeof i){const n=c;e=()=>{i(n)}}u=[...u,(0,s.jsx)("span",{className:r()({clickable:c,"question-color":c}),onClick:e,children:d?"intr":"trans"},u.length+1)]}e&&h&&(u=[...u,(0,s.jsx)("span",{children:"slang"},u.length+1)]),e&&g&&(u=[...u,(0,s.jsx)("span",{children:"keigo"},u.length+1)]);const p=null==a?void 0:a.inverse,v=null==a?void 0:a.polite;if(e&&void 0!==p){let e;"function"==typeof i&&(e=()=>{i(p)}),u=[...u,(0,s.jsx)("span",{className:r()({clickable:p,"question-color":p}),onClick:e,children:"inv"},u.length+1)]}let f;return e&&v&&(u=[...u,(0,s.jsx)("span",{children:"polite"},u.length+1)]),f=u.length>0?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{className:"fs-5",children:[(0,s.jsx)("span",{children:" ("}),u.reduce(((e,n,t)=>{if(t>0&&t<u.length){const i=(0,s.jsx)("span",{children:" , "},u.length+t);return[...e,i,n]}return[...e,n]}),[]),(0,s.jsx)("span",{children:")"})]})]}):t,f}function T(e,n,t,s,i){let r,a,o,l;return e?(r=n,a=t,o=s,l=i):(r=t,a=n,o=i,l=s),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:l}}function R(e){return e.grp&&""!==e.grp?(0,s.jsx)("span",{className:"hint",children:e.grp+(e.subGrp?", "+e.subGrp:"")}):void 0}function C(e){const n=e.getPronunciation().slice(1,2);let t;return t=(0,l.BM)(n)?e.getHint(l.Ot,c.AG,3,2):e.getHint(l.Ot,c.AG,3,1),t}function O(e){let{uid:n}=e;if(!n)throw console.warn(JSON.stringify(e)),new Error("Missing uid");return e.form&&(n+="dictionary"!==e.form?e.form.replace("-","."):""),n}function A(e,n,t,s){var i;return{furigana:{show:!(!1===(null===(i=null==n?void 0:n[e])||void 0===i?void 0:i.f)),toggle:!1===t&&"function"==typeof s?s:void 0}}}function D(e,{signal:n},t){return new Promise(((s,i)=>{const r=()=>{clearTimeout(o),clearInterval(a),i(new Error("Aborted"))},a="function"==typeof t?setInterval(t,200,200,e):-1,o=setTimeout((()=>{null==n||n.removeEventListener("abort",r),clearInterval(a),s()}),e);(null==n?void 0:n.aborted)&&r(),null==n||n.addEventListener("abort",r)}))}function E(e,n,t,{signal:s}){return new Promise(((i,r)=>{const a=()=>{clearTimeout(o);const e=new Error("User interrupted loop.",{cause:{code:"UserAborted"}});r(e)},o=setTimeout((()=>{e>0?n().then((()=>E(e-1,n,t,{signal:s}).then((()=>{null==s||s.removeEventListener("abort",a),i()})))).catch((e=>{r(e)})):(null==s||s.removeEventListener("abort",a),i())}),t);(null==s?void 0:s.aborted)&&a(),null==s||s.addEventListener("abort",a)}))}function M(e,n,t){var s,i;const r=null===(s=e.acceleration)||void 0===s?void 0:s.y,a=null===(i=e.acceleration)||void 0===i?void 0:i.z;if(null==r||null==a)throw new Error("Device does not support DeviceMotionEvent",{cause:{code:"DeviceMotionEvent"}});{const e=Math.sqrt(r*r+a*a);e>n&&"function"==typeof t&&t(e)}}function P(e,n){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((n=>{"granted"===n&&e()})).catch(n):e()}},9815:(e,n,t)=>{t.d(n,{AF:()=>r,BE:()=>u,BM:()=>l,C5:()=>h,F8:()=>g,IE:()=>c,Ot:()=>v,Vj:()=>d,dv:()=>p,f_:()=>a,xn:()=>o});var s=t(5893),i=(t(7294),t(6954));function r(e){return new RegExp("[一-龯㐀-䶿々]").test(e)}function a(e){return new RegExp("[ぁ-ゟ]").test(e)}function o(e){return new RegExp("[゠-ヿ]").test(e)}function l(e){return new RegExp("^[ゃャゅュょョ]$").test(e)}function c(e){return new RegExp("[０-９]").test(e)}function u(e){return new RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(e)}function d(e){let n=e;if(a(e)){const t=e.codePointAt(0);if(t){const e=t+96;n=String.fromCharCode(e)}}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96;n=String.fromCharCode(e)}}return n}function h(e){let n;switch(e){case"は":n="wa";break;case"には":n="niwa";break;case"を":n="o";break;case"って":n="tte";break;default:n=e.split("").map((e=>function(e){let n=e;if(a(e)){const{iConsonant:t,iVowel:s}=p(e);n=i.sH[t]+i.Be[s]}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96,s=String.fromCharCode(e),{iConsonant:r,iVowel:a}=p(s);n=i.sH[r]+i.Be[a]}}return n}(e))).join("")}return n}function g(e){let n=Number.NaN;if(c(e)){const t=e.codePointAt(0);if(t){const e=t-65249;n=Number.parseInt(String.fromCharCode(e))}}return n}function p(e){const n=i.Bw;let t=-1,s=-1;return" "===e||""===e?{iConsonant:t,iVowel:s}:"ん"===e?{iConsonant:15,iVowel:s}:(n.some(((n,i)=>n.some(((n,r)=>(n===e&&(t=i,s=r),n===e))))),{iConsonant:t,iVowel:s})}function v(e,n,t){return(0,s.jsxs)("span",{className:"hint",children:[(0,s.jsx)("span",{className:e.shown,children:n.slice(0,t)}),(0,s.jsx)("span",{className:e.hidden,children:n.slice(t)})]})}},3996:(e,n,t)=>{t.d(n,{AG:()=>a,je:()=>o,re:()=>c,tn:()=>l,v5:()=>u});var s=t(5893),i=t(4184),r=t.n(i);function a(e,n,t,i,r,a=1){const o=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},i){let r,a,o=i;return n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]),n.reduce(((i,l,c)=>{const u=Math.trunc(n[c].length/e[c].length);if(o>0)if(s)if(r=t[c],a=n[c],r.length<=o){let n;o-=r.length;let t=o;a.length<=o?(o-=a.length,n=e[c].length,t=a.length):(n=Math.ceil(o/u),o=0),i=[...i,{k:n,f:t,o:r.length}]}else i=[...i,{k:0,f:0,o}],o=0;else if(r=n[c],a=t[c],r.length<=o){let n;o-=r.length,a.length<o?(o-=a.length,n=a.length):(n=o,o=0),i=[...i,{k:e[c].length,f:r.length,o:n}]}else{const e=Math.ceil(o/u);i=[...i,{k:e,f:o,o:0}],o=0}else i=[...i,{k:0,f:0,o:0}];return i}),[])}({kanjis:n,furiganas:t,okuriganas:i,startsWKana:r},a);t.length>i.length?i=[...i,""]:t.length<i.length&&(n=[...n,""],t=[...t,""]);const l=(e,n,t=1)=>n?[(0,s.jsx)("span",{className:e,children:n},t)]:[],c=o.map(((s,a)=>u(a,{sk:s.k>0?l(e.shown,n[a].slice(0,s.k)):[],hk:s.k<n[a].length?l(e.hidden,n[a].slice(s.k)):[]},{sf:s.f>0?l(e.shown,t[a].slice(0,s.f)):[],hf:s.f<t[a].length?l(e.hidden,t[a].slice(s.f)):[]},{so:s.o>0?l(e.shown,i[a].slice(0,s.o)):[],ho:s.o<i[a].length?l(e.hidden,i[a].slice(s.o)):[]},r)));return(0,s.jsx)("span",{className:"hint",children:c})}function o(e){let{kanjis:n,furiganas:t,okuriganas:s}=e;return t.length>s.length?s=[...s,""]:t.length<s.length&&(n=[...n,""],t=[...t,""]),t.map(((e,i)=>({k:n[i].length,f:t[i].length,o:s[i].length})))}function l({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},r,a,l=a+1){const{shown:c,hidden:d}=r,h=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},i,r=i+1){let a=r-i;n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const l=o({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s});let c=[0];return l.map(((e,n)=>{let{k:t,o}=e,l=0,u=0;if(c=[...c,c[n]+t+o],s){if(c[n]+o>i)if(c[n]+o<r){const e=i-(c[n]+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0;if(c[n]+o+t>i)if(c[n]+o+t<r){const e=i-(c[n]+o+t);l=Math.min(t,Math.abs(e)),a-=l}else l=a,a=0}else{if(c[n]+t>i)if(c[n]+t<r){const e=i-(c[n]+t);l=Math.min(t,Math.abs(e)),a-=l}else l=a,a=0;if(c[n]+t+o>i)if(c[n]+t+o<r){const e=i-(c[n]+t+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0}return{k:l,f:0,o:u}}))}({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},a,l);n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const g=(e,n,t=1)=>n?[(0,s.jsx)("span",{className:e,children:n},t)]:[],p=(e,n,t,s)=>{let i=[],r=[];const o=e.length;if(o>0)if(0===n)r=g(c,e);else if(n===o)i=g(d,e),t-=o;else if(n<o)if(t<n)i=g(d,e.slice(0,n)),r=g(c,e.slice(n-o)),t=0;else if(t===n){const n=s,i=a-n,l=i+t;r=[...g(c,e.slice(0,i),n+1),...g(d,e.slice(i,l),n+2),...g(c,e.slice(l,o),n+3)],t=0}else t>n&&(r=g(c,e.slice(0,n)),i=g(d,e.slice(n-o)),t-=n);return{s:r,h:i,spliceLen:t}};let v=l-a,f=[0];const m=h.map(((s,r)=>{const a=e[r].length,o=t[r].length;let l,d;f=[...f,f[r]+o+a],({s:l,h:d,spliceLen:v}=p(e[r],s.k,v,f[r]+(i?o:0)));const h=g(c,n[r]);let m,j;return({s:m,h:j,spliceLen:v}=p(t[r],s.o,v,f[r]+(i?0:a))),u(r,{sk:l,hk:d},{sf:h,hf:[]},{so:m,ho:j},i)}));return(0,s.jsx)("span",{className:"decorated",children:m})}function c(e,n,t=1){return e?[(0,s.jsx)("span",{className:n,children:e},t)]:[]}function u(e,{sk:n,hk:t},{sf:i,hf:a},{so:o,ho:l},c){const u=n.length>0||t.length>0,d=i.length>0||a.length>0,h=o.length>0||l.length>0,g=u&&d&&(0,s.jsxs)("ruby",{children:[n,t,(0,s.jsxs)("rt",{children:[i,a]})]})||void 0,p=h&&(0,s.jsxs)("span",{children:[o,l]})||void 0,v=c?p:g,f=c?g:p,m=r()({"lh-furigana":u&&d})||void 0;return(v||f)&&(0,s.jsxs)("span",{className:m,children:[v,f]},e)||void 0}t(7294)},3859:(e,n,t)=>{t.d(n,{JW:()=>o,xr:()=>l});var s=t(5741),i=t(2647);function r(e,n){var t;if(1===n.length)return e[n[0]];const[s,...i]=n;return r(null!==(t=e[s])&&void 0!==t?t:{},i)}function a(e,n,t){var s;if(1===n.length){const s=n[0];return Object.assign(Object.assign({},e),{[s]:t})}const[i,...r]=n,o=null!==(s=e[i])&&void 0!==s?s:{};return Object.assign(Object.assign({},e),{[i]:a(o,r,t)})}function o(e,n,t,o,c){var u;let d=null!==(u=l(s._))&&void 0!==u?u:{};const h=[...t.split("/").filter((e=>""!==e)),o];void 0===c&&(c=!r(n,h));const g=a(Object.assign({},d),h,c),p=r(g,h);return function(e,n){const{localStorage:t}=(0,i.J)();t.setItem(e,JSON.stringify(n))}(s._,Object.assign(Object.assign({},g),{lastModified:e})),p}function l(e){let n=null;const{localStorage:t}=(0,i.J)(),s=t.getItem(e);let r=null;return null!==s&&(r=JSON.parse(s)),"object"!=typeof r||Array.isArray(r)||null===r||(n=r),n}},4953:(e,n,t)=>{t.d(n,{$h:()=>d,Gx:()=>p,_9:()=>l,fC:()=>h,iR:()=>g});var s=t(4691),i=t.n(s),r=t(5472),a=t.n(r),o=t(5863);const l=.6,c=1,u=2,d=5;function h(e,n,t){let s=[],i=[],r=[],l=[];e.forEach(((e,a)=>{const c=e.uid,u=n[c],d=u&&(0,o.O5)(u.lastView)>0;t>0&&d&&1===u.percentOverdue?(t-=1,r=[...r,{date:u.lastView,views:u.vC,uid:c,index:Number(a)}]):t>0&&d&&(null==u?void 0:u.percentOverdue)?(t-=1,i=[...i,{percentOverdue:u.percentOverdue,uid:c,index:Number(a)}]):(null==u?void 0:u.lastReview)&&0===(0,o.O5)(u.lastReview)?l=[...l,{date:u.lastView,views:u.vC,uid:c,index:Number(a)}]:s=[...s,Number(a)]}));const c=a()(r,["uid"],["asc"]),u=a()(i,["percentOverdue","uid"],["asc","asc"]),d=c.map((e=>e.index)),h=u.map((e=>e.index)),g=l.map((e=>e.index));return{failed:d,overdue:h,notPlayed:s,todayDone:g}}function g(e,n){const t=n[e];if(!t)return;const s=Object.assign(Object.assign({},t),{daysBetweenReviews:void 0,percentOverdue:void 0,consecutiveRight:void 0,lastReview:void 0});return Object.assign(Object.assign({},n),{[e]:s})}function p(e,n){var t,s,r,a,d;const h=null!==(t=n[e])&&void 0!==t?t:{lastView:(new Date).toJSON(),vC:1},{difficulty:g,accuracy:p,daysBetweenReviews:v}=h;if(void 0===g||void 0===p)return{newValue:n,oldValue:n};const f=g/100,m=p/100,j=null!==(a=null!==(s=h.lastReview)&&void 0!==s?s:null===(r=n[e])||void 0===r?void 0:r.lastView)&&void 0!==a?a:(new Date).toJSON(),x=(0,o.O5)(j),{calcDaysBetweenReviews:b,calcPercentOverdue:w}=function({difficulty:e,accuracy:n,daysSinceReview:t,daysBetweenReviews:s}){let r;r="number"==typeof t&&t>0&&"number"==typeof s&&s>0&&n>=l?Math.min(u,t/s):n>=l?u:c;const a=e+i()(r/17*(8-9*n),0,1),o=3-1.7*a;let d;return d="number"==typeof s&&s>0&&n>=l?s*(1+r*(Math.random()<.5?.95:1.05)*(o-1)):1/(1+3*a),{calcDaysBetweenReviews:d,calcPercentOverdue:r}}({difficulty:f,accuracy:m,daysSinceReview:x,daysBetweenReviews:v}),y=m>=l?(null!==(d=h.consecutiveRight)&&void 0!==d?d:0)+1:0,k=(new Date).toJSON(),N=Object.assign(Object.assign({},h),{daysBetweenReviews:b,percentOverdue:w,consecutiveRight:y,lastView:k,lastReview:k});return{newValue:Object.assign(Object.assign({},n),{[e]:N}),oldValue:Object.assign({},n)}}},1059:(e,n,t)=>{function s(e){if(void 0===e)return{tags:[]};const n=e.split(/[\n;]+/),t="[ぁ-ゟ]{1,4}",s=new RegExp("p:"+t+"(,"+t+")*"),i=new RegExp("inv:[a-z0-9]{32}"),r=new RegExp("intr:[a-z0-9]{32}"),a=new RegExp("(i|na)-adj"),o=new RegExp(/\S/);let l,c,u,d,h,g,p,v=[],f=[];return n.forEach((e=>{const n=e.trim();switch(n){case"slang":c=!0;break;case"keigo":u=!0;break;case"EV1":d=1;break;case"intr":h=!0;break;case r.test(n)&&n:g=n.split(":")[1];break;case a.test(n)&&n:p=n.split("-")[0];break;case s.test(n)&&n:f=n.split(":")[1].split(",");break;case i.test(n)&&n:l=n.split(":")[1];break;default:n&&o.test(n)&&(v=0===v.length?[n]:[...v,n])}})),{tags:v,slang:c,keigo:u,exv:d,intr:h,trans:g,adj:p,inverse:l,particles:f}}function i(e){let n={},t=Object.keys(e).map((t=>{const{tags:i,slang:r,keigo:a,exv:o,intr:l,trans:c,adj:u}=s(e[t].tag);if(c){const e=c;n[e]={intr:t,trans:e}}return Object.assign(Object.assign({},e[t]),{uid:t,tag:void 0,tags:i,slang:r,keigo:a,adj:u,exv:o,intr:l,trans:c})}));return t=t.map((e=>n[e.uid]?Object.assign(Object.assign({},e),{intr:n[e.uid].intr}):e)),t}function r(e){const n="grp",t="subGrp";return Object.values(e).reduce(((e,s)=>s[n]?e[s[n]]?s[t]&&!e[s[n]].includes(s[t])?Object.assign(Object.assign({},e),{[s[n]]:[...e[s[n]],s[t]]}):e:s[t]?Object.assign(Object.assign({},e),{[s[n]]:[s[t]]}):Object.assign(Object.assign({},e),{[s[n]]:[]}):Object.assign({},e)),{})}function a(e){const n="tags";let t=[];return e.forEach((e=>{var s;e[n]&&(null===(s=e[n])||void 0===s?void 0:s.length)>0&&(t=[...t,...e[n]])})),Array.from(new Set(t))}t.d(n,{SA:()=>s,by:()=>r,fh:()=>a,yc:()=>i})},3162:(e,n,t)=>{t.d(n,{$t:()=>c,EL:()=>p,J0:()=>u,WU:()=>d,YZ:()=>l,fx:()=>h,rU:()=>v,tq:()=>g});var s=t(5472),i=t.n(s),r=t(6892),a=t(5863),o=t(2850);const l=20,c=70;function u(e,n){let t=[],s=[],r=[];return e.forEach(((e,i)=>{const a=e.uid,o=n[a];if(void 0!==(null==o?void 0:o.difficulty)){const e=Number(o.difficulty);e<l?s=[...s,{difficulty:e,uid:a,index:Number(i)}]:r=[...r,Number(i)]}else t=[...t,Number(i)]})),[...i()(s,["difficulty","uid"],["asc","asc"]).map((e=>e.index)),...t,...r]}function d(e,n,t){return n.filter((n=>{var s;const i=e,r=null===(s=t[n.uid])||void 0===s?void 0:s.difficulty;let a=!1,o=!1;return void 0===r?a=i<0?-1*i>c:i<c:o=i<0?r<-1*i:r>i,a||o}))}function h(e){let n={},t=[];e.forEach(((e,s)=>{n[e.uid]=s,t=[...t,{uid:e.uid,japanese:e.japanese,english:e.english}]}));let s=[],r=[],a=[];return t=i()(t,["japanese"],["asc"]),t.forEach(((e,t)=>{s=[...s,n[e.uid]],a=[...a,{uid:e.uid,label:o.TZ.parse(e).getPronunciation(),idx:-1}],r=[...r,{uid:e.uid,label:e.english.toLowerCase(),idx:t}]})),r=i()(r,["label"],["asc"]),r.forEach(((e,n)=>{a[e.idx]=Object.assign(Object.assign({},a[e.idx]),{idx:n})})),{order:s,jOrder:a,eOrder:r}}function g(e){const n=e.map(((e,n)=>n));return(0,r.Sy)(n),n}function p(e,n){let t=[],s=[];e.forEach(((e,i)=>{const r=e.uid,a=n[r];void 0!==(null==a?void 0:a.lastView)?s=[...s,{date:a.lastView,uid:r,index:Number(i)}]:t=[...t,Number(i)]}));const r=i()(s,["date","uid"],["asc","asc"]).map((e=>e.index));return[...t,...r]}function v(e,n){let t=[],s=[],r=[],a=[],o=[];e.forEach(((e,i)=>{const l=e.uid,c=n[l];if(void 0!==c){if(void 0===c.tpAcc)a=[...a,{date:c.lastView,views:c.vC,uid:l,index:Number(i)}];else if(!0===c.pron){const e=f(c.lastView,c.tpAcc,c.vC),n=m(c.tpPc,c.tpCAvg);s=[...s,{staleness:e,correctness:n,uid:l,index:Number(i)}]}else if(c.tpAcc>=.65){const e=f(c.lastView,c.tpAcc,c.vC),n=m(c.tpPc,c.tpCAvg);o=[...o,{staleness:e,correctness:n,uid:l,index:Number(i)}]}else if(c.tpAcc<.65){const e=f(c.lastView,c.tpAcc,c.vC),n=m(c.tpPc,c.tpCAvg);t=[...t,{staleness:e,correctness:n,uid:l,index:Number(i)}]}}else r=[...r,Number(i)]}));const l=i()(t,["staleness","correctness","uid"],["desc","asc","asc"]),c=i()(s,["staleness","correctness","uid"],["desc","asc","asc"]),u=i()(a,["date","views","uid"],["asc","asc","asc"]),d=i()(o,["staleness","correctness","uid"],["desc","asc","asc"]),h=l.map((e=>e.index)),g=c.map((e=>e.index)),p=u.map((e=>e.index)),v=d.map((e=>e.index));return[...h,...g,...r,...p,...v]}function f(e,n,t=1){let s=Number.MAX_SAFE_INTEGER;return void 0!==e&&n>0&&t>0&&(s=(0,a.O5)(e)*(1/n)*(1/t)),s}function m(e=0,n=0){let t=Number.MIN_SAFE_INTEGER;return e>0&&n>0&&(t=e*(1/n)),t}},7962:(e,n,t)=>{function s(e,n){const[t,s]=e.includes("?")?e.split("?"):[e,""],i=new URLSearchParams(s);for(const[e,t]of Object.entries(n))void 0!==t&&i.append(e,t);return[t,i.toString()].join("?")}t.d(n,{b1:()=>s})},8084:(e,n,t)=>{t.d(n,{P:()=>i});var s=t(743);function i(){const e=(0,s.v9)((({global:e})=>e.debug)),[n,t,i,r,a]=(0,s.v9)((({kana:e})=>{const{hiragana:n,katakana:t,vowels:s,consonants:i,sounds:r}=e;return[n,t,s,i,r]}),(()=>!0)),[o,l,c,u]=(0,s.v9)((({kana:e})=>{const{wideMode:n,easyMode:t,charSet:s,choiceN:i}=e.setting;return[n,t,s,i]}),s.wU);return{debug:e,hiragana:n,katakana:t,vowels:i,consonants:r,sounds:a,choiceN:o?31:u,wideMode:o,easyMode:l,charSet:c}}},6278:(e,n,t)=>{t.d(n,{R:()=>r});var s=t(7294),i=t(743);function r(){const e=(0,i.v9)((({global:e})=>e.swipeThreshold)),{value:n}=(0,i.v9)((({kanji:e})=>e),((e,n)=>e.version===n.version)),t=(0,i.v9)((({kanji:e})=>e.tagObj),i.wU),{repetition:r}=(0,i.v9)((({kanji:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[a,o,l,c,u,d]=(0,i.v9)((({kanji:e})=>{const{reinforce:n,filter:t,ordered:s,memoThreshold:i,choiceN:r,fadeInAnswers:a}=e.setting;return[n,t,s,i,r,a]}),i.wU),h=(0,i.v9)((({kanji:e})=>{const{activeTags:n}=e.setting;return n}),i.wU),g=(0,s.useRef)(a);g.current=a;const p=(0,s.useRef)(o);p.current=o;const v=(0,s.useRef)(l);return v.current=l,{repetition:r,swipeThreshold:e,memoThreshold:c,kanjiList:n,kanjiTagObj:t,activeTags:h,choiceN:u,fadeInAnswers:d,reinforce:g,filterType:p,orderType:v}}},158:(e,n,t)=>{t.d(n,{Q:()=>r});var s=t(7294),i=t(743);function r(){const[e,n,t]=(0,i.v9)((({global:e})=>[e.debug,e.motionThreshold,e.swipeThreshold]),i.wU),{value:r,grpObj:a}=(0,i.v9)((({phrases:e})=>e),((e,n)=>e.version===n.version)),{repetition:o}=(0,i.v9)((({phrases:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),l=(0,i.v9)((({phrases:e})=>{const{englishSideUp:n}=e.setting;return n})),[c,u,d,h]=(0,i.v9)((({phrases:e})=>{const{reinforce:n,filter:t,ordered:s,romaji:i}=e.setting;return[n,t,s,i]}),i.wU),g=(0,i.v9)((({phrases:e})=>{const{activeGroup:n}=e.setting;return n}),i.wU),p=(0,s.useRef)(c);p.current=c;const v=(0,s.useRef)(u);v.current=u;const f=(0,s.useRef)(d);f.current=d;const m=(0,s.useRef)(h);return m.current=h,{englishSideUp:l,repetition:o,debugLevel:e,motionThreshold:n,swipeThreshold:t,phraseList:r,phraseGroups:a,activeGroup:g,reinforce:p,romajiActive:m,filterType:v,sortMethod:f}}},4933:(e,n,t)=>{t.d(n,{Z:()=>r});var s=t(7294),i=t(743);function r(){const[e,n,t]=(0,i.v9)((({global:e})=>[e.debug,e.swipeThreshold,e.motionThreshold]),i.wU),{value:r,grpObj:a}=(0,i.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:o}=(0,i.v9)((({vocabulary:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[l,c,u,d]=(0,i.v9)((({vocabulary:e})=>{const{englishSideUp:n,autoVerbView:t,spaRepMaxReviewItem:s}=e.setting,{verbForm:i}=e;return[n,t,i,s]}),i.wU),[h,g,p,v,f,m,j,x]=(0,i.v9)((({vocabulary:e})=>{const{memoThreshold:n,reinforce:t,filter:s,hintEnabled:i,romaji:r,bareKanji:a,verbColSplit:o,ordered:l}=e.setting;return[n,t,s,i,r,a,o,l]}),i.wU),b=(0,i.v9)((({vocabulary:e})=>{const{verbFormsOrder:n}=e.setting;return n}),i.wU),w=(0,i.v9)((({vocabulary:e})=>{const{activeGroup:n}=e.setting;return n}),i.wU),y=(0,s.useRef)(h);y.current=h;const k=(0,s.useRef)(g);k.current=g;const N=(0,s.useRef)(p);N.current=p;const S=(0,s.useRef)(v);S.current=v;const T=(0,s.useRef)(x);return T.current=x,{englishSideUp:l,autoVerbView:c,verbForm:u,repetition:o,debugLevel:e,swipeThreshold:n,motionThreshold:t,vocabList:r,vocabGroups:a,romajiEnabled:f,bareKanji:m,verbFormsOrder:b,verbColSplit:j,activeGroup:w,spaRepMaxReviewItem:d,reinforce:k,hintEnabled:S,filterType:N,sortMethod:T,memoThreshold:y}}},6989:(e,n,t)=>{t.d(n,{d:()=>i,o:()=>r});var s=t(7294);function i(e){const[n,t]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{let s;return e>0&&(s=setTimeout((()=>{n&&t(!1)}),e)),()=>{e>0&&clearTimeout(s)}})),e>0?[!n,()=>t(!0)]:[void 0,()=>{}]}function r(){const[e,n]=(0,s.useState)(!0);return()=>n(!e)}},9226:(e,n,t)=>{t.d(n,{q:()=>i});var s=t(7294);function i(e,n,t){(0,s.useEffect)((()=>{const s=function(e,n,t){return function(s){const i=[["ArrowRight",()=>e("left")],["ArrowLeft",()=>e("right")],["ArrowUp",()=>e("up")],["ArrowDown",()=>e("down")],[" ",n]];for(const[n,r]of i)if(n===s.key){let s=r;" "!==n&&"function"==typeof t&&(s=t({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[n]||"",(n=>{n?e(n):r()}))),s();break}}}(e,n,t);return document.addEventListener("keydown",s,!0),()=>{document.removeEventListener("keydown",s,!0)}}),[e,n,t])}},6693:(e,n,t)=>{t.d(n,{M:()=>a});var s=t(7294),i=t(743),r=t(8916);function a(e,n){const t=(0,i.v9)((({global:e})=>e.swipeThreshold)),a=(0,s.useRef)({}),o=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const s=function(e,n){return function(t){n.current=(0,r.IY)(t,{verticalSwiping:!0,touchThreshold:e})}}(t,a),i=function(e){return function(n){e.current&&(e.current=(0,r.Si)(n,e.current))}}(a),l=function(e,n,t,s){return function(i){var a;let o=t;const l=i.target,c=Array.from(document.getElementsByClassName("loop-stop-btn")).some((e=>e.contains(l))),u=Array.from(document.getElementsByClassName("loop-no-interrupt")).some((e=>e.contains(l))),d=void 0===(null===(a=e.current.touchObject)||void 0===a?void 0:a.swipeLength)||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!(c||u&&d)){const a=(0,r.Yg)(e.current.touchObject,!0);"function"==typeof s&&(o=s(a,t)),n(i,Object.assign(Object.assign({},e.current),{onSwipe:o}))}}}(a,r.Kd,e,n);o.current&&t>0&&(o.current.addEventListener("touchstart",s),o.current.addEventListener("touchmove",i),o.current.addEventListener("touchend",l));const c=o.current;return()=>{t>0&&(null==c||c.removeEventListener("touchstart",s),null==c||c.removeEventListener("touchmove",i),null==c||c.removeEventListener("touchend",l))}}),[a,t,e,n]),{HTMLDivElementSwipeRef:o}}},4699:(e,n,t)=>{t.d(n,{i:()=>r});var s=t(7294),i=t(2647);function r(){const[e,n]=(0,s.useState)({width:void 0,height:void 0});return(0,s.useEffect)((()=>{const e=(0,i.J)();function t(){n({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",t),t(),()=>e.removeEventListener("resize",t)}),[]),e}},5707:(e,n,t)=>{var s=t(5893),i=t(7294),r=t(745),a=t(743),o=t(9829),l=t(8056),c=t(1659),u=t(8673),d=t(9385),h=t(7988),g=t(7652),p=t(5665);const v=(0,o.hg)("serviceWorker/serviceWorkerRegistered",(()=>{return e=void 0,n=void 0,s=function*(){return"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then((e=>{var n;return null===(n=e.active)||void 0===n?void 0:n.state})):Promise.reject("No Service Worker")},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,t,s})),f=(0,o.oM)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded(e,n){const{newestWords:t}=n.payload;for(let e in t){const{freq:n,dic:s}=t[e];let i=p.jP,r="GET_VOCABULARY";"phrases"===e&&(i=p.kh,r="GET_PHRASES"),console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(`${n.length} new ${e}`)}}},extraReducers:e=>{e.addCase(v.fulfilled,(e=>{e.registered=!0}))}}),{serviceWorkerNewTermsAdded:m}=f.actions,j=f.reducer;var x=t(7186);const b=(0,o.hg)("version/getVersions",(()=>{return e=void 0,n=void 0,s=function*(){return fetch(x.qe.databaseURL+"/lambda/cache.json").then((e=>e.json()))},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,t,s})),w=(0,o.oM)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:e=>{e.addCase(b.fulfilled,((e,n)=>n.payload))}}).reducer;var y=t(7891);const k=(0,o.xC)({reducer:{global:l.ZP,sw:j,version:w,kana:c.ZP,vocabulary:y.ZP,opposite:d.ZP,phrases:g.ZP,kanji:u.ZP,particle:h.ZP}});var N=t(4184),S=t.n(N),T=t(9655),R=t(6335),C=t(5697),O=t.n(C),A=t(4133);function D(e){const n=!0===e.connected,t=(0,a.v9)((({global:t})=>!n&&e.messages?A.x6.DEBUG:t.debug)),r=(0,a.v9)((({global:t})=>!n&&e.messages?e.messages:t.console)),[o,l]=(0,i.useState)(6),[c,u]=(0,i.useState)(0),d=(0,i.useRef)();(0,i.useEffect)((()=>{if(t===A.x6.OFF)u(0);else if(u(0),l(6),void 0!==d.current&&clearTimeout(d.current),n){const e=setTimeout((()=>{l(3),d.current=void 0}),3e3);d.current=Number(e)}}),[n,t,r]);const h=-o-c,g=c>0?-1*c:void 0,p=r.slice(h,g),v=(0,i.useCallback)((()=>{const e=r.length-o>-1?r.length-o:0;if(c<e){l(6),u((e=>e+1)),void 0!==d.current&&clearTimeout(d.current);const e=setTimeout((()=>{l(3),u(0),d.current=void 0}),1e4);d.current=Number(e)}}),[o,c,r]);return(0,s.jsx)("div",{className:S()({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected}),children:p.map((e=>{const n=`${e.time}+${e.msg}+${e.lvl}`,t=S()(Object.assign(Object.assign({"app-sm-fs-xx-small":!0},e.css?{[e.css]:!0}:{}),{"correct-color":e.lvl===A.x6.DEBUG,"question-color":e.lvl===A.x6.WARN,"incorrect-color":e.lvl===A.x6.ERROR}));return(0,s.jsx)("div",{className:t,onClick:v,children:e.msg},n)}))})}D.propTypes={connected:O().bool,messages:O().array};var E=t(8012),M=t(2959),P=t(1540),I=t(4921),L=t(1436),F=t(7625),W=t(8527),V=t(9983),Z=t(3762),G=t(6291),q=t(9406),U=t(6247),_=t(7509);function J(){const e=(0,a.I0)(),n=(0,a.v9)((e=>e.kana.setting.charSet)),[t,r]=(0,i.useState)(!0),[o,l]=(0,i.useState)(0),[u,d]=(0,i.useState)(0),h=(0,i.useCallback)((()=>{t?(r(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(r(!0),document.body.classList.remove("no-scroll"))}),[t]),g=(0,i.useCallback)((e=>{if(e.target){const n=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(n))h();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(n))return h(),!1}}),[h]);let p=(0,i.useMemo)((()=>[{meta:Object.assign(Object.assign({},Z.KanaGameMeta),{label:(0,V.w_)(n,Z.KanaGameMeta.label)}),icon:(0,s.jsx)("div",{className:"not-a-real-icon",children:(0,V.w_)(n,["あ","ア","*"])}),wrap:n=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.c)(e,c.I_),children:n})},{meta:P.OppositesGameMeta,icon:(0,s.jsx)(F.G,{icon:L.ejD,size:"2x"})},{meta:[_.VocabularyMeta,q.PhrasesMeta][o],icon:(0,s.jsx)(F.G,{icon:L.yGG,size:"2x"}),wrap:e=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.k)(l,(e=>(0,V.II)(e,["Vocab","Phrases"]))),children:e})},{meta:I.ParticlesGameMeta,icon:(0,s.jsx)(F.G,{icon:L._zQ,size:"2x"})},{meta:[G.KanjiMeta,E.KanjiGameMeta][u],icon:(0,s.jsx)("div",{className:"not-a-real-icon",children:(0,V.w_)(u,["漢","G"])}),wrap:e=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.k)(d,(e=>(0,V.II)(e,["Kanji","KanjiGame"]))),children:e})},{meta:U.SettingsMeta,icon:(0,s.jsx)(F.G,{icon:L.klh,size:"2x"})}]),[e,n,u,o]);return(0,s.jsx)("div",{className:"navigation",children:(0,s.jsxs)("nav",{className:"my-navbar",children:[(0,s.jsx)(T.rU,{"aria-label":"Home",to:"/"}),(0,s.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:h,children:(0,s.jsxs)("button",{className:S()({"nav-menu-btn":!0,collapsed:t}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,s.jsx)("span",{className:"nav-btn-line"}),(0,s.jsx)("span",{className:"nav-btn-line"}),(0,s.jsx)("span",{className:"nav-btn-line"})]})}),(0,s.jsx)("div",{className:S()({"mobile d-lg-none":!0,collapse:t}),id:"nav-menu-mobile",onClick:g,children:(0,s.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:p.map((e=>(0,s.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,s.jsx)(T.rU,{to:e.meta.location,children:(0,s.jsx)("div",{className:"icon force-collapse mb-2",children:e.icon})}),(0,s.jsx)("div",{className:"caption",children:e.wrap?e.wrap(e.meta.label):e.meta.label})]},`${e.meta.location}`)))})}),(0,s.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,s.jsx)("ul",{className:"d-flex",children:p.map((e=>(0,s.jsx)("li",{children:(0,s.jsx)(T.rU,{className:"desktop-link",to:e.meta.location,children:e.wrap?e.wrap(e.meta.label):e.meta.label})},`${e.meta.location}`)))})})]})})}const $=(0,i.lazy)((()=>t.e(237).then(t.bind(t,8237)))),z=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,9406)))),K=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,7509)))),H=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,1540)))),B=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,3762)))),Y=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,6291)))),X=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,8012)))),Q=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,2959)))),ee=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,4921)))),ne=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,6247)))),te=document.querySelector("#app-container");(0,r.s)(te).render((0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(a.zt,{store:k,children:(0,s.jsx)((function(){const e=(0,a.I0)();(0,i.useEffect)((()=>{e(b()),e((0,l.gK)()),e(v()).then((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(n=>{const t=n.data;t.type===p.L6&&e((0,l.kg)(t.msg,t.lvl,p.L6))}))}))}),[]);const n=(0,a.v9)((({global:e})=>e.darkMode)),t=S()({"d-flex flex-column":!0,"dark-mode":n});return(0,s.jsx)(T.UT,{basename:"/",children:(0,s.jsxs)("div",{id:"page-content",className:t,children:[(0,s.jsx)(D,{connected:!0}),(0,s.jsx)(J,{}),(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{}),children:(0,s.jsxs)(R.Z5,{children:[(0,s.jsx)(R.AW,{path:"/",element:(0,s.jsx)(K,{})}),(0,s.jsx)(R.AW,{path:q.PhrasesMeta.location,element:(0,s.jsx)(z,{})}),(0,s.jsx)(R.AW,{path:_.VocabularyMeta.location,element:(0,s.jsx)(K,{})}),(0,s.jsx)(R.AW,{path:P.OppositesGameMeta.location,element:(0,s.jsx)(H,{})}),(0,s.jsx)(R.AW,{path:Z.KanaGameMeta.location,element:(0,s.jsx)(B,{})}),(0,s.jsx)(R.AW,{path:G.KanjiMeta.location,element:(0,s.jsx)(Y,{})}),(0,s.jsx)(R.AW,{path:E.KanjiGameMeta.location,element:(0,s.jsx)(X,{})}),(0,s.jsx)(R.AW,{path:M.KanjiGridMeta.location,element:(0,s.jsx)(Q,{})}),(0,s.jsx)(R.AW,{path:I.ParticlesGameMeta.location,element:(0,s.jsx)(ee,{})}),(0,s.jsx)(R.AW,{path:U.SettingsMeta.location,element:(0,s.jsx)(ne,{})}),(0,s.jsx)(R.AW,{path:"*",element:(0,s.jsx)($,{})})]})})]})})}),{})})}))},8056:(e,n,t)=>{t.d(n,{zA:()=>R,ZP:()=>O,M4:()=>b,gK:()=>y,kg:()=>C,cv:()=>S,TJ:()=>w,nh:()=>T,In:()=>N});var s=t(9829),i=t(4613),r=t.n(i),a=t(1659),o=t(8673),l=t(9385),c=t(7988),u=t(7652),d=t(4133);function h(){return new Promise(((e,n)=>{"webkitTemporaryStorage"in navigator?navigator.webkitTemporaryStorage.queryUsageAndQuota(((n,t)=>{e({quota:t,usage:n})}),n):null!=navigator.storage&&null!=navigator.storage.estimate?navigator.storage.estimate().then(e).catch(n):n(new Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}}))}))}var g=t(7891),p=t(5665),v=t(5741),f=t(5863),m=t(3859),j=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}))};const x={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},b=(0,s.hg)("setting/getMemoryStorageStatus",((e,n)=>j(void 0,void 0,void 0,(function*(){return function(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then((e=>h().then((({quota:n,usage:t})=>({quota:n,usage:t,persistent:e})))));{const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}}().catch((e=>{if(e instanceof Error)throw n.dispatch(C("Could not get memory storage status",d.x6.WARN)),n.dispatch(C(e.message,d.x6.WARN)),e}))})))),w=(0,s.hg)("setting/setPersistentStorage",((e,n)=>j(void 0,void 0,void 0,(function*(){return function(){const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then((function(n){return n?h().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:void 0}))):navigator.storage.persist().then((function(n){let t;return n?(t="Storage will not be cleared except by explicit user action",h().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:"Storage will not be cleared except by explicit user action"})))):Promise.reject(e)}))})):Promise.reject(e)}().then((e=>{const{warning:t}=e;return t&&n.dispatch(C(t,d.x6.WARN)),e})).catch((e=>{if(e instanceof Error)throw n.dispatch(C("Could not set persistent storage",d.x6.WARN)),n.dispatch(C(e.message,d.x6.WARN)),e}))})))),y=(0,s.hg)("setting/localStorageSettingsInitialized",((e,n)=>{let t=null,s=x;try{t=(0,m.xr)(v._)}catch(e){n.dispatch(C("localStorage not supported"))}return null!==t&&(n.dispatch((0,l.DA)(t.opposite)),n.dispatch((0,u.fN)(t.phrases)),n.dispatch((0,o.QJ)(t.kanji)),n.dispatch((0,a.z7)(t.kana)),n.dispatch((0,c.ok)(t.particle)),n.dispatch((0,g.az)(t.vocabulary)),s=r()(x,Object.assign({},t.global))),s})),k=(0,s.oM)({name:"setting",initialState:x,reducers:{toggleDarkMode(e){const n=new Date;(0,m.JW)(n,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold(e,n){let t=n.payload;const s=new Date;e.swipeThreshold=(0,m.JW)(s,{global:e},"/global/","swipeThreshold",t)},setMotionThreshold(e,n){let t=n.payload;const s=new Date;e.motionThreshold=(0,m.JW)(s,{global:e},"/global/","motionThreshold",t)},debugToggled:{reducer:(e,n)=>{const t=n.payload,s=(0,d.P_)(e.debug+1,Object.values(d.x6),t);e.debug=(0,m.JW)(new Date,{global:e},"/global/","debug",s)},prepare:e=>({payload:e})},logger:{reducer:(e,n)=>{const{debug:t}=e,{msg:s,lvl:i,type:r}=n.payload;if(0!==t&&i<=t){let n;n=r===p.L6?`SW: ${s}`:`UI: ${s}`;const t=e.console.slice(0,-1),a=e.console.slice(-1),o={msg:n,lvl:i,time:Date.now()},l=(0,f.Y3)([...a,o]);if(t.length>100){const n=t.slice(-100);e.console=[...n,...l]}else e.console=[...t,...l]}},prepare:(e,n=d.x6.DEBUG,t="ui_logger_msg")=>({payload:{msg:e,lvl:n,type:t}})}},extraReducers:e=>{e.addCase(y.fulfilled,((e,n)=>{const t=n.payload;return Object.assign({},t)})),e.addCase(b.fulfilled,((e,n)=>{const{quota:t,usage:s,persistent:i}=n.payload;e.memory={quota:t,usage:s,persistent:i}})),e.addCase(w.fulfilled,((e,n)=>{const{quota:t,usage:s,persistent:i}=n.payload;e.memory={quota:t,usage:s,persistent:i}}))}}),{toggleDarkMode:N,setMotionThreshold:S,setSwipeThreshold:T,debugToggled:R,logger:C}=k.actions,O=k.reducer},1659:(e,n,t)=>{t.d(n,{Bs:()=>g,I_:()=>h,PD:()=>v,ZP:()=>f,_S:()=>p,z7:()=>u});var s=t(9829),i=t(4613),r=t.n(i),a=t(4133),o=t(6954),l=t(3859);const c={hiragana:o.Bw,katakana:o.TU,vowels:o.Be,consonants:o.sH,sounds:o.jX,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},u=(0,s.hg)("kana/kanaFromLocalStorage",(e=>e)),d=(0,s.oM)({name:"kana",initialState:c,reducers:{toggleKana(e){const{charSet:n}=e.setting,t=n+1<Object.keys(a.kS).length?n+1:a.kS.HIRAGANA;e.setting.charSet=(0,l.JW)(new Date,{kana:e.setting},"/kana/","charSet",t)},setKanaBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,l.JW)(new Date,{kana:e.setting},"/kana/","choiceN",t)},toggleKanaEasyMode(e){e.setting.easyMode=(0,l.JW)(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode(e){e.setting.wideMode=(0,l.JW)(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:e=>{e.addCase(u.fulfilled,((e,n)=>{const t=n.payload,s=r()(c.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},s)})}))}}),{toggleKana:h,setKanaBtnN:g,toggleKanaEasyMode:p,toggleKanaGameWideMode:v}=d.actions,f=d.reducer},8673:(e,n,t)=>{t.d(n,{EE:()=>T,F$:()=>S,Fc:()=>N,Jg:()=>m,LD:()=>b,Mh:()=>y,QJ:()=>p,Qs:()=>f,SI:()=>k,X8:()=>x,ZP:()=>D,cX:()=>v,cy:()=>R,im:()=>A,ow:()=>O,tk:()=>g,vT:()=>C,vX:()=>w});var s=t(9829),i=t(4613),r=t.n(i),a=t(4133),o=t(7186),l=t(3859),c=t(4953),u=t(1059),d=t(3162);const h={value:[],version:"",tagObj:[],setting:{filter:2,ordered:0,reinforce:!1,memoThreshold:d.YZ,repTID:-1,repetition:{},activeGroup:[],activeTags:[],choiceN:32,fadeInAnswers:!1}},g=(0,s.hg)("kanji/getKanji",((e,n)=>{return t=void 0,s=void 0,r=function*(){var e;const t=null!==(e=n.getState().version.kanji)&&void 0!==e?e:"0";return{value:yield fetch(o.qe.databaseURL+"/lambda/kanji.json",{headers:{"Data-Version":t}}).then((e=>e.json())),version:t}},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r})),p=(0,s.hg)("kanji/kanjiFromLocalStorage",(e=>e)),v=(0,s.hg)("kanji/updateSpaceRepKanji",((e,n)=>{const{uid:t,shouldIncrement:s}=e,i=n.getState().kanji.setting.repetition;return(0,a.pg)(t,i,{count:s,date:!0})})),f=(0,s.hg)("kanji/removeFromSpaceRepetition",((e,n)=>{const{uid:t}=e,s=n.getState().kanji.setting.repetition;return(0,c.iR)(t,s)})),m=(0,s.hg)("kanji/setSpaceRepetitionMetadata",((e,n)=>{const{uid:t}=e,s=n.getState().kanji.setting.repetition;return(0,c.Gx)(t,s)})),j=(0,s.oM)({name:"kanji",initialState:h,reducers:{toggleKanjiActiveTag(e,n){const t=n.payload,{activeTags:s}=e.setting;let i;i=s.includes(t)?s.filter((e=>e!==t)):[...s,t],e.setting.activeTags=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeTags",i)},toggleKanjiActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,a.c0)(i,s);e.setting.activeGroup=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeGroup",r)},toggleKanjiOrdering(e,n){const{ordered:t}=e.setting,s=n.payload,i=[a.vl.DIFFICULTY,a.vl.RANDOM,a.vl.VIEW_DATE,a.vl.RECALL],r=(0,a.P_)(t+1,i,s);e.setting.ordered=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","ordered",r)},addFrequencyKanji(e,n){const t=n.payload,{record:s}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",s)},removeFrequencyKanji(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{record:n}=(0,a.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n),n&&(e.setting.repTID=Date.now(),e.setting.repetition=n)}},setKanjiMemorizedThreshold(e,n){const t=n.payload;e.setting.memoThreshold=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","memoThreshold",t)},setKanjiDifficulty:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setKanjiAccuracy:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{accuracy:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setKanjiBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","choiceN",t)},toggleKanjiFadeInAnswers(e,n){const t=n.payload;e.setting.fadeInAnswers=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","fadeInAnswers",t)},toggleKanjiFilter(e,n){const t=n.payload,{filter:s,reinforce:i}=e.setting,r=(0,a.P_)(s+1,[a.Lx.FREQUENCY,a.Lx.TAGS],t);e.setting.filter=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","filter",r),0!==r&&i&&(e.setting.reinforce=!1)},toggleKanjiReinforcement(e){e.setting.reinforce=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","reinforce")}},extraReducers:e=>{e.addCase(g.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload,i=Object.keys(t).map((e=>{var n,s,i;const{tags:r}=(0,u.SA)(t[e].tag),a="radical"===(null===(n=t[e].grp)||void 0===n?void 0:n.toLowerCase())||r.find((e=>"radical"===e.toLowerCase()));return Object.assign(Object.assign({},t[e]),{uid:e,tag:void 0,tags:r,radical:a?{example:null!==(i=null===(s=t[e].radex)||void 0===s?void 0:s.split(""))&&void 0!==i?i:[]}:void 0})}));e.tagObj=(0,u.fh)(i),e.value=i,e.version=s})),e.addCase(p.fulfilled,((e,n)=>{const t=n.payload,s=r()(h.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})})),e.addCase(v.fulfilled,((e,n)=>{const{record:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",t)})),e.addCase(m.fulfilled,((e,n)=>{const{newValue:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",t)})),e.addCase(f.fulfilled,((e,n)=>{const t=n.payload;t&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",t))}))}}),{toggleKanjiActiveTag:x,toggleKanjiActiveGrp:b,toggleKanjiOrdering:w,addFrequencyKanji:y,removeFrequencyKanji:k,setKanjiMemorizedThreshold:N,setKanjiDifficulty:S,setKanjiAccuracy:T,toggleKanjiFilter:R,toggleKanjiReinforcement:C,setKanjiBtnN:O,toggleKanjiFadeInAnswers:A}=j.actions,D=j.reducer},9385:(e,n,t)=>{t.d(n,{CO:()=>u,Cz:()=>d,DA:()=>l,ZP:()=>g,bt:()=>o,tI:()=>h});var s=t(9829),i=t(7186),r=t(3859),a=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}))};const o=(0,s.hg)("opposite/getOpposite",((e,n)=>a(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=n.getState().version.phrases)&&void 0!==e?e:"0";return fetch(i.qe.databaseURL+"/lambda/opposites.json",{headers:{"Data-Version":t}}).then((e=>e.json().then((e=>({value:e,version:t})))))})))),l=(0,s.hg)("opposite/oppositeFromLocalStorage",(e=>a(void 0,void 0,void 0,(function*(){return e})))),c=(0,s.oM)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1,fadeInAnswers:!1},reducers:{setOppositesARomaji(e){const n=new Date,t={opposite:e};e.aRomaji=(0,r.JW)(n,t,"/opposite/","aRomaji")},setOppositesQRomaji(e){const n=new Date,t={opposite:e};(0,r.JW)(n,t,"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji},toggleOppositeFadeInAnswers(e,n){const t=n.payload;e.fadeInAnswers=(0,r.JW)(new Date,{opposite:e},"/opposite/","fadeInAnswers",t)}},extraReducers:e=>{e.addCase(o.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload;e.value=t,e.version=s})),e.addCase(l.fulfilled,((e,n)=>{const t=n.payload;return Object.assign(Object.assign({},e),t)}))}}),{setOppositesARomaji:u,setOppositesQRomaji:d,toggleOppositeFadeInAnswers:h}=c.actions,g=c.reducer},7988:(e,n,t)=>{t.d(n,{C_:()=>j,ZP:()=>x,aq:()=>g,ok:()=>p,ro:()=>m});var s=t(9829),i=t(4613),r=t.n(i),a=t(8056),o=t(7652),l=t(4133),c=t(2850),u=t(9815),d=t(3859);const h={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1,fadeInAnswers:!1}},g=(0,s.hg)("particle/getParticleGame",((e,n)=>{return t=void 0,s=void 0,r=function*(){const e=n.getState().particle,t=n.getState().phrases.value;if(t.length>0){let s;if(0===e.particleGame.phrases.length){s=v(t);const{errors:e}=s;e&&Object.keys(e).forEach((t=>{n.dispatch((0,a.kg)(`Multiple match ${e[t].japanese}`,l.x6.WARN)),n.dispatch((0,a.kg)(`Particle ${e[t].particle}: ${e[t].times}`,l.x6.WARN))}))}return{game:s}}return n.dispatch((0,o.cC)()).unwrap().then((e=>{const{values:t}=e,s=v(t),{errors:i}=s;return i&&Object.keys(i).forEach((e=>{n.dispatch((0,a.kg)(`Multiple match ${i[e].japanese}`,l.x6.WARN)),n.dispatch((0,a.kg)(`Particle ${i[e].particle}: ${i[e].times}`,l.x6.WARN))})),{phrase:t,game:s}}))},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r})),p=(0,s.hg)("particleGame/particleFromLocalStorage",(e=>e));function v(e){let n,t=[];return{phrases:e.reduce(((e,s)=>{var i;if(s.particles&&(null===(i=s.particles)||void 0===i?void 0:i.length)>0){const i=c.TZ.parse(s).getSpelling();s.particles.forEach((r=>{if(2===i.split(r).length){const n=(0,u.C5)(r),a=i.indexOf(r),o={japanese:r,romaji:n},l={japanese:r,romaji:n,start:a,end:a+r.length};t=[...t,o],e=[...e,{answer:l,question:s,english:s.english,literal:s.lit}]}else n=Object.assign(Object.assign({},null!=n?n:{}),{[s.english]:{japanese:i,particle:r,times:i.split(r).length}})}))}return e}),[]),particles:t,errors:n}}const f=(0,s.oM)({name:"particleGame",initialState:h,reducers:{setParticlesARomaji(e){e.setting.aRomaji=(0,d.JW)(new Date,{particle:e.setting},"/particle/","aRomaji")},toggleParticleFadeInAnswers(e,n){const t=n.payload;e.setting.fadeInAnswers=(0,d.JW)(new Date,{particle:e.setting},"/particle/","fadeInAnswers",t)}},extraReducers:e=>{e.addCase(g.fulfilled,((e,n)=>{const{game:t}=n.payload;t&&(e.particleGame=t)})),e.addCase(p.fulfilled,((e,n)=>{const t=n.payload,s=r()(h.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},s)})}))}}),{setParticlesARomaji:m,toggleParticleFadeInAnswers:j}=f.actions,x=f.reducer},7652:(e,n,t)=>{t.d(n,{Jg:()=>m,Lp:()=>N,OJ:()=>b,Qs:()=>f,ZP:()=>O,cC:()=>g,cz:()=>y,d1:()=>x,f6:()=>w,fN:()=>p,g0:()=>S,gP:()=>R,mW:()=>C,s5:()=>v,vy:()=>k,xH:()=>T});var s=t(9829),i=t(4613),r=t.n(i),a=t(8056),o=t(4133),l=t(7186),c=t(3859),u=t(4953),d=t(1059);const h={value:[],version:"",grpObj:{},setting:{ordered:0,englishSideUp:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},frequency:{uid:void 0,count:0},activeGroup:[],filter:0}};const g=(0,s.hg)("phrase/getPhrase",((e,n)=>{return t=void 0,s=void 0,r=function*(){var e;const t=null!==(e=n.getState().version.phrases)&&void 0!==e?e:"0",s=yield fetch(l.qe.databaseURL+"/lambda/phrases.json",{headers:{"Data-Version":t}}).then((e=>e.json())),i=(0,d.by)(s),{values:r,errors:c}=function(e){let n;return{values:Object.keys(e).map((t=>{let{tags:s,particles:i,inverse:r}=(0,d.SA)(e[t].tag);n=function(e,n){var t;let s,{inverse:i}=(0,d.SA)(n[e].tag),r=i;for(;r&&r!==e;){const{inverse:i}=(0,d.SA)(null===(t=n[r])||void 0===t?void 0:t.tag);i?r=i:(r=void 0,s=[...null!=s?s:[],`Missing inverse pair for ${n[e].japanese}`])}return s}(t,e);const a=function(e){let n={polite:!1};if(e.japanese.endsWith("。")){const[t,s]=e.japanese.split("\n");let i;t.indexOf("。")!==t.lastIndexOf("。")||t.includes("、")?n={polite:!0}:(i=(null==s?void 0:s.endsWith("。"))&&t.endsWith("。")?`${t.slice(0,-1)}\n${s.slice(0,-1)}`:e.japanese.slice(0,-1),n={japanese:i,polite:!0})}return n}(e[t]);return Object.assign(Object.assign(Object.assign({},e[t]),{uid:t,tag:void 0,tags:s,particles:i,inverse:r}),a)})),errors:n}}(s);return c&&c.forEach((e=>{n.dispatch((0,a.kg)(e,o.x6.WARN))})),{version:t,values:r,groups:i}},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r})),p=(0,s.hg)("phrase/phraseFromLocalStorage",(e=>e)),v=(0,s.hg)("phrase/updateSpaceRepPhrase",((e,n)=>{const{uid:t,shouldIncrement:s}=e,i=n.getState().phrases.setting.repetition;return(0,o.pg)(t,i,{count:s,date:!0})})),f=(0,s.hg)("phrase/removeFromSpaceRepetition",((e,n)=>{const{uid:t}=e,s=n.getState().phrases.setting.repetition;return(0,u.iR)(t,s)})),m=(0,s.hg)("phrase/setSpaceRepetitionMetadata",((e,n)=>{const{uid:t}=e,s=n.getState().phrases.setting.repetition;return(0,u.Gx)(t,s)})),j=(0,s.oM)({name:"phrase",initialState:h,reducers:{togglePhrasesFilter(e,n){const t=n.payload,s=[o.Lx.FREQUENCY,o.Lx.GROUP],{filter:i,reinforce:r}=e.setting,a=(0,o.P_)(i+1,s,t);e.setting.filter=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","filter",a),a!==o.Lx.GROUP&&r&&(e.setting.reinforce=!1)},togglePhraseActiveGrp(e,n){const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,o.c0)(i,s);e.setting.activeGroup=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","activeGroup",r)},togglePhrasesReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","reinforce")},setPhraseDifficulty:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,o.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setPhraseAccuracy:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,o.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{accuracy:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},addFrequencyPhrase(e,n){const t=n.payload,{record:s}=(0,o.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",s);let i={uid:t,count:e.setting.frequency.count+1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",i)},removeFrequencyPhrase(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{record:n}=(0,o.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n);let t={uid:s,count:e.setting.frequency.count-1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",t)}},flipPhrasesPracticeSide(e){e.setting.englishSideUp=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","englishSideUp")},togglePhrasesRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering(e,n){const t=[o.vl.RANDOM,o.vl.VIEW_DATE,o.vl.RECALL],s=n.payload,{ordered:i}=e.setting;let r=(0,o.P_)(i+1,t,s);e.setting.ordered=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","ordered",r)}},extraReducers:e=>{e.addCase(g.fulfilled,((e,n)=>{const{version:t,values:s,groups:i}=n.payload;e.grpObj=i,e.value=s,e.version=t})),e.addCase(p.fulfilled,((e,n)=>{const t=n.payload,s=r()(h.setting,t),i=Object.keys(s.repetition).filter((e=>{var n;return!0===(null===(n=s.repetition[e])||void 0===n?void 0:n.rein)}));return s.frequency={uid:void 0,count:i.length},Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})})),e.addCase(v.fulfilled,((e,n)=>{const{record:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t)})),e.addCase(m.fulfilled,((e,n)=>{const{newValue:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t)})),e.addCase(f.fulfilled,((e,n)=>{const t=n.payload;t&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t))}))}}),{flipPhrasesPracticeSide:x,togglePhrasesRomaji:b,togglePhrasesFilter:w,togglePhraseActiveGrp:y,togglePhrasesReinforcement:k,addFrequencyPhrase:N,setPhraseDifficulty:S,setPhraseAccuracy:T,removeFrequencyPhrase:R,togglePhrasesOrdering:C}=j.actions,O=j.reducer},4133:(e,n,t)=>{t.d(n,{Lx:()=>i,P_:()=>l,c0:()=>c,iU:()=>o,kS:()=>a,pg:()=>u,vl:()=>r,x6:()=>s});const s=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),i=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),r=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4,RECALL:5}),a=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),o=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty","Recall"];function l(e,n,t){const s=Math.max(...n);let i=e;if(void 0!==t&&n.includes(t))i=t;else for(;!n.includes(i)||i>s;)i=i+1>s?0:i+1;return i}function c(e,n){const t=Array.from(new Set(e));let s=Array.from(new Set(n));return t.forEach((e=>{const n=!e.includes(".");s=s.includes(e)?s.filter((n=>n!==e)):[...s,e],n&&s.some((n=>n.includes(e+".")))&&(s=s.filter((n=>!n.startsWith(e+"."))))})),s}function u(e,n,t={count:!0,date:!0},s){var i,r;const a=n[e],o=n[e]?Object.assign({},n[e]):void 0,l=null!==(i=null==a?void 0:a.vC)&&void 0!==i?i:-1;let c;c=l>0&&!0===t.count?l+1:l>0&&!1===t.count?l:1;let u={};if(void 0!==s){if(s.toggle){const t=s.toggle.reduce(((t,s)=>{var i,r;let a;return a=["f"].includes(s)?!(!1===(null===(i=n[e])||void 0===i?void 0:i[s])):null===(r=n[e])||void 0===r?void 0:r[s],Object.assign(Object.assign({},t),{[s]:!a})}),{});u=Object.assign(Object.assign({},u),t)}if(void 0!==s.set){const e=Object.keys(s.set).reduce(((e,n)=>{var t;return void 0!==(null===(t=s.set)||void 0===t?void 0:t[n])&&(e=null===s.set[n]?Object.assign(Object.assign({},e),{[n]:void 0}):Object.assign(Object.assign({},e),{[n]:s.set[n]})),e}),{});u=Object.assign(Object.assign({},u),e)}}const d=null==a?void 0:a.lastView,h=void 0!==d&&!1===t.date?d:(new Date).toJSON(),g=Object.assign(Object.assign(Object.assign({},null!==(r=n[e])&&void 0!==r?r:{}),{vC:c,lastView:h}),u);return{record:Object.assign(Object.assign({},n),{[e]:g}),value:g,prevVal:null!=o?o:g}}},7891:(e,n,t)=>{t.d(n,{$u:()=>M,Gy:()=>F,Hi:()=>k,Jg:()=>m,Qs:()=>f,Rz:()=>p,S5:()=>P,Tn:()=>C,VX:()=>A,Vb:()=>E,Wo:()=>v,ZP:()=>G,ZZ:()=>R,_4:()=>L,_n:()=>w,az:()=>j,d1:()=>W,eK:()=>T,gl:()=>O,kT:()=>g,kn:()=>I,oG:()=>D,rZ:()=>b,rg:()=>V,s:()=>Z,sG:()=>S,wf:()=>N,xz:()=>y});var s=t(9829),i=t(4613),r=t.n(i),a=t(4133),o=t(7186),l=t(9983),c=t(3859),u=t(4953),d=t(1059),h=t(3162);const g={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,englishSideUp:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,memoThreshold:h.YZ,reinforce:!1,repTID:-1,repetition:{},spaRepMaxReviewItem:u.$h,activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:(0,l.kf)().map((e=>e.name))}},p=(0,s.hg)("vocabulary/getVocabulary",((e,n)=>{return t=void 0,s=void 0,r=function*(){var e;const t=null!==(e=n.getState().version.vocabulary)&&void 0!==e?e:"0";return{value:yield fetch(o.qe.databaseURL+"/lambda/vocabulary.json",{headers:{"Data-Version":t}}).then((e=>e.json())),version:t}},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((r=r.apply(t,s||[])).next())}));var t,s,i,r})),v=(0,s.hg)("vocabulary/updateSpaceRepWord",((e,n)=>{const{uid:t,shouldIncrement:s}=e,i=n.getState().vocabulary.setting.repetition;return(0,a.pg)(t,i,{count:s,date:!0})})),f=(0,s.hg)("vocabulary/removeFromSpaceRepetition",((e,n)=>{const{uid:t}=e,s=n.getState().vocabulary.setting.repetition;return(0,u.iR)(t,s)})),m=(0,s.hg)("vocabulary/setSpaceRepetitionMetadata",((e,n)=>{const{uid:t}=e,s=n.getState().vocabulary.setting.repetition;return(0,u.Gx)(t,s)})),j=(0,s.hg)("vocabulary/vocabularyFromLocalStorage",(e=>e)),x=(0,s.oM)({name:"vocabulary",initialState:g,reducers:{verbFormChanged:(e,n)=>Object.assign(Object.assign({},e),{verbForm:n.payload}),toggleVocabularyActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,a.c0)(i,s);e.setting.activeGroup=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",r)},furiganaToggled(e,n){const t=n.payload,{record:s}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},toggleVocabularyReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce")},toggleVocabularyOrdering(e,n){const{ordered:t}=e.setting,s=n.payload,i=[a.vl.ALPHABETIC,a.vl.DIFFICULTY,a.vl.GAME,a.vl.RANDOM,a.vl.VIEW_DATE,a.vl.RECALL],r=(0,a.P_)(t+1,i,s);e.setting.ordered=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",r)},flipVocabularyPracticeSide(e){e.setting.englishSideUp=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","englishSideUp")},toggleVocabularyRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji(e){e.setting.bareKanji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint(e){e.setting.hintEnabled=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter(e,n){const t=[a.Lx.FREQUENCY,a.Lx.GROUP],s=n.payload,{filter:i,reinforce:r}=e.setting,o=(0,a.P_)(i+1,t,s);e.setting.filter=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","filter",o),0!==o&&r&&(e.setting.reinforce=!1)},setVerbFormsOrder(e,n){const t=n.payload;e.setting.verbFormsOrder=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",t)},toggleAutoVerbView(e){e.setting.autoVerbView=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit(e,n){const t=n.payload;e.setting.verbColSplit=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",t)},addFrequencyWord(e,n){const t=n.payload,{record:s}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},removeFrequencyWord(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{record:n}=(0,a.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)}},setMemorizedThreshold(e,n){const t=n.payload;e.setting.memoThreshold=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","memoThreshold",t)},setWordDifficulty:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setWordTPCorrect:{reducer:(e,n)=>{var t,s,i;const{uid:r,tpElapsed:a,pronunciation:o}=n.payload,l=e.setting.repetition;let u=1,d=1,h=a;const g=l[r];if(void 0!==g){const e=g.tpPc,n=g.tpAcc,s=null!==(t=g.tpCAvg)&&void 0!==t?t:0;if(void 0!==e&&void 0!==n){u=e+1;const t=e*n;d=(t+1)/u,h=(s*t+a)/(t+1)}}const p=!0===o||null!==(s=null==g?void 0:g.pron)&&void 0!==s&&s,v=Object.assign(Object.assign({},null!==(i=l[r])&&void 0!==i?i:{lastView:(new Date).toJSON(),vC:1}),{pron:p||void 0,tpPc:u,tpAcc:d,tpCAvg:h}),f=Object.assign(Object.assign({},l),{[r]:v});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",f)},prepare:(e,n,{pronunciation:t}={})=>({type:"string",payload:{uid:e,tpElapsed:n,pronunciation:t}})},setWordTPIncorrect:{reducer:(e,n)=>{var t;const{uid:s,pronunciation:i}=n.payload,r=e.setting.repetition;let a=1,o=0;const l=r[s];if(void 0!==l){const e=l.tpPc,n=l.tpAcc;void 0!==e&&void 0!==n&&(a=e+1,o=(e*n+0)/a)}const u=Object.assign(Object.assign({},null!==(t=r[s])&&void 0!==t?t:{lastView:(new Date).toJSON(),vC:1}),{tpPc:a,tpAcc:o,pron:!0===i||void 0}),d=Object.assign(Object.assign({},r),{[s]:u});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",d)},prepare:(e,{pronunciation:n}={})=>({payload:{uid:e,pronunciation:n}})},setSpaRepMaxItemReview(e,n){const t=Math.max(u.$h,n.payload);e.setting.spaRepMaxReviewItem=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","spaRepMaxReviewItem",t)},setWordAccuracy:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{record:i}=(0,a.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{accuracy:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})}},extraReducers:e=>{e.addCase(j.fulfilled,((e,n)=>{const t=n.payload,s=r()(g.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})})),e.addCase(p.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload;e.grpObj=(0,d.by)(t),e.value=(0,d.yc)(t),e.version=s})),e.addCase(v.fulfilled,((e,n)=>{const{record:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)})),e.addCase(m.fulfilled,((e,n)=>{const{newValue:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)})),e.addCase(f.fulfilled,((e,n)=>{const t=n.payload;t&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t))}))}}),{verbFormChanged:b,furiganaToggled:w,removeFrequencyWord:y,setVerbFormsOrder:k,toggleVocabularyOrdering:N,toggleVocabularyActiveGrp:S,toggleAutoVerbView:T,toggleVocabularyFilter:R,toggleVocabularyHint:C,toggleVocabularyReinforcement:O,toggleVocabularyRomaji:A,updateVerbColSplit:D,toggleVocabularyBareKanji:E,flipVocabularyPracticeSide:M,addFrequencyWord:P,setWordDifficulty:I,setMemorizedThreshold:L,setWordTPCorrect:F,setWordTPIncorrect:W,setSpaRepMaxItemReview:V,setWordAccuracy:Z}=x.actions,G=x.reducer},6954:e=>{e.exports=JSON.parse('{"Be":["a","i","u","e","o"],"sH":["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],"Bw":[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],"TU":[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],"jX":{"si":"shi","ti":"chi","tu":"tsu","hu":"fu","zi":"ji","di":"dji","du":"dzu","Na":"n"}}')}},e=>{e.O(0,[913,816,794,931,612,697,555,774,25,104,105,418,642,995,86,220,183,323,593,623,617,216,810,260,303,979,655],(()=>(5707,e(e.s=5707)))),e.O()}]);