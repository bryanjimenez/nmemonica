!function(){var e,t,n,r,i,a,s,l,o,c,u,d,p={8404:function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e"},80324:function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e"},5211:function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e"},82123:function(e,t,n){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e"},46646:function(e,t,n){},11856:function(e,t,n){},95110:function(e,t,n){},75549:function(e,t,n){},60244:function(e,t,n){},77597:function(e,t,n){},68424:function(e,t,n){},71753:function(e,t,n){"use strict";e.exports={vowels:["a","i","u","e","o"],consonants:["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],hiragana:[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],katakana:[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],sounds:{si:"shi",ti:"chi",tu:"tsu",hu:"fu",zi:"ji",di:"dji",du:"dzu",Na:"n"}}},72566:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n("73909"),i=n("2195"),a=n.n(i),s=n("28697"),l=n("43549"),o=n("30220"),c=n("80328"),u=n("49413"),d=n("68051"),p=n("47446"),f=n("83819"),g=n("79053"),h=n("95844"),m=n("24281"),v=n("19998"),y=n("4518"),b=n("5386"),j=n("40694"),x=n("55329"),w=n("22547"),S=n("83712");n("68424");let T=(0,s.lazy)(()=>n.el("58640").then(n.bind(n,"58640"))),k=(0,s.lazy)(()=>n.el("19998").then(n.bind(n,"19998"))),R=(0,s.lazy)(()=>n.el("5386").then(n.bind(n,"5386"))),A=(0,s.lazy)(()=>n.el("47446").then(n.bind(n,"47446"))),N=(0,s.lazy)(()=>n.el("95844").then(n.bind(n,"95844"))),D=(0,s.lazy)(()=>n.el("24281").then(n.bind(n,"24281"))),C=(0,s.lazy)(()=>n.el("49413").then(n.bind(n,"49413"))),M=(0,s.lazy)(()=>n.el("68051").then(n.bind(n,"68051"))),P=(0,s.lazy)(()=>n.el("83819").then(n.bind(n,"83819"))),E=(0,s.lazy)(()=>n.el("4518").then(n.bind(n,"4518")));function F(){let e=(0,l.useDispatch)();(0,s.useEffect)(()=>{e((0,S.getVersions)()),e((0,x.localStorageSettingsInitialized)()),e((0,w.serviceWorkerRegistered)()).then(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{let n=t.data;n.type===j.SERVICE_WORKER_LOGGER_MSG&&e((0,x.logger)(n.msg,n.lvl,j.SERVICE_WORKER_LOGGER_MSG))})})},[]);let t=(0,l.useSelector)(({global:e})=>e.darkMode),n=a({"d-flex flex-column":!0,"dark-mode":t});return(0,r.jsx)(o.HashRouter,{basename:"/",children:(0,r.jsxs)("div",{id:"page-content",className:n,children:[(0,r.jsx)(c.default,{connected:!0}),(0,r.jsx)(g.default,{}),(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{}),children:(0,r.jsxs)(o.Routes,{children:[(0,r.jsx)(o.Route,{path:"/",element:(0,r.jsx)(R,{})}),(0,r.jsx)(o.Route,{path:v.PhrasesMeta.location,element:(0,r.jsx)(k,{})}),(0,r.jsx)(o.Route,{path:b.VocabularyMeta.location,element:(0,r.jsx)(R,{})}),(0,r.jsx)(o.Route,{path:p.OppositesGameMeta.location,element:(0,r.jsx)(A,{})}),(0,r.jsx)(o.Route,{path:h.KanaGameMeta.location,element:(0,r.jsx)(N,{})}),(0,r.jsx)(o.Route,{path:m.KanjiMeta.location,element:(0,r.jsx)(D,{})}),(0,r.jsx)(o.Route,{path:u.KanjiGameMeta.location,element:(0,r.jsx)(C,{})}),(0,r.jsx)(o.Route,{path:d.KanjiGridMeta.location,element:(0,r.jsx)(M,{})}),(0,r.jsx)(o.Route,{path:f.ParticlesGameMeta.location,element:(0,r.jsx)(P,{})}),(0,r.jsx)(o.Route,{path:y.SettingsMeta.location,element:(0,r.jsx)(E,{})}),(0,r.jsx)(o.Route,{path:"*",element:(0,r.jsx)(T,{})})]})})]})})}},24137:function(e,t,n){"use strict";n.r(t),n.d(t,{AccuracySlider:function(){return c}});var r=n("73909"),i=n("5951"),a=n("73959"),s=n.n(a),l=n("28697"),o=n("16391");function c(e){let{resetOn:t}=e,n=(0,l.useRef)(0);n.current=e.accuracy??0;let[a,s]=(0,l.useState)(n.current),c=(0,l.useRef)(!1);(0,l.useEffect)(()=>{c.current=!1,s(n.current)},[t]);let u=[{value:100*o.SR_CORRECT_TRESHHOLD}],[d,p,f]=a>=100*o.SR_CORRECT_TRESHHOLD?[13,110,256]:[255,0,0],g=`rgb(${d},${p},${f},0.25)`,h="rgb(189,189,189,0.25)";return(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,r.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Accuracy"}),(0,r.jsx)(i.Slider,{orientation:"vertical",sx:{color:0!==a&&c.current?g:h},value:a,disabled:a<0,onChange:(e,t)=>{"number"==typeof t&&(c.current=!0,s(t))},onChangeCommitted:(t,n)=>{if(c.current=!0,"function"==typeof e.onChange&&"number"==typeof n){let t=0===n?null:n;e.onChange(t)}},marks:u,valueLabelFormat:e=>e>=100*o.SR_CORRECT_TRESHHOLD?"Correct":"Incorrect"})]})}c.propTypes={accuracy:s.number,onChange:s.func,resetOn:s.string}},28241:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("73909");n("28697");var i=n("73959"),a=n.n(i),s=n("76164"),l=n("39147"),o=n("21106"),c=n("8698");function u(e){let t;let n=e.word;return(0,r.jsx)("div",{className:"clickable",onTouchStart:e.visible?()=>{t=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?()=>{let r=~~(Date.now()-t),i=r<500&&!e.reCache?"":"/override_cache",a=(0,o.addParam)(l.pronounceEndoint+i,n);(0,c.fetchAudio)(a)}:void 0,children:e.visible&&(0,r.jsx)(s.UnmuteIcon,{size:"medium","aria-label":"pronunciation"})})}u.defaultProps={visible:!1},u.propTypes={word:a.shape({tl:a.string.isRequired,q:a.string.isRequired,uid:a.string.isRequired}).isRequired,reCache:a.bool,onPushedPlay:a.func,visible:a.bool}},2450:function(e,t,n){"use strict";n.r(t),n.d(t,{LoopSettingBtn:function(){return d},LoopStartBtn:function(){return p},LoopStopBtn:function(){return f}});var r=n("73909");n("28697");var i=n("2195"),a=n.n(i),s=n("73959"),l=n.n(s),o=n("76164"),c=n("53059"),u=n("16414");function d(e){return e.visible?null:(0,r.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,r.jsx)(o.GitCompareIcon,{className:a({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,r.jsx)("span",{className:"notification",children:e.loop})]})}function p(e){let{className:t}=e;return e.visible?null:(0,r.jsxs)("div",{className:a({"loop-btn loop-start-btn clickable":!0,...t||{}}),"aria-label":"Loop start button",children:[(0,r.jsx)(c.FontAwesomeIcon,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:u.faPlayCircle}),void 0!=e.countDown&&(0,r.jsx)("span",{className:"notification",children:e.countDown})]})}function f(e){let{className:t}=e;return e.visible?null:(0,r.jsx)("div",{className:a({"loop-btn loop-stop-btn clickable":!0,...t||{}}),"aria-label":"Loop stop button",children:(0,r.jsx)(c.FontAwesomeIcon,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:u.faStopCircle})})}d.propTypes={visible:l.bool,active:l.bool,loop:l.number,onClick:l.func},p.propTypes={visible:l.bool,onClick:l.func,className:l.object,countDown:l.number},f.propTypes={visible:l.bool,onClick:l.func,className:l.object}},80328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n("73909"),i=n("2195"),a=n.n(i),s=n("73959"),l=n.n(s),o=n("28697"),c=n("43549"),u=n("35225");function d(e){let t=!0===e.connected,n=(0,c.useSelector)(({global:n})=>!t&&e.messages?u.DebugLevel.DEBUG:n.debug),i=(0,c.useSelector)(({global:n})=>!t&&e.messages?e.messages:n.console),[s,l]=(0,o.useState)(6),[d,p]=(0,o.useState)(0),f=(0,o.useRef)();(0,o.useEffect)(()=>{if(n===u.DebugLevel.OFF)p(0);else if(p(0),l(6),void 0!==f.current&&clearTimeout(f.current),t){let e=setTimeout(()=>{l(3),f.current=void 0},3e3);f.current=Number(e)}},[t,n,i]);let g=-s-d,h=d>0?-1*d:void 0,m=i.slice(g,h),v=(0,o.useCallback)(()=>{let e=i.length-s>-1?i.length-s:0;if(d<e){l(6),p(e=>e+1),void 0!==f.current&&clearTimeout(f.current);let e=setTimeout(()=>{l(3),p(0),f.current=void 0},1e4);f.current=Number(e)}},[s,d,i]);return(0,r.jsx)("div",{className:a({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected,"text-break":!0}),children:m.map(e=>{let t=`${e.time}+${e.msg}+${e.lvl}`,n=a({"app-sm-fs-xx-small":!0,...e.css?{[e.css]:!0}:{},"correct-color":e.lvl===u.DebugLevel.DEBUG,"question-color":e.lvl===u.DebugLevel.WARN,"incorrect-color":e.lvl===u.DebugLevel.ERROR});return(0,r.jsx)("div",{className:n,onClick:v,children:e.msg},t)})})}d.propTypes={connected:l.bool,messages:l.array}},36419:function(e,t,n){"use strict";n.r(t),n.d(t,{DifficultySlider:function(){return u}});var r=n("73909"),i=n("5951"),a=n("73959"),s=n.n(a),l=n("28697"),o=n("19223"),c=n("94978");function u(e){let{resetOn:t}=e,n=(0,l.useRef)(0);n.current=e.difficulty??c.DIFFICULTY_THRLD;let[a,s]=(0,l.useState)(n.current),u=(0,l.useRef)(!1);(0,l.useEffect)(()=>{u.current=!1,s(n.current)},[t]);let d=(0,o.heatMap)(a/100),p="rgb(189,189,189,0.25)",f=[{value:c.MEMORIZED_THRLD},{value:c.DIFFICULTY_THRLD}];return(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,r.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Difficulty"}),(0,r.jsx)(i.Slider,{orientation:"vertical",sx:{color:0!==a&&u.current?d:p},value:a,onChange:(e,t)=>{"number"==typeof t&&(u.current=!0,s(t))},onChangeCommitted:(t,n)=>{u.current=!0,"function"==typeof e.onChange&&"number"==typeof n&&e.onChange(n)},marks:f,step:10,valueLabelFormat:e=>e>c.DIFFICULTY_THRLD?"Pass":"Fail"})]})}u.propTypes={difficulty:s.number,onChange:s.func,resetOn:s.string}},25148:function(e,t,n){"use strict";n.r(t),n.d(t,{NotReady:function(){return o}});var r=n("73909");n("28697");var i=n("2195"),a=n.n(i),s=n("73959"),l=n.n(s);function o(e){let t=a({[e.addlStyle]:!0,"d-flex flex-column justify-content-around text-center h-100":!0});return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{children:e.text??"Awaiting data ..."})})}o.propTypes={addlStyle:l.string}},28388:function(e,t,n){"use strict";n.r(t),n.d(t,{ToggleFuriganaBtn:function(){return g},ToggleFrequencyTermBtnMemo:function(){return m},ShowHintBtn:function(){return v},ToggleAutoVerbViewBtn:function(){return y},ReCacheAudioBtn:function(){return b},TogglePracticeSideBtn:function(){return j},ToggleLiteralPhraseBtn:function(){return x},TimePlayVerifyBtns:function(){return w}});var r=n("73909"),i=n("69829"),a=n("53059"),s=n("76164"),l=n("2195"),o=n.n(l),c=n("73959"),u=n.n(c),d=n("28697"),p=n.n(d),f=n("6656");function g(e){let{active:t,toggle:n,toggleFurigana:i,vocabulary:a}=e;return!1===e.visible?null:(0,r.jsx)("div",{className:o({clickable:t,"sm-icon-grp":!0,"sm-kanji":t}),onClick:t?()=>i(a.uid):void 0,"aria-label":"Toggle furigana",children:t?(0,r.jsxs)("ruby",{children:["漢",(0,r.jsx)("rt",{className:o({"disabled disabled-color":!n}),children:"ふりがな"})]}):(0,r.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function h(e){let t=(0,d.useRef)(0),{isReinforced:n,addFrequencyTerm:l,removeFrequencyTerm:c,hasReinforce:u,term:p,count:g=t.current}=e,h=(0,f.useForceRender)(),m=t.current===g;return(0,d.useEffect)(()=>{t.current=g,!m&&h()},[g,m,h]),!1===e.visible?null:(0,r.jsxs)("div",{"aria-label":u?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:()=>{u?c(p.uid):l(p.uid)},children:[u?(0,r.jsx)(s.XCircleIcon,{size:"small"}):(0,r.jsx)(s.PlusCircleIcon,{size:"small"}),n?(0,r.jsx)("span",{className:"notification",children:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faDice})}):(0,r.jsx)("span",{className:o({notification:!0,"notification-fade":m}),children:g})]})}g.propTypes={visible:u.bool,active:u.bool,toggle:u.bool,toggleFurigana:u.func,hasFurigana:u.bool,vocabulary:u.object},h.propTypes={visible:u.bool,isReinforced:u.bool,addFrequencyTerm:u.func,removeFrequencyTerm:u.func,hasReinforce:u.bool,term:u.object,count:u.number};let m=(0,d.memo)(h);function v(e){let{active:t,setShowHint:n}=e;return e.visible?(0,r.jsx)("div",{className:o({"sm-icon-grp":!0,clickable:t,"disabled disabled-color":!t}),onClick:t?()=>{n(!0),setTimeout(()=>{n(!1)},1500)}:void 0,"aria-label":t?"Show hint":"Hint unavailable",children:(0,r.jsx)(s.GiftIcon,{size:"small"})}):null}function y(e){let{toggleAutoVerbView:t,autoVerbView:n}=e;return e.visible?(0,r.jsxs)("div",{className:"sm-icon-grp clickable",onClick:()=>t(),"aria-label":"Toggle auto verb view",children:[(0,r.jsx)(a.FontAwesomeIcon,{icon:n?i.faBan:i.faRunning}),(0,r.jsx)("span",{className:"notification",children:(0,r.jsx)(a.FontAwesomeIcon,{icon:n?i.faRunning:i.faBan})})]}):null}function b(e){let{active:t,action:n}=e;return!1===e.visible?null:(0,r.jsx)("div",{className:o({clickable:!0,"sm-icon-grp":!0,"disabled-color":t}),onClick:()=>{"function"==typeof n&&n()},"aria-label":"Override audio",children:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faRecycle})})}function j(e){let{action:t,toggle:n}=e;return!1===e.visible?null:(0,r.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,r.jsx)(a.FontAwesomeIcon,{className:"clickable",onClick:t,icon:n?i.faGlasses:i.faPencilAlt}),(0,r.jsx)("span",{className:"notification",children:(0,r.jsx)(a.FontAwesomeIcon,{icon:n?i.faPencilAlt:i.faGlasses})})]})}function x(e){let{action:t,toggle:n}=e;return e.visible?(0,r.jsx)("div",{className:o({clickable:!0,"sm-icon-grp":!0,"info-color":n}),onClick:()=>{"function"==typeof t&&t()},"aria-label":"Literal english translation",children:(0,r.jsx)(s.ProjectIcon,{size:"small"})}):null}function w(e){return e.visible?(0,r.jsxs)(p.Fragment,{children:[(0,r.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,r.jsx)("span",{className:o({underline:"incorrect"===e.hover}),children:"-1"})},0),(0,r.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,r.jsx)("span",{className:o({underline:"pronunciation"===e.hover||"reset"!==e.hover&&e.prevMissPronu}),children:"P"})},1),(0,r.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,r.jsx)("span",{className:o({underline:"reset"===e.hover}),children:"0"})},2)]}):null}v.propTypes={visible:u.bool,active:u.bool,setShowHint:u.func},y.propTypes={visible:u.bool,active:u.bool,toggleAutoVerbView:u.func,autoVerbView:u.bool},b.propTypes={visible:u.bool,active:u.bool,action:u.func},j.propTypes={visible:u.bool,active:u.bool,toggle:u.bool,action:u.func},x.propTypes={visible:u.bool,active:u.bool,toggle:u.bool,action:u.func},w.propTypes={visible:u.bool,hover:u.string,onClick:u.func,onIncorrect:u.func,onPronunciation:u.func,onReset:u.func,prevMissPronu:u.bool}},29215:function(e,t,n){"use strict";n.r(t),n.d(t,{RecallIntervalPreviewInfo:function(){return c}});var r=n("73909"),i=n("76164"),a=n("73959"),s=n.n(a),l=n("90800"),o=n("16391");function c(e){let{accuracyP:t,difficultyP:n,daysBetweenReviews:a,lastReview:s}=e.metadata??{},c=null,u=null,d=null,p=null;if(t&&n){let e=void 0!==s?(0,l.daysSince)(s):void 0,f=(0,o.calculateDaysBetweenReviews)({accuracy:t/100,difficulty:n/100,daysBetweenReviews:a,daysSinceReview:e});c=void 0!==a?a.toFixed(0):"",u=(0,r.jsx)("span",{children:f.toFixed(0)}),d=(0,r.jsx)("div",{className:"my-2 rotate-90",children:(0,r.jsx)(i.KebabHorizontalIcon,{size:"small","aria-label":"calculated"})}),p=(0,r.jsx)("div",{className:"h-100 d-flex flex-column justify-content-end",children:(0,r.jsx)("span",{className:"rotate-270 w-0 text-nowrap",children:"Interval:    "+c})})}return(0,r.jsxs)("div",{className:"h-100 d-flex flex-column justify-content-center align-items-center",children:[u,d,p]})}c.propTypes={prev:s.object}},17268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("73909"),i=n("28697"),a=n.n(i),s=n("73959"),l=n.n(s),o=n("2195"),c=n.n(o);function u(e){let t,n;e.children&&(t=e.children,n=e.children),e.largeValue&&(t=e.largeValue),e.smallValue&&(n=e.smallValue);let i=void 0!==e.rootClassName&&c(e.rootClassName)||void 0,s=void 0!==e.className&&e.className||{},l="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+c(e.largeClassName):""),o="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+c(e.smallClassName):""),u=()=>{"function"==typeof e.onClick&&e.onClick()},d=[(0,r.jsx)("span",{"data-name":"large",className:c({[l]:!0,...s,clickable:"function"==typeof e.onClick})||void 0,onClick:u,children:t},0),(0,r.jsx)("span",{"data-name":"small",className:c({[o]:!0,...s,clickable:"function"==typeof e.onClick})||void 0,onClick:u,children:n},1)];return!0===e.fragment?(0,r.jsx)(a.Fragment,{children:d}):(0,r.jsx)("div",{className:i,children:d})}u.propTypes={fragment:l.bool,breakPoint:l.string,rootClassName:l.object,className:l.object,largeClassName:l.object,smallClassName:l.object,onClick:l.func,children:l.oneOfType([l.string,l.element]),largeValue:l.oneOfType([l.string,l.element]),smallValue:l.oneOfType([l.string,l.element])}},86742:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("73909");n("28697");var i=n("73959"),a=n.n(i),s=n("5951");function l(e){return(0,r.jsx)(s.Button,{size:"small",className:"MuiButton",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}n("75549"),l.propTypes={action:a.func.isRequired,color:a.string,ariaLabel:a.string.isRequired,children:a.object.isRequired};var o=l},64762:function(e,t,n){"use strict";n.r(t),n.d(t,{Tooltip:function(){return h}});var r=n("73909"),i=n("81409"),a=n("69829"),s=n("53059"),l=n("2195"),o=n.n(l),c=n("73959"),u=n.n(c),d=n("28697"),p=n("2147");n("60244");var f=n("15055"),g=n("5951");function h(e){let{children:t,idKey:n,timeout:l}=e,c=(0,f.useWindowSize)(),[u,h]=(0,d.useState)(!1),m=(0,d.useRef)(null),v=(0,d.useRef)(n),y=(0,d.useRef)(),{x:b,y:j,strategy:x,refs:w,middlewareData:S,update:T}=(0,i.useFloating)({placement:"top",middleware:[(0,i.offset)({mainAxis:8,crossAxis:10}),(0,i.shift)(),(0,i.arrow)({element:m})]});(0,d.useEffect)(()=>{T(),n!==v.current?(v.current=n,h(!1),l&&(clearTimeout(y.current),y.current=void 0)):l&&(-1===y.current?y.current=setTimeout(()=>{h(!1),y.current=void 0},2e3):void 0!==y.current&&(clearTimeout(y.current),y.current=setTimeout(()=>{h(!1),y.current=void 0},2e3)))},[T,c.height,c.width,t,n]);let k=(0,d.useCallback)(()=>{h(!1),void 0!==y.current&&(clearTimeout(y.current),y.current=void 0)},[]),R=(0,d.useCallback)(()=>{h(e=>!e),y.current=-1},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:w.setReference,className:o({"sm-icon-grp":!0}),"aria-label":"Set difficulty",children:[(0,r.jsx)("div",{className:o({"d-inline":!0,clickable:!0,...e.className?{[e.className]:!0}:{}}),onClick:R,children:(0,r.jsx)(s.FontAwesomeIcon,{icon:a.faBullseye})}),e.notification&&(0,r.jsx)("span",{className:"notification",children:e.notification})]}),(0,r.jsx)(g.ClickAwayListener,{onClickAway:k,mouseEvent:!!u&&"onMouseUp",touchEvent:!!u&&"onTouchEnd",children:(0,r.jsxs)(g.Box,{id:"tooltip",ref:w.setFloating,style:{height:"200px",position:x,top:j??0,left:b??0,width:"max-content"},className:o({invisible:!u,"tooltip-fade":!u,[p.TouchSwipeIgnoreCss]:!0,"d-flex":!0}),boxShadow:3,children:[e.children,(0,r.jsx)("div",{ref:m,id:"arrow",style:{position:x,height:8,width:8,bottom:-4,left:8+(S.arrow?.x??0)}})]})})]})}h.propTypes={value:u.number,onChange:u.func,manualUpdate:u.string}},63663:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("73909"),i=n("5951"),a=n("73959"),s=n.n(a),l=n("28697");function o(e){let t=e.list.length-1,[n,a]=(0,l.useState)(()=>Math.min(t,e.initial));return(0,r.jsx)("div",{className:"vocabulary-slider",children:(0,r.jsx)(i.Slider,{defaultValue:n,valueLabelFormat:t=>e.list[t].label,getAriaValueText:t=>e.list[t].label,"aria-label":"Alphabetic quick scroll",step:1,min:0,max:t,valueLabelDisplay:"auto",onChangeCommitted:(t,n)=>{"number"==typeof n&&(e.setIndex(n),a(n))}},n)})}n("77597"),o.propTypes={initial:s.number.isRequired,list:s.array.isRequired,setIndex:s.func.isRequired}},23032:function(e,t,n){"use strict";n.r(t),n.d(t,{FourChoicesWRef:function(){return p}});var r=n("73909"),i=n("76164"),a=n("2195"),s=n.n(a),l=n("28697"),o=n("6656"),c=n("86742");function u(e,t){let[n,a]=(0,l.useReducer)((e,t)=>({...e,...t}),{showMeaning:!1,incorrect:[],correct:!1}),o=(0,l.useRef)(Date.now()),u=(0,l.useRef)(void 0),{gotoNext:p,gotoPrev:f}=e;(0,l.useLayoutEffect)(()=>{!1!==e.fadeInAnswers&&(o.current=Date.now(),u.current=void 0),a({showMeaning:!1,correct:!1,incorrect:[]})},[e.question,e.fadeInAnswers]);let g=(t,r)=>{!n.correct&&(e.isCorrect(t)?(u.current=Date.now(),a({correct:!0,showMeaning:!0})):2===n.incorrect.length?a({incorrect:[...n.incorrect,r],correct:!0,showMeaning:!0}):a({incorrect:[...n.incorrect,r]}))},h=e.question,m=e.choices,v=void 0!==h.english?"[English]":"";void 0===e.hint?n.showMeaning&&h.english&&(v=h.english):v=n.showMeaning&&h.english?h.english:e.hint;let y=void 0===t.current?void 0:t;return(0,r.jsxs)("div",{ref:y,className:"pick4game main-panel h-100 d-flex",children:[(0,r.jsx)(c.default,{ariaLabel:"Previous",action:f,children:(0,r.jsx)(i.ChevronLeftIcon,{size:16})}),(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row row-cols-1 row-cols-sm-2 h-100",children:[(0,r.jsxs)("div",{className:s({"col question d-flex flex-column justify-content-center text-center":!0}),children:[(0,r.jsx)("div",{children:h.toHTML(n.correct)}),(0,r.jsx)("span",{className:s({invisible:!e.qRomaji}),children:h.romaji}),void 0!==v&&(0,r.jsx)("span",{className:"clickable",onClick:()=>{a({showMeaning:!n.showMeaning})},children:v})]}),(0,r.jsx)("div",{className:"col choices d-flex justify-content-around flex-wrap",children:m.map((t,i)=>{let a;let s=e.isCorrect(m[i])&&n.correct,l=n.incorrect.includes(i),c=Math.abs((u.current??Date.now())-o.current);return a=e.fadeInAnswers&&n.correct?s||l||(i+1)*1e3<c?(0,r.jsx)(d,{css:s?void 0:"disabled-color",fadeIn:!1,c:t,i:i,isRight:s,isWrong:l,aRomaji:e.aRomaji},String(o.current)+t.compare):(0,r.jsx)("div",{className:"invisible w-50 h-50 pt-3",children:t.toHTML()},t.compare):(0,r.jsx)(d,{c:t,i:i,isRight:s,isWrong:l,checkAnswer:g,aRomaji:e.aRomaji,fadeIn:e.fadeInAnswers,elapsed:c},String(o.current)+t.compare)})})]})}),(0,r.jsx)(c.default,{ariaLabel:"Next",action:p,children:(0,r.jsx)(i.ChevronRightIcon,{size:16})})]})}function d(e){let{c:t,i:n,isRight:i,isWrong:a,checkAnswer:l,aRomaji:c,fadeIn:u,elapsed:d}=e,p=(n+1)*1e3;if(d){let e=(n+1)*1e3-d;p=e<0?1:e}let[f]=(0,o.useFade)(!1===u?0:p),g=s({"d-flex flex-column justify-content-evenly":!0,"w-50 h-50 pt-3 text-center clickable":!0,"text-break":!0,...e.css?{[e.css]:!0}:{},"correct-color":i,"incorrect-color":a});return(0,r.jsx)("div",{className:g,onClick:()=>{"function"==typeof l&&l(t,n)},children:(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("div",{children:t.toHTML({fadeIn:f})}),i&&(0,r.jsx)("div",{children:t.english}),(0,r.jsx)("span",{className:s({invisible:!c}),children:t.romaji})]})},`${t.compare??""}${t.english??""}${t.japanese??""}`)}let p=(0,l.memo)((0,l.forwardRef)(u));(0,l.memo)(u)},49413:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F},properCase:function(){return I},oneFromList:function(){return L},createEnglishChoices:function(){return O},choiceToHtml:function(){return U},KanjiGameMeta:function(){return E}});var r=n("73909"),i=n("5951"),a=n("2195"),s=n.n(a),l=n("59953"),o=n.n(l),c=n("28697"),u=n("43549"),d=n("30220"),p=n("23032"),f=n("68051"),g=n("3467"),h=n("90800"),m=n("30858"),v=n("72834"),y=n("98947"),b=n("98910"),j=n("94978"),x=n("23150"),w=n("98190"),S=n("663"),T=n("64305"),k=n("55329"),R=n("39160"),A=n("35225"),N=n("72176"),D=n("36419"),C=n("25148"),M=n("28388"),P=n("64762");let E={location:"/kanji-game/",label:"Kanji Game"};function F(){let e=(0,u.useDispatch)(),{kanjiList:t,activeTags:n,repetition:a,fadeInAnswers:l,difficultyThreshold:g,filterType:E,orderType:F,reinforce:I}=(0,x.useConnectKanji)(),V=(0,c.useRef)(g),{vocabList:B}=(0,w.useConnectVocabulary)(),_=(0,c.useRef)(a);_.current=a;let K=(0,c.useRef)([]),[q,G]=(0,c.useState)(0),[W,H]=(0,c.useState)(null);(0,c.useEffect)(()=>{0===t.length&&e((0,R.getKanji)()),0===B.length&&e((0,N.getVocabulary)())},[]);let J=(0,c.useMemo)(()=>{if(0===t.length)return[];if(0===Object.keys(_.current).length&&0===n.length)return t;let e=Object.keys(_.current).reduce((e,t)=>(_.current[t]?.rein===!0&&(e=[...e,t]),e),[]),r=(0,v.termFilterByType)(E.current,t,e,E.current===A.TermFilterBy.TAGS?n:[],void 0);if(I.current&&E.current===A.TermFilterBy.TAGS){let n=r.map(e=>e.uid),i=t.filter(t=>e.includes(t.uid)&&!n.includes(t.uid));r=[...r,...i]}let i=(0,j.difficultySubFilter)(V.current,r,_.current);i.length>0&&(r=i);let a=r.reduce((e,t)=>_.current[t.uid]?.rein===!0?[...e,t.uid]:e,[]);return K.current=a,r},[E,I,V,t,n]),$=(0,c.useMemo)(()=>{let e;let t=_.current;if(0===J.length)return[];switch(F.current){case A.TermSortBy.VIEW_DATE:e=(0,j.dateViewOrder)(J,t);break;case A.TermSortBy.DIFFICULTY:e=(0,j.difficultyOrder)(J,_.current);break;default:e=(0,j.randomOrder)(J)}return e},[F,J]),z=(0,c.useRef)(null),Y=(0,c.useRef)(0),[X,Q]=(0,c.useState)(Date.now()),Z=(0,c.useRef)(Date.now());(0,c.useLayoutEffect)(()=>{let t={selectedIndex:Y.current,reinforcedUID:z.current,lastNext:Z.current};if(W!==t.reinforcedUID||q!==t.selectedIndex){let n=t.reinforcedUID??(0,v.getTermUID)(t.selectedIndex,J,$);if((0,v.minimumTimeForSpaceRepUpdate)(t.lastNext)){let r=(0,v.getTerm)(n,J),i=n!==t.reinforcedUID,a=null!==t.reinforcedUID;e((0,R.updateSpaceRepKanji)({uid:n,shouldIncrement:i})).unwrap().then(t=>{let{value:i,prevVal:s}=t,l=s.lastView??i.lastView,o={[n]:{...i,lastView:l}};(0,h.spaceRepLog)((t,n)=>e((0,k.logger)(t,n)),r,o,{frequency:a})})}Y.current=q,z.current=W}},[e,W,q,J,$]);let ee=(0,c.useMemo)(()=>0===J.length||0===B.length?[]:J.map(e=>{let t=B.reduce((t,n)=>{let r=n.english.includes(e.english),i=n.japanese.includes(e.kanji);if(e.radical&&i&&(0,b.isKatakana)(e.kanji))return t;if(e.radical&&e.radical?.example.length>0){let r=e.radical?.example.filter(e=>n.japanese.includes(e));return r.length>0?[...t,n]:t}return i&&r?t=[n,...t]:i&&(t=[...t,n]),t},[]);return t}),[J,B]),et=(0,c.useCallback)(()=>{let e=J.length,t=(q+1)%e;Z.current=X,Q(Date.now()),Y.current=q,G(t),H(null)},[J,q,X]),en=(0,c.useCallback)(()=>{(0,v.play)(I.current,E.current,K.current,J,_.current,W,e=>{H(e)},et)},[K,J,W,et,I,E]),er=(0,c.useCallback)(()=>{let e;let t=J.length,n=q-1;e=W?q:(t+n)%t,Z.current=X,Q(Date.now()),Y.current=q,G(e),H(null)},[J,q,W,X]),ei=(0,c.useCallback)(t=>{K.current=[...K.current,t],e((0,R.addFrequencyKanji)(t))},[e]),ea=(0,c.useCallback)(t=>{K.current=K.current.filter(e=>e!==t),e((0,R.removeFrequencyKanji)(t))},[e]),{kanji:es,game:el}=(0,c.useMemo)(()=>{let e;if(0===$.length||0===ee.length)return{};let n=W??(0,v.getTermUID)(q,J,$),i=(0,v.getTerm)(n,t);if(null!==W){let t=J.findIndex(e=>e.uid===W);e=-1===t?[]:ee[t]}else e=ee[$[q]];let a=function(e,t,n){let{uid:i,kanji:a,on:l,kun:c}=e,u=O(e,t,n),d=l&&c?2:l||c?3:5,p=o(n,e=>y.JapaneseText.parse(e).getSpelling().length).slice(0,d);return{question:{toHTML:e=>(0,r.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,r.jsx)("div",{className:"position-absolute w-100",children:e&&(0,r.jsxs)("div",{className:"d-flex flex-column fs-4",children:[l&&(0,r.jsxs)("div",{className:s({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,r.jsx)("div",{className:"fs-6",children:y.JapaneseText.parse({japanese:"おんよみ\n音読み"}).toHTML()}),(0,r.jsx)("div",{className:"fs-5",children:l})]},l),c&&(0,r.jsxs)("div",{className:s({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,r.jsx)("div",{className:"fs-6",children:y.JapaneseText.parse({japanese:"くんよみ\n訓読み"}).toHTML()}),(0,r.jsx)("div",{className:"fs-5",children:c})]},c),p.map(t=>(0,r.jsxs)("div",{className:s({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,r.jsx)("div",{className:"fs-5 mw-50 text-break text-start",children:L(t.english)}),(0,r.jsx)("div",{children:y.JapaneseText.parse(t).toHTML()})]},t.uid))]})}),(0,r.jsx)("div",{className:s({"fs-kanji-huge":!0,"position-absolute w-100":!0,"opacity-25":!0,"correct-color":e}),children:(0,r.jsx)("span",{children:a})})]})},answer:i,choices:u.map(e=>({compare:e.uid,toHTML:U(e)}))}}(i,t,e);return{kanji:i,game:a}},[W,t,J,$,q,ee]),eo=(0,c.useCallback)(e=>{switch(e){case"right":er();break;case"left":en()}return Promise.resolve()},[er,en]),{HTMLDivElementSwipeRef:ec}=(0,T.useSwipeActions)(eo);(0,S.useKeyboardActions)(eo,()=>{});let eu=(0,c.useCallback)(e=>e.compare===el?.answer,[el]);if(!el)return(0,r.jsx)(C.NotReady,{addlStyle:"main-panel"});let ed=es&&a[es.uid]?.rein===!0,ep=(q+1)/J.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.FourChoicesWRef,{ref:ec,question:el.question,isCorrect:eu,choices:el.choices,gotoPrev:er,gotoNext:en,fadeInAnswers:l}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start",children:(0,r.jsx)(d.Link,{to:f.KanjiGridMeta.location,children:(0,r.jsx)(M.TogglePracticeSideBtn,{toggle:!0})})})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)(P.Tooltip,{idKey:es.uid,children:(0,r.jsx)(D.DifficultySlider,{difficulty:_.current[es.uid]?.difficultyP,onChange:(0,m.buildAction)(e,e=>(0,R.setKanjiDifficulty)(es.uid,e)),resetOn:es.uid})}),(0,r.jsx)(M.ToggleFrequencyTermBtnMemo,{addFrequencyTerm:ei,removeFrequencyTerm:ea,hasReinforce:ed,term:es,isReinforced:null!==W})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(i.LinearProgress,{variant:"determinate",value:ep,color:ed?"secondary":"primary"})})]})}function I(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function L(e){let t=e,n=e.split(",");if(n.length>1){let e=Math.floor(Math.random()*n.length),r=n[e].trim();t=I(r)}else t=I(e);return t}function O(e,t,n){let r=e=>e.split(",").map(e=>e.trim()),i=r(e.english),a={...e,english:L(e.english)},s=n.reduce((e,t)=>{let n=t.english.split(",").map(e=>e.trim());return[...e,...n]},[]),{firstLetter:l}=V(a.english),o=new Set([...i,...l?[l]:[],...s]),c=[a],u=new Set([e.uid]);for(;c.length<4&&t.length!==u.size;){let e=Math.floor(Math.random()*t.length),n=t[e],i=r(n.english),a=i.reduce((e,t)=>{let{firstLetter:n}=V(t);return n&&(e=[...e,n]),e},[]);if(i.every(e=>!o.has(e))&&(0===a.length||a.every(e=>!o.has(e)))){let e=L(n.english);o.add(e);let{firstLetter:t}=V(e);t&&o.add(t),c=[...c,{...n,english:e}]}u.add(n.uid)}return(0,g.shuffleArray)(c),c}function V(e){let t,n,r,i;if(new RegExp(/^[^a-zA-Z]/).test(e)){let i=new RegExp(/[^a-zA-Z\s]/),a=e.split("").filter(e=>i.test(e));1===a.length&&(r=e.slice(0,1),t=e.slice(1,2),n=e.slice(2))}else e.startsWith("To ")?(i=e.slice(0,3),t=e.slice(3,4),n=e.slice(4)):(t=e.slice(0,1),n=e.slice(1));return{firstLetter:t,restLetters:n,nonAlpha:r,toDo:i}}function U(e){return function(t={}){let{fadeIn:n}=t,i={"notification-fade":void 0!==n?!n:void 0,"notification-fade-in":n},{firstLetter:a,restLetters:l,nonAlpha:o,toDo:c}=V(e.english),u=a?(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)("span",{className:s(i),children:o}),c&&(0,r.jsx)("span",{className:s(i),children:c}),a&&(0,r.jsx)("span",{className:"fw-bold",children:a}),l&&(0,r.jsx)("span",{className:s(i),children:l})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:s(i),children:e.english})});return u}}},68051:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S},createChoices:function(){return T},KanjiGridMeta:function(){return w}});var r=n("73909"),i=n("5951"),a=n("2195"),s=n.n(a),l=n("28697"),o=n("43549"),c=n("30220"),u=n("49413"),d=n("51718"),p=n("3467"),f=n("30858"),g=n("72834"),h=n("94978"),m=n("14243"),v=n("23150"),y=n("39160"),b=n("35225"),j=n("25148"),x=n("28388");let w={location:"/kanji-grid/",label:"Kanji Grid Game"};function S(){let e;let t=(0,o.useDispatch)(),{kanjiList:n,activeTags:a,repetition:p,filterType:S,reinforce:k,choiceN:R}=(0,v.useConnectKanji)();(0,l.useEffect)(()=>{0===n.length&&t((0,y.getKanji)())},[]);let A=(0,l.useRef)(p);A.current=p;let[N,D]=(0,l.useState)([]),[C,M]=(0,l.useState)(0),[P,E]=(0,l.useState)(null),F=(0,l.useRef)(""),[I,L]=(0,l.useState)(!1),O=(0,l.useRef)([]),[V,U]=(0,l.useState)(null),B=(0,l.useMemo)(()=>{if(0===n.length)return[];if(0===Object.keys(A.current).length&&0===a.length)return n;let e=Object.keys(A.current).reduce((e,t)=>(A.current[t]?.rein===!0&&(e=[...e,t]),e),[]),t=(0,g.termFilterByType)(S.current,n,e,S.current===b.TermFilterBy.TAGS?a:[],()=>{});if(k.current&&S.current===b.TermFilterBy.TAGS){let r=t.map(e=>e.uid),i=n.filter(t=>e.includes(t.uid)&&!r.includes(t.uid));t=[...t,...i]}let r=t.reduce((e,t)=>A.current[t.uid]?.rein===!0?[...e,t.uid]:e,[]);return D(r),t},[n,a,k,S]),_=(0,l.useMemo)(()=>(0,h.randomOrder)(B),[B]),K=(0,l.useCallback)(()=>{let e=B.length;M((C+1)%e),E(null),U(null)},[B,C]),q=(0,l.useCallback)(()=>{(0,g.play)(k.current,S.current,N,B,A.current,P,e=>{E(e)},K)},[N,B,P,K,k,S]),G=(0,l.useCallback)(()=>{let e;let t=B.length,n=C-1;M(e=P?C:(t+n)%t),E(null),U(null)},[B,C,P]),W=(0,l.useRef)(-1),{blastElRef:H,anchorElRef:J,text:$,setText:z}=(0,m.useBlast)(),Y=(0,l.useCallback)(e=>{D(t=>[...t,e]),t((0,y.addFrequencyKanji)(e))},[t]),X=(0,l.useCallback)(e=>{D(t=>t.filter(t=>t!==e)),t((0,y.removeFrequencyKanji)(e))},[t]);if(0===_.length)return(0,r.jsx)(j.NotReady,{addlStyle:"main-panel"});let Q=P??(0,g.getTermUID)(C,B,_),Z=(0,g.getTerm)(Q,n);F.current!==Z.uid?(F.current=Z.uid,O.current=T(R,Z,n),e=(0,u.oneFromList)(Z.english)):e=V??(0,u.oneFromList)(Z.english);let ee=function(e,t,n){return function(){if(e?.english.includes(",")){let r=(0,u.oneFromList)(e.english);for(;r===t;)r=(0,u.oneFromList)(e.english);n(r)}}}(Z,e,U),et=function(e,t,n,[i,a]){let{english:l,kanji:o,on:c,kun:u,uid:d}=e,p=i!==l;return{question:{toHTML:e=>n?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:s({"correct-color":e}),children:(0,r.jsx)("span",{children:o})}),(void 0!==c||void 0!==u)&&(0,r.jsxs)("div",{className:s({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,r.jsx)("span",{children:c}),(0,r.jsx)("span",{children:u})]})]}):(0,r.jsx)("div",{onClick:p?a:void 0,children:i+(p?"...":"")})},answer:d,choices:t.map(e=>({compare:e.uid,toString:t=>t??n?e.english:e.kanji,toHTML:({side:t}={})=>(0,r.jsx)(r.Fragment,{children:t??n?e.english:e.kanji})}))}}(Z,O.current,I,[e,ee]),en=function(e,t,n,r,i){return function(a){let s=a.compare===t?.answer,l=t?.choices.findIndex(e=>e.compare===t?.answer)||-1;return!s&&(i.current>-1&&n.length>0?(clearTimeout(i.current),r(""),setTimeout(()=>r(a.toString(!e)),100)):(r(a.toString(!e)),i.current=window.setTimeout(()=>r(""),2500))),[s,l]}}(I,et,$,z,W),er=Z&&p[Z.uid]?.rein===!0,ei=(C+1)/B.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"tooltip-anchor",ref:J}),(0,r.jsx)("div",{ref:H,children:$}),(0,r.jsx)(d.default,{question:et.question,isCorrect:en,choices:et.choices,gotoPrev:G,gotoNext:q}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start",children:(0,r.jsx)(c.Link,{to:I?w.location:u.KanjiGameMeta.location,children:(0,r.jsx)(x.TogglePracticeSideBtn,{toggle:I,action:(0,f.setStateFunction)(L,e=>!e)})})})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)("span",{children:et.question.toHTML(!1)}),(0,r.jsx)(x.ToggleFrequencyTermBtnMemo,{addFrequencyTerm:Y,removeFrequencyTerm:X,hasReinforce:er,term:Z,isReinforced:null!==P})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(i.LinearProgress,{variant:"determinate",value:ei,color:er?"secondary":"primary"})})]})}function T(e,t,n){let r="english",i=e=>e.split(",").map(e=>e.trim()),a=[t],s=i(t[r]),l=new Set([...s]),o=new Set([t.uid]);for(;a.length<e&&n.length!==o.size;){let e=Math.floor(Math.random()*n.length),t=n[e],s=i(t[r]);s.every(e=>!l.has(e))&&(a=[...a,t],s.forEach(e=>{l.add(e)})),o.add(t.uid)}return(0,p.shuffleArray)(a),a}},47446:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v},OppositesGameMeta:function(){return m}});var r=n("73909"),i=n("5951"),a=n("2195"),s=n.n(a),l=n("28697"),o=n("43549"),c=n("23032"),u=n("3467"),d=n("98947"),p=n("94978"),f=n("64305"),g=n("1258"),h=n("25148");let m={location:"/opposites/",label:"Opposites Game"};function v(){let e=(0,o.useDispatch)(),{value:t}=(0,o.useSelector)(({opposite:e})=>e,(e,t)=>e.version===t.version),[n,a,m]=(0,o.useSelector)(({opposite:e})=>{let{qRomaji:t,aRomaji:n,fadeInAnswers:r}=e;return[t,n,r]},o.shallowEqual);(0,l.useEffect)(()=>{0===t.length&&e((0,g.getOpposite)())},[]);let v=(0,l.useMemo)(()=>0===t.length?[]:(0,p.randomOrder)(t),[t]),[y,b]=(0,l.useState)(0),j=(0,l.useCallback)(()=>{let e=t.length,n=(y+1)%e;b(n)},[y,t]),x=(0,l.useCallback)(()=>{let e=t.length,n=y-1;b(n<0?(e+n)%e:n%e)},[y,t]),w=(0,l.useCallback)(e=>{switch(e){case"right":x();break;case"left":j()}return Promise.resolve()},[x,j]),{HTMLDivElementSwipeRef:S}=(0,f.useSwipeActions)(w);if(0===v.length)return(0,r.jsx)(h.NotReady,{addlStyle:"main-panel"});let T=function(e,t,n){let[i,a]=e[t[n]],l=d.JapaneseText.parse(i),o=d.JapaneseText.parse(a),c="fs-2",p={...i,toHTML:e=>(0,r.jsx)("span",{className:s({"fs-1":!0,"correct-color":e}),children:l.toHTML()})},f={...a,compare:a.japanese,toHTML:()=>(0,r.jsx)("span",{className:c,children:o.toHTML()})},g=[f],h=[a.romaji,i.romaji];for(;g.length<4;){let t=Math.floor(Math.random()*e.length),[n,i]=e[t];if(!h.includes(n.romaji)&&!h.includes(i.romaji)){let e=Math.floor(2*Math.random());if(0===e){let e=d.JapaneseText.parse(n);g=[...g,{...n,compare:n.japanese,toHTML:()=>(0,r.jsx)("span",{className:c,children:e.toHTML()})}],h=[...h,n.romaji]}else{let e=d.JapaneseText.parse(i);g=[...g,{...i,compare:i.japanese,toHTML:()=>(0,r.jsx)("span",{className:c,children:e.toHTML()})}],h=[...h,i.romaji]}}}return(0,u.shuffleArray)(g),{question:p,answer:f,choices:g}}(t,v,y),k=(y+1)/t.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.FourChoicesWRef,{ref:S,question:T.question,isCorrect:e=>{let t=e.compare===T.answer.compare;return t},choices:T.choices,qRomaji:n,aRomaji:a,gotoPrev:x,gotoNext:j,fadeInAnswers:m}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(i.LinearProgress,{variant:"determinate",value:k})},1)]})}},83819:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},ParticlesGameMeta:function(){return h}});var r=n("73909"),i=n("5951"),a=n("28697"),s=n("43549"),l=n("23032"),o=n("3467"),c=n("98947"),u=n("95700"),d=n("94978"),p=n("64305"),f=n("88420"),g=n("25148");n("95110");let h={location:"/particles/",label:"Particles Game"};function m(){let e=(0,s.useDispatch)(),{phrases:t,particles:n}=(0,s.useSelector)(({particle:e})=>e.particleGame),[u,h]=(0,s.useSelector)(({particle:e})=>{let{aRomaji:t,fadeInAnswers:n}=e.setting;return[t,n]});(0,a.useEffect)(()=>{0===t.length&&e((0,f.getParticleGame)())},[]);let m=(0,a.useRef)([]),[y,b]=(0,a.useState)(0),j=(0,a.useCallback)(()=>{let e=t.length,n=(y+1)%e;b(n)},[y,t]),x=(0,a.useCallback)(()=>{let e=t.length,n=y-1;b(n<0?(e+n)%e:n%e)},[y,t]),w=function(e,t,n){if(0===t.length||0===n.length)return;0===m.current.length&&(m.current=(0,d.randomOrder)(t));let i=t[m.current[e]],{answer:a,question:s,english:l,literal:u}=i,p={...a,toHTML:()=>(0,r.jsx)(r.Fragment,{children:a.japanese})};n=n.map(e=>({...e,toHTML:()=>(0,r.jsx)(r.Fragment,{children:e.japanese})}));let f=function(e,t){let n="fs-1",i=[{...e,compare:e.japanese,toHTML:()=>(0,r.jsx)("span",{className:n,children:e.japanese})}];for(;i.length<4;){let e=Math.floor(Math.random()*t.length),a=t[e];i.every(e=>e.compare!==a.japanese)&&(i=[...i,{...a,compare:a.japanese,toHTML:()=>(0,r.jsx)("span",{className:n,children:a.japanese})}])}return(0,o.shuffleArray)(i),i}(p,n);return{question:{english:l,toHTML:e=>(0,r.jsx)("div",{className:"fs-1",children:v(c.JapaneseText.parse(s),p,e)})},answer:p,choices:f,literal:u}}(y,t,n),S=(0,a.useCallback)(e=>{switch(e){case"right":x();break;case"left":j()}return Promise.resolve()},[x,j]),{HTMLDivElementSwipeRef:T}=(0,p.useSwipeActions)(S);if(!w)return(0,r.jsx)(g.NotReady,{addlStyle:"main-panel"});let k=(y+1)/t.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.FourChoicesWRef,{ref:T,question:w.question,isCorrect:e=>e.japanese===w.answer.japanese,hint:w.literal,choices:w.choices,aRomaji:u,gotoPrev:x,gotoNext:j,fadeInAnswers:h}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(i.LinearProgress,{variant:"determinate",value:k})})]})}let v=(e,{start:t,end:n},r)=>(0,u.kanjiOkuriganaSpliceApplyCss)(e?.parseObj,{hidden:r?"correct-color":"transparent-font underline"},t,n)},51718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n("73909"),i=n("76164"),a=n("2195"),s=n.n(a),l=n("73959"),o=n.n(l),c=n("28697"),u=n("86742");function d(e){let[t,n]=(0,c.useReducer)((e,t)=>({...e,...t}),{showMeaning:!1,incorrect:[],correct:-1}),a=(0,c.useCallback)(()=>{n({showMeaning:!1,correct:-1,incorrect:[]})},[n]),{isCorrect:l,choices:o,gotoNext:d,gotoPrev:p}=e,f=(e,r)=>{let[i,s]=l(e);i?(n({correct:r,showMeaning:!0}),setTimeout(()=>{a(),d()},1e3)):2===t.incorrect.length?(n({incorrect:[...t.incorrect,r],correct:s,showMeaning:!0}),setTimeout(()=>{a(),d()},2500)):n({incorrect:[...t.incorrect,r]})},g=e=>{let n=o.length,i=t.incorrect.includes(e),a=t.correct===e,l=s({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":a,"incorrect-color":i}),c=s({"mb-0":!0}),u=`${Math.trunc(1/Math.ceil(Math.sqrt(n))*(3/4)*100)}%`;return(0,r.jsx)("div",{onClick:()=>f(o[e],e),className:l,style:{width:u},children:(0,r.jsx)("h2",{className:c,children:o[e].toHTML()})},e)},h=(0,c.useCallback)(()=>{a(),p()},[a,p]),m=(0,c.useCallback)(()=>{a(),d()},[a,d]),v=s({"pickXgame main-panel h-100":!0});return(0,r.jsx)("div",{className:v,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(u.default,{ariaLabel:"Previous",action:h,children:(0,r.jsx)(i.ChevronLeftIcon,{size:16})}),(0,r.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:o.map((e,t)=>g(t))}),(0,r.jsx)(u.default,{ariaLabel:"Next",action:m,children:(0,r.jsx)(i.ChevronRightIcon,{size:16})})]})},0)}d.propTypes={question:o.object,isCorrect:o.func.isRequired,choices:o.array,gotoNext:o.func.isRequired,gotoPrev:o.func.isRequired}},79053:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n("73909"),i=n("69829"),a=n("53059"),s=n("2195"),l=n.n(s),o=n("28697"),c=n("43549"),u=n("30220"),d=n("30858"),p=n("72834"),f=n("22868"),g=n("49413"),h=n("47446"),m=n("83819"),v=n("95844"),y=n("24281"),b=n("19998"),j=n("4518"),x=n("5386");function w(){let e=(0,c.useDispatch)(),t=(0,c.useSelector)(e=>e.kana.setting.charSet),[n,s]=(0,o.useState)(!0),[w,S]=(0,o.useState)(0),[T,k]=(0,o.useState)(0),R=(0,o.useCallback)(()=>{n?(s(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(s(!0),document.body.classList.remove("no-scroll"))},[n]),A=(0,o.useCallback)(e=>{if(e.target){let t=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(t))R();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(t))return R(),!1}},[R]),N=(0,o.useMemo)(()=>[{meta:{...v.KanaGameMeta,label:(0,p.labelOptions)(t,v.KanaGameMeta.label)},icon:(0,r.jsx)("div",{className:"not-a-real-icon",children:(0,p.labelOptions)(t,["あ","ア","*"])}),wrap:t=>(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,d.buildAction)(e,f.toggleKana),children:t})},{meta:h.OppositesGameMeta,icon:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faYinYang,size:"2x"})},{meta:[x.VocabularyMeta,b.PhrasesMeta][w],icon:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faFont,size:"2x"}),wrap:e=>(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,d.setStateFunction)(S,e=>(0,p.toggleOptions)(e,["Vocab","Phrases"])),children:e})},{meta:m.ParticlesGameMeta,icon:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faAtom,size:"2x"})},{meta:[y.KanjiMeta,g.KanjiGameMeta][T],icon:(0,r.jsx)("div",{className:"not-a-real-icon",children:(0,p.labelOptions)(T,["漢","G"])}),wrap:e=>(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,d.setStateFunction)(k,e=>(0,p.toggleOptions)(e,["Kanji","KanjiGame"])),children:e})},{meta:j.SettingsMeta,icon:(0,r.jsx)(a.FontAwesomeIcon,{icon:i.faWrench,size:"2x"})}],[e,t,T,w]);return(0,r.jsx)("div",{className:"navigation",children:(0,r.jsxs)("nav",{className:"my-navbar",children:[(0,r.jsx)(u.Link,{"aria-label":"Home",to:"/"}),(0,r.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:R,children:(0,r.jsxs)("button",{className:l({"nav-menu-btn":!0,collapsed:n}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,r.jsx)("span",{className:"nav-btn-line"}),(0,r.jsx)("span",{className:"nav-btn-line"}),(0,r.jsx)("span",{className:"nav-btn-line"})]})}),(0,r.jsx)("div",{className:l({"mobile d-lg-none":!0,collapse:n}),id:"nav-menu-mobile",onClick:A,children:(0,r.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:N.map(e=>(0,r.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,r.jsx)(u.Link,{to:e.meta.location,children:(0,r.jsx)("div",{className:"icon force-collapse mb-2",children:e.icon})}),(0,r.jsx)("div",{className:"caption",children:e.wrap?e.wrap(e.meta.label):e.meta.label})]},`${e.meta.location}`))})}),(0,r.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,r.jsx)("ul",{className:"d-flex",children:N.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(u.Link,{className:"desktop-link",to:e.meta.location,children:e.wrap?e.wrap(e.meta.label):e.meta.label})},`${e.meta.location}`))})})]})})}n("11856")},95844:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b},usePrepareGame:function(){return x},buildChoiceButton:function(){return w},KanaGameMeta:function(){return y}});var r=n("73909"),i=n("76164"),a=n("2195"),s=n.n(a),l=n("28697"),o=n.n(l),c=n("3467"),u=n("30858"),d=n("98910"),p=n("46726"),f=n("15055"),g=n("35225"),h=n("25148"),m=n("28388"),v=n("86742");let y={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function b(){let{hiragana:e,katakana:t,vowels:n,consonants:a,sounds:c,choiceN:g,wideMode:y,easyMode:b,charSet:j}=(0,p.useConnectKana)(),S=(0,l.useRef)(n),T=(0,l.useRef)(a),k=(0,l.useRef)(c),R=(0,l.useRef)(e),A=(0,l.useRef)(t),N=(0,l.useRef)(y),D=(0,l.useRef)(b),C=(0,l.useRef)(g),[M,P]=(0,l.useState)(0),[E,F]=(0,l.useState)([]),I=(0,l.useState)(!1),L=I[0],O=I[1],{prepareGame:V,setWrongs:U,setCorrect:B,answer:_,correct:K,question:q,wrongs:G,choices:W,gameOrder:H}=x({charSet:j,choiceN:C.current,wideMode:N.current,practiceSide:L,reinforce:E,selectedIndex:M,vowelsR:S,consonantsR:T,soundsR:k,hiraganaR:R,katakanaR:A}),J=(0,l.useCallback)(()=>{let e=H.length,t=(M+1)%e;P(t),U([]),B(!1)},[B,U,H,M]),$=(0,l.useCallback)(()=>{let e=H.length,t=M-1;P(t<0?(e+t)%e:t%e),U([]),B(!1)},[B,U,H,M]),z=function({setCorrect:e,setWrongs:t,setReinforce:n,gotoNext:r,answer:i,choices:a,wrongs:s,reinforce:l,practiceSide:o}){return function(c){if(c.val===i?.val)e(!0),setTimeout(r,500);else{let e=a.findIndex(e=>e.val===c.val);t([...s,e]),n([...l,{...c,practiceSide:o}])}}}({setCorrect:B,setWrongs:U,setReinforce:F,gotoNext:J,practiceSide:L,answer:_,choices:W,wrongs:G,reinforce:E}),{width:Y,height:X}=(0,f.useWindowSize)(),Q=w({checkAnswer:z,charSet:j,practiceSide:L,wrongs:G,choices:W,answer:_,correct:K,isLandscape:!Y||!X||Y>X,wideMode:N.current,easyMode:D.current,choiceN:C.current});if((0,l.useEffect)(()=>{R.current.length>0&&V()},[M,L,j]),!q)return(0,r.jsx)(h.NotReady,{addlStyle:"kana"});let Z=s({"kana main-panel h-100":!0}),ee=s({"choices-row d-flex justify-content-around":!0,"w-100 w-sm-50":!N.current,"w-100 h-100":N.current});return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("div",{className:Z,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between w-100 h-100",children:[(0,r.jsx)(v.default,{ariaLabel:"Previous",action:$,children:(0,r.jsx)(i.ChevronLeftIcon,{size:16})}),(0,r.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-around w-100",children:[!N.current&&(0,r.jsxs)("div",{className:s({"pt-3 d-flex flex-column justify-content-center text-center w-100 w-sm-50 h-100":!0,"correct-color":K}),children:[(0,r.jsx)("h1",{className:"clickable",children:q}),D.current&&!L&&(0,r.jsx)("div",{className:"d-flex justify-content-around",children:(0,r.jsx)("h6",{children:(0,d.swapKana)(q)})})]}),(0,r.jsx)("div",{className:ee,children:(0,r.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:W.map((e,t)=>Q(t))})})]}),(0,r.jsx)(v.default,{ariaLabel:"Next",action:J,children:(0,r.jsx)(i.ChevronRightIcon,{size:16})})]})}),(0,r.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(m.TogglePracticeSideBtn,{toggle:L,action:(0,u.setStateFunction)(O,e=>!e)})}),(0,r.jsx)("div",{className:"col"}),(0,r.jsx)("div",{className:"col"})]})})]})}function j(e){let t;return t=e===g.KanaType.MIXED?Math.floor(2*Math.random()):e}function x({charSet:e,choiceN:t,wideMode:n,vowelsR:r,consonantsR:i,soundsR:a,hiraganaR:s,katakanaR:o,practiceSide:u,reinforce:d,selectedIndex:p}){let[f,h]=(0,l.useState)("undefined"),[m,v]=(0,l.useState)({val:"",hint:"",cSet:g.KanaType.HIRAGANA}),[y,b]=(0,l.useState)([]),[x,w]=(0,l.useState)([]),[S,T]=(0,l.useState)([]),[k,R]=(0,l.useState)(!1),A=(0,l.useCallback)(()=>{let l,f,m;let y=s.current,S=o.current;l=x.length>0?x:function(e){let t=[],n=e[0].length,r=e.length;for(let e=0;e<n;e++)for(let n=0;n<r;n++)(1!==e||12!==n)&&(3!==e||12!==n)&&(2!==e||14!==n)&&(0===e||15!==n)&&(t=[...t,{vowel:e,consonant:n}]);return(0,c.shuffleArray)(t),t}(y);let k=r.current,A=i.current,N=a.current,D=function({vowels:e,consonants:t,sounds:n}){return(r,i)=>{let a=t[r]+e[i];return n[a]||a}}({vowels:k,consonants:A,sounds:N}),C=function({hiragana:e,katakana:t}){return(n,r,i)=>{let a;return a=i===g.KanaType.HIRAGANA?e[n][r]:t[n][r]}}({hiragana:y,katakana:S});if(Math.random()<1/3&&d.length>0){let e=d[d.length-1];if(u===e.practiceSide)m=e;else{let{val:t,hint:n,cSet:r}=e;m={val:n,hint:t,cSet:r}}}else{let{consonant:t,vowel:n}=l[p],r=j(e),i=D(t,n),a=C(t,n,r);m=u?{val:a,hint:i,cSet:r}:{val:i,hint:a,cSet:r}}f=m.hint;let M=function({getPronunciation:e,getKanaCharacter:t,charSet:n,choiceN:r,practiceSide:i},a,s){let l=[a];for(;l.length<r;){let r;let a=s.length,o=Math.floor(Math.random()*(a-0)+0),c=j(n),u=e(s[o].consonant,s[o].vowel),d=t(s[o].consonant,s[o].vowel,c);r=i?{val:d,hint:u,cSet:c}:{val:u,hint:d,cSet:c},(i&&!l.some(e=>e.hint===r.hint)||!i&&!l.some(e=>e.val===r.val))&&(l=[...l,r])}return(0,c.shuffleArray)(l),l}({getPronunciation:D,getKanaCharacter:C,charSet:e,choiceN:t,practiceSide:u},m,l);n&&(M=[...M,{val:f,hint:f,cSet:m.cSet,q:!0}]),h(f),v(m),b(M),w(l),T([]),R(!1)},[e,x,i,r,a,s,o,u,d,p,n,t]);return{prepareGame:A,setWrongs:T,setCorrect:R,answer:m,correct:k,wrongs:S,question:f,choices:y,gameOrder:x}}function w({checkAnswer:e,isLandscape:t,wideMode:n,easyMode:i,charSet:a,practiceSide:l,wrongs:o,choices:c,answer:u,correct:p,choiceN:f}){return function(h){let m;let v=o.includes(h),y=c[h].val===u.val&&p,b=s({clickable:!c[h].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":y||n&&c[h].q&&p,"incorrect-color":v,"question-color":n&&c[h].q&&!p}),j=s({"mb-0":n}),x="d-flex justify-content-around",w=s({"mb-0":!0,invisible:!v}),S=`${Math.trunc(1/Math.ceil(Math.sqrt(f))*(n?t?3/4:4/3:1)*100)}%`,T=!l;return m=i&&(!i||T)?!0!==c[h].q?(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("h6",{className:w,children:c[h].cSet===g.KanaType.HIRAGANA?c[h].hint:(0,d.swapKana)(c[h].hint)}),(0,r.jsx)("h6",{className:w,children:c[h].cSet===g.KanaType.HIRAGANA?(0,d.swapKana)(c[h].hint):c[h].hint})]}):(0,r.jsx)("div",{className:x,children:(0,r.jsx)("h6",{className:"mb-0",children:(0,d.swapKana)(c[h].val)})}):i&&!T&&!0!==c[h].q&&a===g.KanaType.MIXED?(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("h6",{className:w,children:c[h].hint}),(0,r.jsx)("h6",{className:w,children:(0,d.swapKana)(c[h].val)})]}):!0!==c[h].q?(0,r.jsx)("div",{className:x,children:(0,r.jsx)("h6",{className:w,children:c[h].cSet===u.cSet?c[h].hint:(0,d.swapKana)(c[h].hint)})}):(0,r.jsx)("div",{className:x,children:(0,r.jsx)("h6",{className:"mb-0 invisible",children:(0,d.swapKana)(c[h].val)})}),(0,r.jsxs)("div",{onClick:()=>{!c[h].q&&e(c[h])},className:b,style:{width:S},children:[(0,r.jsx)("h2",{className:j,children:c[h].val}),m]},h)}}},24281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V},KanjiMeta:function(){return O}});var r=n("73909"),i=n("81409"),a=n("5951"),s=n("76164"),l=n("2195"),o=n.n(l),c=n("59953"),u=n.n(c),d=n("28697"),p=n.n(d),f=n("43549"),g=n("60661"),h=n("3467"),m=n("90800"),v=n("30858"),y=n("72834"),b=n("98947"),j=n("16391"),x=n("94978"),w=n("23150"),S=n("98190"),T=n("64305"),k=n("15055"),R=n("55329"),A=n("39160"),N=n("35225"),D=n("72176"),C=n("24137"),M=n("36419"),P=n("25148"),E=n("28388"),F=n("29215"),I=n("86742");n("46646");var L=n("64762");let O={location:"/kanji/",label:"Kanji"};function V(){let e=(0,f.useDispatch)(),t=(0,d.useCallback)(t=>{ea(e=>[...e,t]),e((0,A.addFrequencyKanji)(t))},[e]),n=(0,d.useCallback)(t=>{ea(e=>e.filter(e=>e!==t)),e((0,A.removeFrequencyKanji)(t))},[e]),{kanjiList:l,filterType:c,reinforce:O,difficultyThreshold:V,activeTags:U,orderType:B,spaRepMaxReviewItem:_,includeNew:K,includeReviewed:q,repetition:G}=(0,w.useConnectKanji)(),W=(0,d.useRef)(_),H=(0,d.useRef)(V),{vocabList:J}=(0,S.useConnectVocabulary)();(0,d.useEffect)(()=>{0===l.length&&e((0,A.getKanji)()),0===J.length&&e((0,D.getVocabulary)())},[]);let $=(0,d.useRef)(G);$.current=G;let[z,Y]=(0,d.useState)(0),[X,Q]=(0,d.useState)(null),[Z,ee]=(0,d.useState)(Date.now()),et=(0,d.useRef)(Date.now()),en=(0,d.useRef)(null),er=(0,d.useRef)(0),[ei,ea]=(0,d.useState)([]),[es,el]=(0,d.useState)(!1),[eo,ec]=(0,d.useState)(!1),[eu,ed]=(0,d.useState)(!1),[ep,ef]=(0,d.useState)(!1),[eg,eh]=(0,d.useState)([]),em=(0,d.useRef)(),ev=(0,d.useMemo)(()=>{if(0===l.length)return[];if(0===Object.keys($.current).length&&0===U.length)return l;let t=Object.keys($.current).reduce((e,t)=>($.current[t]?.rein===!0&&(e=[...e,t]),e),[]),n=(0,y.termFilterByType)(c.current,l,t,c.current===N.TermFilterBy.TAGS?U:[],(0,v.buildAction)(e,A.toggleKanjiFilter)),r=(0,x.difficultySubFilter)(H.current,n,$.current);switch(r.length>0?n=r:eh(e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:N.DebugLevel.WARN}]),B.current){case N.TermSortBy.RECALL:let{failed:i,overdue:a,overLimit:s}=(0,j.spaceRepetitionOrder)(n,$.current,W.current),o=[...i,...a];o.length>0&&n.length!==o.length&&(n=o.map(e=>n[e]));let u=o.map((e,t)=>{let{accuracyP:r=0,lastReview:i,daysBetweenReviews:a}=$.current[n[t].uid],s=i?(0,m.daysSince)(i):void 0,l=(0,j.getPercentOverdue)({accuracy:r,daysSinceReview:s,daysBetweenReviews:a});return l.toFixed(2).replace(".00","").replace("0.",".")}),d=s.length>0?`+${s.length}`:"";eh(e=>[...e,{msg:`Space Rep 2 (${u.length})${d} [${u.toString()}]`,lvl:0===o.length?N.DebugLevel.WARN:N.DebugLevel.DEBUG}]);break;case N.TermSortBy.VIEW_DATE:!K&&(n=n.filter(e=>$.current[e.uid]?.lastView!==void 0)),!q&&(n=n.filter(e=>$.current[e.uid]?.lastReview===void 0))}let p=n.reduce((e,t)=>($.current[t.uid]?.rein===!0&&(e=[...e,t.uid]),e),[]);return ea(p),n},[e,c,H,B,l,U,K,q]),{order:ey,recallGame:eb}=(0,d.useMemo)(()=>{let e,t;if(0===ev.length)return{order:[]};switch(B.current){case N.TermSortBy.DIFFICULTY:e=(0,x.difficultyOrder)(ev,$.current),eh(t=>[...t,{msg:`Difficulty (${e.length})`,lvl:N.DebugLevel.DEBUG}]);break;case N.TermSortBy.VIEW_DATE:e=(0,x.dateViewOrder)(ev,$.current);let n=0,r=NaN,i=e.map(e=>{let t=$.current[ev[e].uid]?.lastView;return n=t?n:n+1,r=t&&Number.isNaN(r)?(0,m.daysSince)(t):r,t?(0,m.daysSince)(t):0});eh(e=>[...e,{msg:`Date Viewed (${i.length}) New:${n} Old:${r}d`,lvl:N.DebugLevel.DEBUG}]);break;case N.TermSortBy.RECALL:let{failed:a,overdue:s,notPlayed:l,todayDone:o}=(0,j.spaceRepetitionOrder)(ev,$.current),c=[...a,...s];e=c.length>0?c:[...l,...o],t=c.length;break;default:e=(0,x.randomOrder)(ev),eh(t=>[...t,{msg:`Random (${e.length})`,lvl:N.DebugLevel.DEBUG}])}return{order:e,recallGame:t}},[B,ev]),ej=(0,d.useCallback)(()=>{let e=ev.length,t=(z+1)%e;Y(t),er.current=z,et.current=Z,ee(Date.now()),Q(null)},[ev,z,Z]),ex=(0,d.useCallback)(()=>{let e=ev;if(O.current&&c.current===N.TermFilterBy.TAGS){let t=Object.keys(G).reduce((e,t)=>(G[t]?.rein===!0&&(e=[...e,t]),e),[]),n=l.filter(e=>t.includes(e.uid));e=[...ev,...n]}(0,y.play)(O.current,c.current,ei,e,G,X,e=>{en.current=X,Q(e)},ej)},[ej,l,ev,ei,X,G,O,c]),ew=(0,d.useCallback)(()=>{let e=ev.length,t=z-1;Y(t<0?(e+t)%e:t%e),er.current=z,et.current=Z,ee(Date.now()),Q(null)},[ev,z,Z]),eS=(0,d.useCallback)(e=>("left"===e?ex():"right"===e?ew():(el(!0),ec(!0),ed(!0),ef(!0),e),Promise.resolve()),[ex,ew]),{HTMLDivElementSwipeRef:eT}=(0,T.useSwipeActions)(eS),ek=(0,k.useWindowSize)(),eR=ek.width&&ek.height&&!(ek.width>ek.height)?70:0,eA=ek.width?ek.width/2:0,{x:eN,y:eD,strategy:eC,refs:eM,update:eP}=(0,i.useFloating)({placement:"bottom",middleware:[(0,i.offset)({mainAxis:0,crossAxis:0-eA+eR}),(0,i.shift)()]});if((0,d.useEffect)(()=>{eP()},[eP,ek.height,ek.width]),(0,d.useLayoutEffect)(()=>{let t={selectedIndex:er.current,reinforcedUID:en.current,lastNext:et.current};if(X!==t.reinforcedUID||z!==t.selectedIndex){let n=t.reinforcedUID??(0,y.getTermUID)(t.selectedIndex,ev,ey),r=(0,y.getTerm)(n,ev),i=Promise.resolve();$.current[n]?.difficultyP&&em.current?i=e((0,A.setSpaceRepetitionMetadata)({uid:n})):null===em.current&&(i=e((0,A.removeFromSpaceRepetition)({uid:n}))),eb&&eb>0&&z===eb+1&&e((0,R.logger)("No more pending items",N.DebugLevel.DEBUG)),i.then(i=>{if(i&&"payload"in i){let{newValue:t,oldValue:a}=i.payload;(0,j.recallDebugLogHelper)(e,n,t,a,r.english)}if((0,y.minimumTimeForSpaceRepUpdate)(t.lastNext)){let i=n!==t.reinforcedUID,a=null!==t.reinforcedUID;e((0,A.updateSpaceRepKanji)({uid:n,shouldIncrement:i})).unwrap().then(t=>{let i;let{value:s,prevVal:l}=t;i=em.current&&l.lastReview?l.lastReview:l.lastView??s.lastView;let o={[n]:{...s,lastView:i}};(0,m.spaceRepLog)((t,n)=>e((0,R.logger)(t,n)),r,o,{frequency:a})})}}),er.current=z,en.current=X,em.current=void 0,el(!1),ec(!1),ed(!1),ef(!1)}},[e,J,X,z,ev,ey,eb]),(0,d.useEffect)(()=>{eg.forEach(t=>{e((0,R.logger)(t.msg,t.lvl))})},[e,eg]),0===eb)return(0,r.jsx)(P.NotReady,{addlStyle:"main-panel",text:"No pending items"});if(ey.length<1)return(0,r.jsx)(P.NotReady,{addlStyle:"main-panel"});let eE=X??(0,y.getTermUID)(z,ev,ey),eF=(0,y.getTerm)(eE,l),eI=J.filter(e=>b.JapaneseText.parse(e).getSpelling().includes(eF.kanji)&&e.english.toLowerCase()===eF.english.toLowerCase()||b.JapaneseText.parse(e).getSpelling().includes(eF.kanji)&&e.english.toLowerCase().includes(eF.english.toLowerCase())&&"Verb"===e.grp||b.JapaneseText.parse(e).getSpelling()===eF.kanji&&(e.english.toLowerCase().includes(eF.english.toLowerCase())||eF.english.toLowerCase().includes(e.english.toLowerCase()))),eL=[];if(eI.length>0){let[e,...t]=u(eI,e=>e.english.length);eL=[e,...(0,h.shuffleArray)(t)]}let eO=eF.tags.find(e=>U.includes(e)&&g.isGroupLevel(e))?.replace("_"," ")??eF.tags.find(e=>g.isGroupLevel(e))?.replace("_"," ")??"",eV=G[eF.uid]?.rein===!0,eU=eL.slice(0,3).map((e,t,n)=>(0,r.jsxs)(p.Fragment,{children:[e.english+" ",b.JapaneseText.parse(e).toHTML(),t<n.length-1?"; ":"",(0,r.jsx)("wbr",{})]},e.uid)),eB=(0,r.jsx)("span",{children:eF.english}),e_=(z+1)/ev.length*100,eK=$.current[eE]?.lastReview,eq=void 0!==eK&&0===(0,m.daysSince)(eK),eG=(0,j.recallNotificationHelper)($.current[eE]?.daysBetweenReviews,$.current[eE]?.lastReview);return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsxs)("div",{className:"kanji main-panel h-100",children:[(0,r.jsx)("div",{ref:eM.setReference}),(0,r.jsx)("div",{ref:eM.setFloating,style:{position:eC,top:eD??0,left:eN??0,width:"max-content"},className:"grp-info",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:eF.grp}),(0,r.jsx)("div",{children:eO})]})}),(0,r.jsxs)("div",{ref:eT,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(I.default,{ariaLabel:"Previous",action:ew,children:(0,r.jsx)(s.ChevronLeftIcon,{size:16})}),(0,r.jsxs)("div",{className:"d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)("h1",{className:"pt-0",children:(0,r.jsx)("span",{children:eF.kanji})}),eF.on&&(0,r.jsx)("h4",{className:"pt-0",onClick:(0,v.setStateFunction)(el,e=>!e),children:(0,r.jsx)("span",{children:es?eF.on:"[On]"})})||(0,r.jsx)("h4",{className:"pt-0",children:"."}),eF.kun&&(0,r.jsx)("h4",{className:"pt-2",onClick:(0,v.setStateFunction)(ec,e=>!e),children:(0,r.jsx)("span",{children:eo?eF.kun:"[Kun]"})})||(0,r.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("span",{className:o({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===eU.length}),onClick:(0,v.setStateFunction)(ed,e=>!e),children:(0,r.jsx)("span",{className:"text-nowrap",children:eu&&eU.length>0?eU:"[Examples]"})}),(0,r.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:(0,v.setStateFunction)(ef,e=>!e),children:ep?eB:(0,r.jsx)("span",{children:"[Meaning]"})})]})]}),(0,r.jsx)(I.default,{ariaLabel:"Next",action:ex,children:(0,r.jsx)(s.ChevronRightIcon,{size:16})})]})]}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start"})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsxs)(L.Tooltip,{className:o({"question-color opacity-50":B.current===N.TermSortBy.RECALL&&!eq,"done-color opacity-50":eq}),idKey:eE,notification:eG,children:[(0,r.jsx)(M.DifficultySlider,{difficulty:$.current[eE]?.difficultyP,onChange:t=>{e((0,A.setKanjiDifficulty)(eE,t))},resetOn:eE}),(0,r.jsx)(C.AccuracySlider,{accuracy:$.current[eE]?.accuracyP,resetOn:eE,onChange:t=>{void 0!==t&&(e((0,A.setKanjiAccuracy)(eE,t)),em.current=t)}}),(0,r.jsx)("div",{className:"fs-xx-small me-2",children:(0,r.jsx)(F.RecallIntervalPreviewInfo,{metadata:$.current[eE]})})]}),(0,r.jsx)(E.ToggleFrequencyTermBtnMemo,{addFrequencyTerm:t,removeFrequencyTerm:n,hasReinforce:eV,term:eF,count:ei.length,isReinforced:null!==X})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(a.LinearProgress,{variant:"determinate",value:e_,color:eV?"secondary":"primary"})})]})}},19998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L},PhrasesMeta:function(){return I}});var r=n("73909"),i=n("5951"),a=n("76164"),s=n("2195"),l=n.n(s),o=n("28697"),c=n.n(o),u=n("43549"),d=n("39147"),p=n("8698"),f=n("90800"),g=n("30858"),h=n("72834"),m=n("98947"),v=n("16391"),y=n("94978"),b=n("21106"),j=n("87309"),x=n("663"),w=n("64305"),S=n("55329"),T=n("91267"),k=n("35225"),R=n("24137"),A=n("28241"),N=n("36419"),D=n("25148"),C=n("28388"),M=n("29215"),P=n("17268"),E=n("86742"),F=n("64762");let I={location:"/phrases/",label:"Phrases"};function L(){let e=(0,u.useDispatch)(),t=(0,o.useRef)(null),n=(0,o.useRef)(0),[s,I]=(0,o.useState)(null),[L,U]=(0,o.useState)(Date.now()),B=(0,o.useRef)(Date.now()),[_,K]=(0,o.useState)(0),[q,G]=(0,o.useState)(!1),[W,H]=(0,o.useState)(!1),[J,$]=(0,o.useState)(!1),[z,Y]=(0,o.useState)([]),[X,Q]=(0,o.useState)(!1),[Z,ee]=(0,o.useState)([]),et=(0,o.useRef)(),{englishSideUp:en,repetition:er,difficultyThreshold:ei,swipeThreshold:ea,phraseList:es,activeGroup:el,spaRepMaxReviewItem:eo,includeNew:ec,includeReviewed:eu,reinforce:ed,romajiActive:ep,filterType:ef,sortMethod:eg}=(0,j.useConnectPhrase)(),eh=(0,o.useRef)(eo),em=(0,o.useRef)(ei),ev=(0,o.useRef)(er);ev.current=er,(0,o.useEffect)(()=>{0===es.length&&e((0,T.getPhrase)())},[]);let ey=(0,o.useMemo)(()=>{let t=ev.current;if(0===es.length)return[];if(0===Object.keys(t).length&&0===el.length)return es;let n=Object.keys(t).reduce((e,n)=>(t[n]?.rein===!0&&(e=[...e,n]),e),[]),r=(0,h.termFilterByType)(ef.current,es,n,el,(0,g.buildAction)(e,T.togglePhrasesFilter)),i=(0,y.difficultySubFilter)(em.current,r,ev.current);switch(i.length>0?r=i:ee(e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:k.DebugLevel.WARN}]),eg.current){case k.TermSortBy.RECALL:let{failed:a,overdue:s,overLimit:l}=(0,v.spaceRepetitionOrder)(r,ev.current,eh.current),o=[...a,...s];o.length>0&&r.length!==o.length&&(r=o.map(e=>r[e]));let c=o.map((e,t)=>{let{accuracyP:n=0,lastReview:i,daysBetweenReviews:a}=ev.current[r[t].uid],s=i?(0,f.daysSince)(i):void 0,l=(0,v.getPercentOverdue)({accuracy:n/100,daysSinceReview:s,daysBetweenReviews:a});return l.toFixed(2).replace(".00","").replace("0.",".")}),u=l.length>0?`+${l.length}`:"";ee(e=>[...e,{msg:`Space Rep 2 (${c.length})${u} [${c.toString()}]`,lvl:0===o.length?k.DebugLevel.WARN:k.DebugLevel.DEBUG}]);break;case k.TermSortBy.VIEW_DATE:!ec&&(r=r.filter(e=>ev.current[e.uid]?.lastView!==void 0)),!eu&&(r=r.filter(e=>ev.current[e.uid]?.lastReview===void 0))}let d=r.reduce((e,n)=>(t[n.uid]?.rein===!0&&(e=[...e,n.uid]),e),[]);return Y(d),r},[ef,eg,em,e,es,el,ec,eu]),{order:eb,recallGame:ej}=(0,o.useMemo)(()=>{let e,t;let n=ev.current;if(0===ey.length)return{order:[]};switch(eg.current){case k.TermSortBy.VIEW_DATE:e=(0,y.dateViewOrder)(ey,n);let r=0,i=NaN,a=e.map(e=>{let t=ev.current[ey[e].uid]?.lastView;return r=t?r:r+1,i=t&&Number.isNaN(i)?(0,f.daysSince)(t):i,t?(0,f.daysSince)(t):0});ee(e=>[...e,{msg:`Date Viewed (${a.length}) New:${r} Old:${i}d`,lvl:k.DebugLevel.DEBUG}]);break;case k.TermSortBy.RECALL:let{failed:s,overdue:l,notPlayed:o,todayDone:c}=(0,v.spaceRepetitionOrder)(ey,ev.current),u=[...s,...l];e=u.length>0?u:[...o,...c],t=u.length;break;default:e=(0,y.randomOrder)(ey),ee(t=>[...t,{msg:`Random (${e.length})`,lvl:k.DebugLevel.DEBUG}])}return{order:e,recallGame:t}},[eg,ey]),ex=(0,o.useCallback)(()=>{let e=ey.length,t=(_+1)%e;B.current=L,U(Date.now()),n.current=_,K(t),I(null)},[ey,_,L]),ew=(0,o.useCallback)(()=>{(0,h.play)(ed.current,ef.current,z,ey,ev.current,s,e=>{t.current=s,I(e)},ex)},[ef,ed,z,ey,s,ex]),eS=(0,o.useCallback)(()=>{let e;let t=ey.length,r=_-1;e=s?_:(t+r)%t,B.current=L,U(Date.now()),n.current=_,K(e),I(null)},[ey,_,s,L]),eT=function(e,t,n,r,i,a,s,l){return function(o,c){let u;if("left"===o)e(),u=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===o)t(),u=Promise.all([Promise.resolve(),Promise.resolve()]);else{let e=n??(0,h.getTermUID)(r,s,a),t=(0,h.getTerm)(e,i),f=l?"/override_cache":"";if("up"===o){let n=(0,m.audioPronunciation)(t),r=(0,b.addParam)(d.pronounceEndoint+f,{tl:"ja",q:n,uid:e});u=(0,p.fetchAudio)(r,c)}else if("down"===o){let e=t.english,n=(0,b.addParam)(d.pronounceEndoint+f,{tl:"en",q:e,uid:t.uid+".en"});u=(0,p.fetchAudio)(n,c)}}return u??Promise.reject()}}(ew,eS,s,_,es,eb,ey,X);(0,o.useLayoutEffect)(()=>{let r={selectedIndex:n.current,reinforcedUID:t.current,lastNext:B.current};if(s!==r.reinforcedUID||_!==r.selectedIndex){let i=r.reinforcedUID??(0,h.getTermUID)(r.selectedIndex,ey,eb),a=(0,h.getTerm)(i,ey,es),l=Promise.resolve();ev.current[i]?.difficultyP&&et.current?l=e((0,T.setSpaceRepetitionMetadata)({uid:i})):null===et.current&&(l=e((0,T.removeFromSpaceRepetition)({uid:i}))),l.then(t=>{if(t&&"payload"in t){let{newValue:n,oldValue:r}=t.payload;(0,v.recallDebugLogHelper)(e,i,n,r,a.english)}if((0,h.minimumTimeForSpaceRepUpdate)(r.lastNext)){let t=i!==r.reinforcedUID,n=null!==r.reinforcedUID;e((0,T.updateSpaceRepPhrase)({uid:i,shouldIncrement:t})).unwrap().then(t=>{let r;let{value:s,prevVal:l}=t;r=et.current&&l.lastReview?l.lastReview:l.lastView??s.lastView;let o={[i]:{...s,lastView:r}};(0,f.spaceRepLog)((t,n)=>e((0,S.logger)(t,n)),a,o,{frequency:n})})}}),G(!1),H(!1),$(!1),n.current=_,t.current=s,et.current=void 0}},[e,es,s,_,ey,eb,ej]),(0,o.useEffect)(()=>{Z.forEach(t=>{e((0,S.logger)(t.msg,t.lvl))})},[e,Z]),(0,x.useKeyboardActions)(eT,(0,g.buildAction)(e,T.flipPhrasesPracticeSide));let{HTMLDivElementSwipeRef:ek}=(0,w.useSwipeActions)(eT);if(0===ej)return(0,r.jsx)(D.NotReady,{addlStyle:"main-panel",text:"No pending items"});if(ey.length<1||eb.length<1)return(0,r.jsx)(D.NotReady,{addlStyle:"main-panel"});let eR=s??(0,h.getTermUID)(_,ey,eb),eA=(0,h.getTerm)(eR,ey,es),eN=function(e,t,n,i,a){let s=t?{tl:"en",q:n.english,uid:n.uid+".en"}:{tl:"ja",q:(0,m.audioPronunciation)(n),uid:(0,h.getCacheUID)(n)};return(0,r.jsx)(A.default,{visible:0===e&&0===a,word:s,reCache:i})}(ea,en,eA,X,0),[eD,eC]=function(e){let t=m.JapaneseText.parse(e);return[t,t.toHTML()]}(eA),eM=function(e,t,n){return(0,r.jsx)("span",{onClick:e.lit?()=>{n(e=>!e)}:void 0,children:t?e.lit:e.english})}(eA,J,$),eP=(0,h.englishLabel)(en,eD,eM,e=>I(e),eA),eE=(0,h.japaneseLabel)(en,eD,eC,e=>I(e),eA),{topValue:eF,bottomValue:eI,bottomLabel:eL}=(0,h.labelPlacementHelper)(en,eP,eE,O,V),eO=(eA.lit?.length??eA.english.length)<55,eV=eD?.getSpelling().length<55,{aboveSmallCss:eU,aboveLargeCss:eB,belowNoInterruptCss:e_,belowSmallCss:eK,belowLargeCss:eq}=function(e,t,n){let r={"fs-display-5":!0},i={...e?{[n?"h1":"h3"]:!0}:{[t?"h1":"h3"]:!0}},a={...e?{[t?"h1":"h3"]:!0}:{[n?"h1":"h3"]:!0}};return{aboveSmallCss:i,aboveLargeCss:r,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:a,belowLargeCss:r}}(en,eV,eO),eG=er[eA.uid]?.rein===!0,eW=eA.romaji,eH=(_+1)/ey.length*100,eJ=ev.current[eR]?.lastReview,e$=void 0!==eJ&&0===(0,f.daysSince)(eJ),ez=(0,v.recallNotificationHelper)(ev.current[eR]?.daysBetweenReviews,ev.current[eR]?.lastReview);return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)("div",{className:"phrases main-panel h-100",children:(0,r.jsxs)("div",{ref:ek,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(E.default,{ariaLabel:"Previous",action:eS,children:(0,r.jsx)(a.ChevronLeftIcon,{size:16})}),(0,r.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(P.default,{breakPoint:"md",largeClassName:eB,smallClassName:eU,children:eF}),ep.current&&eW&&(0,r.jsx)("h5",{children:(0,r.jsx)("span",{onClick:(0,g.setStateFunction)(H,e=>!e),className:"clickable loop-no-interrupt",children:W?eW:"[Romaji]"})}),(0,r.jsx)(P.default,{className:e_,breakPoint:"md",onClick:(0,g.setStateFunction)(G,e=>!e),largeClassName:eq,smallClassName:eK,children:q?eI:eL}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:eN})]}),(0,r.jsx)(E.default,{ariaLabel:"Next",action:ew,children:(0,r.jsx)(a.ChevronRightIcon,{size:16})})]})}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,r.jsx)(C.TogglePracticeSideBtn,{toggle:en,action:(0,g.buildAction)(e,T.flipPhrasesPracticeSide)}),(0,r.jsx)(C.ReCacheAudioBtn,{active:X,action:function(e,t){return function(){if(!e){t(!0);setTimeout(()=>{t(!1)},2e3)}}}(X,Q)})]})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsxs)(F.Tooltip,{className:l({"question-color opacity-50":eg.current===k.TermSortBy.RECALL&&!e$,"done-color opacity-50":e$}),idKey:eR,notification:ez,children:[(0,r.jsx)(N.DifficultySlider,{difficulty:ev.current[eR]?.difficultyP,resetOn:eR,onChange:t=>{e((0,T.setPhraseDifficulty)(eR,t))}}),(0,r.jsx)(R.AccuracySlider,{accuracy:ev.current[eR]?.accuracyP,resetOn:eR,onChange:t=>{void 0!==t&&(e((0,T.setPhraseAccuracy)(eR,t)),et.current=t)}}),(0,r.jsx)("div",{className:"fs-xx-small me-2",children:(0,r.jsx)(M.RecallIntervalPreviewInfo,{metadata:ev.current[eR]})})]}),(0,r.jsx)(C.ToggleLiteralPhraseBtn,{visible:en&&void 0!==eA.lit&&""!==eA.lit,toggle:J,action:(0,g.setStateFunction)($,e=>!e)}),(0,r.jsx)(C.ToggleFrequencyTermBtnMemo,{addFrequencyTerm:t=>{Y(e=>[...e,t]),(0,g.buildAction)(e,T.addFrequencyPhrase)(t)},removeFrequencyTerm:t=>{Y(e=>e.filter(e=>e!==t)),(0,g.buildAction)(e,T.removeFrequencyPhrase)(t)},hasReinforce:eG,isReinforced:null!==s,term:eA,count:z.length})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(i.LinearProgress,{variant:"determinate",value:eH,color:eG?"secondary":"primary"})})]})}let O=(0,r.jsx)("span",{children:"[English]"}),V=(0,r.jsx)("span",{children:"[Japanese]"})},83185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n("73909"),i=n("2195"),a=n.n(i),s=n("73959"),l=n.n(s),o=n("28697"),c=n("43549"),u=n("72834"),d=n("98947"),p=n("79624"),f=n("98190"),g=n("72176"),h=n("28241"),m=n("17268");function v(e){let t=(0,c.useDispatch)(),{verb:n,reCache:i,linkToOtherTerm:s,showHint:l}=e,[v,b]=(0,o.useState)(!1),[j,x]=(0,o.useState)(!1),{verbForm:w,swipeThreshold:S,repetition:T,romajiEnabled:k,englishSideUp:R,hintEnabled:A,verbFormsOrder:N,verbColSplit:D}=(0,f.useConnectVocabulary)();(0,o.useLayoutEffect)(()=>{b(!1),x(!1)},[n]);let C=(e,n)=>{let i=a({"pt-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"ps-sm-3":0===e,"pe-sm-3":0!==e,"text-end":0!==e}),s=n.map(e=>{let n=a({clickable:!0}),i=a({invisible:w===e.name});return(0,r.jsxs)("div",{className:n,onClick:()=>{w===e.name?t((0,g.verbFormChanged)("dictionary")):t((0,g.verbFormChanged)(e.name))},children:[(0,r.jsx)("span",{className:i,children:"["}),(0,r.jsx)("span",{children:e.name}),(0,r.jsx)("span",{className:i,children:"]"})]},e.name)});return(0,r.jsx)("div",{className:i,children:s},e)},M=(0,p.getVerbFormsArray)(n,N),{t1:P,t2:E}=function(e,t){let n=y(e,t),r=e.slice(0,n),i=e.slice(n);return{t1:r,t2:i}}(M,D),F=(0,u.toggleFuriganaSettingHelper)(n.uid,T,R,()=>{t((0,g.furiganaToggled)(n.uid))}),{inJapanese:I,inEnglish:L,romaji:O,japaneseObj:V}=function(e,t,n,i,a){let s=e.romaji??".",l=y(t,i),o=t.find(e=>e.name===n),c=o?.value??t[l].value,u=c.toHTML(a);return{inJapanese:u,inEnglish:(0,r.jsx)(r.Fragment,{children:e.english}),romaji:s,japaneseObj:c}}(n,M,w,D,F),U=(0,o.useMemo)(()=>p.JapaneseVerb.parse(n),[n]),B=(0,u.japaneseLabel)(R,U,I,s),_=(0,u.englishLabel)(R,U,L,s),{jLabel:K,eLabel:q}=(0,o.useMemo)(()=>{let e=(0,r.jsx)("span",{children:"[English]"}),t=(0,r.jsx)(m.default,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(A&&l){if(R){let e=(0,u.getJapaneseHint)(V);e&&(t=e)}else{let t=(0,u.getEnglishHint)(n);t&&(e=t)}}return{jLabel:t,eLabel:e}},[A,l,R,V,n]),{topValue:G,bottomValue:W,bottomLabel:H}=(0,u.labelPlacementHelper)(R,_,B,q,K),J=(0,o.useMemo)(()=>({...n,japanese:V.toString(),pronounce:n.pronounce&&V.getPronunciation(),form:w}),[n,V,w]),$=(0,o.useMemo)(()=>R?{tl:"en",q:J.english,uid:J.uid+".en"}:{tl:"ja",q:(0,d.audioPronunciation)(J),uid:(0,u.getCacheUID)(J)},[R,J]),z=(0,r.jsx)(h.default,{visible:0===S,word:$,reCache:i});return(0,r.jsxs)(r.Fragment,{children:[C(0,P),(0,r.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(m.default,{breakPoint:"md",smallClassName:{...R?{h5:!0}:{"fs-display-6":!0}},largeClassName:{"fs-display-6":!0},children:G}),k&&O&&(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"clickable loop-no-interrupt",onClick:()=>x(e=>!e),children:j?O:"[romaji]"})}),(0,r.jsx)(m.default,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:{...R?{"fs-display-6":!0}:{h5:!0}},largeClassName:{"fs-display-6":!0},onClick:()=>b(e=>!e),children:v?W:H}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:z})]},1),C(2,E)]})}function y(e,t){let n=Math.trunc(e.length/2)+(e.length%2==0?0:1),r=Math.trunc(e.length/2)+(n-t);return r}v.propTypes={verb:l.object.isRequired,reCache:l.bool,linkToOtherTerm:l.func,showHint:l.bool}},5386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G},VocabularyMeta:function(){return q}});var r=n("73909"),i=n("5951"),a=n("76164"),s=n("2195"),l=n.n(s),o=n("62103"),c=n.n(o),u=n("28697"),d=n.n(u),p=n("43549"),f=n("83185"),g=n("55637"),h=n("39147"),m=n("8698"),v=n("90800"),y=n("30858"),b=n("72834"),j=n("98947"),x=n("79624"),w=n("68391"),S=n("16391"),T=n("94978"),k=n("21106"),R=n("98190"),A=n("9554"),N=n("663"),D=n("58836"),C=n("64305"),M=n("65884"),P=n("55329"),E=n("35225"),F=n("72176"),I=n("24137"),L=n("36419"),O=n("25148"),V=n("28388"),U=n("29215"),B=n("86742"),_=n("64762"),K=n("63663");let q={location:"/vocabulary/",label:"Vocabulary"};function G(){let e;let t=(0,p.useDispatch)(),[n,s]=(0,u.useState)(!1),o=(0,u.useRef)(!1),q=(0,u.useRef)(null),G=(0,u.useRef)(0),[W,H]=(0,u.useState)(null),[J,$]=(0,u.useState)(Date.now()),z=(0,u.useRef)(Date.now()),[Y,X]=(0,u.useState)(0),[Q,Z]=(0,u.useState)(void 0),[ee,et]=(0,u.useState)([]),[en,er]=(0,u.useState)(!1),ei=(0,u.useRef)(),[ea,es]=(0,u.useState)(!1),[el,eo]=(0,u.useState)(!1),[ec,eu]=(0,u.useState)([]),ed=(0,u.useRef)(),{motionThreshold:ep,difficultyThreshold:ef,vocabList:eg,reinforce:eh,filterType:em,hintEnabled:ev,sortMethod:ey,activeGroup:eb,includeNew:ej,includeReviewed:ex,autoVerbView:ew,englishSideUp:eS,verbForm:eT,repetition:ek,spaRepMaxReviewItem:eR}=(0,R.useConnectVocabulary)(),eA=(0,u.useRef)(eR),eN=(0,u.useRef)(ef),eD=(0,u.useRef)(ek);eD.current=ek,(0,u.useEffect)(()=>{0===eg.length&&t((0,F.getVocabulary)())},[]);let{filteredVocab:eC}=(0,u.useMemo)(()=>{if(0===eg.length)return{filteredVocab:[]};if(0===Object.keys(eD.current).length&&0===eb.length)return{filteredVocab:eg};let e=Object.keys(eD.current).reduce((e,t)=>(eD.current[t]?.rein===!0&&(e=[...e,t]),e),[]),n=(0,b.termFilterByType)(em.current,eg,e,eb,(0,y.buildAction)(t,F.toggleVocabularyFilter)),r=(0,T.difficultySubFilter)(eN.current,n,eD.current);switch(r.length>0?n=r:eu(e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:E.DebugLevel.WARN}]),ey.current){case E.TermSortBy.GAME:if(eh.current){let[e,t]=c(n,e=>eD.current[e.uid]?.rein===!0);n=[...t,...e]}break;case E.TermSortBy.RECALL:let{failed:i,overdue:a,overLimit:s}=(0,S.spaceRepetitionOrder)(n,eD.current,eA.current),l=[...i,...a];l.length>0&&n.length!==l.length&&(n=l.map(e=>n[e]));let o=l.map((e,t)=>{let{accuracyP:r=0,lastReview:i,daysBetweenReviews:a}=eD.current[n[t].uid],s=i?(0,v.daysSince)(i):void 0,l=(0,S.getPercentOverdue)({accuracy:r,daysSinceReview:s,daysBetweenReviews:a});return l.toFixed(2).replace(".00","").replace("0.",".")}),u=s.length>0?`+${s.length}`:"";eu(e=>[...e,{msg:`Space Rep 2 (${o.length})${u} [${o.toString()}]`,lvl:0===l.length?E.DebugLevel.WARN:E.DebugLevel.DEBUG}]);break;case E.TermSortBy.VIEW_DATE:!ej&&(n=n.filter(e=>eD.current[e.uid]?.lastView!==void 0)),!ex&&(n=n.filter(e=>eD.current[e.uid]?.lastReview===void 0))}let d=n.reduce((e,t)=>(eD.current[t.uid]?.rein===!0&&(e=[...e,t.uid]),e),[]);return et(d),{filteredVocab:n}},[t,em,ey,eN,eh,eg,eb,ej,ex]),{newOrder:eM,ebare:eP,jbare:eE,recallGame:eF}=(0,u.useMemo)(()=>{let e,t,n;if(0===eC.length)return{newOrder:[]};let r=[];switch(ey.current){case E.TermSortBy.RANDOM:r=(0,T.randomOrder)(eC),eu(e=>[...e,{msg:`Random (${r.length})`,lvl:E.DebugLevel.DEBUG}]);break;case E.TermSortBy.VIEW_DATE:r=(0,T.dateViewOrder)(eC,eD.current);let i=0,a=NaN,s=r.map(e=>{let t=eD.current[eC[e].uid]?.lastView;return i=t?i:i+1,a=t&&Number.isNaN(a)?(0,v.daysSince)(t):a,t?(0,v.daysSince)(t):0});eu(e=>[...e,{msg:`Date Viewed (${s.length}) New:${i} Old:${a}d`,lvl:E.DebugLevel.DEBUG}]);break;case E.TermSortBy.GAME:if(eh.current){let e=-1;for(let t=eC.length-1;t>-1;t--){let n=eD.current[eC[t].uid],r=t-1>-1?t-1:0,i=eD.current[eC[r].uid];if(n?.rein===!0&&!i?.rein){e=t;break}}if(-1!==e){let t=eC.slice(0,e),n=eC.slice(e),i=(0,T.spaceRepOrder)(t,eD.current),a=n.map((e,n)=>t.length+n);r=[...i,...a]}}0===r.length&&(r=(0,T.spaceRepOrder)(eC,eD.current)),eu(e=>[...e,{msg:`Space Rep 1 (${r.length})`,lvl:E.DebugLevel.DEBUG}]);break;case E.TermSortBy.DIFFICULTY:r=(0,T.difficultyOrder)(eC,eD.current),eu(e=>[...e,{msg:`Difficulty (${r.length})`,lvl:E.DebugLevel.DEBUG}]);break;case E.TermSortBy.RECALL:let{failed:l,overdue:o,notPlayed:c,todayDone:u}=(0,S.spaceRepetitionOrder)(eC,eD.current),d=[...l,...o];r=d.length>0?d:[...c,...u],n=d.length;break;default:({order:r,jOrder:e,eOrder:t}=(0,T.alphaOrder)(eC)),eu(e=>[...e,{msg:`Alphabetic (${r.length})`,lvl:E.DebugLevel.DEBUG}])}return eo(!0),{newOrder:r,jbare:e,ebare:t,recallGame:n}},[eh,ey,eC]);(0,u.useEffect)(()=>{ec.forEach(e=>{t((0,P.logger)(e.msg,e.lvl))})},[t,ec]);let eI=(0,u.useCallback)(()=>{let e=eC.length,t=(Y+1)%e;z.current=J,$(Date.now()),G.current=Y,X(t),H(null)},[eC,Y,J]),eL=(0,u.useCallback)(()=>{(0,b.play)(eh.current,em.current,ee,eC,eD.current,W,e=>{q.current=W,H(e)},eI)},[em,eh,ee,eC,W,eI]),eO=(0,u.useCallback)(()=>{let e;let t=eC.length,n=Y-1;e=W?Y:(t+n)%t,z.current=J,$(Date.now()),G.current=Y,X(e),H(null)},[eC,Y,W,J]),eV=function(e,t,n,r,i,a,s,l,o,c,u){return function(d,p){let f;if("left"===d)e(),f=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===d)t(),f=Promise.all([Promise.resolve(),Promise.resolve()]);else{let e=n??(0,b.getTermUID)(r,l,s),t=(0,b.getTerm)(e,i),g=o?"/override_cache":"";if(u(!0),"up"===d){let e;if((0,w.setMediaSessionPlaybackState)("playing"),"Verb"===t.grp&&"dictionary"!==a){let n=(0,x.verbToTargetForm)(t,a);e={...t,japanese:n.toString(),pronounce:t.pronounce&&n.getPronunciation(),form:a}}else if(j.JapaneseText.parse(t).isNaAdj()){let n=j.JapaneseText.parse(t).append(c.current&&"な");e={...t,japanese:n.toString(),pronounce:t.pronounce&&n.getPronunciation(),form:c.current},c.current=c.current?void 0:"-na"}else e=t;let n=(0,k.addParam)(h.pronounceEndoint+g,{tl:"ja",q:(0,j.audioPronunciation)(e),uid:(0,b.getCacheUID)(e)});f=(0,m.fetchAudio)(n,p)}else if("down"===d){(0,w.setMediaSessionPlaybackState)("playing");let e=t.english,n=(0,k.addParam)(h.pronounceEndoint+g,{tl:"en",q:e,uid:t.uid+".en"});f=(0,m.fetchAudio)(n,p)}}return f??Promise.reject()}}(eL,eO,W,Y,eg,eT,eM,eC,en,ei,es),eU=(0,A.useDeviceMotionActions)(ep),{beginLoop:eB,abortLoop:e_,looperSwipe:eK,loopSettingBtn:eq,loopActionBtn:eG,timedPlayVerifyBtn:eW,timedPlayAnswerHandlerWrapper:eH,gradeTimedPlayEvent:eJ,resetTimedPlay:e$,loop:ez,tpAnswered:eY,tpAnimation:eX}=(0,M.useTimedGame)(eV,eS,eU);(0,N.useKeyboardActions)(eV,(0,y.buildAction)(t,F.flipVocabularyPracticeSide),eH);let{HTMLDivElementSwipeRef:eQ}=(0,C.useSwipeActions)(eV,eH);(0,D.useMediaSession)("Vocabulary Loop",ez,eB,e_,eK),(0,u.useLayoutEffect)(()=>{let e={selectedIndex:G.current,reinforcedUID:q.current,lastNext:z.current};if(W!==e.reinforcedUID||Y!==e.selectedIndex){let n=e.reinforcedUID??(0,b.getTermUID)(e.selectedIndex,eC,eM),r=(0,b.getTerm)(n,eC,eg);eJ(t,n,eD.current);let i=Promise.resolve();eD.current[n]?.difficultyP&&ed.current?i=t((0,F.setSpaceRepetitionMetadata)({uid:n})):null===ed.current&&(i=t((0,F.removeFromSpaceRepetition)({uid:n}))),i.then(i=>{if(i&&"payload"in i){let{newValue:e,oldValue:a}=i.payload;(0,S.recallDebugLogHelper)(t,n,e,a,r.english)}if((0,b.minimumTimeForSpaceRepUpdate)(e.lastNext)){let i=n!==e.reinforcedUID,a=null!==e.reinforcedUID;t((0,F.updateSpaceRepWord)({uid:n,shouldIncrement:i})).unwrap().then(e=>{let i;let{value:s,prevVal:l}=e;i=ed.current&&l.lastReview?l.lastReview:l.lastView??s.lastView;let o={[n]:{...s,lastView:i}},c=(e,n)=>t((0,P.logger)(e,n));void 0!==eY.current?(0,v.timedPlayLog)(c,r,o,{frequency:a}):(0,v.spaceRepLog)(c,r,o,{frequency:a})})}});let a=e$();a&&(0,b.minimumTimeForTimedPlay)(e.lastNext)&&eB(),Z(void 0),G.current=Y,q.current=W,ed.current=void 0,es(!1)}},[t,eY,eB,eJ,e$,eg,W,Y,eC,eM,eF]);let eZ=(0,u.useCallback)((e,t,n)=>(0,r.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,r.jsxs)("div",{ref:eQ,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(B.default,{ariaLabel:"Previous",action:eO,children:(0,r.jsx)(a.ChevronLeftIcon,{size:16})}),n&&ew?(0,r.jsx)(f.default,{verb:t,reCache:en,linkToOtherTerm:e=>H(e),showHint:Q===e}):(0,r.jsx)(g.default,{vocabulary:t,reCache:en,showHint:Q===e,wasPlayed:ea}),(0,r.jsx)(B.default,{ariaLabel:"Next",action:eL,children:(0,r.jsx)(a.ChevronRightIcon,{size:16})})]})}),[eL,eO,eQ,ew,en,Q,ea]),e0=(0,u.useCallback)((e,n,i,a,s,o,c,u)=>(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,r.jsx)(V.TogglePracticeSideBtn,{toggle:eS,action:()=>{e_()&&e$(),t((0,F.flipVocabularyPracticeSide)())}}),(0,r.jsx)(V.ReCacheAudioBtn,{active:en,action:function(e,t){return function(){if(!e){t(!0);setTimeout(()=>{t(!1)},2e3)}}}(en,er)}),(0,r.jsx)(V.ToggleAutoVerbViewBtn,{visible:i,toggleAutoVerbView:(0,y.buildAction)(t,F.toggleAutoVerbView),autoVerbView:ew}),(0,r.jsx)("div",{className:"sm-icon-grp",children:eq}),(0,r.jsx)("div",{className:"sm-icon-grp",children:eG})]})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[eW(eD.current[e]?.pron===!0),(0,r.jsxs)(_.Tooltip,{className:l({"question-color opacity-50":ey.current===E.TermSortBy.RECALL&&!c,"done-color opacity-50":c}),idKey:e,notification:u,children:[(0,r.jsx)(L.DifficultySlider,{difficulty:eD.current[e]?.difficultyP,resetOn:e,onChange:n=>{t((0,F.setWordDifficulty)(e,n))}}),(0,r.jsx)(I.AccuracySlider,{accuracy:eD.current[e]?.accuracyP,resetOn:e,onChange:n=>{void 0!==n&&(t((0,F.setWordAccuracy)(e,n)),ed.current=n)}}),(0,r.jsx)("div",{className:"fs-xx-small me-2",children:(0,r.jsx)(U.RecallIntervalPreviewInfo,{metadata:eD.current[e]})})]}),(0,r.jsx)(V.ShowHintBtn,{visible:ev.current,active:s,setShowHint:(0,y.setStateFunction)(Z,t=>t?void 0:e)}),(0,r.jsx)(V.ToggleFuriganaBtn,{active:a,toggle:(0,b.toggleFuriganaSettingHelper)(n.uid,eD.current).furigana.show,toggleFurigana:(0,y.buildAction)(t,F.furiganaToggled),vocabulary:n}),(0,r.jsx)(V.ToggleFrequencyTermBtnMemo,{term:n,count:ee.length,isReinforced:null!==W,hasReinforce:o,addFrequencyTerm:e=>{et(t=>[...t,e]),(0,y.buildAction)(t,F.addFrequencyWord)(e)},removeFrequencyTerm:e=>{et(t=>t.filter(t=>t!==e)),(0,y.buildAction)(t,F.removeFrequencyWord)(e)}})]})})]})}),[e_,ew,t,eS,ee.length,ev,eG,eq,en,W,e$,ey,eW]),{pList:e1,pIdx:e9}=(0,u.useMemo)(()=>{let e=[],t=Y;return el?eE&&(e=eE):(eE&&(t=eE[Y].idx),eP&&(e=eP)),{pList:e,pIdx:t}},[Y,el,eE,eP]),e2=(0,u.useMemo)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Grow,{in:n,timeout:500,children:(0,r.jsx)(i.Avatar,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,r.jsx)("div",{onClick:(0,y.setStateFunction)(eo,e=>!e),children:el?"JP":"EN"})})}),(0,r.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:()=>{o.current=!0},onTouchEnd:()=>{o.current=!1},onMouseDown:()=>{o.current=!0},onMouseUp:()=>{o.current=!1},children:(0,r.jsx)(K.default,{initial:e9,list:e1,setIndex:e=>{if(el)X(e);else if(eP){let t=eP[e].idx;X(t)}}})})]}),[eP,e9,e1,el,n]);if(0===eF)return(0,r.jsx)(O.NotReady,{addlStyle:"main-panel",text:"No pending items"});if(eC.length<1||eM.length<1)return(0,r.jsx)(O.NotReady,{addlStyle:"main-panel"});let e3=W??(0,b.getTermUID)(Y,eC,eM),e5=(0,b.getTerm)(e3,eC,eg),e6=eD.current[e5.uid]?.rein===!0,e8="Verb"===e5.grp,e4=j.JapaneseText.parse(e5),e7=e4.hasFurigana(),te=e4.isHintable(3),tt=void 0!==e5.grp&&""!==e5.grp,tn=Q!==e3&&eS?te:tt,tr=(Y+1)/eC.length*100,ti=eD.current[e3]?.lastReview,ta=void 0!==ti&&0===(0,v.daysSince)(ti),ts=(0,S.recallNotificationHelper)(eD.current[e3]?.daysBetweenReviews,eD.current[e3]?.lastReview),tl=(0,r.jsx)("div",{className:"progress-line flex-shrink-1",onClick:()=>{if(ey.current===E.TermSortBy.ALPHABETIC){s(!0);let e=()=>{o.current?setTimeout(e,4e3):s(!1)};setTimeout(e,4e3)}},children:(0,r.jsx)(i.LinearProgress,{variant:null===eX?"determinate":"buffer",value:null===eX?tr:0,valueBuffer:eX??void 0,color:e6?"secondary":"primary"})});return e=n?(0,r.jsxs)(d.Fragment,{children:[eZ(e3,e5,e8),e2]}):(0,r.jsxs)(d.Fragment,{children:[eZ(e3,e5,e8),e0(e3,e5,e8,e7,tn,e6,ta,ts),tl]})}},55637:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n("73909"),i=n("73959"),a=n.n(i),s=n("28697"),l=n.n(s),o=n("43549"),c=n("30858"),u=n("72834"),d=n("98947"),p=n("98190"),f=n("72176"),g=n("28241"),h=n("17268");function m(e){let t=(0,o.useDispatch)(),{vocabulary:n,reCache:i,showHint:a,wasPlayed:m}=e,[v,y]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),[x,w]=(0,s.useState)(void 0),{swipeThreshold:S,repetition:T,romajiEnabled:k,englishSideUp:R,hintEnabled:A,bareKanji:N}=(0,p.useConnectVocabulary)();(0,s.useLayoutEffect)(()=>{y(!1),j(!1)},[n]);let D=(0,s.useCallback)(()=>t((0,f.furiganaToggled)(n.uid)),[t,n.uid]),C=R&&N&&T[n.uid]?.f===!1,M=(0,s.useMemo)(()=>{let e=(!R||C)&&m?{[n.uid]:{...T[n.uid],f:!0}}:void 0;return(0,u.toggleFuriganaSettingHelper)(n.uid,e??T,R,D)},[D,n.uid,T,R,C,m]),P=(0,r.jsx)("span",{children:"[Japanese]"}),E=(0,r.jsx)("span",{children:"[English]"}),F=d.JapaneseText.parse(n),I=F.toHTML(M),L=(0,r.jsx)(l.Fragment,{children:n.english}),O=n.romaji,V=(0,u.japaneseLabel)(R,F,I),U=(0,u.englishLabel)(R,F,L);if(A&&a){if(R){let e=(0,u.getJapaneseHint)(F);P=e??P}else{let e=(0,u.getEnglishHint)(n);E=e??E}}let{topValue:B,bottomValue:_,bottomLabel:K}=(0,u.labelPlacementHelper)(R,U,V,E,P),q=(0,s.useMemo)(()=>{let e=n;if(d.JapaneseText.parse(n).isNaAdj()){let t=d.JapaneseText.parse(n).append(x&&"な");e={...n,japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:x}}return R?{tl:"en",q:n.english,uid:n.uid+".en"}:{tl:R?"en":"ja",q:(0,d.audioPronunciation)(e),uid:(0,u.getCacheUID)(e)}},[n,R,x]),G=(0,s.useCallback)(()=>w(e=>e?void 0:"-na"),[]),W=(0,r.jsx)(g.default,{visible:0===S,word:q,reCache:i,onPushedPlay:G}),H=n.english.length<55;return(0,r.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(h.default,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:{...R?{[H?"fs-display-6":"h3"]:!0,...H?{"lh-xs":!0}:{}}:{"fs-display-6":!0}},children:B}),k&&O&&(0,r.jsx)("h5",{children:(0,r.jsx)("span",{onClick:(0,c.setStateFunction)(j,e=>!e),className:"clickable loop-no-interrupt",children:b?O:"[Romaji]"})}),(0,r.jsx)(h.default,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:{...R?{"fs-display-6":!0}:{[H?"fs-display-6":"h3"]:!0}},onClick:C?void 0:(0,c.setStateFunction)(y,e=>!e),children:v||C?_:K}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:W})]})}m.propTypes={vocabulary:a.object.isRequired,reCache:a.bool,showHint:a.bool}},98947:function(e,t,n){"use strict";n.r(t),n.d(t,{JapaneseText:function(){return o},furiganaParseRetry:function(){return u},audioPronunciation:function(){return p}});var r=n("73909"),i=n("2195"),a=n.n(i);n("28697");var s=n("98910"),l=n("95700");class o{_furigana;_kanji;_parseObj;slang;keigo;adj;constructor(e,t){this._furigana=e,this._kanji=t,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}get[Symbol.toStringTag](){return"JapaneseText"}get furigana(){return this._furigana}set furigana(e){this._furigana=e}get kanji(){return this._kanji}set kanji(e){this._kanji=e}get parseObj(){return 0===this._parseObj.furiganas.length&&0===this._parseObj.kanjis.length&&0===this._parseObj.okuriganas.length&&!this._parseObj.startsWKana&&(this.hasFurigana()?this._parseObj=u(this.getPronunciation(),this.getSpellingRAW()):this._parseObj={okuriganas:[this.getSpellingRAW()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj}hasFurigana(){return!!this._kanji}getSpellingRAW(){return this._kanji?this._kanji:this._furigana}getSpelling(){return this._kanji?this._kanji.replaceAll(" ",""):this._furigana.replaceAll(" ","")}getPronunciation(){return this._furigana}getObject(){return{furigana:this._furigana,kanji:this._kanji}}static parse=e=>c(e);static parser=c;isSlang(){return this.slang}isKeigo(){return this.keigo}isNaAdj(){return"na"===this.adj}isIAdj(){return"i"===this.adj}debug(){return JSON.stringify(this)}append(e=""){return this.hasFurigana()?new o(this.getPronunciation()+e,this.getSpelling()+e):new o(this.getSpelling()+e)}toString(){return this._furigana+(this._kanji?"\n"+this._kanji:"")}isHintable(e=3){let t=!0,n=this.toString().split("").every(e=>(0,s.isKanji)(e)||(0,s.isHiragana)(e)||(0,s.isKatakana)(e)||"\n"===e);if(!n)return!1;if(this.hasFurigana()){let n=this.getPronunciation(),r=this.getSpellingRAW();if(n.length<e)t=!1;else try{u(n,r)}catch(e){console.log(e),t=!1}}else{let n=this.getSpelling();n.length<e&&(t=!1)}return t}getHint(e,t,n=3,r=1){let i;let a={shown:"hint-mora",hidden:"invisible"};if(this.isHintable(n)){if(this.hasFurigana()){let e=this.getPronunciation(),n=this.getSpellingRAW(),{kanjis:s,furiganas:l,okuriganas:o,startsWKana:c}=u(e,n);i=t(a,s,l,o,c,r)}else{let t=this.getSpelling();i=e(a,t,r)}}else i=null;return i}toHTML(e){let t;let n=e?.furigana?.show===!1,i=e?.furigana?.toggle,s=a({"incorrect-color":!0,"d-block":!0}),o=(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:s,children:this.getPronunciation()}),(0,r.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{let{kanjis:e,furiganas:s,okuriganas:o,startsWKana:c}=this.parseObj,u=(0,l.getParseObjectMask)(this.parseObj),d=a({clickable:!!i})||void 0,p=n?"transparent-font":void 0;t=(0,r.jsx)("span",{className:d,onClick:i||void 0,children:u.map((t,n)=>{let r=(0,l.wrap)(e[n]),i=(0,l.wrap)(),a=(0,l.wrap)(s[n],p),u=(0,l.wrap)(),d=(0,l.wrap)(o[n]),f=(0,l.wrap)();return(0,l.buildRubyElement)(n,{sk:r,hk:i},{sf:a,hf:u},{so:d,ho:f},c)})})}catch(n){e?.showError!==!1&&console.error(n),t=o}else t=(0,r.jsx)("span",{children:this.getSpelling()});return t}}function c(e,t){let n;let r=e.japanese.split("\n");if("function"==typeof t)n=t(e);else{let[e,t]=r;n=new o(e,t)}return e.slang&&e.slang&&(n.slang=!0),e.keigo&&e.keigo&&(n.keigo=!0),e.adj&&("na"===e.adj||"i"===e.adj)&&(n.adj=e.adj),n}function u(e,t){let n,r,i,a;try{({kanjis:n,furiganas:r,okuriganas:i,startsWKana:a}=d(e,t))}catch(l){if(l instanceof Error){let o=l.cause;if(o?.code==="ParseError")try{let l=e.split("").reverse().join(""),o=t.split("").reverse().join(""),{kanjis:c,furiganas:u,okuriganas:p}=d(l,o);return n=c.map(e=>e.split("").reverse().join("")).reverse(),r=u.map(e=>e.split("").reverse().join("")).reverse(),i=p.map(e=>e.split("").reverse().join("")).reverse(),a=!(0,s.isKanji)(t.charAt(0)),{kanjis:n,furiganas:r,okuriganas:i,startsWKana:a}}catch{}}throw l}return{kanjis:n,furiganas:r,okuriganas:i,startsWKana:a}}function d(e,t){if(t.split("").every(e=>(0,s.isKanji)(e)||(0,s.isPunctuation)(e)))return{kanjis:[t],furiganas:[e],okuriganas:[],startsWKana:!1};let n=new RegExp(/\s/g),r=n.test(e)||n.test(t),i=!(0,s.isKanji)(t.charAt(0))&&!(0,s.isFullWNumber)(t.charAt(0)),a=0,l=[],o=[],c=[],u="",d="",p="",f=!1;t.split("").forEach((n,i)=>{if((0,s.isKanji)(n)||function(e,t,n){let r=n.charAt(e);return(Number.isInteger((0,s.toEnglishNumber)(r))||Number.isInteger(Number.parseInt(r)))&&!t.includes(r)&&!(0,s.isKanji)(r)&&!(0,s.isHiragana)(r)&&!(0,s.isKatakana)(r)&&e<n.length-1}(i,e,t))" "!==e.charAt(a)&&(u+=e.charAt(a))," "!==n&&(d+=n),f=!0,a++,""!==p&&(c.push(p),p=""),t.length-i==1&&(" "!==e.slice(a)&&(u+=e.slice(a)),l.push(u),o.push(d));else{if(f){for(;e.charAt(a)!==n;)if(" "!==e.charAt(a)&&(u+=e.charAt(a)),++a>e.length){let n="The two phrases do not match"+(r?" (contains white space)":""),i=Error(n,{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:t},kanjis:o,furiganas:l,okuriganas:c}}});throw i}l.push(u),u=""}" "!==n&&(p+=n),""!==d&&(o.push(d),d=""),a++,f=!1}}),""!==p&&c.push(p);let[g,h]=function(e,t,n,r){let i,a;return r?(a=n.reduce((t,n,r)=>t+n+(e[r]||""),""),i=n.reduce((e,n,r)=>e+n+(t[r]||""),"")):(a=e.reduce((e,t,r)=>e+t+(n[r]||""),""),i=t.reduce((e,t,r)=>e+t+(n[r]||""),"")),[i,a]}(o,l,c,i),m=e.replaceAll(" ",""),v=t.replaceAll(" ","");if(g!==m||h!==v){let n=Error("Failed to parse text to build furigana"+(r?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:t},output:{pronunciation:g,orthography:h}}}});throw n}return{kanjis:o,furiganas:l,okuriganas:c,startsWKana:i}}function p(e){let t;if(e.pronounce){let n=e.pronounce.split("").every(e=>(0,s.isHiragana)(e)||(0,s.isKatakana)(e));if(n)t=e.pronounce;else{let t=Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});throw t}}else{let n=o.parse(e),r=n.getSpelling();t=r.replaceAll(" ","")}return t}},98910:function(e,t,n){"use strict";n.r(t),n.d(t,{isKanji:function(){return a},isHiragana:function(){return s},isKatakana:function(){return l},isYoon:function(){return o},isFullWNumber:function(){return c},isPunctuation:function(){return u},swapKana:function(){return d},romajiParticle:function(){return p},toEnglishNumber:function(){return f},getConsonantVowel:function(){return g},kanaHintBuilder:function(){return h}});var r=n("73909");n("28697");var i=n("71753");function a(e){return RegExp("[一-龯㐀-䶿々]").test(e)}function s(e){return RegExp("[ぁ-ゟ]").test(e)}function l(e){return RegExp("[゠-ヿ]").test(e)}function o(e){return RegExp("^[ゃャゅュょョ]$").test(e)}function c(e){return RegExp("[０-９]").test(e)}function u(e){return RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(e)}function d(e){let t=e;if(s(e)){let n=e.codePointAt(0);n&&(t=String.fromCharCode(n+96))}else if(l(e)){let n=e.codePointAt(0);n&&(t=String.fromCharCode(n-96))}return t}function p(e){let t;switch(e){case"は":t="wa";break;case"には":t="niwa";break;case"を":t="o";break;case"って":t="tte";break;default:t=e.split("").map(e=>(function(e){let t=e;if(s(e)){let{iConsonant:n,iVowel:r}=g(e);t=i.consonants[n]+i.vowels[r]}else if(l(e)){let n=e.codePointAt(0);if(n){let e=String.fromCharCode(n-96),{iConsonant:r,iVowel:a}=g(e);t=i.consonants[r]+i.vowels[a]}}return t})(e)).join("")}return t}function f(e){let t=Number.NaN;if(c(e)){let n=e.codePointAt(0);n&&(t=Number.parseInt(String.fromCharCode(n-65248)))}return t}function g(e){let t=i.hiragana,n=-1,r=-1;return" "===e||""===e?{iConsonant:n,iVowel:r}:"ん"===e?{iConsonant:15,iVowel:r}:(t.some((t,i)=>t.some((t,a)=>(t===e&&(n=i,r=a),t===e))),{iConsonant:n,iVowel:r})}function h(e,t,n){return(0,r.jsxs)("span",{className:"hint",children:[(0,r.jsx)("span",{className:e.shown,children:t.slice(0,n)}),(0,r.jsx)("span",{className:e.hidden,children:t.slice(n)})]})}},95700:function(e,t,n){"use strict";n.r(t),n.d(t,{furiganaHintBuilder:function(){return s},getParseObjectMask:function(){return l},kanjiOkuriganaSpliceApplyCss:function(){return o},wrap:function(){return c},buildRubyElement:function(){return u}});var r=n("73909"),i=n("2195"),a=n.n(i);n("28697");function s(e,t,n,i,a,s=1){let l=function({kanjis:e,furiganas:t,okuriganas:n,startsWKana:r},i){let a,s,l=i;return t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]),t.reduce((i,o,c)=>{let u=Math.trunc(t[c].length/e[c].length);if(l>0){if(r){if(a=n[c],s=t[c],a.length<=l){let t;let n=l-=a.length;s.length<=l?(l-=s.length,t=e[c].length,n=s.length):(t=Math.ceil(l/u),l=0),i=[...i,{k:t,f:n,o:a.length}]}else i=[...i,{k:0,f:0,o:l}],l=0}else if(a=t[c],s=n[c],a.length<=l){let t;l-=a.length,s.length<l?(l-=s.length,t=s.length):(t=l,l=0),i=[...i,{k:e[c].length,f:a.length,o:t}]}else{let e=Math.ceil(l/u);i=[...i,{k:e,f:l,o:0}],l=0}}else i=[...i,{k:0,f:0,o:0}];return i},[])}({kanjis:t,furiganas:n,okuriganas:i,startsWKana:a},s);n.length>i.length?i=[...i,""]:n.length<i.length&&(t=[...t,""],n=[...n,""]);let o=(e,t,n=1)=>t?[(0,r.jsx)("span",{className:e,children:t},n)]:[],c=l.map((r,s)=>{let l=r.k>0?o(e.shown,t[s].slice(0,r.k)):[],c=r.k<t[s].length?o(e.hidden,t[s].slice(r.k)):[],d=r.f>0?o(e.shown,n[s].slice(0,r.f)):[],p=r.f<n[s].length?o(e.hidden,n[s].slice(r.f)):[],f=r.o>0?o(e.shown,i[s].slice(0,r.o)):[],g=r.o<i[s].length?o(e.hidden,i[s].slice(r.o)):[];return u(s,{sk:l,hk:c},{sf:d,hf:p},{so:f,ho:g},a)});return(0,r.jsx)("span",{className:"hint",children:c})}function l(e){let{kanjis:t,furiganas:n,okuriganas:r}=e;return n.length>r.length?r=[...r,""]:n.length<r.length&&(t=[...t,""],n=[...n,""]),n.map((e,i)=>({k:t[i].length,f:n[i].length,o:r[i].length}))}function o({kanjis:e,furiganas:t,okuriganas:n,startsWKana:i},a,s,o=s+1){let{shown:c,hidden:d}=a,p=function({kanjis:e,furiganas:t,okuriganas:n,startsWKana:r},i,a=i+1){let s=a-i;t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]);let o=l({kanjis:e,furiganas:t,okuriganas:n,startsWKana:r}),c=[0];return o.map((e,t)=>{let{k:n,o:l}=e,o=0,u=0;if(c=[...c,c[t]+n+l],r){if(c[t]+l>i){if(c[t]+l<a){let e=i-(c[t]+l);s-=u=Math.min(...[l,Math.abs(e)])}else u=s,s=0}if(c[t]+l+n>i){if(c[t]+l+n<a){let e=i-(c[t]+l+n);s-=o=Math.min(...[n,Math.abs(e)])}else o=s,s=0}}else{if(c[t]+n>i){if(c[t]+n<a){let e=i-(c[t]+n);s-=o=Math.min(...[n,Math.abs(e)])}else o=s,s=0}if(c[t]+n+l>i){if(c[t]+n+l<a){let e=i-(c[t]+n+l);s-=u=Math.min(...[l,Math.abs(e)])}else u=s,s=0}}return{k:o,f:0,o:u}})}({kanjis:e,furiganas:t,okuriganas:n,startsWKana:i},s,o);t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]);let f=(e,t,n=1)=>t?[(0,r.jsx)("span",{className:e,children:t},n)]:[],g=(e,t,n,r)=>{let i=[],a=[],l=e.length;if(l>0){if(0===t)a=f(c,e);else if(t===l)i=f(d,e),n-=l;else if(t<l){if(n<t)i=f(d,e.slice(0,t)),a=f(c,e.slice(t-l)),n=0;else if(n===t){let t=s-r,i=t+n,o=f(c,e.slice(0,t),r+1),u=f(d,e.slice(t,i),r+2),p=f(c,e.slice(i,l),r+3);a=[...o,...u,...p],n=0}else n>t&&(a=f(c,e.slice(0,t)),i=f(d,e.slice(t-l)),n-=t)}}return{s:a,h:i,spliceLen:n}},h=o-s,m=[0],v=p.map((r,a)=>{let s,l,o,d;let p=e[a].length,v=n[a].length;m=[...m,m[a]+v+p],{s:s,h:l,spliceLen:h}=g(e[a],r.k,h,m[a]+(i?v:0));let y=f(c,t[a]);return{s:o,h:d,spliceLen:h}=g(n[a],r.o,h,m[a]+(i?0:p)),u(a,{sk:s,hk:l},{sf:y,hf:[]},{so:o,ho:d},i)});return(0,r.jsx)("span",{className:"decorated",children:v})}function c(e,t,n=1){return e?[(0,r.jsx)("span",{className:t,children:e},n)]:[]}function u(e,{sk:t,hk:n},{sf:i,hf:s},{so:l,ho:o},c){let u=t.length>0||n.length>0,d=i.length>0||s.length>0,p=l.length>0||o.length>0,f=u&&d&&(0,r.jsxs)("ruby",{children:[t,n,(0,r.jsxs)("rt",{children:[i,s]})]})||void 0,g=p&&(0,r.jsxs)("span",{children:[l,o]})||void 0,h=c?g:f,m=c?f:g,v=a({"lh-furigana":u&&d})||void 0;return(h||m)&&(0,r.jsxs)("span",{className:v,children:[h,m]},e)||void 0}},65884:function(e,t,n){"use strict";n.r(t),n.d(t,{useTimedGame:function(){return d}});var r=n("73909"),i=n("28697"),a=n("6656"),s=n("2450"),l=n("28388"),o=n("72834"),c=n("68391"),u=n("72176");function d(e,t,n){let d;let f=(0,i.useRef)(void 0),g=(0,i.useRef)(null),[h,m]=(0,i.useState)(0),[v,y]=(0,i.useState)(15),b=(0,i.useRef)(void 0),[j,x]=(0,i.useState)(null),w=(0,i.useRef)(void 0),S=(0,i.useRef)(void 0),[T,k]=(0,i.useState)(void 0);(0,i.useEffect)(()=>()=>{f.current?.forEach(e=>e.abort())},[]);let R=(0,a.useForceRender)();0===h?d=null:f.current?.length===0?d=(0,r.jsx)(s.LoopStopBtn,{}):void 0===f.current?d=(0,r.jsx)(s.LoopStartBtn,{countDown:Array.isArray(g.current)?v:void 0,onClick:()=>{if(Array.isArray(f.current));else{if(Array.isArray(g.current)){let[e]=g.current;clearInterval(e),y(15)}b.current=void 0,k(void 0),f.current=[],setTimeout(N,100),R()}}}):void 0!==f.current&&(d=(0,r.jsx)(s.LoopStopBtn,{onClick:()=>{D(),P(),m(0)}}));let A=(0,r.jsx)(s.LoopSettingBtn,{active:h>0,loop:h,onClick:()=>{let e=D();g.current=null,e&&p(j,x),m(e=>{let t=3===e;return b.current=t?void 0:b.current,t?0:e+1})}});function N(){let e,r,i;D();let a=new AbortController,s=new AbortController,l=new AbortController,c=new AbortController,u=new AbortController;if("function"==typeof n){let{addDeviceMotionEvent:t,removeDeviceMotionEvent:r}=n(()=>{void 0!==w&&(D(),P(),m(0))});t(),e=r}f.current=[a,s,l,c,u],t?(r=e=>C("down",e),i=e=>(0,o.loopN)(h,()=>C("up",e),1500,e)):(r=e=>C("up",e),i=e=>(0,o.loopN)(h,()=>C("down",e),1500,e));let d=(e,t)=>{x(n=>{let r;return r=null===n||100-n<1?e/t*100:n+e/t*100})};(0,o.pause)(700,a).then(()=>(w.current=Date.now(),r(s).catch(e=>{if(e.cause?.code==="UserAborted")throw e}))).then(()=>(0,o.pause)(3e3,l,d)).then(()=>(x(null),w.current=void 0,i(c).then(()=>(f.current=void 0,C("left"))).catch(e=>{if(e.cause?.code!=="UserAborted")return f.current=void 0,C("left")}))).then(()=>(0,o.pause)(100,u)).catch(()=>{}).then(()=>{"function"==typeof e&&e()})}let D=(0,i.useCallback)(()=>{let e=!1;return f.current?.forEach(t=>{e=!0,t.abort()}),f.current=void 0,e},[f]);function C(t,n){let r;return h>0&&(r=e(t,n)),r??Promise.reject(Error("loop disabled"))}function M(){let e;if(void 0!==w.current){let t=w.current;e=Math.abs(Date.now()-t)}return{tpElapsed:e}}function P(){let e=!1;return h>0&&void 0===f.current&&(g.current?.forEach(e=>{clearTimeout(e)}),g.current=null,y(15),b.current=void 0,k(void 0),w.current=void 0,S.current=void 0,x(null),e=!0),e}return{beginLoop:N,abortLoop:D,looperSwipe:C,gradeTimedPlayEvent:function(e,t,n){h>0&&void 0!==b.current&&("reset"===T?n[t]?.pron===!0&&void 0!==S.current&&e((0,u.setWordTPCorrect)(t,S.current,{pronunciation:void 0})):b.current?void 0!==S.current&&e((0,u.setWordTPCorrect)(t,S.current)):e((0,u.setWordTPIncorrect)(t,{pronunciation:"pronunciation"===T||void 0})))},resetTimedPlay:P,loopSettingBtn:A,loopActionBtn:d,timedPlayVerifyBtn:e=>(0,r.jsx)(l.TimePlayVerifyBtns,{visible:void 0!==b.current,hover:T,prevMissPronu:e,onPronunciation:()=>{e?(b.current=!1,k(e=>"reset"===e?void 0:"reset")):(b.current=!1,k(e=>"pronunciation"===e?void 0:"pronunciation"))},onIncorrect:()=>{b.current=!1,k(e=>"incorrect"===e?void 0:"incorrect")},onReset:()=>{b.current=!1,k(e=>"reset"===e?void 0:"reset")}}),timedPlayAnswerHandlerWrapper:function(e,n){if(0===h)return n;let r=n;if("up"===e||"down"===e){let e=t?"up":"down";r=()=>n(e)}let i=function(e,t,n,r,i,a,s,l,o,u,d,f){let g=t,h=!0,m=o();if(m){let t=null===r&&void 0!==l.current,o=null!==r&&void 0!==l.current,m=null===r&&void 0===l.current;if("up"===e||"down"===e){let e=u();f.current=e.tpElapsed,d.current=!0,t?(h=!1,d.current=void 0,setTimeout(()=>{d.current=!0},1500),i(0),setTimeout(()=>{i(null)},1500)):o||m&&(d.current=!1,g=()=>Promise.resolve(),h=!1)}else{m&&(h=!1);let e=function(e,t){let n=setInterval(()=>{t(t=>{let r=1===t;return e(e=>r?0:e),r&&clearTimeout(n),r?15:t-1})},1e3);return n}(n,a);s.current=[e]}h&&p(r,i),(0,c.setMediaSessionPlaybackState)("paused")}return g}(e,r,m,j,x,y,g,w,D,M,b,S);return i},loop:h,setLoop:m,tpAnimation:j,tpAnswered:b}}function p(e,t){null!==e&&setTimeout(()=>{t(0),setTimeout(()=>{t(e=>0===e?null:e)},1e3)},1500)}},57815:function(e,t,n){"use strict";n.r(t);var r=n("73909"),i=n("28697"),a=n.n(i),s=n("3079"),l=n("43549");n("90146");var o=n("65510"),c=n("72566");let u=document.querySelector("#app-container"),d=(0,s.createRoot)(u);d.render((0,r.jsx)(a.StrictMode,{children:(0,r.jsx)(l.Provider,{store:o.store,children:(0,r.jsx)(c.default,{})})}))},39147:function(e,t,n){"use strict";n.r(t),n.d(t,{firebaseConfig:function(){return i},pronounceEndoint:function(){return a}});let r="nmemonica-9d977",i={apiKey:"AIzaSyD0R3dzI2GREIuA0irO3dMT0n4CP59-GjQ",authDomain:r+".firebaseapp.com",databaseURL:"https://"+r+".firebaseio.com",projectId:r,storageBucket:r+".appspot.com",messagingSenderId:"839840260761",appId:"1:839840260761:web:6d72438c4131e3ce368e08"},a="https://us-east1-"+r+".cloudfunctions.net/g_translate_pronounce"},40694:function(e,t,n){"use strict";n.r(t),n.d(t,{ADD_FREQUENCY_WORD:function(){return r},ADD_FREQUENCY_PHRASE:function(){return i},SERVICE_WORKER_LOGGER_MSG:function(){return a}});let r="add_frequency_word",i="add_frequency_phrase",a="service_worker_logger_msg"},40129:function(e,t,n){"use strict";n.r(t),n.d(t,{localStorageKey:function(){return r}});let r="userSettings"},79624:function(e,t,n){"use strict";n.r(t),n.d(t,{getVerbFormsArray:function(){return s},verbToTargetForm:function(){return l},JapaneseVerb:function(){return o}});var r=n("98947"),i=n("98910"),a=n("71753");function s(e,t){let n={dictionary:void 0===e?void 0:o.parse(e)},r=[{name:"-masu",value:n.dictionary?.masuForm(),description:"Polite Present"},{name:"-mashou",value:n.dictionary?.mashouForm(),description:"Polite Volitional"},{name:"dictionary",value:n.dictionary,description:"Dictionary"},{name:"-nai",value:n.dictionary?.naiForm(),description:"Negative"},{name:"-saseru",value:n.dictionary?.saseruForm(),description:"Causative"},{name:"-te",value:n.dictionary?.teForm(),description:"Te form"},{name:"-ta",value:n.dictionary?.taForm(),description:"Past"},{name:"-chatta",value:n.dictionary?.chattaForm(),description:"Casual Past"},{name:"-reru",value:n.dictionary?.reruForm(),description:"Potential"},{name:"-rareru",value:n.dictionary?.rareruForm(),description:"Passive"}];if(void 0===e){let e=r.map(e=>({name:e.name}));return e}{let e=r.filter(e=>null!==e.value),n=[];return t&&t.length>0&&(n=t.reduce((t,n)=>{let r=e.find(e=>e.name===n);return void 0!==r&&(t=[...t,r]),t},[])),0===n.length&&(n=e),n}}function l(e,t){let n=s(e).find(e=>e.name===t);if(!n)throw Error("Invalid targetForm");return n.value}class o extends r.JapaneseText{trans;intr;exv;constructor(e,t){super(e,t),this.trans=void 0,this.intr=void 0,this.exv=void 0}get[Symbol.toStringTag](){return"JapaneseVerb"}static parse=e=>{let t=r.JapaneseText.parser(e,e=>{let[t,n]=e.japanese.split("\n");return new o(t,n)});return e.intr&&(t.intr=e.intr),e.trans&&(t.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(t.exv=e.exv),t};isExceptionVerb(){return void 0!==this.exv}isIntransitive(){return void 0!==this.trans||!0===this.intr}getTransitivePair(){return this.isIntransitive()&&this.trans?this.trans:void 0}getIntransitivePair(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr}getVerbClass(){let e=super.getPronunciation(),t=super.getSpelling();if(this.exv&&this.isExceptionVerb())return this.exv;let n=e.slice(-1),r=e.slice(-2,-1),{iVowel:a}=(0,i.getConsonantVowel)(r);return t.endsWith("する")||"くる"===e||"だ"===e||"ある"===e?3:1===a&&"る"===n||3===a&&"る"===n?2:1}getStem(){let e,t;let n=a.hiragana;super.hasFurigana()&&(t=super.getSpelling().slice(0,-1));let r=super.getPronunciation().slice(-1),s=super.getPronunciation().slice(0,-1);if(1===this.getVerbClass()||"る"!==r){let{iConsonant:a}=(0,i.getConsonantVowel)(r);e=t?[s+n[a][1],t+n[a][1]]:[s+n[a][1]]}else if("る"===r)e=t?[s,t]:[s];else throw Error("Unknown verb type");return e}naiForm(){let e;let t="ない",n=this.getVerbClass(),s=super.getSpelling(),l=super.hasFurigana();if(1===n){let n=s[s.length-1],o=a.hiragana,c=a.vowels.indexOf("a"),{iConsonant:u}=(0,i.getConsonantVowel)(n),d=o[0===u?14:u][c]+t,p=super.getSpelling().slice(0,-1);if(l){let t=super.getPronunciation().slice(0,-1);e=new r.JapaneseText(t+d,p+d)}else e=new r.JapaneseText(p+d)}else if(2===n){let[n,i]=this.getStem();e=i?new r.JapaneseText(n+t,i+t):new r.JapaneseText(n+t)}else if("来る"===s||"くる"===s)e=new r.JapaneseText("こない","来ない");else if("する"===s)e=new r.JapaneseText("しない");else if("ある"===s)e=new r.JapaneseText("ない");else if("する"===s.slice(-2)){let t=super.getSpelling().slice(0,-2);if(l){let n=super.getPronunciation().slice(0,-2);e=new r.JapaneseText(n+"しない",t+"しない")}else e=new r.JapaneseText(t+"しない")}else throw Error("Unknown exception verb type");return e}saseruForm(){let e;let t="せる",n=this.getVerbClass(),s=super.getSpelling(),l=super.hasFurigana();if(1===n){let n=s[s.length-1],o=a.hiragana,c=a.vowels.indexOf("a"),{iConsonant:u}=(0,i.getConsonantVowel)(n),d=o[0===u?14:u][c]+t,p=super.getSpelling().slice(0,-1);if(l){let t=super.getPronunciation().slice(0,-1);e=new r.JapaneseText(t+d,p+d)}else e=new r.JapaneseText(p+d)}else if(2===n){("居る"===s||"いる"===s)&&(e=new r.JapaneseText("いる","居る"));let[n,i]=this.getStem();e=l?new r.JapaneseText(n+"さ"+t,i+"さ"+t):new r.JapaneseText(n+"さ"+t)}else if("来る"===s||"くる"===s)e=new r.JapaneseText("こさせる","来させる");else if("する"===s)e=new r.JapaneseText("させる");else if("ある"===s)e=new r.JapaneseText("ある");else if("する"===s.slice(-2)){let t=super.getSpelling().slice(0,-2);if(l){let n=super.getPronunciation().slice(0,-2);e=new r.JapaneseText(n+"させる",t+"させる")}else e=new r.JapaneseText(t+"させる")}else throw Error("Unknown exception verb type");return e}reruForm(){let e;let t=this.getVerbClass(),n=super.getSpelling(),s=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===t){let t=n[n.length-1],l=a.hiragana,o=a.vowels.indexOf("e"),{iConsonant:c}=(0,i.getConsonantVowel)(t),u=l[c][o]+"る",d=super.getSpelling().slice(0,-1);if(s){let t=super.getPronunciation().slice(0,-1);e=new r.JapaneseText(t+u,d+u)}else e=new r.JapaneseText(d+u)}else if(2===t){let[t,n]=this.getStem();e=s?new r.JapaneseText(t+"られる",n+"られる"):new r.JapaneseText(t+"られる")}else if("来る"===n||"くる"===n)e=new r.JapaneseText("こられる","来られる");else if(n.endsWith("する")){let t=super.getSpelling().slice(0,-2);if(s){let n=super.getPronunciation().slice(0,-2);e=new r.JapaneseText(n+"できる",t+"できる")}else e=new r.JapaneseText(t+"できる")}else if("ある"===n||"いる"===n)e=null;else throw Error("Unknown exception verb type");return e}rareruForm(){let e;let t=this.getVerbClass(),n=super.getSpelling(),s=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===t){let t=n[n.length-1],l=a.hiragana,o=a.vowels.indexOf("a"),{iConsonant:c}=(0,i.getConsonantVowel)(t),u=l[0===c?14:c][o]+"れる",d=super.getSpelling().slice(0,-1);if(s){let t=super.getPronunciation().slice(0,-1);e=new r.JapaneseText(t+u,d+u)}else e=new r.JapaneseText(d+u)}else if(2===t){let[t,n]=this.getStem();e=s?new r.JapaneseText(t+"られる",n+"られる"):new r.JapaneseText(t+"られる")}else if("来る"===n||"くる"===n)e=new r.JapaneseText("こられる","来られる");else if(n.endsWith("する")){let t=super.getSpelling().slice(0,-2);if(s){let n=super.getPronunciation().slice(0,-2);e=new r.JapaneseText(n+"される",t+"される")}else e=new r.JapaneseText(t+"される")}else if("ある"===n||"いる"===n)e=null;else throw Error("Unknown exception verb type");return e}masuForm(){let e;let t="ます";switch(this.toString()){case"くる\n来る":e=new r.JapaneseText("きます","来ます");break;case"ある":e=new r.JapaneseText("あります");break;case"だ":e=new r.JapaneseText("です")}if("する"===super.getSpelling().slice(-2)){let t="します",n=super.getPronunciation().slice(0,-2),i=super.getSpelling().slice(0,-2);e=super.hasFurigana()?new r.JapaneseText(n+t,i+t):new r.JapaneseText(n+t)}if(!e){let[n,i]=this.getStem();e=i?new r.JapaneseText(n+t,i+t):new r.JapaneseText(n+t)}return e}mashouForm(){let e;let t="ましょう";switch(this.toString()){case"くる\n来る":e=new r.JapaneseText("きましょう","来ましょう");break;case"ある":e=new r.JapaneseText("ありましょう");break;case"だ":e=new r.JapaneseText("でしょう")}if("する"===super.getSpelling().slice(-2)){let t="しましょう",n=super.getPronunciation().slice(0,-2),i=super.getSpelling().slice(0,-2);e=super.hasFurigana()?new r.JapaneseText(n+t,i+t):new r.JapaneseText(n+t)}if(!e){let[n,i]=this.getStem();e=i?new r.JapaneseText(n+t,i+t):new r.JapaneseText(n+t)}return e}taForm(){return this.t_Form(c)}chattaForm(){let e;if(3===this.getVerbClass())return null;let t=super.hasFurigana()?super.getSpelling():super.getPronunciation(),n=t[t.length-1];switch(n){case"ぶ":case"む":case"ぬ":case"ぐ":e="じゃった";break;default:e="ちゃった"}let i=this.t_Form(c);return new r.JapaneseText(i.getPronunciation().slice(0,-1)+e,i.getSpelling().slice(0,-1)+e)}teForm(){return this.t_Form(u)}t_Form(e){let t,n,i;let a=this.getVerbClass(),s=this.furigana;this.hasFurigana()&&this.kanji&&(n=this.furigana,s=this.kanji);let l=s[s.length-1];if(1===a){if("行く"===s||"いく"===s)t=r.JapaneseText.parse({japanese:e.g1.iku});else{switch(l){case"う":case"つ":case"る":i=e.g1.u_tsu_ru;break;case"く":i=e.g1.ku;break;case"ぐ":i=e.g1.gu;break;case"ぬ":case"ぶ":case"む":i=e.g1.mu_nu_bu;break;case"す":i=e.g1.su}t=n?new r.JapaneseText(`${n.slice(0,-1)}${i??""}`,`${s.slice(0,-1)}${i??""}`):new r.JapaneseText(`${s.slice(0,-1)}${i??""}`)}}else if(2===a)i=e.g2.ru,t=n?new r.JapaneseText(n.slice(0,-1)+i,s.slice(0,-1)+i):new r.JapaneseText(s.slice(0,-1)+i);else if("来る"===s||"くる"===s)t=r.JapaneseText.parse({japanese:e.g3.kuru});else if("する"===s)t=r.JapaneseText.parse({japanese:e.g3.suru});else if("だ"===s)t=r.JapaneseText.parse({japanese:e.g3.da});else if("ある"===s)t=r.JapaneseText.parse({japanese:e.g3.aru});else if("する"===s.slice(-2)){let i=e.g3.suru,a=s.slice(0,-2);if(n){let e=n.slice(0,-2);t=new r.JapaneseText(e+i,a+i)}else t=new r.JapaneseText(a+i)}else throw Error("Unknown exception verb type");return t}}let c={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},u={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}}},2147:function(e,t,n){"use strict";n.r(t),n.d(t,{TouchSwipeIgnoreCss:function(){return r},getSwipeDirection:function(){return a},swipeStart:function(){return s},swipeMove:function(){return l},swipeEnd:function(){return o}});let r="slick-swipe-ignore";function i(e){}function a(e,t=!1){let n,r,i;return(n=e.startX-e.curX,r=e.startY-e.curY,(i=Math.round(180*Math.atan2(r,n)/Math.PI))<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315)?"left":i>=135&&i<=225?"right":!0!==t?"vertical":i>=35&&i<=135?"up":"down"}function s(e,{verticalSwiping:t,touchThreshold:n}={verticalSwiping:!1,touchThreshold:5}){return e.target.tagName,{verticalSwiping:t,touchThreshold:n,touchObject:{swipeLength:0,startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}function l(e,t){let n=t.verticalSwiping,r=t.touchThreshold,i=t.swiped,s=t.swiping,l=t.touchObject,o=t.swipeEvent;l.curX="touches"in e?e.touches[0].pageX:e.clientX,l.curY="touches"in e?e.touches[0].pageY:e.clientY,l.swipeLength=Math.abs(l.curX-l.startX);let c=Math.abs(l.curY-l.startY);if(!n&&!s&&c>10)return{touchObject:l,touchThreshold:r,scrolling:!0};n&&(l.swipeLength=Math.sqrt(Math.pow(c,2)+Math.pow(l.swipeLength,2)));let u=a(t.touchObject,n),d={touchObject:l,verticalSwiping:n,touchThreshold:r,swiped:!1,swiping:!1};return!i&&o&&(o(u),d={...d,swiped:!0}),l.swipeLength>10&&(d={...d,swiping:!0}),d}function o(e,t){let n,r=t.touchObject,i=t.touchThreshold,s=t.verticalSwiping,l=t.onSwipe;r.swipeLength&&(n=a(r,s)),r.swipeLength>i&&l&&l(n);let o={swipeDirection:n,...t};return o}},3467:function(e,t,n){"use strict";function r(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function i(e,t,n,{clamped:r=!0}={}){let i=r?Math.max(...[Math.min(...[1,n]),0]):n;return(1-i)*e+i*t}n.r(t),n.d(t,{shuffleArray:function(){return r},lerp:function(){return i}})},8698:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchAudio:function(){return a}});let r=Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),i=new AudioContext;function a(e,t){let n=i.createBufferSource(),a=fetch(e).then(e=>e.arrayBuffer()).then(e=>i.decodeAudioData(e).then(e=>{n.buffer=e,n.connect(i.destination),n.start()})),s=new Promise((e,i)=>{let a=()=>{n.stop(),i(r)};n.addEventListener("ended",()=>{t?.signal.removeEventListener("abort",a),e()}),t?.signal.aborted&&a(),t?.signal.addEventListener("abort",a)});return Promise.all([s,a])}},10114:function(e,t,n){"use strict";function r(){return window}n.r(t),n.d(t,{getWindow:function(){return r}})},90800:function(e,t,n){"use strict";n.r(t),n.d(t,{msgInnerTrim:function(){return i},daysSince:function(){return a},minsSince:function(){return s},spaceRepLog:function(){return l},timedPlayLog:function(){return o},squashSeqMsgs:function(){return c}});var r=n("35225");function i(e,t){let n=Math.ceil(t/2),r=e.length<t?e:e.slice(0,n)+"..."+e.slice(-(t-n));return r}function a(e){let[t]=e.split("T"),n=Date.parse(t),r=Math.abs(Date.now()-n);return Math.floor(r/864e5)}function s(e){let t=Date.parse(e),n=Math.abs(Date.now()-t);return Math.ceil(n/6e4)}function l(e,t,n,s){let l=n[t.uid]?.lastView;if(l){let o=i(t.english,30),c=s?.frequency?" F[w]":"",u=a(l),d=` ${u}d`,p=n[t.uid]?.vC,f=` ${p??0}v`,g=n[t.uid]?.tpAcc,h=void 0!==g?" "+(100*g).toFixed(0)+"%":"";e("Space Rep ["+o+"]"+c+d+f+h,r.DebugLevel.DEBUG)}}function o(e,t,n,s){let l=n[t.uid]?.lastView;if(l){let o=i(t.english,30),c=s?.frequency?" F[w]":"",u=a(l),d=` ${u}d`,p=n[t.uid]?.tpPc,f=void 0!==p?` ${p}v`:"",g=n[t.uid]?.tpAcc,h=void 0!==g?" "+(100*g).toFixed(0)+"%":"",m=n[t.uid]?.tpCAvg,v=void 0!==m?" "+function(e){let t=(Math.round(e)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"");return t}(m)+"s":"";e("Timed Play ["+o+"]"+c+d+f+h+v,r.DebugLevel.DEBUG)}}function c(e){let t=[];if(e.length<2)return e;let[n,r]=e,i=n.msg===r.msg,a=n.msg.endsWith("+")&&n.msg.slice(0,-4)===r.msg;if(i||a){if(i)t=[{...r,msg:`${r.msg} 1 +`}];else{let e=Number(n.msg.slice(-3).slice(0,1));t=[{...r,msg:`${r.msg} ${e+1} +`}]}}else t=e;return t}},66603:function(e,t,n){"use strict";n.r(t),n.d(t,{localStoreAttrUpdate:function(){return s},getLocalStorageSettings:function(){return l}});var r=n("40129"),i=n("10114");function a(e,t){if(1===t.length){let n=t[0];return e[n]}let[n,...r]=t,i=e[n]??{};return a(i,r)}function s(e,t,n,s,o){let c,u=l(r.localStorageKey)??{},d=[...n.split("/").filter(e=>""!==e),s];void 0===o&&(c=!a(t,d));let p=function e(t,n,r){if(1===n.length){let e=n[0];return{...t,[e]:r}}let[i,...a]=n,s=t[i]??{};return{...t,[i]:e(s,a,r)}}({...u},d,c??o),f=a(p,d);return function(e,t){let{localStorage:n}=(0,i.getWindow)();n.setItem(e,JSON.stringify(t))}(r.localStorageKey,{...p,lastModified:e}),f}function l(e){let t=null,{localStorage:n}=(0,i.getWindow)(),r=n.getItem(e),a=null;return null!==r&&(a=JSON.parse(r)),"object"==typeof a&&!Array.isArray(a)&&null!==a&&(t=a),t}},68391:function(e,t,n){"use strict";function r(e,t="Nmemonica App",n){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:t,album:n,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]}))}function i(e){if("mediaSession"in navigator){let t=navigator.mediaSession;try{t.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}function a(e){if("mediaSession"in navigator){let t=navigator.mediaSession;try{for(let[n,r]of e)try{t.setActionHandler(n,r)}catch(e){console.error(e)}}catch(e){console.error(e)}}else console.error("mediaSession not available")}function s(){if("mediaSession"in navigator){let e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}n.r(t),n.d(t,{setMediaSessionMetadata:function(){return r},setMediaSessionPlaybackState:function(){return i},mediaSessionAttach:function(){return a},mediaSessionDetachAll:function(){return s}})},16391:function(e,t,n){"use strict";n.r(t),n.d(t,{SR_CORRECT_TRESHHOLD:function(){return u},SR_MIN_REV_ITEMS:function(){return d},calculateDaysBetweenReviews:function(){return p},getPercentOverdue:function(){return f},spaceRepetitionOrder:function(){return g},removeAction:function(){return h},updateAction:function(){return m},recallDebugLogHelper:function(){return v},recallNotificationHelper:function(){return y}});var r=n("31001"),i=n.n(r),a=n("59953"),s=n.n(a),l=n("90800"),o=n("55329"),c=n("35225");let u=.6,d=5;function p({difficulty:e,accuracy:t,daysSinceReview:n,daysBetweenReviews:r}){let a;let s=f({accuracy:t,daysSinceReview:n,daysBetweenReviews:r}),l=e+i(s/17*(8-9*t),0,1);if(t>=u){let e="number"==typeof r&&r>1?r:1;a=e*(1+(3-1.7*l-1)*(s*(.5>Math.random()?.95:1.05)))}else{let e="number"==typeof r&&r>0?r:1;a=Math.min(1,e/(1+3*l))}return a}function f({accuracy:e,daysSinceReview:t,daysBetweenReviews:n}){let r;return"number"==typeof t&&t>0&&"number"==typeof n&&n>0&&e>=u?r=Math.min(2,t/n):r=1,r}function g(e,t,n){let r=[],i=[],a=[],o=[];e.forEach((e,n)=>{let s=e.uid,c=t[s],d=!!c?.lastView&&0===(0,l.daysSince)(c.lastView),p=!!c?.lastReview&&0===(0,l.daysSince)(c.lastReview);if(!c?.lastReview||p||d||"number"!=typeof c.accuracyP)c&&p?o=[...o,{lastView:c.lastView,views:c.vC,uid:s,index:Number(n)}]:r=[...r,Number(n)];else if(c.accuracyP<100*u)a=[...a,{lastView:c.lastView,views:c.vC,uid:s,index:Number(n)}];else{let e=(0,l.daysSince)(c.lastReview),t=f({accuracy:c.accuracyP/100,daysSinceReview:e,daysBetweenReviews:c.daysBetweenReviews});i=[...i,{percentOverdueCalc:t,lastView:c.lastView,uid:s,index:Number(n)}]}});let c=s(a,["lastView","uid"],["asc","asc"]),d=s(i,["percentOverdueCalc","lastView","uid"],["desc","asc","asc"]),p=c.map(e=>e.index),{due:g,notDue:h}=d.reduce((e,t)=>(t.percentOverdueCalc<1?e.notDue=[...e.notDue,t.index]:e.due=[...e.due,t.index],e),{due:[],notDue:[]}),m=o.map(e=>e.index),{failed:v,overdue:y,overLimit:b}=function(e,t,n){if(!n)return{failed:e,overdue:t,overLimit:[]};let r=Math.max(0,n-e.length),i=e.slice(0,Math.max(r,n)),a=t.slice(0,Math.min(t.length,r)),s=[...e.slice(Math.max(r,n)),...t.slice(Math.min(t.length,r))];return{failed:i,overdue:a,overLimit:s}}(p,g,n);return{failed:v,overdue:y,notDue:h,overLimit:b,notPlayed:r,todayDone:m}}function h(e,t){let n=t[e];if(!n)return;let r={...n,daysBetweenReviews:void 0,consecutiveRight:void 0,lastReview:void 0},i={...t,[e]:r};return i}function m(e,t){let n=t[e]??{lastView:new Date().toJSON(),vC:1},{difficultyP:r,accuracyP:i,daysBetweenReviews:a}=n;if(void 0===r||void 0===i)return{newValue:t,oldValue:t};let s=n.lastReview??t[e]?.lastView??new Date().toJSON(),o=(0,l.daysSince)(s),c=p({difficulty:r/100,accuracy:i/100,daysSinceReview:o,daysBetweenReviews:a}),d=i>=u?(n.consecutiveRight??0)+1:0,f=new Date().toJSON(),g={...n,daysBetweenReviews:c,consecutiveRight:d,lastView:f,lastReview:f},h={...t,[e]:g};return{newValue:h,oldValue:{...t}}}function v(e,t,n,r,i){let a=r[t]?.lastReview,s=a?`${(0,l.daysSince)(a)}d`:"",u=n[t].daysBetweenReviews?.toFixed(0),d=(0,l.msgInnerTrim)(i,30),p=r[t].daysBetweenReviews?.toFixed(0)??"",f=r[t].consecutiveRight??"0",g=void 0===u?`Space Rep [${d}] removed`:`Space Rep [${d}] updated ${s} f:${p}d #${f} -> f:${u}d`;e((0,o.logger)(g,c.DebugLevel.WARN))}function y(e,t){if(void 0===e||void 0===t)return;let n=void 0!==t?(0,l.daysSince)(t):0,r=((e??0)-n).toFixed(0),i=void 0!==t?r.toString():void 0;return i}},67511:function(e,t,n){"use strict";function r(e){let t,n,r,i,a,s,l;if(void 0===e)return{tags:[]};let o=e.split(/[\n;]+/),c="[ぁ-ゟ]{1,4}",u=RegExp("p:"+c+"(,"+c+")*"),d=RegExp("inv:[a-z0-9]{32}"),p=RegExp("intr:[a-z0-9]{32}"),f=RegExp("(i|na)-adj"),g=new RegExp(/\S/),h=[],m=[];return o.forEach(e=>{let o=e.trim();switch(o){case"slang":n=!0;break;case"keigo":r=!0;break;case"EV1":i=1;break;case"intr":a=!0;break;case p.test(o)&&o:s=o.split(":")[1];break;case f.test(o)&&o:l=o.split("-")[0];break;case u.test(o)&&o:m=o.split(":")[1].split(",");break;case d.test(o)&&o:t=o.split(":")[1];break;default:o&&g.test(o)&&(h=0===h.length?[o]:[...h,o])}}),{tags:h,slang:n,keigo:r,exv:i,intr:a,trans:s,adj:l,inverse:t,particles:m}}function i(e){let t={},n=Object.keys(e).map(n=>{let{tags:i,slang:a,keigo:s,exv:l,intr:o,trans:c,adj:u}=r(e[n].tag);return c&&(t[c]={intr:n,trans:c}),{...e[n],uid:n,tag:void 0,tags:i,slang:a,keigo:s,adj:u,exv:l,intr:o,trans:c}});return n=n.map(e=>t[e.uid]?{...e,intr:t[e.uid].intr}:e)}function a(e){let t="subGrp";return Object.values(e).reduce((e,n)=>{if(!n.grp)return{...e};if(e[n.grp])return n[t]&&!e[n.grp].includes(n[t])?{...e,[n.grp]:[...e[n.grp],n[t]]}:e;return n[t]?{...e,[n.grp]:[n[t]]}:{...e,[n.grp]:[]}},{})}function s(e){let t="tags",n=[];return e.forEach(e=>{e[t]&&e[t]?.length>0&&(n=[...n,...e[t]])}),Array.from(new Set(n))}n.r(t),n.d(t,{getPropsFromTags:function(){return r},buildVocabularyArray:function(){return i},buildGroupObject:function(){return a},buildTagObject:function(){return s}})},94978:function(e,t,n){"use strict";n.r(t),n.d(t,{MEMORIZED_THRLD:function(){return o},DIFFICULTY_THRLD:function(){return c},difficultyOrder:function(){return u},difficultySubFilter:function(){return d},alphaOrder:function(){return p},randomOrder:function(){return f},dateViewOrder:function(){return g},spaceRepOrder:function(){return h}});var r=n("59953"),i=n.n(r),a=n("3467"),s=n("90800"),l=n("98947");let o=20,c=70;function u(e,t){let n=[],r=[],a=[];e.forEach((e,i)=>{let s=e.uid,l=t[s];if(l?.difficultyP!==void 0){let e=Number(l.difficultyP);e<o?r=[...r,{difficulty:e,uid:s,index:Number(i)}]:a=[...a,Number(i)]}else n=[...n,Number(i)]});let s=i(r,["difficulty","uid"],["asc","asc"]),l=s.map(e=>e.index);return[...l,...n,...a]}function d(e,t,n){return t.filter(t=>{let r=n[t.uid]?.difficultyP,i=!1,a=!1;return void 0===r?i=e<0?-1*e>c:e<c:a=e<0?r<-1*e:r>e,i||a})}function p(e){let t={},n=[];e.forEach((e,r)=>{t[e.uid]=r,n=[...n,{uid:e.uid,japanese:e.japanese,english:e.english}]});let r=[],a=[],s=[];return(n=i(n,["japanese"],["asc"])).forEach((e,n)=>{r=[...r,t[e.uid]],s=[...s,{uid:e.uid,label:l.JapaneseText.parse(e).getPronunciation(),idx:-1}],a=[...a,{uid:e.uid,label:e.english.toLowerCase(),idx:n}]}),(a=i(a,["label"],["asc"])).forEach((e,t)=>{s[e.idx]={...s[e.idx],idx:t}}),{order:r,jOrder:s,eOrder:a}}function f(e){let t=e.map((e,t)=>t);return(0,a.shuffleArray)(t),t}function g(e,t){let n=[],r=[];e.forEach((e,i)=>{let a=e.uid,s=t[a];s?.lastView!==void 0?r=[...r,{lastView:s.lastView,uid:a,index:Number(i)}]:n=[...n,Number(i)]});let a=i(r,["lastView","uid"],["asc","asc"]),s=a.map(e=>e.index);return[...n,...s]}function h(e,t){let n=[],r=[],a=[],s=[],l=[];e.forEach((e,i)=>{let o=e.uid,c=t[o];if(void 0!==c){if(void 0===c.tpAcc)s=[...s,{date:c.lastView,views:c.vC,uid:o,index:Number(i)}];else if(!0===c.pron){let e=m(c.lastView,c.tpAcc,c.vC),t=v(c.tpPc,c.tpCAvg);r=[...r,{staleness:e,correctness:t,uid:o,index:Number(i)}]}else if(c.tpAcc>=.65){let e=m(c.lastView,c.tpAcc,c.vC),t=v(c.tpPc,c.tpCAvg);l=[...l,{staleness:e,correctness:t,uid:o,index:Number(i)}]}else if(c.tpAcc<.65){let e=m(c.lastView,c.tpAcc,c.vC),t=v(c.tpPc,c.tpCAvg);n=[...n,{staleness:e,correctness:t,uid:o,index:Number(i)}]}}else a=[...a,Number(i)]});let o=i(n,["staleness","correctness","uid"],["desc","asc","asc"]),c=i(r,["staleness","correctness","uid"],["desc","asc","asc"]),u=i(s,["date","views","uid"],["asc","asc","asc"]),d=i(l,["staleness","correctness","uid"],["desc","asc","asc"]),p=o.map(e=>e.index),f=c.map(e=>e.index),g=u.map(e=>e.index),h=d.map(e=>e.index);return[...p,...f,...a,...g,...h]}function m(e,t,n=1){let r=Number.MAX_SAFE_INTEGER;return void 0!==e&&t>0&&n>0&&(r=(0,s.daysSince)(e)*(1/t)*(1/n)),r}function v(e=0,t=0){let n=Number.MIN_SAFE_INTEGER;return e>0&&t>0&&(n=e*(1/t)),n}},21106:function(e,t,n){"use strict";function r(e,t){let[n,r]=e.includes("?")?e.split("?"):[e,""],i=new URLSearchParams(r);for(let[e,n]of Object.entries(t))void 0!==n&&i.append(e,n);return[n,i.toString()].join("?")}n.r(t),n.d(t,{addParam:function(){return r}})},14243:function(e,t,n){"use strict";n.r(t),n.d(t,{useBlast:function(){return o}});var r=n("81409"),i=n("2195"),a=n.n(i),s=n("28697"),l=n("15055");function o(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)({w:0,h:0}),o=(0,l.useWindowSize)(),{x:c,y:u,strategy:d,refs:p,update:f}=(0,r.useFloating)({placement:"bottom",middleware:[(0,r.offset)({mainAxis:void 0===o.height?0:o.height/2-n.h,crossAxis:0}),(0,r.shift)()]});if((0,s.useEffect)(()=>{let t=p.floating.current?.clientWidth,n=p.floating.current?.clientHeight;e.length>0&&t&&t>0&&n&&n>0&&(i({w:t,h:n}),f())},[e,i,p.floating,f]),null!==p.floating.current){p.floating.current.style.top="";let t={position:d,top:`${u??0}px`,left:`${c??0}px`,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"};p.floating.current.className=a({"dark-mode-color":!0,"notification-fade":e.length>0}),Object.keys(t).forEach(e=>{null!==p.floating.current&&(p.floating.current.style[e]=t[e])})}return{blastElRef:p.setFloating,anchorElRef:p.setReference,text:e,setText:t}}},9554:function(e,t,n){"use strict";n.r(t),n.d(t,{useDeviceMotionActions:function(){return i}});var r=n("72834");function i(e){return function(t){let n=n=>{try{(0,r.motionThresholdCondition)(n,e,t)}catch(e){}};return{addDeviceMotionEvent:function(){e>0&&(0,r.getDeviceMotionEventPermission)(()=>{window.addEventListener("devicemotion",n)},()=>{})},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",n)}}}}},6656:function(e,t,n){"use strict";n.r(t),n.d(t,{useFade:function(){return i},useForceRender:function(){return a}});var r=n("28697");function i(e){let[t,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let r;return e>0&&(r=setTimeout(()=>{t&&n(!1)},e)),()=>{e>0&&clearTimeout(r)}}),e>0)?[!t,()=>n(!0)]:[void 0,()=>{}]}function a(){let[e,t]=(0,r.useState)(!0);return()=>t(!e)}},663:function(e,t,n){"use strict";n.r(t),n.d(t,{useKeyboardActions:function(){return i}});var r=n("28697");function i(e,t,n){(0,r.useEffect)(()=>{let r=function(e,t,n){return function(r){for(let[i,a]of[["ArrowRight",()=>e("left")],["ArrowLeft",()=>e("right")],["ArrowUp",()=>e("up")],["ArrowDown",()=>e("down")],[" ",t]])if(i===r.key){let t=a;if(" "!==i&&"function"==typeof n){let r={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[i]||"",s=t=>{t?e(t):a()};t=n(r,s)}t();break}}}(e,t,n);return document.addEventListener("keydown",r,!0),()=>{document.removeEventListener("keydown",r,!0)}},[e,t,n])}},58836:function(e,t,n){"use strict";n.r(t),n.d(t,{useMediaSession:function(){return a}});var r=n("28697"),i=n("68391");function a(e,t,n,a,s){(0,r.useEffect)(()=>{(0,i.setMediaSessionMetadata)(e);let r=[["play",()=>{t&&(n(),(0,i.setMediaSessionPlaybackState)("playing"))}],["pause",()=>{t&&(a(),(0,i.setMediaSessionPlaybackState)("paused"))}],["stop",()=>{t&&(a(),(0,i.setMediaSessionPlaybackState)("paused"))}],["previoustrack",()=>{t&&(a(),s("right"))}],["nexttrack",()=>{t&&(a(),s("left"))}]];return(0,i.mediaSessionAttach)(r),()=>{(0,i.mediaSessionDetachAll)()}},[e,t,n,a,s])}},64305:function(e,t,n){"use strict";n.r(t),n.d(t,{useSwipeActions:function(){return s}});var r=n("28697"),i=n("43549"),a=n("2147");function s(e,t){let n=(0,i.useSelector)(({global:e})=>e.swipeThreshold),s=(0,r.useRef)({}),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let r=function(e,t){return function(n){t.current=(0,a.swipeStart)(n,{verticalSwiping:!0,touchThreshold:e})}}(n,s),i=function(e){return function(t){e.current&&(e.current=(0,a.swipeMove)(t,e.current))}}(s),o=function(e,t,n,r){return function(i){let s=n,l=i.target,o=Array.from(document.getElementsByClassName("loop-stop-btn")).some(e=>e.contains(l)),c=Array.from(document.getElementsByClassName("loop-no-interrupt")).some(e=>e.contains(l)),u=e.current.touchObject?.swipeLength===void 0||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!o){if(c&&u)return;let l=(0,a.getSwipeDirection)(e.current.touchObject,!0);"function"==typeof r&&(s=r(l,n)),t(i,{...e.current,onSwipe:s})}}}(s,a.swipeEnd,e,t);l.current&&n>0&&(l.current.addEventListener("touchstart",r),l.current.addEventListener("touchmove",i),l.current.addEventListener("touchend",o));let c=l.current;return()=>{n>0&&(c?.removeEventListener("touchstart",r),c?.removeEventListener("touchmove",i),c?.removeEventListener("touchend",o))}},[s,n,e,t]),{HTMLDivElementSwipeRef:l}}},15055:function(e,t,n){"use strict";n.r(t),n.d(t,{useWindowSize:function(){return a}});var r=n("28697"),i=n("10114");function a(){let[e,t]=(0,r.useState)({width:void 0,height:void 0});return(0,r.useEffect)(()=>{let e=(0,i.getWindow)();function n(){t({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",n),n(),()=>e.removeEventListener("resize",n)},[]),e}},55329:function(e,t,n){"use strict";n.r(t),n.d(t,{getMemoryStorageStatus:function(){return j},setPersistentStorage:function(){return x},localStorageSettingsInitialized:function(){return w},toggleDarkMode:function(){return T},setMotionThreshold:function(){return k},setSwipeThreshold:function(){return R},debugToggled:function(){return A},logger:function(){return N},default:function(){return D}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("22868"),l=n("39160"),o=n("1258"),c=n("88420"),u=n("91267"),d=n("35225"),p=n("3497"),f=n("72176"),g=n("40694"),h=n("40129"),m=n("90800"),v=n("66603");let y="ui_logger_msg",b={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},j=(0,r.createAsyncThunk)("setting/getMemoryStorageStatus",async(e,t)=>(0,p.memoryStorageStatus)().catch(e=>{if(e instanceof Error)throw t.dispatch(N("Could not get memory storage status",d.DebugLevel.WARN)),t.dispatch(N(e.message,d.DebugLevel.WARN)),e})),x=(0,r.createAsyncThunk)("setting/setPersistentStorage",async(e,t)=>(0,p.persistStorage)().then(e=>{let{warning:n}=e;return n&&t.dispatch(N(n,d.DebugLevel.WARN)),e}).catch(e=>{if(e instanceof Error)throw t.dispatch(N("Could not set persistent storage",d.DebugLevel.WARN)),t.dispatch(N(e.message,d.DebugLevel.WARN)),e})),w=(0,r.createAsyncThunk)("setting/localStorageSettingsInitialized",(e,t)=>{let n=null,r=b;try{n=(0,v.getLocalStorageSettings)(h.localStorageKey)}catch(e){t.dispatch(N("localStorage not supported"))}return null!==n&&(t.dispatch((0,o.oppositeFromLocalStorage)(n.opposite)),t.dispatch((0,u.phraseFromLocalStorage)(n.phrases)),t.dispatch((0,l.kanjiFromLocalStorage)(n.kanji)),t.dispatch((0,s.kanaFromLocalStorage)(n.kana)),t.dispatch((0,c.particleFromLocalStorage)(n.particle)),t.dispatch((0,f.vocabularyFromLocalStorage)(n.vocabulary)),r=a(b,{...n.global})),r}),S=(0,r.createSlice)({name:"setting",initialState:b,reducers:{toggleDarkMode(e){let t=new Date;(0,v.localStoreAttrUpdate)(t,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold(e,t){let n=t.payload,r=new Date;e.swipeThreshold=(0,v.localStoreAttrUpdate)(r,{global:e},"/global/","swipeThreshold",n)},setMotionThreshold(e,t){let n=t.payload,r=new Date;e.motionThreshold=(0,v.localStoreAttrUpdate)(r,{global:e},"/global/","motionThreshold",n)},debugToggled:{reducer:(e,t)=>{let n=t.payload,r=(0,d.toggleAFilter)(e.debug+1,Object.values(d.DebugLevel),n);e.debug=(0,v.localStoreAttrUpdate)(new Date,{global:e},"/global/","debug",r)},prepare:e=>({payload:e})},logger:{reducer:(e,t)=>{let{debug:n}=e,{msg:r,lvl:i,type:a}=t.payload;if(0!==n&&i<=n){let t;t=a===g.SERVICE_WORKER_LOGGER_MSG?`SW: ${r}`:`UI: ${r}`;let n=e.console.slice(0,-1),s=e.console.slice(-1),l={msg:t,lvl:i,time:Date.now()},o=(0,m.squashSeqMsgs)([...s,l]);if(n.length>100){let t=n.slice(-100);e.console=[...t,...o]}else e.console=[...n,...o]}},prepare:(e,t=d.DebugLevel.DEBUG,n=y)=>({payload:{msg:e,lvl:t,type:n}})}},extraReducers:e=>{e.addCase(w.fulfilled,(e,t)=>{let n=t.payload;return{...n}}),e.addCase(j.fulfilled,(e,t)=>{let{quota:n,usage:r,persistent:i}=t.payload;e.memory={quota:n,usage:r,persistent:i}}),e.addCase(x.fulfilled,(e,t)=>{let{quota:n,usage:r,persistent:i}=t.payload;e.memory={quota:n,usage:r,persistent:i}})}}),{toggleDarkMode:T,setMotionThreshold:k,setSwipeThreshold:R,debugToggled:A,logger:N}=S.actions;var D=S.reducer},65510:function(e,t,n){"use strict";n.r(t),n.d(t,{store:function(){return f}});var r=n("64775"),i=n("55329"),a=n("22868"),s=n("39160"),l=n("1258"),o=n("88420"),c=n("91267"),u=n("22547"),d=n("83712"),p=n("72176");let f=(0,r.configureStore)({reducer:{global:i.default,sw:u.default,version:d.default,kana:a.default,vocabulary:p.default,opposite:l.default,phrases:c.default,kanji:s.default,particle:o.default}})},22868:function(e,t,n){"use strict";n.r(t),n.d(t,{kanaFromLocalStorage:function(){return u},toggleKana:function(){return p},setKanaBtnN:function(){return f},toggleKanaEasyMode:function(){return g},toggleKanaGameWideMode:function(){return h},default:function(){return m}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("35225"),l=n("71753"),o=n("66603");let c={hiragana:l.hiragana,katakana:l.katakana,vowels:l.vowels,consonants:l.consonants,sounds:l.sounds,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},u=(0,r.createAsyncThunk)("kana/kanaFromLocalStorage",e=>e),d=(0,r.createSlice)({name:"kana",initialState:c,reducers:{toggleKana(e){let{charSet:t}=e.setting,n=t+1<Object.keys(s.KanaType).length?t+1:s.KanaType.HIRAGANA;e.setting.charSet=(0,o.localStoreAttrUpdate)(new Date,{kana:e.setting},"/kana/","charSet",n)},setKanaBtnN(e,t){let n=t.payload;e.setting.choiceN=(0,o.localStoreAttrUpdate)(new Date,{kana:e.setting},"/kana/","choiceN",n)},toggleKanaEasyMode(e){e.setting.easyMode=(0,o.localStoreAttrUpdate)(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode(e){e.setting.wideMode=(0,o.localStoreAttrUpdate)(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:e=>{e.addCase(u.fulfilled,(e,t)=>{let n=t.payload,r=a(c.setting,n);return{...e,setting:{...r}}})}}),{toggleKana:p,setKanaBtnN:f,toggleKanaEasyMode:g,toggleKanaGameWideMode:h}=d.actions;var m=d.reducer},39160:function(e,t,n){"use strict";n.r(t),n.d(t,{getKanji:function(){return f},kanjiFromLocalStorage:function(){return g},deleteMetaKanji:function(){return h},updateSpaceRepKanji:function(){return m},removeFromSpaceRepetition:function(){return v},setSpaceRepetitionMetadata:function(){return y},toggleKanjiActiveTag:function(){return j},toggleKanjiActiveGrp:function(){return x},toggleKanjiOrdering:function(){return w},addFrequencyKanji:function(){return S},removeFrequencyKanji:function(){return T},setMemorizedThreshold:function(){return k},setKanjiDifficulty:function(){return R},setKanjiAccuracy:function(){return A},setSpaRepMaxItemReview:function(){return N},toggleKanjiFilter:function(){return D},toggleKanjiReinforcement:function(){return C},toggleIncludeNew:function(){return M},toggleIncludeReviewed:function(){return P},setKanjiBtnN:function(){return E},toggleKanjiFadeInAnswers:function(){return F},default:function(){return I}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("35225"),l=n("39147"),o=n("66603"),c=n("16391"),u=n("67511"),d=n("94978");let p={value:[],version:"",tagObj:[],setting:{filter:2,ordered:0,reinforce:!1,difficultyThreshold:d.MEMORIZED_THRLD,repTID:-1,repetition:{},spaRepMaxReviewItem:c.SR_MIN_REV_ITEMS,activeGroup:[],activeTags:[],includeNew:!0,includeReviewed:!0,choiceN:32,fadeInAnswers:!1}},f=(0,r.createAsyncThunk)("kanji/getKanji",async(e,t)=>{let n=t.getState(),r=n.version.kanji??"0",i=await fetch(l.firebaseConfig.databaseURL+"/lambda/kanji.json",{headers:{"Data-Version":r}}).then(e=>e.json());return{value:i,version:r}}),g=(0,r.createAsyncThunk)("kanji/kanjiFromLocalStorage",e=>e),h=(0,r.createAsyncThunk)("kanji/deleteMetaKanji",(e,t)=>{let n=t.getState().kanji,r=n.setting.repetition;return(0,s.deleteMetadata)(e,r)}),m=(0,r.createAsyncThunk)("kanji/updateSpaceRepKanji",(e,t)=>{let{uid:n,shouldIncrement:r}=e,i=t.getState().kanji,a=i.setting.repetition;return(0,s.updateSpaceRepTerm)(n,a,{count:r,date:!0})}),v=(0,r.createAsyncThunk)("kanji/removeFromSpaceRepetition",(e,t)=>{let{uid:n}=e,r=t.getState().kanji,i=r.setting.repetition;return(0,c.removeAction)(n,i)}),y=(0,r.createAsyncThunk)("kanji/setSpaceRepetitionMetadata",(e,t)=>{let{uid:n}=e,r=t.getState().kanji,i=r.setting.repetition;return(0,c.updateAction)(n,i)}),b=(0,r.createSlice)({name:"kanji",initialState:p,reducers:{toggleKanjiActiveTag(e,t){let n;let r=t.payload,{activeTags:i}=e.setting;n=i.includes(r)?i.filter(e=>e!==r):[...i,r],e.setting.activeTags=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","activeTags",n)},toggleKanjiActiveGrp:(e,t)=>{let n=t.payload,{activeGroup:r}=e.setting,i=Array.isArray(n)?n:[n],a=(0,s.grpParse)(i,r);e.setting.activeGroup=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","activeGroup",a)},toggleKanjiOrdering(e,t){let{ordered:n}=e.setting,r=t.payload,i=[s.TermSortBy.DIFFICULTY,s.TermSortBy.RANDOM,s.TermSortBy.VIEW_DATE,s.TermSortBy.RECALL],a=(0,s.toggleAFilter)(n+1,i,r);e.setting.ordered=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","ordered",a)},addFrequencyKanji(e,t){let n=t.payload,{record:r}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",r)},removeFrequencyKanji(e,t){let n=t.payload,r=e.setting.repetition;if(r[n]?.rein===!0){let{record:t}=(0,s.updateSpaceRepTerm)(n,r,{count:!1,date:!1},{set:{rein:null}});(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",t),t&&(e.setting.repTID=Date.now(),e.setting.repetition=t)}},setMemorizedThreshold(e,t){let n=t.payload;e.setting.difficultyThreshold=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","difficultyThreshold",n)},setKanjiDifficulty:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setKanjiAccuracy:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setSpaRepMaxItemReview(e,t){let n=Math.max(c.SR_MIN_REV_ITEMS,t.payload);e.setting.spaRepMaxReviewItem=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","spaRepMaxReviewItem",n)},setKanjiBtnN(e,t){let n=t.payload;e.setting.choiceN=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","choiceN",n)},toggleKanjiFadeInAnswers(e,t){let n=t.payload;e.setting.fadeInAnswers=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","fadeInAnswers",n)},toggleKanjiFilter(e,t){let n=t.payload,{filter:r,reinforce:i}=e.setting,a=(0,s.toggleAFilter)(r+1,[s.TermFilterBy.FREQUENCY,s.TermFilterBy.TAGS],n);e.setting.filter=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","filter",a),0!==a&&i&&(e.setting.reinforce=!1)},toggleKanjiReinforcement(e,t){let n=t.payload;e.setting.reinforce=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","reinforce",n)},toggleIncludeNew(e){e.setting.includeNew=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","includeReviewed")}},extraReducers:e=>{e.addCase(f.fulfilled,(e,t)=>{let{value:n,version:r}=t.payload,i=Object.keys(n).map(e=>{let{tags:t}=(0,u.getPropsFromTags)(n[e].tag),r=n[e].grp?.toLowerCase()==="radical"||t.find(e=>"radical"===e.toLowerCase());return{...n[e],uid:e,tag:void 0,tags:t,radical:r?{example:n[e].radex?.split("")??[]}:void 0}});e.tagObj=(0,u.buildTagObject)(i),e.value=i,e.version=r}),e.addCase(g.fulfilled,(e,t)=>{let n=t.payload,r=a(p.setting,n);return{...e,setting:{...r,repTID:Date.now()}}}),e.addCase(m.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",n)}),e.addCase(y.fulfilled,(e,t)=>{let{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",n)}),e.addCase(v.fulfilled,(e,t)=>{let n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",n))}),e.addCase(h.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,o.localStoreAttrUpdate)(new Date,{kanji:e.setting},"/kanji/","repetition",n)})}}),{toggleKanjiActiveTag:j,toggleKanjiActiveGrp:x,toggleKanjiOrdering:w,addFrequencyKanji:S,removeFrequencyKanji:T,setMemorizedThreshold:k,setKanjiDifficulty:R,setKanjiAccuracy:A,setSpaRepMaxItemReview:N,toggleKanjiFilter:D,toggleKanjiReinforcement:C,toggleIncludeNew:M,toggleIncludeReviewed:P,setKanjiBtnN:E,toggleKanjiFadeInAnswers:F}=b.actions;var I=b.reducer},1258:function(e,t,n){"use strict";n.r(t),n.d(t,{getOpposite:function(){return s},oppositeFromLocalStorage:function(){return l},setOppositesARomaji:function(){return c},setOppositesQRomaji:function(){return u},toggleOppositeFadeInAnswers:function(){return d},default:function(){return p}});var r=n("64775"),i=n("39147"),a=n("66603");let s=(0,r.createAsyncThunk)("opposite/getOpposite",async(e,t)=>{let n=t.getState(),r=n.version.phrases??"0";return fetch(i.firebaseConfig.databaseURL+"/lambda/opposites.json",{headers:{"Data-Version":r}}).then(e=>e.json().then(e=>({value:e,version:r})))}),l=(0,r.createAsyncThunk)("opposite/oppositeFromLocalStorage",async e=>e),o=(0,r.createSlice)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1,fadeInAnswers:!1},reducers:{setOppositesARomaji(e){let t=new Date;e.aRomaji=(0,a.localStoreAttrUpdate)(t,{opposite:e},"/opposite/","aRomaji")},setOppositesQRomaji(e){let t=new Date;(0,a.localStoreAttrUpdate)(t,{opposite:e},"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji},toggleOppositeFadeInAnswers(e,t){let n=t.payload;e.fadeInAnswers=(0,a.localStoreAttrUpdate)(new Date,{opposite:e},"/opposite/","fadeInAnswers",n)}},extraReducers:e=>{e.addCase(s.fulfilled,(e,t)=>{let{value:n,version:r}=t.payload;e.value=n,e.version=r}),e.addCase(l.fulfilled,(e,t)=>{let n=t.payload;return{...e,...n}})}}),{setOppositesARomaji:c,setOppositesQRomaji:u,toggleOppositeFadeInAnswers:d}=o.actions;var p=o.reducer},88420:function(e,t,n){"use strict";n.r(t),n.d(t,{getParticleGame:function(){return f},particleFromLocalStorage:function(){return g},setParticlesARomaji:function(){return v},toggleParticleFadeInAnswers:function(){return y},default:function(){return b}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("55329"),l=n("91267"),o=n("35225"),c=n("98947"),u=n("98910"),d=n("66603");let p={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1,fadeInAnswers:!1}},f=(0,r.createAsyncThunk)("particle/getParticleGame",async(e,t)=>{let n=t.getState().particle,r=t.getState().phrases.value;if(!(r.length>0))return t.dispatch((0,l.getPhrase)()).unwrap().then(e=>{let{values:n}=e,r=h(n),{errors:i}=r;return i&&Object.keys(i).forEach(e=>{t.dispatch((0,s.logger)(`Multiple match ${i[e].japanese}`,o.DebugLevel.WARN)),t.dispatch((0,s.logger)(`Particle ${i[e].particle}: ${i[e].times}`,o.DebugLevel.WARN))}),{phrase:n,game:r}});{let e,i=0===n.particleGame.phrases.length;if(i){e=h(r);let{errors:n}=e;n&&Object.keys(n).forEach(e=>{t.dispatch((0,s.logger)(`Multiple match ${n[e].japanese}`,o.DebugLevel.WARN)),t.dispatch((0,s.logger)(`Particle ${n[e].particle}: ${n[e].times}`,o.DebugLevel.WARN))})}return{game:e}}}),g=(0,r.createAsyncThunk)("particleGame/particleFromLocalStorage",e=>e);function h(e){let t,n=[],r=e.reduce((e,r)=>{if(r.particles&&r.particles?.length>0){let i=c.JapaneseText.parse(r),a=i.getSpelling();r.particles.forEach(i=>{if(2===a.split(i).length){let t=(0,u.romajiParticle)(i),s=a.indexOf(i),l=s+i.length;n=[...n,{japanese:i,romaji:t}],e=[...e,{answer:{japanese:i,romaji:t,start:s,end:l},question:r,english:r.english,literal:r.lit}]}else t={...t??{},[r.english]:{japanese:a,particle:i,times:a.split(i).length}}})}return e},[]);return{phrases:r,particles:n,errors:t}}let m=(0,r.createSlice)({name:"particleGame",initialState:p,reducers:{setParticlesARomaji(e){e.setting.aRomaji=(0,d.localStoreAttrUpdate)(new Date,{particle:e.setting},"/particle/","aRomaji")},toggleParticleFadeInAnswers(e,t){let n=t.payload;e.setting.fadeInAnswers=(0,d.localStoreAttrUpdate)(new Date,{particle:e.setting},"/particle/","fadeInAnswers",n)}},extraReducers:e=>{e.addCase(f.fulfilled,(e,t)=>{let{game:n}=t.payload;n&&(e.particleGame=n)}),e.addCase(g.fulfilled,(e,t)=>{let n=t.payload,r=a(p.setting,n);return{...e,setting:{...r}}})}}),{setParticlesARomaji:v,toggleParticleFadeInAnswers:y}=m.actions;var b=m.reducer},91267:function(e,t,n){"use strict";n.r(t),n.d(t,{getPhrase:function(){return g},phraseFromLocalStorage:function(){return h},deleteMetaPhrase:function(){return m},updateSpaceRepPhrase:function(){return v},removeFromSpaceRepetition:function(){return y},setSpaceRepetitionMetadata:function(){return b},flipPhrasesPracticeSide:function(){return x},togglePhrasesRomaji:function(){return w},togglePhrasesFilter:function(){return S},togglePhraseActiveGrp:function(){return T},togglePhrasesReinforcement:function(){return k},toggleIncludeNew:function(){return R},toggleIncludeReviewed:function(){return A},addFrequencyPhrase:function(){return N},setPhraseDifficulty:function(){return D},setPhraseAccuracy:function(){return C},setMemorizedThreshold:function(){return M},setSpaRepMaxItemReview:function(){return P},removeFrequencyPhrase:function(){return E},togglePhrasesOrdering:function(){return F},default:function(){return I}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("55329"),l=n("35225"),o=n("39147"),c=n("66603"),u=n("16391"),d=n("67511"),p=n("94978");let f={value:[],version:"",grpObj:{},setting:{ordered:0,englishSideUp:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},spaRepMaxReviewItem:u.SR_MIN_REV_ITEMS,frequency:{uid:void 0,count:0},activeGroup:[],filter:0,difficultyThreshold:p.MEMORIZED_THRLD,includeNew:!0,includeReviewed:!0}},g=(0,r.createAsyncThunk)("phrase/getPhrase",async(e,t)=>{let n=t.getState(),r=n.version.phrases??"0",i=await fetch(o.firebaseConfig.databaseURL+"/lambda/phrases.json",{headers:{"Data-Version":r}}).then(e=>e.json()),a=(0,d.buildGroupObject)(i),{values:c,errors:u}=function(e){let t;let n=Object.keys(e).map(n=>{let{tags:r,particles:i,inverse:a}=(0,d.getPropsFromTags)(e[n].tag);t=function(e,t){let n;let{inverse:r}=(0,d.getPropsFromTags)(t[e].tag),i=r;for(;i&&i!==e;){let{inverse:r}=(0,d.getPropsFromTags)(t[i]?.tag);r?i=r:(i=void 0,n=[...n??[],`Missing inverse pair for ${t[e].japanese}`])}return n}(n,e);let s=e[n],l=function(e){let t={polite:!1};if(e.japanese.endsWith("。")){let n;let[r,i]=e.japanese.split("\n");t=r.indexOf("。")!==r.lastIndexOf("。")||r.includes("、")?{polite:!0}:{japanese:n=i?.endsWith("。")&&r.endsWith("。")?`${r.slice(0,-1)}
${i.slice(0,-1)}`:e.japanese.slice(0,-1),polite:!0}}return t}(s);return{...e[n],uid:n,tag:void 0,tags:r,particles:i,inverse:a,...l}});return{values:n,errors:t}}(i);return u&&u.forEach(e=>{t.dispatch((0,s.logger)(e,l.DebugLevel.WARN))}),{version:r,values:c,groups:a}}),h=(0,r.createAsyncThunk)("phrase/phraseFromLocalStorage",e=>e),m=(0,r.createAsyncThunk)("phrase/deleteMetaPhrase",(e,t)=>{let n=t.getState().phrases,r=n.setting.repetition;return(0,l.deleteMetadata)(e,r)}),v=(0,r.createAsyncThunk)("phrase/updateSpaceRepPhrase",(e,t)=>{let{uid:n,shouldIncrement:r}=e,i=t.getState().phrases,a=i.setting.repetition;return(0,l.updateSpaceRepTerm)(n,a,{count:r,date:!0})}),y=(0,r.createAsyncThunk)("phrase/removeFromSpaceRepetition",(e,t)=>{let{uid:n}=e,r=t.getState().phrases,i=r.setting.repetition;return(0,u.removeAction)(n,i)}),b=(0,r.createAsyncThunk)("phrase/setSpaceRepetitionMetadata",(e,t)=>{let{uid:n}=e,r=t.getState().phrases,i=r.setting.repetition;return(0,u.updateAction)(n,i)}),j=(0,r.createSlice)({name:"phrase",initialState:f,reducers:{togglePhrasesFilter(e,t){let n=t.payload,r=[l.TermFilterBy.FREQUENCY,l.TermFilterBy.GROUP],{filter:i,reinforce:a}=e.setting,s=(0,l.toggleAFilter)(i+1,r,n);e.setting.filter=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","filter",s),s!==l.TermFilterBy.GROUP&&a&&(e.setting.reinforce=!1)},togglePhraseActiveGrp(e,t){let n=t.payload,{activeGroup:r}=e.setting,i=Array.isArray(n)?n:[n],a=(0,l.grpParse)(i,r);e.setting.activeGroup=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","activeGroup",a)},togglePhrasesReinforcement(e,t){let n=t.payload;e.setting.reinforce=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","reinforce",n)},setMemorizedThreshold(e,t){let n=t.payload;e.setting.difficultyThreshold=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","difficultyThreshold",n)},setPhraseDifficulty:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,l.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setSpaRepMaxItemReview(e,t){let n=Math.max(u.SR_MIN_REV_ITEMS,t.payload);e.setting.spaRepMaxReviewItem=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","spaRepMaxReviewItem",n)},setPhraseAccuracy:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,l.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},addFrequencyPhrase(e,t){let n=t.payload,{record:r}=(0,l.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",r);let i={uid:n,count:e.setting.frequency.count+1};e.setting.frequency=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","frequency",i)},removeFrequencyPhrase(e,t){let n=t.payload,r=e.setting.repetition;if(r[n]?.rein===!0){let{record:t}=(0,l.updateSpaceRepTerm)(n,r,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",t);let i={uid:n,count:e.setting.frequency.count-1};e.setting.frequency=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","frequency",i)}},flipPhrasesPracticeSide(e){e.setting.englishSideUp=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","englishSideUp")},togglePhrasesRomaji(e){e.setting.romaji=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering(e,t){let n=[l.TermSortBy.RANDOM,l.TermSortBy.VIEW_DATE,l.TermSortBy.RECALL],r=t.payload,{ordered:i}=e.setting,a=(0,l.toggleAFilter)(i+1,n,r);e.setting.ordered=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","ordered",a)},toggleIncludeNew(e){e.setting.includeNew=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","includeReviewed")}},extraReducers:e=>{e.addCase(g.fulfilled,(e,t)=>{let{version:n,values:r,groups:i}=t.payload;e.grpObj=i,e.value=r,e.version=n}),e.addCase(h.fulfilled,(e,t)=>{let n=t.payload,r=a(f.setting,n),i=Object.keys(r.repetition).filter(e=>r.repetition[e]?.rein===!0);return r.frequency={uid:void 0,count:i.length},{...e,setting:{...r,repTID:Date.now()}}}),e.addCase(v.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",n)}),e.addCase(b.fulfilled,(e,t)=>{let{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",n)}),e.addCase(y.fulfilled,(e,t)=>{let n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",n))}),e.addCase(m.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{phrases:e.setting},"/phrases/","repetition",n)})}}),{flipPhrasesPracticeSide:x,togglePhrasesRomaji:w,togglePhrasesFilter:S,togglePhraseActiveGrp:T,togglePhrasesReinforcement:k,toggleIncludeNew:R,toggleIncludeReviewed:A,addFrequencyPhrase:N,setPhraseDifficulty:D,setPhraseAccuracy:C,setMemorizedThreshold:M,setSpaRepMaxItemReview:P,removeFrequencyPhrase:E,togglePhrasesOrdering:F}=j.actions;var I=j.reducer},22547:function(e,t,n){"use strict";n.r(t),n.d(t,{serviceWorkerRegistered:function(){return a},default:function(){return o}});var r=n("64775"),i=n("40694");let a=(0,r.createAsyncThunk)("serviceWorker/serviceWorkerRegistered",async()=>"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then(e=>e.active?.state):Promise.reject("No Service Worker")),s=(0,r.createSlice)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded(e,t){let{newestWords:n}=t.payload;for(let e in n){let{freq:t,dic:r}=n[e],a=i.ADD_FREQUENCY_WORD,s="GET_VOCABULARY";"phrases"===e&&i.ADD_FREQUENCY_PHRASE,console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(`${t.length} new ${e}`)}}},extraReducers:e=>{e.addCase(a.fulfilled,e=>{e.registered=!0})}}),{serviceWorkerNewTermsAdded:l}=s.actions;var o=s.reducer},35225:function(e,t,n){"use strict";n.r(t),n.d(t,{DebugLevel:function(){return r},TermFilterBy:function(){return i},TermSortBy:function(){return a},KanaType:function(){return s},TermSortByLabel:function(){return l},toggleAFilter:function(){return o},grpParse:function(){return c},updateSpaceRepTerm:function(){return u},deleteMetadata:function(){return d}});let r=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),i=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),a=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4,RECALL:5}),s=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),l=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty","Recall"];function o(e,t,n){let r=Math.max(...t),i=e;if(void 0!==n&&t.includes(n))i=n;else for(;!t.includes(i)||i>r;)i=i+1>r?0:i+1;return i}function c(e,t){let n=Array.from(new Set(e)),r=Array.from(new Set(t));return n.forEach(e=>{let t=!e.includes(".");r=r.includes(e)?r.filter(t=>t!==e):[...r,e],t&&r.some(t=>t.includes(e+"."))&&(r=r.filter(t=>!t.startsWith(e+".")))}),r}function u(e,t,n={count:!0,date:!0},r){let i;let a=t[e],s=t[e]?{...t[e]}:void 0,l=a?.vC??-1;i=l>0&&!0===n.count?l+1:l>0&&!1===n.count?l:1;let o={};if(void 0!==r){if(r.toggle){let n=r.toggle.reduce((n,r)=>{let i;return i=["f"].includes(r)?t[e]?.[r]!==!1:t[e]?.[r],{...n,[r]:!i}},{});o={...o,...n}}if(void 0!==r.set){let e=Object.keys(r.set).reduce((e,t)=>(r.set?.[t]!==void 0&&(e=null===r.set[t]?{...e,[t]:void 0}:{...e,[t]:r.set[t]}),e),{});o={...o,...e}}}let c=a?.lastView,u=void 0!==c&&!1===n.date,d=u?c:new Date().toJSON(),p={...t[e]??{},vC:i,lastView:d,...o},f={...t,[e]:p};return{record:f,value:p,prevVal:s??p}}function d(e,t){let n=e.reduce((e,t)=>{let n={...e,[t]:void 0};return delete n[t],n},{...t});return{record:n}}},3497:function(e,t,n){"use strict";function r(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then(e=>a().then(({quota:t,usage:n})=>({quota:t,usage:n,persistent:e})));{let e=Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}}function i(){let e=Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then(function(t){return t?a().then(({quota:e,usage:n})=>({quota:e,usage:n,persistent:t,warning:void 0})):navigator.storage.persist().then(function(t){let n;return t?(n="Storage will not be cleared except by explicit user action",a().then(({quota:e,usage:r})=>({quota:e,usage:r,persistent:t,warning:n}))):Promise.reject(e)})}):Promise.reject(e)}function a(){return new Promise((e,t)=>{if("webkitTemporaryStorage"in navigator)navigator.webkitTemporaryStorage.queryUsageAndQuota((t,n)=>{e({quota:n,usage:t})},t);else if(null!=navigator.storage&&null!=navigator.storage.estimate)navigator.storage.estimate().then(e).catch(t);else{let e=Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}});t(e)}})}n.r(t),n.d(t,{memoryStorageStatus:function(){return r},persistStorage:function(){return i}})},83712:function(e,t,n){"use strict";n.r(t),n.d(t,{getVersions:function(){return a},default:function(){return l}});var r=n("64775"),i=n("39147");let a=(0,r.createAsyncThunk)("version/getVersions",async()=>fetch(i.firebaseConfig.databaseURL+"/lambda/cache.json").then(e=>e.json())),s=(0,r.createSlice)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:e=>{e.addCase(a.fulfilled,(e,t)=>t.payload)}});var l=s.reducer},72176:function(e,t,n){"use strict";n.r(t),n.d(t,{vocabularyInitState:function(){return f},getVocabulary:function(){return g},vocabularyFromLocalStorage:function(){return h},deleteMetaVocab:function(){return m},updateSpaceRepWord:function(){return v},removeFromSpaceRepetition:function(){return y},setSpaceRepetitionMetadata:function(){return b},verbFormChanged:function(){return x},furiganaToggled:function(){return w},removeFrequencyWord:function(){return S},setVerbFormsOrder:function(){return T},toggleVocabularyOrdering:function(){return k},toggleVocabularyActiveGrp:function(){return R},toggleAutoVerbView:function(){return A},toggleVocabularyFilter:function(){return N},toggleVocabularyHint:function(){return D},toggleVocabularyReinforcement:function(){return C},toggleVocabularyRomaji:function(){return M},toggleIncludeNew:function(){return P},toggleIncludeReviewed:function(){return E},updateVerbColSplit:function(){return F},toggleVocabularyBareKanji:function(){return I},flipVocabularyPracticeSide:function(){return L},addFrequencyWord:function(){return O},setWordDifficulty:function(){return V},setMemorizedThreshold:function(){return U},setWordTPCorrect:function(){return B},setWordTPIncorrect:function(){return _},setSpaRepMaxItemReview:function(){return K},setWordAccuracy:function(){return q},default:function(){return G}});var r=n("64775"),i=n("15874"),a=n.n(i),s=n("35225"),l=n("39147"),o=n("79624"),c=n("66603"),u=n("16391"),d=n("67511"),p=n("94978");let f={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,englishSideUp:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,difficultyThreshold:p.MEMORIZED_THRLD,reinforce:!1,repTID:-1,repetition:{},spaRepMaxReviewItem:u.SR_MIN_REV_ITEMS,activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:(0,o.getVerbFormsArray)().map(e=>e.name),includeNew:!0,includeReviewed:!0}},g=(0,r.createAsyncThunk)("vocabulary/getVocabulary",async(e,t)=>{let n=t.getState(),r=n.version.vocabulary??"0",i=await fetch(l.firebaseConfig.databaseURL+"/lambda/vocabulary.json",{headers:{"Data-Version":r}}).then(e=>e.json());return{value:i,version:r}}),h=(0,r.createAsyncThunk)("vocabulary/vocabularyFromLocalStorage",e=>e),m=(0,r.createAsyncThunk)("vocabulary/deleteMetaVocab",(e,t)=>{let n=t.getState().vocabulary,r=n.setting.repetition;return(0,s.deleteMetadata)(e,r)}),v=(0,r.createAsyncThunk)("vocabulary/updateSpaceRepWord",(e,t)=>{let{uid:n,shouldIncrement:r}=e,i=t.getState().vocabulary,a=i.setting.repetition;return(0,s.updateSpaceRepTerm)(n,a,{count:r,date:!0})}),y=(0,r.createAsyncThunk)("vocabulary/removeFromSpaceRepetition",(e,t)=>{let{uid:n}=e,r=t.getState().vocabulary,i=r.setting.repetition;return(0,u.removeAction)(n,i)}),b=(0,r.createAsyncThunk)("vocabulary/setSpaceRepetitionMetadata",(e,t)=>{let{uid:n}=e,r=t.getState().vocabulary,i=r.setting.repetition;return(0,u.updateAction)(n,i)}),j=(0,r.createSlice)({name:"vocabulary",initialState:f,reducers:{verbFormChanged:(e,t)=>({...e,verbForm:t.payload}),toggleVocabularyActiveGrp:(e,t)=>{let n=t.payload,{activeGroup:r}=e.setting,i=Array.isArray(n)?n:[n],a=(0,s.grpParse)(i,r);e.setting.activeGroup=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",a)},furiganaToggled(e,t){let n=t.payload,{record:r}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",r)},toggleVocabularyReinforcement(e,t){let n=t.payload;e.setting.reinforce=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce",n)},toggleVocabularyOrdering(e,t){let{ordered:n}=e.setting,r=t.payload,i=[s.TermSortBy.ALPHABETIC,s.TermSortBy.DIFFICULTY,s.TermSortBy.GAME,s.TermSortBy.RANDOM,s.TermSortBy.VIEW_DATE,s.TermSortBy.RECALL],a=(0,s.toggleAFilter)(n+1,i,r);e.setting.ordered=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",a)},flipVocabularyPracticeSide(e){e.setting.englishSideUp=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","englishSideUp")},toggleVocabularyRomaji(e){e.setting.romaji=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji(e){e.setting.bareKanji=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint(e){e.setting.hintEnabled=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter(e,t){let n=[s.TermFilterBy.FREQUENCY,s.TermFilterBy.GROUP],r=t.payload,{filter:i,reinforce:a}=e.setting,l=(0,s.toggleAFilter)(i+1,n,r);e.setting.filter=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","filter",l),0!==l&&a&&(e.setting.reinforce=!1)},setVerbFormsOrder(e,t){let n=t.payload;e.setting.verbFormsOrder=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",n)},toggleAutoVerbView(e){e.setting.autoVerbView=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit(e,t){let n=t.payload;e.setting.verbColSplit=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",n)},addFrequencyWord(e,t){let n=t.payload,{record:r}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",r)},removeFrequencyWord(e,t){let n=t.payload,r=e.setting.repetition;if(r[n]?.rein===!0){let{record:t}=(0,s.updateSpaceRepTerm)(n,r,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)}},setMemorizedThreshold(e,t){let n=t.payload;e.setting.difficultyThreshold=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","difficultyThreshold",n)},setWordDifficulty:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setWordTPCorrect:{reducer:(e,t)=>{let{uid:n,tpElapsed:r,pronunciation:i}=t.payload,a=e.setting.repetition,s=1,l=1,o=r,u=a[n];if(void 0!==u){let e=u.tpPc,t=u.tpAcc,n=u.tpCAvg??0;if(void 0!==e&&void 0!==t){s=e+1;let i=e*t;l=(i+1)/s;o=(n*i+r)/(i+1)}}let d=!0===i||(u?.pron??!1),p={...a[n]??{lastView:new Date().toJSON(),vC:1},pron:d||void 0,tpPc:s,tpAcc:l,tpCAvg:o},f={...a,[n]:p};e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",f)},prepare:(e,t,{pronunciation:n}={})=>({type:"string",payload:{uid:e,tpElapsed:t,pronunciation:n}})},setWordTPIncorrect:{reducer:(e,t)=>{let{uid:n,pronunciation:r}=t.payload,i=e.setting.repetition,a=1,s=0,l=i[n];if(void 0!==l){let e=l.tpPc,t=l.tpAcc;if(void 0!==e&&void 0!==t){a=e+1;s=(e*t+0)/a}}let o={...i[n]??{lastView:new Date().toJSON(),vC:1},tpPc:a,tpAcc:s,pron:!0===r||void 0},u={...i,[n]:o};e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",u)},prepare:(e,{pronunciation:t}={})=>({payload:{uid:e,pronunciation:t}})},setSpaRepMaxItemReview(e,t){let n=Math.max(u.SR_MIN_REV_ITEMS,t.payload);e.setting.spaRepMaxReviewItem=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","spaRepMaxReviewItem",n)},setWordAccuracy:{reducer:(e,t)=>{let{uid:n,value:r}=t.payload,{record:i}=(0,s.updateSpaceRepTerm)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:r}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},prepare:(e,t)=>({payload:{uid:e,value:t}})},toggleIncludeNew(e){e.setting.includeNew=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","includeReviewed")}},extraReducers:e=>{e.addCase(h.fulfilled,(e,t)=>{let n=t.payload,r=a(f.setting,n);return{...e,setting:{...r,repTID:Date.now()}}}),e.addCase(g.fulfilled,(e,t)=>{let{value:n,version:r}=t.payload;e.grpObj=(0,d.buildGroupObject)(n),e.value=(0,d.buildVocabularyArray)(n),e.version=r}),e.addCase(v.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)}),e.addCase(b.fulfilled,(e,t)=>{let{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)}),e.addCase(y.fulfilled,(e,t)=>{let n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n))}),e.addCase(m.fulfilled,(e,t)=>{let{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.localStoreAttrUpdate)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)})}}),{verbFormChanged:x,furiganaToggled:w,removeFrequencyWord:S,setVerbFormsOrder:T,toggleVocabularyOrdering:k,toggleVocabularyActiveGrp:R,toggleAutoVerbView:A,toggleVocabularyFilter:N,toggleVocabularyHint:D,toggleVocabularyReinforcement:C,toggleVocabularyRomaji:M,toggleIncludeNew:P,toggleIncludeReviewed:E,updateVerbColSplit:F,toggleVocabularyBareKanji:I,flipVocabularyPracticeSide:L,addFrequencyWord:O,setWordDifficulty:V,setMemorizedThreshold:U,setWordTPCorrect:B,setWordTPIncorrect:_,setSpaRepMaxItemReview:K,setWordAccuracy:q}=j.actions;var G=j.reducer}},f={};function g(e){var t=f[e];if(void 0!==t)return t.exports;var n=f[e]={id:e,loaded:!1,exports:{}};return p[e](n,n.exports,g),n.loaded=!0,n.exports}g.m=p,g.es=function(e,t){return Object.keys(e).forEach(function(n){"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),e},e={20080:["203"],24978:["748","131"],52797:["997","476","142","317"],53085:["988","476","834","819","293"],58245:["386","988","997","476","432","802"],58640:["373"],63085:["997","432","834","405"],68682:["724"],75985:["988","476","432","819","869"],79178:["908"],90306:["142","418"]},g.el=function(t){var n=e[t];return void 0===n?Promise.resolve():n.length>1?Promise.all(n.map(g.e)):g.e(n[0])},g.f={},g.e=function(e){return Promise.all(Object.keys(g.f).reduce(function(t,n){return g.f[n](e,t),t},[]))},g.u=function(e){return({142:"142.120efa74.js",203:"203.aeb08361.js",293:"293.1410a985.js",317:"317.d5dd948a.js",373:"373.3b4f8101.js",405:"405.d9a11a7e.js",476:"476.8531109d.js",724:"724.046c407f.js",819:"819.d6114f27.js",869:"869.779cf583.js",908:"908.b0dcffbe.js"})[e]},g.k=function(e){return({142:"142.120efa74.css",373:"373.3b4f8101.css",869:"869.779cf583.css"})[e]},t={},g.l=function(e,n,r,i){if(t[e]){t[e].push(n);return}if(void 0!==r){for(var a,s,l=document.getElementsByTagName("script"),o=0;o<l.length;o++){var c=l[o];if(c.getAttribute("src")==e){a=c;break}}}!a&&(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,a.src=e),t[e]=[n];var u=function(n,r){a.onerror=a.onload=null,clearTimeout(d);var i=t[e];if(delete t[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(e){return e(r)}),n)return n(r)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),s&&document.head.appendChild(a)},g.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n=[],g.O=function(e,t,r,i){if(t){i=i||0;for(var a=n.length;a>0&&n[a-1][2]>i;a--)n[a]=n[a-1];n[a]=[t,r,i];return}for(var s=1/0,a=0;a<n.length;a++){for(var t=n[a][0],r=n[a][1],i=n[a][2],l=!0,o=0;o<t.length;o++)s>=i&&Object.keys(g.O).every(function(e){return g.O[e](t[o])})?t.splice(o--,1):(l=!1,i<s&&(s=i));if(l){n.splice(a--,1);var c=r()}}return c},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.d=function(e,t){for(var n in t)g.o(t,n)&&!g.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},g.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.n=function(e){return e&&e.__esModule?e.default:e},g.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},r={386:0,418:0,432:0,748:0,802:0,834:0,988:0,997:0},i="webpack",a="data-webpack-loading",s=function(e,t,n,r){var s,l,o="chunk-"+e;if(!r){for(var c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var d=c[u],p=d.getAttribute("href")||d.href;if(p&&!p.startsWith(g.p)&&(p=g.p+(p.startsWith("/")?p.slice(1):p)),"stylesheet"==d.rel&&(p&&p.startsWith(t)||d.getAttribute("data-webpack")==i+":"+o)){s=d;break}}if(!n)return s}!s&&(l=!0,(s=document.createElement("link")).setAttribute("data-webpack",i+":"+o),s.setAttribute(a,1),s.rel="stylesheet",s.href=t);var f=function(e,t){if(s.onerror=s.onload=null,s.removeAttribute(a),clearTimeout(h),t&&"load"!=t.type&&s.parentNode.removeChild(s),n(t),e)return e(t)};if(s.getAttribute(a)){var h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload)}else f(void 0,{type:"load",target:s});return r?r.parentNode.insertBefore(s,r):l&&document.head.appendChild(s),s},g.f.css=function(e,t){var n=g.o(r,e)?r[e]:void 0;if(0!==n){if(n)t.push(n[2]);else if(["131","142","373","869","872","main"].indexOf(e)>-1){var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var a=g.p+g.k(e),l=Error();s(e,a,function(t){if(g.o(r,e)&&(0!==(n=r[e])&&(r[e]=void 0),n)){if("load"!==t.type){var i=t&&t.type,a=t&&t.target&&t.target.src;l.message="Loading css chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}else n[0]()}})}else r[e]=0}},l=function(e,t){var n=t[0];e&&e(t);for(var i=0;i<n.length;i++)void 0===r[n[i]]&&(r[n[i]]=0)},(o=self.webpackChunknmemonica=self.webpackChunknmemonica||[]).forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o)),c={main:0},g.f.j=function(e,t){var n=g.o(c,e)?c[e]:void 0;if(0!==n){if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=c[e]=[t,r]});t.push(n[2]=r);var i=g.p+g.u(e),a=Error();g.l(i,function(t){if(g.o(c,e)&&(0!==(n=c[e])&&(c[e]=void 0),n)){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,n[1](a)}},"chunk-"+e,e)}}},g.O.j=function(e){return 0===c[e]},u=function(e,t){var n=t[0],r=t[1],i=t[2],a,s,l=0;if(n.some(function(e){return 0!==c[e]})){for(a in r)g.o(r,a)&&(g.m[a]=r[a]);if(i)var o=i(g)}for(e&&e(t);l<n.length;l++)s=n[l],g.o(c,s)&&c[s]&&c[s][0](),c[s]=0;return g.O(o)},(d=self.webpackChunknmemonica=self.webpackChunknmemonica||[]).forEach(u.bind(null,0)),d.push=u.bind(null,d.push.bind(d)),!function(){g.g.importScripts&&(e=g.g.location+"");var e,t=g.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),g.p=e}();var h=g.O(void 0,["748","386","872","988","997","432","834","418","802","131"],function(){return g("57815")});g.O(h)}();
//# sourceMappingURL=main.a51605b8.js.map