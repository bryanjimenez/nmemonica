"use strict";(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([[179],{7186:(e,t,n)=>{n.d(t,{qe:()=>s,vT:()=>r});const i="nmemonica-9d977",s={apiKey:"AIzaSyD0R3dzI2GREIuA0irO3dMT0n4CP59-GjQ",authDomain:i+".firebaseapp.com",databaseURL:"https://"+i+".firebaseio.com",projectId:i,storageBucket:i+".appspot.com",messagingSenderId:"839840260761",appId:"1:839840260761:web:6d72438c4131e3ce368e08"},r="https://us-east1-"+i+".cloudfunctions.net/g_translate_pronounce"},9180:(e,t,n)=>{n.d(t,{w:()=>c});var i=n(5893),s=n(195),r=n(5697),a=n.n(r),o=n(7294),l=n(4953);function c(e){var t;const{resetOn:n}=e,r=(0,o.useRef)(0);r.current=null!==(t=e.accuracy)&&void 0!==t?t:0;const[a,c]=(0,o.useState)(r.current),u=(0,o.useRef)(!1);(0,o.useEffect)((()=>{u.current=!1,c(r.current)}),[n]);const d=[{value:100*l._9}],[h,g,v]=a>=100*l._9?[13,110,256]:[255,0,0],p=`rgb(${h},${g},${v},0.25)`;return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,i.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Accuracy"}),(0,i.jsx)(s.ZP,{orientation:"vertical",sx:{color:0!==a&&u.current?p:"rgb(189,189,189,0.25)"},value:a,disabled:a<0,onChange:(e,t)=>{"number"==typeof t&&(u.current=!0,c(t))},onChangeCommitted:(t,n)=>{if(u.current=!0,"function"==typeof e.onChange&&"number"==typeof n){const t=0===n?null:n;e.onChange(t)}},marks:d,valueLabelFormat:e=>e>=100*l._9?"Correct":"Incorrect"})]})}c.propTypes={accuracy:a().number,onChange:a().func,resetOn:a().string}},3968:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(5893),s=(n(7294),n(5697)),r=n.n(s),a=n(5529),o=n(7186),l=n(7962),c=n(5965);function u(e){let t;const n=e.word;return(0,i.jsx)("div",{className:"clickable",onTouchStart:e.visible?()=>{t=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?()=>{const i=~~(Date.now()-t)<500&&!e.reCache?"":"/override_cache",s=(0,l.b1)(o.vT+i,n);(0,c.R$)(s)}:void 0,children:e.visible&&(0,i.jsx)(a.Ibz,{size:"medium","aria-label":"pronunciation"})})}u.defaultProps={visible:!1},u.propTypes={word:r().shape({tl:r().string.isRequired,q:r().string.isRequired,uid:r().string.isRequired}).isRequired,reCache:r().bool,onPushedPlay:r().func,visible:r().bool}},5626:(e,t,n)=>{n.d(t,{Y:()=>u});var i=n(5893),s=n(195),r=n(5697),a=n.n(r),o=n(7294),l=n(1683),c=n(3162);function u(e){var t;const{resetOn:n}=e,r=(0,o.useRef)(0);r.current=null!==(t=e.difficulty)&&void 0!==t?t:c.$t;const[a,u]=(0,o.useState)(r.current),d=(0,o.useRef)(!1);(0,o.useEffect)((()=>{d.current=!1,u(r.current)}),[n]);const h=(0,l.O)(a/100),g=[{value:c.YZ},{value:c.$t}];return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("div",{className:"text-center fs-xx-small",children:a}),(0,i.jsx)("div",{className:"text-center fs-xx-small rotate-270",style:{position:"relative",top:"20px",left:"-10px"},children:"Difficulty"}),(0,i.jsx)(s.ZP,{orientation:"vertical",sx:{color:0!==a&&d.current?h:"rgb(189,189,189,0.25)"},value:a,onChange:(e,t)=>{"number"==typeof t&&(d.current=!0,u(t))},onChangeCommitted:(t,n)=>{d.current=!0,"function"==typeof e.onChange&&"number"==typeof n&&e.onChange(n)},marks:g,step:10,valueLabelFormat:e=>e>c.$t?"Pass":"Fail"})]})}u.propTypes={difficulty:a().number,onChange:a().func,resetOn:a().string}},8737:(e,t,n)=>{n.d(t,{M:()=>c});var i=n(5893),s=n(4184),r=n.n(s),a=n(5697),o=n.n(a),l=n(5529);function c(e){const t=r()({[""+e.addlStyle]:!!e.addlStyle,"p-0 px-2":!0,"font-weight-bold":e.active});return(0,i.jsxs)("div",{className:t,onClick:e.onClick,children:[(0,i.jsx)("span",{className:"p-1",children:e.active?(0,i.jsx)(l.oOx,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,i.jsx)(l.wl8,{className:"clickable",size:"small","aria-label":"add"})}),(0,i.jsx)("span",{className:"p-1",children:e.children})]})}n(7294),c.propTypes={addlStyle:o().string,active:o().bool,onClick:o().func,children:o().string}},6537:(e,t,n)=>{n.d(t,{n:()=>l});var i=n(5893),s=(n(7294),n(4184)),r=n.n(s),a=n(5697),o=n.n(a);function l(e){var t;const n=r()({[e.addlStyle]:!0,"d-flex flex-column justify-content-around text-center h-100":!0});return(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{children:null!==(t=e.text)&&void 0!==t?t:"Awaiting data ..."})})}l.propTypes={addlStyle:o().string}},2405:(e,t,n)=>{n.d(t,{A:()=>g,D4:()=>b,R_:()=>p,Ro:()=>j,lh:()=>w,ph:()=>m,uY:()=>x,y8:()=>f});var i=n(5893),s=n(1436),r=n(7625),a=n(5529),o=n(4184),l=n.n(o),c=n(5697),u=n.n(c),d=n(7294),h=n(6989);function g(e){const{active:t,toggle:n,toggleFurigana:s,vocabulary:r}=e;return!1===e.visible?null:(0,i.jsx)("div",{className:l()({clickable:t,"sm-icon-grp":!0,"sm-kanji":t}),onClick:t?()=>s(r.uid):void 0,"aria-label":"Toggle furigana",children:t?(0,i.jsxs)("ruby",{children:["漢",(0,i.jsx)("rt",{className:l()({"disabled disabled-color":!n}),children:"ふりがな"})]}):(0,i.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function v(e){const t=(0,d.useRef)(0),{isReinforced:n,addFrequencyTerm:o,removeFrequencyTerm:c,hasReinforce:u,term:g,count:v=t.current}=e,p=(0,h.o)(),f=t.current===v;return(0,d.useEffect)((()=>{t.current=v,f||p()}),[v,f,p]),!1===e.visible?null:(0,i.jsxs)("div",{"aria-label":u?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:()=>{u?c(g.uid):o(g.uid)},children:[u?(0,i.jsx)(a.oOx,{size:"small"}):(0,i.jsx)(a.wl8,{size:"small"}),n?(0,i.jsx)("span",{className:"notification",children:(0,i.jsx)(r.G,{icon:s.RJo})}):(0,i.jsx)("span",{className:l()({notification:!0,"notification-fade":f}),children:v})]})}g.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,toggleFurigana:u().func,hasFurigana:u().bool,vocabulary:u().object},v.propTypes={visible:u().bool,isReinforced:u().bool,addFrequencyTerm:u().func,removeFrequencyTerm:u().func,hasReinforce:u().bool,term:u().object,count:u().number};const p=(0,d.memo)(v);function f(e){const{active:t,setShowHint:n}=e;return e.visible?(0,i.jsx)("div",{className:l()({"sm-icon-grp":!0,clickable:t,"disabled disabled-color":!t}),onClick:t?()=>{n(!0),setTimeout((()=>{n(!1)}),1500)}:void 0,"aria-label":t?"Show hint":"Hint unavailable",children:(0,i.jsx)(a.OgN,{size:"small"})}):null}function m(e){const{toggleAutoVerbView:t,autoVerbView:n}=e;return e.visible?(0,i.jsxs)("div",{className:"sm-icon-grp clickable",onClick:()=>t(),"aria-label":"Toggle auto verb view",children:[(0,i.jsx)(r.G,{icon:n?s.gPx:s.Bxq}),(0,i.jsx)("span",{className:"notification",children:(0,i.jsx)(r.G,{icon:n?s.Bxq:s.gPx})})]}):null}function j(e){const{active:t,action:n}=e;return!1===e.visible?null:(0,i.jsx)("div",{className:l()({clickable:!0,"sm-icon-grp":!0,"disabled-color":t}),onClick:()=>{"function"==typeof n&&n()},"aria-label":"Override audio",children:(0,i.jsx)(r.G,{icon:s.TZC})})}function x(e){const{action:t,toggle:n}=e;return!1===e.visible?null:(0,i.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,i.jsx)(r.G,{className:"clickable",onClick:t,icon:n?s.dzc:s.UJf}),(0,i.jsx)("span",{className:"notification",children:(0,i.jsx)(r.G,{icon:n?s.UJf:s.dzc})})]})}function b(e){const{action:t,toggle:n}=e;return e.visible?(0,i.jsx)("div",{className:l()({clickable:!0,"sm-icon-grp":!0,"info-color":n}),onClick:()=>{"function"==typeof t&&t()},"aria-label":"Literal english translation",children:(0,i.jsx)(a.Rg1,{size:"small"})}):null}function w(e){return e.visible?(0,i.jsxs)(d.Fragment,{children:[(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,i.jsx)("span",{className:l()({underline:"incorrect"===e.hover}),children:"-1"})},0),(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,i.jsx)("span",{className:l()({underline:"pronunciation"===e.hover||"reset"!==e.hover&&e.prevMissPronu}),children:"P"})},1),(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,i.jsx)("span",{className:l()({underline:"reset"===e.hover}),children:"0"})},2)]}):null}f.propTypes={visible:u().bool,active:u().bool,setShowHint:u().func},m.propTypes={visible:u().bool,active:u().bool,toggleAutoVerbView:u().func,autoVerbView:u().bool},j.propTypes={visible:u().bool,active:u().bool,action:u().func},x.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,action:u().func},b.propTypes={visible:u().bool,active:u().bool,toggle:u().bool,action:u().func},w.propTypes={visible:u().bool,hover:u().string,onClick:u().func,onIncorrect:u().func,onPronunciation:u().func,onReset:u().func,prevMissPronu:u().bool}},3047:(e,t,n)=>{n.d(t,{H:()=>c});var i=n(5893),s=n(5529),r=n(5697),a=n.n(r),o=n(5863),l=n(4953);function c(e){var t;const{accuracyP:n,difficultyP:r,daysBetweenReviews:a,lastReview:c}=null!==(t=e.metadata)&&void 0!==t?t:{};let u=null,d=null,h=null,g=null;if(n&&r){const e=void 0!==c?(0,o.O5)(c):void 0,t=(0,l.Kw)({accuracy:n/100,difficulty:r/100,daysBetweenReviews:a,daysSinceReview:e});u=void 0!==a?a.toFixed(0):"",d=(0,i.jsx)("span",{children:t.toFixed(0)}),h=(0,i.jsx)("div",{className:"my-2 rotate-90",children:(0,i.jsx)(s.Ui8,{size:"small","aria-label":"calculated"})}),g=(0,i.jsx)("div",{className:"h-100 d-flex flex-column justify-content-end",children:(0,i.jsx)("span",{className:"rotate-270 w-0 text-nowrap",children:"Interval:    "+u})})}return(0,i.jsxs)("div",{className:"h-100 d-flex flex-column justify-content-center align-items-center",children:[d,h,g]})}c.propTypes={prev:a().object}},7567:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(5893),s=(n(7294),n(5697)),r=n.n(s),a=n(6259),o=n(4184),l=n.n(o);function c(e){const t={disabled:!!e.disabled||void 0};return(0,i.jsxs)("div",{className:"settings-switch-root",children:[(0,i.jsx)("p",{className:l()({"disabled-color":t.disabled}),children:e.statusText}),(0,i.jsx)(a.Z,Object.assign({},t,{checked:e.active,onChange:()=>e.action(),color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}}))]})}c.propTypes={active:r().bool,action:r().func.isRequired,statusText:r().string.isRequired,color:r().string,disabled:r().bool};const u=c},9775:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(5893),s=n(7294),r=n(5697),a=n.n(r),o=n(4184),l=n.n(o);function c(e){let t,n;e.children&&(t=e.children,n=e.children),e.largeValue&&(t=e.largeValue),e.smallValue&&(n=e.smallValue);const r=void 0!==e.rootClassName&&l()(e.rootClassName)||void 0,a=void 0!==e.className&&e.className||{},o="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+l()(e.largeClassName):""),c="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+l()(e.smallClassName):""),u=()=>{"function"==typeof e.onClick&&e.onClick()},d=[(0,i.jsx)("span",{"data-name":"large",className:l()(Object.assign(Object.assign({[o]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:t},0),(0,i.jsx)("span",{"data-name":"small",className:l()(Object.assign(Object.assign({[c]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:n},1)];return!0===e.fragment?(0,i.jsx)(s.Fragment,{children:d}):(0,i.jsx)("div",{className:r,children:d})}c.propTypes={fragment:a().bool,breakPoint:a().string,rootClassName:a().object,className:a().object,largeClassName:a().object,smallClassName:a().object,onClick:a().func,children:a().oneOfType([a().string,a().element]),largeValue:a().oneOfType([a().string,a().element]),smallValue:a().oneOfType([a().string,a().element])}},7127:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(5893),s=(n(7294),n(5697)),r=n.n(s),a=n(6914);function o(e){return(0,i.jsx)(a.Z,{size:"small",className:"MuiButton",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}o.propTypes={action:r().func.isRequired,color:r().string,ariaLabel:r().string.isRequired,children:r().object.isRequired};const l=o},7791:(e,t,n)=>{n.d(t,{u:()=>m});var i=n(5893),s=n(2409),r=n(8301),a=n(1436),o=n(7625),l=n(5529),c=n(4184),u=n.n(c),d=n(5697),h=n.n(d),g=n(7294),v=n(8916),p=n(4699);const f=-1;function m(e){var t,n;const{children:c,idKey:d}=e,h=(0,p.i)(),[m,j]=(0,g.useState)(!1),x=(0,g.useRef)(null),b=(0,g.useRef)(d),w=(0,g.useRef)(),{x:y,y:k,strategy:N,refs:R,middlewareData:S,update:T}=(0,s.YF)({placement:"top",middleware:[(0,r.cv)({mainAxis:8,crossAxis:10}),(0,r.uY)(),(0,s.x7)({element:x})]});(0,g.useEffect)((()=>{T(),d!==b.current?(b.current=d,j(!1),clearTimeout(w.current),w.current=void 0):w.current===f?w.current=setTimeout((()=>{j(!1),w.current=void 0}),2e3):void 0!==w.current&&(clearTimeout(w.current),w.current=setTimeout((()=>{j(!1),w.current=void 0}),2e3))}),[T,h.height,h.width,c,d]);const C=(0,g.useCallback)((()=>{j(!1),void 0!==w.current&&(clearTimeout(w.current),w.current=void 0)}),[]),O=(0,g.useCallback)((()=>{j((e=>!e)),w.current=f}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{ref:R.setReference,className:u()({"sm-icon-grp":!0}),"aria-label":"Set difficulty",children:[(0,i.jsx)("div",{className:u()(Object.assign({"d-inline":!0,clickable:!0},e.className?{[e.className]:!0}:{})),onClick:O,children:(0,i.jsx)(o.G,{icon:a.scR})}),e.notification&&(0,i.jsx)("span",{className:"notification",children:e.notification})]}),(0,i.jsxs)("div",{id:"tooltip",ref:R.setFloating,style:{height:"200px",position:N,top:null!=k?k:0,left:null!=y?y:0,width:"max-content"},className:u()({invisible:!m,"tooltip-fade":!m,[v.pK]:!0,"d-flex":!0}),children:[e.children,(0,i.jsx)("div",{className:"x-button",onClick:C,children:(0,i.jsx)(l.b0D,{className:"clickable",size:"small","aria-label":"close"})}),(0,i.jsx)("div",{ref:x,id:"arrow",style:{position:N,height:8,width:8,bottom:-4,left:8+(null!==(n=null===(t=S.arrow)||void 0===t?void 0:t.x)&&void 0!==n?n:0)}})]})]})}m.propTypes={value:h().number,onChange:h().func,manualUpdate:h().string}},2937:(e,t,n)=>{n.d(t,{yv:()=>h});var i=n(5893),s=n(5529),r=n(4184),a=n.n(r),o=n(7294),l=n(6989),c=n(7127);function u(e,t){const[n,r]=(0,o.useReducer)(((e,t)=>Object.assign(Object.assign({},e),t)),{showMeaning:!1,incorrect:[],correct:!1}),l=(0,o.useRef)(Date.now()),u=(0,o.useRef)(void 0),{gotoNext:h,gotoPrev:g}=e;(0,o.useLayoutEffect)((()=>{!1!==e.fadeInAnswers&&(l.current=Date.now(),u.current=void 0),r({showMeaning:!1,correct:!1,incorrect:[]})}),[e.question,e.fadeInAnswers]);const v=(t,i)=>{n.correct||(e.isCorrect(t)?(u.current=Date.now(),r({correct:!0,showMeaning:!0})):2===n.incorrect.length?r({incorrect:[...n.incorrect,i],correct:!0,showMeaning:!0}):r({incorrect:[...n.incorrect,i]}))},p=e.question,f=e.choices;let m=void 0!==p.english?"[English]":"";void 0===e.hint?n.showMeaning&&p.english&&(m=p.english):m=n.showMeaning&&p.english?p.english:e.hint;const j=void 0===t.current?void 0:t;return(0,i.jsxs)("div",{ref:j,className:"pick4game main-panel h-100 d-flex",children:[(0,i.jsx)(c.Z,{ariaLabel:"Previous",action:g,children:(0,i.jsx)(s.wyc,{size:16})}),(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"row row-cols-1 row-cols-sm-2 h-100",children:[(0,i.jsxs)("div",{className:a()({"col question d-flex flex-column justify-content-center text-center":!0}),children:[(0,i.jsx)("div",{children:p.toHTML(n.correct)}),(0,i.jsx)("span",{className:a()({invisible:!e.qRomaji}),children:p.romaji}),void 0!==m&&(0,i.jsx)("span",{className:"clickable",onClick:()=>{r({showMeaning:!n.showMeaning})},children:m})]}),(0,i.jsx)("div",{className:"col choices d-flex justify-content-around flex-wrap",children:f.map(((t,s)=>{var r;const a=e.isCorrect(f[s])&&n.correct,o=n.incorrect.includes(s);let c;const h=Math.abs((null!==(r=u.current)&&void 0!==r?r:Date.now())-l.current);return c=e.fadeInAnswers&&n.correct?a||o||1e3*(s+1)<h?(0,i.jsx)(d,{css:a?void 0:"disabled-color",fadeIn:!1,c:t,i:s,isRight:a,isWrong:o,aRomaji:e.aRomaji},String(l.current)+t.compare):(0,i.jsx)("div",{className:"invisible w-50 h-50 pt-3",children:t.toHTML()},t.compare):(0,i.jsx)(d,{c:t,i:s,isRight:a,isWrong:o,checkAnswer:v,aRomaji:e.aRomaji,fadeIn:e.fadeInAnswers,elapsed:h},String(l.current)+t.compare),c}))})]})}),(0,i.jsx)(c.Z,{ariaLabel:"Next",action:h,children:(0,i.jsx)(s.XCv,{size:16})})]})}function d(e){var t,n,s;const{c:r,i:o,isRight:c,isWrong:u,checkAnswer:d,aRomaji:h,fadeIn:g,elapsed:v}=e;let p=1e3*(o+1);if(v){const e=1e3*(o+1)-v;p=e<0?1:e}const[f]=(0,l.d)(!1===g?0:p),m=a()(Object.assign(Object.assign({"d-flex flex-column justify-content-evenly":!0,"w-50 h-50 pt-3 text-center clickable":!0,"text-break":!0},e.css?{[e.css]:!0}:{}),{"correct-color":c,"incorrect-color":u}));return(0,i.jsx)("div",{className:m,onClick:()=>{"function"==typeof d&&d(r,o)},children:(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("div",{children:r.toHTML({fadeIn:f})}),c&&(0,i.jsx)("div",{children:r.english}),(0,i.jsx)("span",{className:a()({invisible:!h}),children:r.romaji})]})},`${null!==(t=r.compare)&&void 0!==t?t:""}${null!==(n=r.english)&&void 0!==n?n:""}${null!==(s=r.japanese)&&void 0!==s?s:""}`)}const h=(0,o.memo)((0,o.forwardRef)(u));(0,o.memo)(u)},8012:(e,t,n)=>{n.r(t),n.d(t,{KanjiGameMeta:()=>M,choiceToHtml:()=>F,createEnglishChoices:()=>V,default:()=>P,oneFromList:()=>L,properCase:()=>I});var i=n(5893),s=n(9041),r=n(4184),a=n.n(r),o=n(5472),l=n.n(o),c=n(7294),u=n(743),d=n(9655),h=n(2937),g=n(2959),v=n(6892),p=n(5863),f=n(8527),m=n(9983),j=n(2850),x=n(9815),b=n(3162),w=n(6278),y=n(4933),k=n(9226),N=n(6693),R=n(8056),S=n(8673),T=n(4133),C=n(7891),O=n(5626),D=n(6537),A=n(2405),E=n(7791);const M={location:"/kanji-game/",label:"Kanji Game"};function P(){var e,t;const n=(0,u.I0)(),{kanjiList:r,activeTags:o,repetition:v,fadeInAnswers:M,difficultyThreshold:P,filterType:I,orderType:W,reinforce:G}=(0,w.R)(),Z=(0,c.useRef)(P),{vocabList:q}=(0,y.Z)(),U=(0,c.useRef)(v);U.current=v;const _=(0,c.useRef)([]),[J,$]=(0,c.useState)(0),[z,K]=(0,c.useState)(null);(0,c.useEffect)((()=>{0===r.length&&n((0,S.tk)()),0===q.length&&n((0,C.Rz)())}),[]);const B=(0,c.useMemo)((()=>{if(0===r.length)return[];if(0===Object.keys(U.current).length&&0===o.length)return r;const e=Object.keys(U.current).reduce(((e,t)=>{var n;return!0===(null===(n=U.current[t])||void 0===n?void 0:n.rein)&&(e=[...e,t]),e}),[]);let t=(0,m.Dm)(I.current,r,e,I.current===T.Lx.TAGS?o:[],void 0);if(G.current&&I.current===T.Lx.TAGS){const n=t.map((e=>e.uid)),i=r.filter((t=>e.includes(t.uid)&&!n.includes(t.uid)));t=[...t,...i]}const n=(0,b.WU)(Z.current,t,U.current);n.length>0&&(t=n);const i=t.reduce(((e,t)=>{var n;return!0===(null===(n=U.current[t.uid])||void 0===n?void 0:n.rein)?[...e,t.uid]:e}),[]);return _.current=i,t}),[I,G,Z,r,o]),H=(0,c.useMemo)((()=>{const e=U.current;if(0===B.length)return[];let t;switch(W.current){case T.vl.VIEW_DATE:t=(0,b.EL)(B,e);break;case T.vl.DIFFICULTY:t=(0,b.J0)(B,U.current);break;default:t=(0,b.tq)(B)}return t}),[W,B]),Y=(0,c.useRef)(null),X=(0,c.useRef)(0),[Q,ee]=(0,c.useState)(Date.now()),te=(0,c.useRef)(Date.now());(0,c.useLayoutEffect)((()=>{var e;const t={selectedIndex:X.current,reinforcedUID:Y.current,lastNext:te.current};if(z!==t.reinforcedUID||J!==t.selectedIndex){const i=null!==(e=t.reinforcedUID)&&void 0!==e?e:(0,m.vr)(t.selectedIndex,B,H);if((0,m.Zc)(t.lastNext)){const e=(0,m.cc)(i,B),s=i!==t.reinforcedUID,r=null!==t.reinforcedUID;n((0,S.cX)({uid:i,shouldIncrement:s})).unwrap().then((t=>{var s;const{value:a,prevVal:o}=t,l=null!==(s=o.lastView)&&void 0!==s?s:a.lastView,c={[i]:Object.assign(Object.assign({},a),{lastView:l})};(0,p.Ps)(((e,t)=>n((0,R.kg)(e,t))),e,c,{frequency:r})}))}X.current=J,Y.current=z}}),[n,z,J,B,H]);const ne=(0,c.useMemo)((()=>0===B.length||0===q.length?[]:B.map((e=>{const t=q.reduce(((t,n)=>{var i,s;const r=n.english.includes(e.english),a=n.japanese.includes(e.kanji);return e.radical&&a&&(0,x.xn)(e.kanji)?t:e.radical&&(null===(i=e.radical)||void 0===i?void 0:i.example.length)>0?(null===(s=e.radical)||void 0===s?void 0:s.example.filter((e=>n.japanese.includes(e)))).length>0?[...t,n]:t:(a&&r?t=[n,...t]:a&&(t=[...t,n]),t)}),[]);return t}))),[B,q]),ie=(0,c.useCallback)((()=>{const e=B.length;let t=(J+1)%e;te.current=Q,ee(Date.now()),X.current=J,$(t),K(null)}),[B,J,Q]),se=(0,c.useCallback)((()=>{(0,m.hY)(G.current,I.current,_.current,B,U.current,z,(e=>{K(e)}),ie)}),[_,B,z,ie,G,I]),re=(0,c.useCallback)((()=>{const e=B.length;let t;t=z?J:(e+(J-1))%e,te.current=Q,ee(Date.now()),X.current=J,$(t),K(null)}),[B,J,z,Q]),ae=(0,c.useCallback)((e=>{_.current=[..._.current,e],n((0,S.Mh)(e))}),[n]),oe=(0,c.useCallback)((e=>{_.current=_.current.filter((t=>t!==e)),n((0,S.SI)(e))}),[n]),{kanji:le,game:ce}=(0,c.useMemo)((()=>{if(0===H.length||0===ne.length)return{};const e=null!=z?z:(0,m.vr)(J,B,H),t=(0,m.cc)(e,r);let n;if(null!==z){const e=B.findIndex((e=>e.uid===z));n=-1===e?[]:ne[e]}else n=ne[H[J]];const s=function(e,t,n){const{uid:s,kanji:r,on:o,kun:c}=e,u=V(e,t,n),d=o&&c?2:o||c?3:5,h=l()(n,(e=>j.TZ.parse(e).getSpelling().length)).slice(0,d);return{question:{toHTML:e=>(0,i.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,i.jsx)("div",{className:"position-absolute w-100",children:e&&(0,i.jsxs)("div",{className:"d-flex flex-column fs-4",children:[o&&(0,i.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,i.jsx)("div",{className:"fs-6",children:j.TZ.parse({japanese:"おんよみ\n音読み"}).toHTML()}),(0,i.jsx)("div",{className:"fs-5",children:o})]},o),c&&(0,i.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,i.jsx)("div",{className:"fs-6",children:j.TZ.parse({japanese:"くんよみ\n訓読み"}).toHTML()}),(0,i.jsx)("div",{className:"fs-5",children:c})]},c),h.map((t=>(0,i.jsxs)("div",{className:a()({"d-flex justify-content-between":!0,invisible:!e}),children:[(0,i.jsx)("div",{className:"fs-5 mw-50 text-break text-start",children:L(t.english)}),(0,i.jsx)("div",{children:j.TZ.parse(t).toHTML()})]},t.uid)))]})}),(0,i.jsx)("div",{className:a()({"fs-kanji-huge":!0,"position-absolute w-100":!0,"opacity-25":!0,"correct-color":e}),children:(0,i.jsx)("span",{children:r})})]})},answer:s,choices:u.map((e=>({compare:e.uid,toHTML:F(e)})))}}(t,r,n);return{kanji:t,game:s}}),[z,r,B,H,J,ne]),ue=(0,c.useCallback)((e=>{switch(e){case"right":re();break;case"left":se()}return Promise.resolve()}),[re,se]),{HTMLDivElementSwipeRef:de}=(0,N.M)(ue);(0,k.q)(ue,(()=>{}));const he=(0,c.useCallback)((e=>e.compare===(null==ce?void 0:ce.answer)),[ce]);if(!ce)return(0,i.jsx)(D.n,{addlStyle:"main-panel"});const ge=le&&!0===(null===(e=v[le.uid])||void 0===e?void 0:e.rein),ve=(J+1)/B.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.yv,{ref:de,question:ce.question,isCorrect:he,choices:ce.choices,gotoPrev:re,gotoNext:se,fadeInAnswers:M}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start",children:(0,i.jsx)(d.rU,{to:g.KanjiGridMeta.location,children:(0,i.jsx)(A.uY,{toggle:!0})})})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(E.u,{idKey:le.uid,children:(0,i.jsx)(O.Y,{difficulty:null===(t=U.current[le.uid])||void 0===t?void 0:t.difficultyP,onChange:(0,f.c)(n,(e=>(0,S.F$)(le.uid,e))),resetOn:le.uid})}),(0,i.jsx)(A.R_,{addFrequencyTerm:ae,removeFrequencyTerm:oe,hasReinforce:ge,term:le,isReinforced:null!==z})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:ve,color:ge?"secondary":"primary"})})]})}function I(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function L(e){let t=e;const n=e.split(",");return t=n.length>1?I(n[Math.floor(Math.random()*n.length)].trim()):I(e),t}function V(e,t,n){const i=e=>e.split(",").map((e=>e.trim())),s=i(e.english),r=Object.assign(Object.assign({},e),{english:L(e.english)}),a=n.reduce(((e,t)=>{const n=t.english.split(",").map((e=>e.trim()));return[...e,...n]}),[]),{firstLetter:o}=W(r.english),l=new Set([...s,...o?[o]:[],...a]);let c=[r];const u=new Set([e.uid]);for(;c.length<4&&t.length!==u.size;){const e=t[Math.floor(Math.random()*t.length)],n=i(e.english),s=n.reduce(((e,t)=>{const{firstLetter:n}=W(t);return n&&(e=[...e,n]),e}),[]);if(n.every((e=>!l.has(e)))&&(0===s.length||s.every((e=>!l.has(e))))){const t=L(e.english);l.add(t);const{firstLetter:n}=W(t);n&&l.add(n),c=[...c,Object.assign(Object.assign({},e),{english:t})]}u.add(e.uid)}return(0,v.Sy)(c),c}function W(e){let t,n,i,s;if(new RegExp(/^[^a-zA-Z]/).test(e)){const s=new RegExp(/[^a-zA-Z\s]/);1===e.split("").filter((e=>s.test(e))).length&&(i=e.slice(0,1),t=e.slice(1,2),n=e.slice(2))}else e.startsWith("To ")?(s=e.slice(0,3),t=e.slice(3,4),n=e.slice(4)):(t=e.slice(0,1),n=e.slice(1));return{firstLetter:t,restLetters:n,nonAlpha:i,toDo:s}}function F(e){return function(t={}){const{fadeIn:n}=t,s={"notification-fade":void 0!==n?!n:void 0,"notification-fade-in":n},{firstLetter:r,restLetters:o,nonAlpha:l,toDo:c}=W(e.english);return r?(0,i.jsxs)(i.Fragment,{children:[l&&(0,i.jsx)("span",{className:a()(s),children:l}),c&&(0,i.jsx)("span",{className:a()(s),children:c}),r&&(0,i.jsx)("span",{className:"fw-bold",children:r}),o&&(0,i.jsx)("span",{className:a()(s),children:o})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("span",{className:a()(s),children:e.english})})}}},2959:(e,t,n)=>{n.r(t),n.d(t,{KanjiGridMeta:()=>C,createChoices:()=>D,default:()=>O});var i=n(5893),s=n(9041),r=n(4184),a=n.n(r),o=n(7294),l=n(743),c=n(9655),u=n(8012),d=n(5529),h=n(5697),g=n.n(h),v=n(7127);function p(e){const[t,n]=(0,o.useReducer)(((e,t)=>Object.assign(Object.assign({},e),t)),{showMeaning:!1,incorrect:[],correct:-1}),s=(0,o.useCallback)((()=>{n({showMeaning:!1,correct:-1,incorrect:[]})}),[n]),{isCorrect:r,choices:l,gotoNext:c,gotoPrev:u}=e,h=(0,o.useCallback)((()=>{s(),u()}),[s,u]),g=(0,o.useCallback)((()=>{s(),c()}),[s,c]),p=a()({"pickXgame main-panel h-100":!0});return(0,i.jsx)("div",{className:p,children:(0,i.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(v.Z,{ariaLabel:"Previous",action:h,children:(0,i.jsx)(d.wyc,{size:16})}),(0,i.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:l.map(((e,o)=>(e=>{const o=l.length,u=t.incorrect.includes(e),d=t.correct===e,h=a()({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":d,"incorrect-color":u}),g=a()({"mb-0":!0}),v=`${Math.trunc(1/Math.ceil(Math.sqrt(o))*.75*100)}%`;return(0,i.jsx)("div",{onClick:()=>((e,i)=>{const[a,o]=r(e);a?(n({correct:i,showMeaning:!0}),setTimeout((()=>{s(),c()}),1e3)):2===t.incorrect.length?(n({incorrect:[...t.incorrect,i],correct:o,showMeaning:!0}),setTimeout((()=>{s(),c()}),2500)):n({incorrect:[...t.incorrect,i]})})(l[e],e),className:h,style:{width:v},children:(0,i.jsx)("h2",{className:g,children:l[e].toHTML()})},e)})(o)))}),(0,i.jsx)(v.Z,{ariaLabel:"Next",action:g,children:(0,i.jsx)(d.XCv,{size:16})})]})},0)}p.propTypes={question:g().object,isCorrect:g().func.isRequired,choices:g().array,gotoNext:g().func.isRequired,gotoPrev:g().func.isRequired};var f=n(6892),m=n(8527),j=n(9983),x=n(3162),b=n(2409),w=n(8301),y=n(4699),k=n(6278),N=n(8673),R=n(4133),S=n(6537),T=n(2405);const C={location:"/kanji-grid/",label:"Kanji Grid Game"};function O(){var e;const t=(0,l.I0)(),{kanjiList:n,activeTags:r,repetition:d,filterType:h,reinforce:g,choiceN:v}=(0,k.R)();(0,o.useEffect)((()=>{0===n.length&&t((0,N.tk)())}),[]);const f=(0,o.useRef)(d);f.current=d;const[O,A]=(0,o.useState)([]),[E,M]=(0,o.useState)(0),[P,I]=(0,o.useState)(null),L=(0,o.useRef)(""),[V,W]=(0,o.useState)(!1),F=(0,o.useRef)([]),[G,Z]=(0,o.useState)(null),q=(0,o.useMemo)((()=>{if(0===n.length)return[];if(0===Object.keys(f.current).length&&0===r.length)return n;const e=Object.keys(f.current).reduce(((e,t)=>{var n;return!0===(null===(n=f.current[t])||void 0===n?void 0:n.rein)&&(e=[...e,t]),e}),[]);let t=(0,j.Dm)(h.current,n,e,h.current===R.Lx.TAGS?r:[],(()=>{}));if(g.current&&h.current===R.Lx.TAGS){const i=t.map((e=>e.uid)),s=n.filter((t=>e.includes(t.uid)&&!i.includes(t.uid)));t=[...t,...s]}const i=t.reduce(((e,t)=>{var n;return!0===(null===(n=f.current[t.uid])||void 0===n?void 0:n.rein)?[...e,t.uid]:e}),[]);return A(i),t}),[n,r,g,h]),U=(0,o.useMemo)((()=>(0,x.tq)(q)),[q]),_=(0,o.useCallback)((()=>{const e=q.length;M((E+1)%e),I(null),Z(null)}),[q,E]),J=(0,o.useCallback)((()=>{(0,j.hY)(g.current,h.current,O,q,f.current,P,(e=>{I(e)}),_)}),[O,q,P,_,g,h]),$=(0,o.useCallback)((()=>{const e=q.length;let t;t=P?E:(e+(E-1))%e,M(t),I(null),Z(null)}),[q,E,P]),z=(0,o.useRef)(-1),{blastElRef:K,anchorElRef:B,text:H,setText:Y}=function(){const[e,t]=(0,o.useState)(""),[n,i]=(0,o.useState)({w:0,h:0}),s=(0,y.i)(),{x:r,y:l,strategy:c,refs:u,update:d}=(0,b.YF)({placement:"bottom",middleware:[(0,w.cv)({mainAxis:void 0===s.height?0:s.height/2-n.h,crossAxis:0}),(0,w.uY)()]});if((0,o.useEffect)((()=>{var t,n;const s=null===(t=u.floating.current)||void 0===t?void 0:t.clientWidth,r=null===(n=u.floating.current)||void 0===n?void 0:n.clientHeight;e.length>0&&s&&s>0&&r&&r>0&&(i({w:s,h:r}),d())}),[e,i,u.floating,d]),null!==u.floating.current){u.floating.current.style.top="";const t={position:c,top:`${null!=l?l:0}px`,left:`${null!=r?r:0}px`,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"};u.floating.current.className=a()({"dark-mode-color":!0,"notification-fade":e.length>0}),Object.keys(t).forEach((e=>{if(null!==u.floating.current){const n=e;u.floating.current.style[n]=t[n]}}))}return{blastElRef:u.setFloating,anchorElRef:u.setReference,text:e,setText:t}}(),X=(0,o.useCallback)((e=>{A((t=>[...t,e])),t((0,N.Mh)(e))}),[t]),Q=(0,o.useCallback)((e=>{A((t=>t.filter((t=>t!==e)))),t((0,N.SI)(e))}),[t]);if(0===U.length)return(0,i.jsx)(S.n,{addlStyle:"main-panel"});const ee=null!=P?P:(0,j.vr)(E,q,U),te=(0,j.cc)(ee,n);let ne;L.current!==te.uid?(L.current=te.uid,F.current=D(v,te,n),ne=(0,u.oneFromList)(te.english)):ne=null!=G?G:(0,u.oneFromList)(te.english);const ie=function(e,t,n){return function(){if(null==e?void 0:e.english.includes(",")){let i=(0,u.oneFromList)(e.english);for(;i===t;)i=(0,u.oneFromList)(e.english);n(i)}}}(te,ne,Z),se=function(e,t,n,[s,r]){const{english:o,kanji:l,on:c,kun:u,uid:d}=e,h=s!==o;return{question:{toHTML:e=>n?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:a()({"correct-color":e}),children:(0,i.jsx)("span",{children:l})}),(void 0!==c||void 0!==u)&&(0,i.jsxs)("div",{className:a()({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,i.jsx)("span",{children:c}),(0,i.jsx)("span",{children:u})]})]}):(0,i.jsx)("div",{onClick:h?r:void 0,children:s+(h?"...":"")})},answer:d,choices:t.map((e=>({compare:e.uid,toString:t=>(null!=t?t:n)?e.english:e.kanji,toHTML:({side:t}={})=>(0,i.jsx)(i.Fragment,{children:(null!=t?t:n)?e.english:e.kanji})})))}}(te,F.current,V,[ne,ie]),re=function(e,t,n,i,s){return function(r){const a=r.compare===(null==t?void 0:t.answer),o=(null==t?void 0:t.choices.findIndex((e=>e.compare===(null==t?void 0:t.answer))))||-1;return a||(s.current>-1&&n.length>0?(clearTimeout(s.current),i(""),setTimeout((()=>i(r.toString(!e))),100)):(i(r.toString(!e)),s.current=window.setTimeout((()=>i("")),2500))),[a,o]}}(V,se,H,Y,z),ae=te&&!0===(null===(e=d[te.uid])||void 0===e?void 0:e.rein),oe=(E+1)/q.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"tooltip-anchor",ref:B}),(0,i.jsx)("div",{ref:K,children:H}),(0,i.jsx)(p,{question:se.question,isCorrect:re,choices:se.choices,gotoPrev:$,gotoNext:J}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start",children:(0,i.jsx)(c.rU,{to:V?C.location:u.KanjiGameMeta.location,children:(0,i.jsx)(T.uY,{toggle:V,action:(0,m.k)(W,(e=>!e))})})})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)("span",{children:se.question.toHTML(!1)}),(0,i.jsx)(T.R_,{addFrequencyTerm:X,removeFrequencyTerm:Q,hasReinforce:ae,term:te,isReinforced:null!==P})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:oe,color:ae?"secondary":"primary"})})]})}function D(e,t,n){const i="english",s=e=>e.split(",").map((e=>e.trim()));let r=[t];const a=s(t[i]),o=new Set([...a]),l=new Set([t.uid]);for(;r.length<e&&n.length!==l.size;){const e=n[Math.floor(Math.random()*n.length)],t=s(e[i]);t.every((e=>!o.has(e)))&&(r=[...r,e],t.forEach((e=>{o.add(e)}))),l.add(e.uid)}return(0,f.Sy)(r),r}},1540:(e,t,n)=>{n.r(t),n.d(t,{OppositesGameMeta:()=>f,default:()=>m});var i=n(5893),s=n(9041),r=n(4184),a=n.n(r),o=n(7294),l=n(743),c=n(2937),u=n(6892),d=n(2850),h=n(3162),g=n(6693),v=n(9385),p=n(6537);const f={location:"/opposites/",label:"Opposites Game"};function m(){const e=(0,l.I0)(),{value:t}=(0,l.v9)((({opposite:e})=>e),((e,t)=>e.version===t.version)),[n,r,f]=(0,l.v9)((({opposite:e})=>{const{qRomaji:t,aRomaji:n,fadeInAnswers:i}=e;return[t,n,i]}),l.wU);(0,o.useEffect)((()=>{0===t.length&&e((0,v.bt)())}),[]);const m=(0,o.useMemo)((()=>0===t.length?[]:(0,h.tq)(t)),[t]),[j,x]=(0,o.useState)(0),b=(0,o.useCallback)((()=>{const e=t.length;x((j+1)%e)}),[j,t]),w=(0,o.useCallback)((()=>{const e=t.length,n=j-1;x(n<0?(e+n)%e:n%e)}),[j,t]),y=(0,o.useCallback)((e=>{switch(e){case"right":w();break;case"left":b()}return Promise.resolve()}),[w,b]),{HTMLDivElementSwipeRef:k}=(0,g.M)(y);if(0===m.length)return(0,i.jsx)(p.n,{addlStyle:"main-panel"});const N=function(e,t,n){let[s,r]=e[t[n]];const o=d.TZ.parse(s),l=d.TZ.parse(r),c="fs-2",h=Object.assign(Object.assign({},s),{toHTML:e=>(0,i.jsx)("span",{className:a()({"fs-1":!0,"correct-color":e}),children:o.toHTML()})}),g=Object.assign(Object.assign({},r),{compare:r.japanese,toHTML:()=>(0,i.jsx)("span",{className:c,children:l.toHTML()})});let v=[g],p=[r.romaji,s.romaji];for(;v.length<4;){const t=Math.floor(Math.random()*e.length),[n,s]=e[t];if(!p.includes(n.romaji)&&!p.includes(s.romaji))if(0===Math.floor(2*Math.random())){const e=d.TZ.parse(n);v=[...v,Object.assign(Object.assign({},n),{compare:n.japanese,toHTML:()=>(0,i.jsx)("span",{className:c,children:e.toHTML()})})],p=[...p,n.romaji]}else{const e=d.TZ.parse(s);v=[...v,Object.assign(Object.assign({},s),{compare:s.japanese,toHTML:()=>(0,i.jsx)("span",{className:c,children:e.toHTML()})})],p=[...p,s.romaji]}}return(0,u.Sy)(v),{question:h,answer:g,choices:v}}(t,m,j),R=(j+1)/t.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.yv,{ref:k,question:N.question,isCorrect:e=>e.compare===N.answer.compare,choices:N.choices,qRomaji:n,aRomaji:r,gotoPrev:w,gotoNext:b,fadeInAnswers:f}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:R})},1)]})}},4921:(e,t,n)=>{n.r(t),n.d(t,{ParticlesGameMeta:()=>p,default:()=>f});var i=n(5893),s=n(9041),r=n(7294),a=n(743),o=n(2937),l=n(6892),c=n(2850),u=n(3996),d=n(3162),h=n(6693),g=n(7988),v=n(6537);const p={location:"/particles/",label:"Particles Game"};function f(){const e=(0,a.I0)(),{phrases:t,particles:n}=(0,a.v9)((({particle:e})=>e.particleGame)),[u,p]=(0,a.v9)((({particle:e})=>{const{aRomaji:t,fadeInAnswers:n}=e.setting;return[t,n]}));(0,r.useEffect)((()=>{0===t.length&&e((0,g.aq)())}),[]);const f=(0,r.useRef)([]),[j,x]=(0,r.useState)(0),b=(0,r.useCallback)((()=>{const e=t.length;x((j+1)%e)}),[j,t]),w=(0,r.useCallback)((()=>{const e=t.length,n=j-1;x(n<0?(e+n)%e:n%e)}),[j,t]),y=function(e,t,n){if(0===t.length||0===n.length)return;0===f.current.length&&(f.current=(0,d.tq)(t));const s=t[f.current[e]],{answer:r,question:a,english:o,literal:u}=s,h=Object.assign(Object.assign({},r),{toHTML:()=>(0,i.jsx)(i.Fragment,{children:r.japanese})});n=n.map((e=>Object.assign(Object.assign({},e),{toHTML:()=>(0,i.jsx)(i.Fragment,{children:e.japanese})})));const g=function(e,t){const n="fs-1";let s=[Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,i.jsx)("span",{className:n,children:e.japanese})})];for(;s.length<4;){const e=t[Math.floor(Math.random()*t.length)];s.every((t=>t.compare!==e.japanese))&&(s=[...s,Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,i.jsx)("span",{className:n,children:e.japanese})})])}return(0,l.Sy)(s),s}(h,n);return{question:{english:o,toHTML:e=>(0,i.jsx)("div",{className:"fs-1",children:m(c.TZ.parse(a),h,e)})},answer:h,choices:g,literal:u}}(j,t,n),k=(0,r.useCallback)((e=>{switch(e){case"right":w();break;case"left":b()}return Promise.resolve()}),[w,b]),{HTMLDivElementSwipeRef:N}=(0,h.M)(k);if(!y)return(0,i.jsx)(v.n,{addlStyle:"main-panel"});const R=(j+1)/t.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.yv,{ref:N,question:y.question,isCorrect:e=>e.japanese===y.answer.japanese,hint:y.literal,choices:y.choices,aRomaji:u,gotoPrev:w,gotoNext:b,fadeInAnswers:p}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:R})})]})}const m=(e,{start:t,end:n},i)=>{const s=i?"correct-color":"transparent-font underline";return(0,u.tn)(null==e?void 0:e.parseObj,{hidden:s},t,n)}},3762:(e,t,n)=>{n.r(t),n.d(t,{KanaGameMeta:()=>m,buildChoiceButton:()=>w,default:()=>j,usePrepareGame:()=>b});var i=n(5893),s=n(5529),r=n(4184),a=n.n(r),o=n(7294),l=n(6892),c=n(8527),u=n(9815),d=n(8084),h=n(4699),g=n(4133),v=n(6537),p=n(2405),f=n(7127);const m={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function j(){const{hiragana:e,katakana:t,vowels:n,consonants:r,sounds:l,choiceN:g,wideMode:m,easyMode:j,charSet:x}=(0,d.P)(),y=(0,o.useRef)(n),k=(0,o.useRef)(r),N=(0,o.useRef)(l),R=(0,o.useRef)(e),S=(0,o.useRef)(t),T=(0,o.useRef)(m),C=(0,o.useRef)(j),O=(0,o.useRef)(g),[D,A]=(0,o.useState)(0),[E,M]=(0,o.useState)([]),P=(0,o.useState)(!1),I=P[0],L=P[1],{prepareGame:V,setWrongs:W,setCorrect:F,answer:G,correct:Z,question:q,wrongs:U,choices:_,gameOrder:J}=b({charSet:x,choiceN:O.current,wideMode:T.current,practiceSide:I,reinforce:E,selectedIndex:D,vowelsR:y,consonantsR:k,soundsR:N,hiraganaR:R,katakanaR:S}),$=(0,o.useCallback)((()=>{const e=J.length;A((D+1)%e),W([]),F(!1)}),[F,W,J,D]),z=(0,o.useCallback)((()=>{const e=J.length,t=D-1;A(t<0?(e+t)%e:t%e),W([]),F(!1)}),[F,W,J,D]),K=function({setCorrect:e,setWrongs:t,setReinforce:n,gotoNext:i,answer:s,choices:r,wrongs:a,reinforce:o,practiceSide:l}){return function(c){if(c.val===(null==s?void 0:s.val))e(!0),setTimeout(i,500);else{const e=r.findIndex((e=>e.val===c.val));t([...a,e]),n([...o,Object.assign(Object.assign({},c),{practiceSide:l})])}}}({setCorrect:F,setWrongs:W,setReinforce:M,gotoNext:$,practiceSide:I,answer:G,choices:_,wrongs:U,reinforce:E}),{width:B,height:H}=(0,h.i)(),Y=w({checkAnswer:K,charSet:x,practiceSide:I,wrongs:U,choices:_,answer:G,correct:Z,isLandscape:!B||!H||B>H,wideMode:T.current,easyMode:C.current,choiceN:O.current});if((0,o.useEffect)((()=>{R.current.length>0&&V()}),[D,I,x]),!q)return(0,i.jsx)(v.n,{addlStyle:"kana"});const X=a()({"kana main-panel h-100":!0}),Q=a()({"choices-row d-flex justify-content-around":!0,"w-100 w-sm-50":!T.current,"w-100 h-100":T.current});return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)("div",{className:X,children:(0,i.jsxs)("div",{className:"d-flex justify-content-between w-100 h-100",children:[(0,i.jsx)(f.Z,{ariaLabel:"Previous",action:z,children:(0,i.jsx)(s.wyc,{size:16})}),(0,i.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-around w-100",children:[!T.current&&(0,i.jsxs)("div",{className:a()({"pt-3 d-flex flex-column justify-content-center text-center w-100 w-sm-50 h-100":!0,"correct-color":Z}),children:[(0,i.jsx)("h1",{className:"clickable",children:q}),C.current&&!I&&(0,i.jsx)("div",{className:"d-flex justify-content-around",children:(0,i.jsx)("h6",{children:(0,u.Vj)(q)})})]}),(0,i.jsx)("div",{className:Q,children:(0,i.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:_.map(((e,t)=>Y(t)))})})]}),(0,i.jsx)(f.Z,{ariaLabel:"Next",action:$,children:(0,i.jsx)(s.XCv,{size:16})})]})}),(0,i.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)(p.uY,{toggle:I,action:(0,c.k)(L,(e=>!e))})}),(0,i.jsx)("div",{className:"col"}),(0,i.jsx)("div",{className:"col"})]})})]})}function x(e){let t;return t=e===g.kS.MIXED?Math.floor(2*Math.random()):e,t}function b({charSet:e,choiceN:t,wideMode:n,vowelsR:i,consonantsR:s,soundsR:r,hiraganaR:a,katakanaR:c,practiceSide:u,reinforce:d,selectedIndex:h}){const[v,p]=(0,o.useState)("undefined"),[f,m]=(0,o.useState)({val:"",hint:"",cSet:g.kS.HIRAGANA}),[j,b]=(0,o.useState)([]),[w,y]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[R,S]=(0,o.useState)(!1),T=(0,o.useCallback)((()=>{const o=a.current,v=c.current;let f,j,k;f=w.length>0?w:function(e){let t=[];const n=e[0].length,i=e.length;for(let e=0;e<n;e++)for(let n=0;n<i;n++)1===e&&12===n||3===e&&12===n||2===e&&14===n||0!==e&&15===n||(t=[...t,{vowel:e,consonant:n}]);return(0,l.Sy)(t),t}(o);const R=Math.random()<1/3,T=function({vowels:e,consonants:t,sounds:n}){return(i,s)=>{const r=t[i]+e[s];return n[r]||r}}({vowels:i.current,consonants:s.current,sounds:r.current}),C=function({hiragana:e,katakana:t}){return(n,i,s)=>{let r;return r=s===g.kS.HIRAGANA?e[n][i]:t[n][i],r}}({hiragana:o,katakana:v});if(R&&d.length>0){const e=d[d.length-1];if(u===e.practiceSide)k=e;else{const{val:t,hint:n,cSet:i}=e;k={val:n,hint:t,cSet:i}}}else{const{consonant:t,vowel:n}=f[h];let i=x(e);const s=T(t,n),r=C(t,n,i);k=u?{val:r,hint:s,cSet:i}:{val:s,hint:r,cSet:i}}j=k.hint;let O=function({getPronunciation:e,getKanaCharacter:t,charSet:n,choiceN:i,practiceSide:s},r,a){let o=[r];const c=s;for(;o.length<i;){const i=0,s=a.length,r=Math.floor(Math.random()*(s-i)+i);let l=x(n);const u=e(a[r].consonant,a[r].vowel),d=t(a[r].consonant,a[r].vowel,l);let h;h=c?{val:d,hint:u,cSet:l}:{val:u,hint:d,cSet:l},(c&&!o.some((e=>e.hint===h.hint))||!c&&!o.some((e=>e.val===h.val)))&&(o=[...o,h])}return(0,l.Sy)(o),o}({getPronunciation:T,getKanaCharacter:C,charSet:e,choiceN:t,practiceSide:u},k,f);n&&(O=[...O,{val:j,hint:j,cSet:k.cSet,q:!0}]),p(j),m(k),b(O),y(f),N([]),S(!1)}),[e,w,s,i,r,a,c,u,d,h,n,t]);return{prepareGame:T,setWrongs:N,setCorrect:S,answer:f,correct:R,wrongs:k,question:v,choices:j,gameOrder:w}}function w({checkAnswer:e,isLandscape:t,wideMode:n,easyMode:s,charSet:r,practiceSide:o,wrongs:l,choices:c,answer:d,correct:h,choiceN:v}){return function(p){const f=l.includes(p),m=c[p].val===d.val&&h,j=a()({clickable:!c[p].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":m||n&&c[p].q&&h,"incorrect-color":f,"question-color":n&&c[p].q&&!h}),x=a()({"mb-0":n}),b="d-flex justify-content-around",w=a()({"mb-0":!0,invisible:!f}),y=n?t?3/4:4/3:1,k=`${Math.trunc(1/Math.ceil(Math.sqrt(v))*y*100)}%`,N=!o;let R;return R=!s||s&&!N?s&&!N&&!0!==c[p].q&&r===g.kS.MIXED?(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)("h6",{className:w,children:c[p].hint}),(0,i.jsx)("h6",{className:w,children:(0,u.Vj)(c[p].val)})]}):!0!==c[p].q?(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:w,children:c[p].cSet===d.cSet?c[p].hint:(0,u.Vj)(c[p].hint)})}):(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:"mb-0 invisible",children:(0,u.Vj)(c[p].val)})}):!0!==c[p].q?(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)("h6",{className:w,children:c[p].cSet===g.kS.HIRAGANA?c[p].hint:(0,u.Vj)(c[p].hint)}),(0,i.jsx)("h6",{className:w,children:c[p].cSet===g.kS.HIRAGANA?(0,u.Vj)(c[p].hint):c[p].hint})]}):(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:"mb-0",children:(0,u.Vj)(c[p].val)})}),(0,i.jsxs)("div",{onClick:()=>{c[p].q||e(c[p])},className:j,style:{width:k},children:[(0,i.jsx)("h2",{className:x,children:c[p].val}),R]},p)}}},8002:(e,t,n)=>{n.r(t),n.d(t,{KanjiMeta:()=>Z,default:()=>q});var i=n(5893),s=n(2409),r=n(8301),a=n(9041),o=n(5529),l=n(4184),c=n.n(l),u=n(5472),d=n.n(u),h=n(7294),g=n(743),v=n(6176),p=n(6892),f=n(5863),m=n(8527),j=n(9983),x=n(2850),b=n(4953),w=n(3162),y=n(6278),k=n(4933),N=n(6693),R=n(4699),S=n(8056),T=n(8673),C=n(4133),O=n(7891),D=n(9180),A=n(5626),E=n(6537),M=n(2405),P=n(3047),I=n(7127),L=n(7625),V=n(1436),W=n(3361),F=n(6628);function G(e){const[t,n]=h.useState(null),s=Boolean(t),r=(0,g.v9)((({global:e})=>e.darkMode));return(0,i.jsxs)("div",{className:c()({"sm-icon-grp":!0}),"aria-label":"Set difficulty",children:[(0,i.jsx)("div",{id:"fade-button",className:c()(Object.assign({"d-inline":!0,clickable:!0},e.className?{[e.className]:!0}:{})),"aria-controls":s?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:e=>{n(e.currentTarget)},children:(0,i.jsx)(L.G,{icon:V.scR})}),e.notification&&(0,i.jsx)("span",{className:"notification",children:e.notification}),(0,i.jsx)(W.ZP,{id:"fade-menu",anchorEl:t,open:s,onClose:()=>{n(null)},TransitionComponent:F.Z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)("div",{id:"tooltip2",style:{height:"200px"},className:c()({"py-4":!0,"dark-mode":r}),children:e.children})})]})}const Z={location:"/kanji/",label:"Kanji"};function q(){var e,t,n,l,u,L,V,W,F,Z;const q=(0,g.I0)(),U=(0,h.useCallback)((e=>{pe((t=>[...t,e])),q((0,T.Mh)(e))}),[q]),_=(0,h.useCallback)((e=>{pe((t=>t.filter((t=>t!==e)))),q((0,T.SI)(e))}),[q]),{kanjiList:J,filterType:$,reinforce:z,difficultyThreshold:K,activeTags:B,orderType:H,spaRepMaxReviewItem:Y,includeNew:X,includeReviewed:Q,repetition:ee}=(0,y.R)(),te=(0,h.useRef)(Y),ne=(0,h.useRef)(K),{vocabList:ie}=(0,k.Z)();(0,h.useEffect)((()=>{0===J.length&&q((0,T.tk)()),0===ie.length&&q((0,O.Rz)())}),[]);const se=(0,h.useRef)(ee);se.current=ee;const[re,ae]=(0,h.useState)(0),[oe,le]=(0,h.useState)(null),[ce,ue]=(0,h.useState)(Date.now()),de=(0,h.useRef)(Date.now()),he=(0,h.useRef)(null),ge=(0,h.useRef)(0),[ve,pe]=(0,h.useState)([]),[fe,me]=(0,h.useState)(!1),[je,xe]=(0,h.useState)(!1),[be,we]=(0,h.useState)(!1),[ye,ke]=(0,h.useState)(!1),[Ne,Re]=(0,h.useState)([]),Se=(0,h.useRef)(),Te=(0,h.useMemo)((()=>{if(0===J.length)return[];if(0===Object.keys(se.current).length&&0===B.length)return J;const e=Object.keys(se.current).reduce(((e,t)=>{var n;return!0===(null===(n=se.current[t])||void 0===n?void 0:n.rein)&&(e=[...e,t]),e}),[]);let t=(0,j.Dm)($.current,J,e,$.current===C.Lx.TAGS?B:[],(0,m.c)(q,T.cy));const n=(0,w.WU)(ne.current,t,se.current);switch(n.length>0?t=n:Re((e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:C.x6.WARN}])),H.current){case C.vl.RECALL:const{failed:e,overdue:n,overLimit:i}=(0,b.fC)(t,se.current,te.current),s=[...e,...n];s.length>0&&t.length!==s.length&&(t=s.map((e=>t[e])));const r=s.map(((e,n)=>{const{accuracyP:i=0,lastReview:s,daysBetweenReviews:r}=se.current[t[n].uid],a=s?(0,f.O5)(s):void 0;return(0,b.ct)({accuracy:i,daysSinceReview:a,daysBetweenReviews:r}).toFixed(2).replace(".00","").replace("0.",".")})),a=i.length>0?`+${i.length}`:"";Re((e=>[...e,{msg:`Space Rep 2 (${r.length})${a} [${r.toString()}]`,lvl:0===s.length?C.x6.WARN:C.x6.DEBUG}]));break;case C.vl.VIEW_DATE:X||(t=t.filter((e=>{var t;return void 0!==(null===(t=se.current[e.uid])||void 0===t?void 0:t.lastView)}))),Q||(t=t.filter((e=>{var t;return void 0===(null===(t=se.current[e.uid])||void 0===t?void 0:t.lastReview)})))}const i=t.reduce(((e,t)=>{var n;return!0===(null===(n=se.current[t.uid])||void 0===n?void 0:n.rein)&&(e=[...e,t.uid]),e}),[]);return pe(i),t}),[q,$,ne,H,J,B,X,Q]),{order:Ce,recallGame:Oe}=(0,h.useMemo)((()=>{if(0===Te.length)return{order:[]};let e,t;switch(H.current){case C.vl.DIFFICULTY:e=(0,w.J0)(Te,se.current),Re((t=>[...t,{msg:`Difficulty (${e.length})`,lvl:C.x6.DEBUG}]));break;case C.vl.VIEW_DATE:e=(0,w.EL)(Te,se.current);let n=0,i=NaN;const s=e.map((e=>{var t;const s=null===(t=se.current[Te[e].uid])||void 0===t?void 0:t.lastView;return n=s?n:n+1,i=s&&Number.isNaN(i)?(0,f.O5)(s):i,s?(0,f.O5)(s):0}));Re((e=>[...e,{msg:`Date Viewed (${s.length}) New:${n} Old:${i}d`,lvl:C.x6.DEBUG}]));break;case C.vl.RECALL:const{failed:r,overdue:a,notPlayed:o,todayDone:l}=(0,b.fC)(Te,se.current),c=[...r,...a];e=c.length>0?c:[...o,...l],t=c.length;break;default:e=(0,w.tq)(Te),Re((t=>[...t,{msg:`Random (${e.length})`,lvl:C.x6.DEBUG}]))}return{order:e,recallGame:t}}),[H,Te]),De=(0,h.useCallback)((()=>{const e=Te.length;ae((re+1)%e),ge.current=re,de.current=ce,ue(Date.now()),le(null)}),[Te,re,ce]),Ae=(0,h.useCallback)((()=>{let e=Te;if(z.current&&$.current===C.Lx.TAGS){const t=Object.keys(ee).reduce(((e,t)=>{var n;return!0===(null===(n=ee[t])||void 0===n?void 0:n.rein)&&(e=[...e,t]),e}),[]),n=J.filter((e=>t.includes(e.uid)));e=[...Te,...n]}(0,j.hY)(z.current,$.current,ve,e,ee,oe,(e=>{he.current=oe,le(e)}),De)}),[De,J,Te,ve,oe,ee,z,$]),Ee=(0,h.useCallback)((()=>{const e=Te.length,t=re-1;ae(t<0?(e+t)%e:t%e),ge.current=re,de.current=ce,ue(Date.now()),le(null)}),[Te,re,ce]),Me=(0,h.useCallback)((e=>("left"===e?Ae():"right"===e?Ee():(me(!0),xe(!0),we(!0),ke(!0)),Promise.resolve())),[Ae,Ee]),{HTMLDivElementSwipeRef:Pe}=(0,N.M)(Me),Ie=(0,R.i)(),Le=!Ie.width||!Ie.height||Ie.width>Ie.height?0:70,Ve=0-(Ie.width?Ie.width/2:0)+Le,{x:We,y:Fe,strategy:Ge,refs:Ze,update:qe}=(0,s.YF)({placement:"bottom",middleware:[(0,r.cv)({mainAxis:0,crossAxis:Ve}),(0,r.uY)()]});if((0,h.useEffect)((()=>{qe()}),[qe,Ie.height,Ie.width]),(0,h.useLayoutEffect)((()=>{var e,t;const n={selectedIndex:ge.current,reinforcedUID:he.current,lastNext:de.current};if(oe!==n.reinforcedUID||re!==n.selectedIndex){const i=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,j.vr)(n.selectedIndex,Te,Ce),s=(0,j.cc)(i,Te);let r=Promise.resolve();(null===(t=se.current[i])||void 0===t?void 0:t.difficultyP)&&Se.current?r=q((0,T.Jg)({uid:i})):null===Se.current&&(r=q((0,T.Qs)({uid:i}))),Oe&&Oe>0&&re===Oe+1&&q((0,S.kg)("No more pending items",C.x6.DEBUG)),r.then((e=>{if(e&&"payload"in e){const{newValue:t,oldValue:n}=e.payload;(0,b.z1)(q,i,t,n,s.english)}if((0,j.Zc)(n.lastNext)){const e=i!==n.reinforcedUID,t=null!==n.reinforcedUID;q((0,T.cX)({uid:i,shouldIncrement:e})).unwrap().then((e=>{var n;const{value:r,prevVal:a}=e;let o;o=Se.current&&a.lastReview?a.lastReview:null!==(n=a.lastView)&&void 0!==n?n:r.lastView;const l={[i]:Object.assign(Object.assign({},r),{lastView:o})};(0,f.Ps)(((e,t)=>q((0,S.kg)(e,t))),s,l,{frequency:t})}))}})),ge.current=re,he.current=oe,Se.current=void 0,me(!1),xe(!1),we(!1),ke(!1)}}),[q,ie,oe,re,Te,Ce,Oe]),(0,h.useEffect)((()=>{Ne.forEach((e=>{q((0,S.kg)(e.msg,e.lvl))}))}),[q,Ne]),0===Oe)return(0,i.jsx)(E.n,{addlStyle:"main-panel",text:"No pending items"});if(Ce.length<1)return(0,i.jsx)(E.n,{addlStyle:"main-panel"});const Ue=null!=oe?oe:(0,j.vr)(re,Te,Ce),_e=(0,j.cc)(Ue,J),Je=ie.filter((e=>x.TZ.parse(e).getSpelling().includes(_e.kanji)&&e.english.toLowerCase()===_e.english.toLowerCase()||x.TZ.parse(e).getSpelling().includes(_e.kanji)&&e.english.toLowerCase().includes(_e.english.toLowerCase())&&"Verb"===e.grp||x.TZ.parse(e).getSpelling()===_e.kanji&&(e.english.toLowerCase().includes(_e.english.toLowerCase())||_e.english.toLowerCase().includes(e.english.toLowerCase()))));let $e=[];if(Je.length>0){const[e,...t]=d()(Je,(e=>e.english.length));$e=[e,...(0,p.Sy)(t)]}const ze=null!==(l=null!==(t=null===(e=_e.tags.find((e=>B.includes(e)&&(0,v.F)(e))))||void 0===e?void 0:e.replace("_"," "))&&void 0!==t?t:null===(n=_e.tags.find((e=>(0,v.F)(e))))||void 0===n?void 0:n.replace("_"," "))&&void 0!==l?l:"",Ke=!0===(null===(u=ee[_e.uid])||void 0===u?void 0:u.rein),Be=$e.slice(0,3).map(((e,t,n)=>(0,i.jsxs)(h.Fragment,{children:[e.english+" ",x.TZ.parse(e).toHTML(),t<n.length-1?"; ":"",(0,i.jsx)("wbr",{})]},e.uid))),He=(0,i.jsx)("span",{children:_e.english}),Ye=(re+1)/Te.length*100,Xe=null===(L=se.current[Ue])||void 0===L?void 0:L.lastReview,Qe=void 0!==Xe&&0===(0,f.O5)(Xe),et=(0,b.AR)(null===(V=se.current[Ue])||void 0===V?void 0:V.daysBetweenReviews,null===(W=se.current[Ue])||void 0===W?void 0:W.lastReview);return(0,i.jsxs)(h.Fragment,{children:[(0,i.jsxs)("div",{className:"kanji main-panel h-100",children:[(0,i.jsx)("div",{ref:Ze.setReference}),(0,i.jsx)("div",{ref:Ze.setFloating,style:{position:Ge,top:null!=Fe?Fe:0,left:null!=We?We:0,width:"max-content"},className:"grp-info",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:_e.grp}),(0,i.jsx)("div",{children:ze})]})}),(0,i.jsxs)("div",{ref:Pe,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(I.Z,{ariaLabel:"Previous",action:Ee,children:(0,i.jsx)(o.wyc,{size:16})}),(0,i.jsxs)("div",{className:"d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)("h1",{className:"pt-0",children:(0,i.jsx)("span",{children:_e.kanji})}),_e.on&&(0,i.jsx)("h4",{className:"pt-0",onClick:(0,m.k)(me,(e=>!e)),children:(0,i.jsx)("span",{children:fe?_e.on:"[On]"})})||(0,i.jsx)("h4",{className:"pt-0",children:"."}),_e.kun&&(0,i.jsx)("h4",{className:"pt-2",onClick:(0,m.k)(xe,(e=>!e)),children:(0,i.jsx)("span",{children:je?_e.kun:"[Kun]"})})||(0,i.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("span",{className:c()({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===Be.length}),onClick:(0,m.k)(we,(e=>!e)),children:(0,i.jsx)("span",{className:"text-nowrap",children:be&&Be.length>0?Be:"[Examples]"})}),(0,i.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:(0,m.k)(ke,(e=>!e)),children:ye?He:(0,i.jsx)("span",{children:"[Meaning]"})})]})]}),(0,i.jsx)(I.Z,{ariaLabel:"Next",action:Ae,children:(0,i.jsx)(o.XCv,{size:16})})]})]}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start"})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(G,{className:c()({"question-color opacity-50":H.current===C.vl.RECALL&&!Qe,"done-color opacity-50":Qe}),notification:et,children:(0,i.jsxs)("div",{className:"h-100 d-flex",children:[(0,i.jsx)(A.Y,{difficulty:null===(F=se.current[Ue])||void 0===F?void 0:F.difficultyP,onChange:e=>{q((0,T.F$)(Ue,e))},resetOn:Ue}),(0,i.jsx)(D.w,{accuracy:null===(Z=se.current[Ue])||void 0===Z?void 0:Z.accuracyP,resetOn:Ue,onChange:e=>{void 0!==e&&(q((0,T.EE)(Ue,e)),Se.current=e)}}),(0,i.jsx)("div",{className:"fs-xx-small me-2",children:(0,i.jsx)(P.H,{metadata:se.current[Ue]})})]})}),(0,i.jsx)(M.R_,{addFrequencyTerm:U,removeFrequencyTerm:_,hasReinforce:Ke,term:_e,count:ve.length,isReinforced:null!==oe})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(a.Z,{variant:"determinate",value:Ye,color:Ke?"secondary":"primary"})})]})}},9406:(e,t,n)=>{n.r(t),n.d(t,{PhrasesMeta:()=>P,default:()=>I});var i=n(5893),s=n(9041),r=n(5529),a=n(4184),o=n.n(a),l=n(7294),c=n(743),u=n(7186),d=n(5965),h=n(5863),g=n(8527),v=n(9983),p=n(2850),f=n(4953),m=n(3162),j=n(7962),x=n(158),b=n(9226),w=n(6693),y=n(8056),k=n(7652),N=n(4133),R=n(9180),S=n(3968),T=n(5626),C=n(6537),O=n(2405),D=n(3047),A=n(9775),E=n(7127),M=n(7791);const P={location:"/phrases/",label:"Phrases"};function I(){var e,t,n,a,P,I,F,G;const Z=(0,c.I0)(),q=(0,l.useRef)(null),U=(0,l.useRef)(0),[_,J]=(0,l.useState)(null),[$,z]=(0,l.useState)(Date.now()),K=(0,l.useRef)(Date.now()),[B,H]=(0,l.useState)(0),[Y,X]=(0,l.useState)(!1),[Q,ee]=(0,l.useState)(!1),[te,ne]=(0,l.useState)(!1),[ie,se]=(0,l.useState)([]),[re,ae]=(0,l.useState)(!1),[oe,le]=(0,l.useState)([]),ce=(0,l.useRef)(),{englishSideUp:ue,repetition:de,difficultyThreshold:he,swipeThreshold:ge,phraseList:ve,activeGroup:pe,spaRepMaxReviewItem:fe,includeNew:me,includeReviewed:je,reinforce:xe,romajiActive:be,filterType:we,sortMethod:ye}=(0,x.Q)(),ke=(0,l.useRef)(fe),Ne=(0,l.useRef)(he),Re=(0,l.useRef)(de);Re.current=de,(0,l.useEffect)((()=>{0===ve.length&&Z((0,k.cC)())}),[]);const Se=(0,l.useMemo)((()=>{const e=Re.current;if(0===ve.length)return[];if(0===Object.keys(e).length&&0===pe.length)return ve;const t=Object.keys(e).reduce(((t,n)=>{var i;return!0===(null===(i=e[n])||void 0===i?void 0:i.rein)&&(t=[...t,n]),t}),[]);let n=(0,v.Dm)(we.current,ve,t,pe,(0,g.c)(Z,k.f6));const i=(0,m.WU)(Ne.current,n,Re.current);switch(i.length>0?n=i:le((e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:N.x6.WARN}])),ye.current){case N.vl.RECALL:const{failed:e,overdue:t,overLimit:i}=(0,f.fC)(n,Re.current,ke.current),s=[...e,...t];s.length>0&&n.length!==s.length&&(n=s.map((e=>n[e])));const r=s.map(((e,t)=>{const{accuracyP:i=0,lastReview:s,daysBetweenReviews:r}=Re.current[n[t].uid],a=s?(0,h.O5)(s):void 0;return(0,f.ct)({accuracy:i/100,daysSinceReview:a,daysBetweenReviews:r}).toFixed(2).replace(".00","").replace("0.",".")})),a=i.length>0?`+${i.length}`:"";le((e=>[...e,{msg:`Space Rep 2 (${r.length})${a} [${r.toString()}]`,lvl:0===s.length?N.x6.WARN:N.x6.DEBUG}]));break;case N.vl.VIEW_DATE:me||(n=n.filter((e=>{var t;return void 0!==(null===(t=Re.current[e.uid])||void 0===t?void 0:t.lastView)}))),je||(n=n.filter((e=>{var t;return void 0===(null===(t=Re.current[e.uid])||void 0===t?void 0:t.lastReview)})))}const s=n.reduce(((t,n)=>{var i;return!0===(null===(i=e[n.uid])||void 0===i?void 0:i.rein)&&(t=[...t,n.uid]),t}),[]);return se(s),n}),[we,ye,Ne,Z,ve,pe,me,je]),{order:Te,recallGame:Ce}=(0,l.useMemo)((()=>{const e=Re.current;if(0===Se.length)return{order:[]};let t,n;switch(ye.current){case N.vl.VIEW_DATE:t=(0,m.EL)(Se,e);let i=0,s=NaN;const r=t.map((e=>{var t;const n=null===(t=Re.current[Se[e].uid])||void 0===t?void 0:t.lastView;return i=n?i:i+1,s=n&&Number.isNaN(s)?(0,h.O5)(n):s,n?(0,h.O5)(n):0}));le((e=>[...e,{msg:`Date Viewed (${r.length}) New:${i} Old:${s}d`,lvl:N.x6.DEBUG}]));break;case N.vl.RECALL:const{failed:a,overdue:o,notPlayed:l,todayDone:c}=(0,f.fC)(Se,Re.current),u=[...a,...o];t=u.length>0?u:[...l,...c],n=u.length;break;default:t=(0,m.tq)(Se),le((e=>[...e,{msg:`Random (${t.length})`,lvl:N.x6.DEBUG}]))}return{order:t,recallGame:n}}),[ye,Se]),Oe=(0,l.useCallback)((()=>{const e=Se.length;let t=(B+1)%e;K.current=$,z(Date.now()),U.current=B,H(t),J(null)}),[Se,B,$]),De=(0,l.useCallback)((()=>{(0,v.hY)(xe.current,we.current,ie,Se,Re.current,_,(e=>{q.current=_,J(e)}),Oe)}),[we,xe,ie,Se,_,Oe]),Ae=(0,l.useCallback)((()=>{const e=Se.length;let t;t=_?B:(e+(B-1))%e,K.current=$,z(Date.now()),U.current=B,H(t),J(null)}),[Se,B,_,$]),Ee=function(e,t,n,i,s,r,a,o){return function(l,c){let h;if("left"===l)e(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===l)t(),h=Promise.all([Promise.resolve(),Promise.resolve()]);else{const e=null!=n?n:(0,v.vr)(i,a,r),t=(0,v.cc)(e,s),g=o?"/override_cache":"";if("up"===l){const n=(0,p._I)(t),i=(0,j.b1)(u.vT+g,{tl:"ja",q:n,uid:e});h=(0,d.R$)(i,c)}else if("down"===l){const e=t.english,n=(0,j.b1)(u.vT+g,{tl:"en",q:e,uid:t.uid+".en"});h=(0,d.R$)(n,c)}}return null!=h?h:Promise.reject()}}(De,Ae,_,B,ve,Te,Se,re);(0,l.useLayoutEffect)((()=>{var e,t;const n={selectedIndex:U.current,reinforcedUID:q.current,lastNext:K.current};if(_!==n.reinforcedUID||B!==n.selectedIndex){const i=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,v.vr)(n.selectedIndex,Se,Te),s=(0,v.cc)(i,Se,ve);let r=Promise.resolve();(null===(t=Re.current[i])||void 0===t?void 0:t.difficultyP)&&ce.current?r=Z((0,k.Jg)({uid:i})):null===ce.current&&(r=Z((0,k.Qs)({uid:i}))),r.then((e=>{if(e&&"payload"in e){const{newValue:t,oldValue:n}=e.payload;(0,f.z1)(Z,i,t,n,s.english)}if((0,v.Zc)(n.lastNext)){const e=i!==n.reinforcedUID,t=null!==n.reinforcedUID;Z((0,k.s5)({uid:i,shouldIncrement:e})).unwrap().then((e=>{var n;const{value:r,prevVal:a}=e;let o;o=ce.current&&a.lastReview?a.lastReview:null!==(n=a.lastView)&&void 0!==n?n:r.lastView;const l={[i]:Object.assign(Object.assign({},r),{lastView:o})};(0,h.Ps)(((e,t)=>Z((0,y.kg)(e,t))),s,l,{frequency:t})}))}})),X(!1),ee(!1),ne(!1),U.current=B,q.current=_,ce.current=void 0}}),[Z,ve,_,B,Se,Te,Ce]),(0,l.useEffect)((()=>{oe.forEach((e=>{Z((0,y.kg)(e.msg,e.lvl))}))}),[Z,oe]),(0,b.q)(Ee,(0,g.c)(Z,k.d1));const{HTMLDivElementSwipeRef:Me}=(0,w.M)(Ee);if(0===Ce)return(0,i.jsx)(C.n,{addlStyle:"main-panel",text:"No pending items"});if(Se.length<1||Te.length<1)return(0,i.jsx)(C.n,{addlStyle:"main-panel"});const Pe=null!=_?_:(0,v.vr)(B,Se,Te),Ie=(0,v.cc)(Pe,Se,ve),Le=function(e,t,n,s,r){const a=t?{tl:"en",q:n.english,uid:n.uid+".en"}:{tl:"ja",q:(0,p._I)(n),uid:(0,v.gW)(n)};return(0,i.jsx)(S.Z,{visible:0===e&&!0,word:a,reCache:s})}(ge,ue,Ie,re),[Ve,We]=function(e){const t=p.TZ.parse(e);return[t,t.toHTML()]}(Ie),Fe=function(e,t,n){return(0,i.jsx)("span",{onClick:e.lit?()=>{n((e=>!e))}:void 0,children:t?e.lit:e.english})}(Ie,te,ne),Ge=(0,v.yT)(ue,Ve,Fe,(e=>J(e)),Ie),Ze=(0,v.hF)(ue,Ve,We,(e=>J(e)),Ie),{topValue:qe,bottomValue:Ue,bottomLabel:_e}=(0,v.JS)(ue,Ge,Ze,L,V),Je=(null!==(t=null===(e=Ie.lit)||void 0===e?void 0:e.length)&&void 0!==t?t:Ie.english.length)<55,$e=(null==Ve?void 0:Ve.getSpelling().length)<55,{aboveSmallCss:ze,aboveLargeCss:Ke,belowNoInterruptCss:Be,belowSmallCss:He,belowLargeCss:Ye}=function(e,t,n){const i={"fs-display-5":!0},s=i;return{aboveSmallCss:Object.assign({},e?{[n?"h1":"h3"]:!0}:{[t?"h1":"h3"]:!0}),aboveLargeCss:i,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:Object.assign({},e?{[t?"h1":"h3"]:!0}:{[n?"h1":"h3"]:!0}),belowLargeCss:s}}(ue,$e,Je),Xe=!0===(null===(n=de[Ie.uid])||void 0===n?void 0:n.rein),Qe=Ie.romaji,et=(B+1)/Se.length*100,tt=null===(a=Re.current[Pe])||void 0===a?void 0:a.lastReview,nt=void 0!==tt&&0===(0,h.O5)(tt),it=(0,f.AR)(null===(P=Re.current[Pe])||void 0===P?void 0:P.daysBetweenReviews,null===(I=Re.current[Pe])||void 0===I?void 0:I.lastReview);return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)("div",{className:"phrases main-panel h-100",children:(0,i.jsxs)("div",{ref:Me,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(E.Z,{ariaLabel:"Previous",action:Ae,children:(0,i.jsx)(r.wyc,{size:16})}),(0,i.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(A.Z,{breakPoint:"md",largeClassName:Ke,smallClassName:ze,children:qe}),be.current&&Qe&&(0,i.jsx)("h5",{children:(0,i.jsx)("span",{onClick:(0,g.k)(ee,(e=>!e)),className:"clickable loop-no-interrupt",children:Q?Qe:"[Romaji]"})}),(0,i.jsx)(A.Z,{className:Be,breakPoint:"md",onClick:(0,g.k)(X,(e=>!e)),largeClassName:Ye,smallClassName:He,children:Y?Ue:_e}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:Le})]}),(0,i.jsx)(E.Z,{ariaLabel:"Next",action:De,children:(0,i.jsx)(r.XCv,{size:16})})]})}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,i.jsx)(O.uY,{toggle:ue,action:(0,g.c)(Z,k.d1)}),(0,i.jsx)(O.Ro,{active:re,action:W(re,ae)})]})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsxs)(M.u,{className:o()({"question-color opacity-50":ye.current===N.vl.RECALL&&!nt,"done-color opacity-50":nt}),idKey:Pe,notification:it,children:[(0,i.jsx)(T.Y,{difficulty:null===(F=Re.current[Pe])||void 0===F?void 0:F.difficultyP,resetOn:Pe,onChange:e=>{Z((0,k.g0)(Pe,e))}}),(0,i.jsx)(R.w,{accuracy:null===(G=Re.current[Pe])||void 0===G?void 0:G.accuracyP,resetOn:Pe,onChange:e=>{void 0!==e&&(Z((0,k.xH)(Pe,e)),ce.current=e)}}),(0,i.jsx)("div",{className:"fs-xx-small me-2",children:(0,i.jsx)(D.H,{metadata:Re.current[Pe]})})]}),(0,i.jsx)(O.D4,{visible:ue&&void 0!==Ie.lit&&""!==Ie.lit,toggle:te,action:(0,g.k)(ne,(e=>!e))}),(0,i.jsx)(O.R_,{addFrequencyTerm:e=>{se((t=>[...t,e])),(0,g.c)(Z,k.Lp)(e)},removeFrequencyTerm:e=>{se((t=>t.filter((t=>t!==e)))),(0,g.c)(Z,k.gP)(e)},hasReinforce:Xe,isReinforced:null!==_,term:Ie,count:ie.length})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:et,color:Xe?"secondary":"primary"})})]})}const L=(0,i.jsx)("span",{children:"[English]"}),V=(0,i.jsx)("span",{children:"[Japanese]"});function W(e,t){return function(){if(!e){const e=2e3;t(!0),setTimeout((()=>{t(!1)}),e)}}}},6176:(e,t,n)=>{n.d(t,{E:()=>g,F:()=>h});var i=n(5893),s=n(5472),r=n.n(s),a=n(3174),o=n.n(a),l=n(5697),c=n.n(l),u=n(7294),d=n(8737);function h(e){return e.includes("_")&&Number.isInteger(parseInt(e.split("_")[1],10))}function g(e){const{termsActive:t,termsTags:n,toggleTermActive:s,selectedCount:a}=e;(0,u.useEffect)((()=>{t.forEach((e=>{n.includes(e)||s(e)}))}),[t,n,s]);const[l,c]=o()(n,(e=>h(e))),g=Object.values(l.reduce(((e,t)=>{const n=t.split("_")[0];return e[n]?e[n]=[...e[n],t]:e[n]=[t],e}),{})),v=[...r()(c),...g.reduce(((e,t)=>[...e,...r()(t,(e=>{const[,t]=e.split("_");return Number.isInteger(parseInt(t,10))?parseInt(t,10):e}))]),[])],p=a&&a>0&&"("+a+")"||"";return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h5",{children:["Tag List ",p]},0),v.map(((e,n)=>(0,i.jsx)("div",{children:(0,i.jsx)(d.M,{active:t.includes(e),onClick:()=>{s(e)},children:e},n)},n+1)))]})}g.propTypes={termsTags:c().array,termsActive:c().array,toggleTermActive:c().func,selectedCount:c().number}},3295:(e,t,n)=>{n.r(t),n.d(t,{SettingsMeta:()=>S,collapseExpandToggler:()=>O,default:()=>A});var i=n(5893),s=n(5529),r=n(4184),a=n.n(r),o=n(7294),l=n(743),c=n(8527),u=n(9983),d=n(5507),h=n(8056),g=n(7652),v=n(4133),p=n(7891),f=n(6537),m=n(7567);const j=(0,o.lazy)((()=>Promise.all([n.e(816),n.e(392),n.e(987),n.e(184)]).then(n.bind(n,3184)))),x=(0,o.lazy)((()=>Promise.all([n.e(816),n.e(392),n.e(987),n.e(557),n.e(251)]).then(n.bind(n,598)))),b=(0,o.lazy)((()=>Promise.all([n.e(816),n.e(392),n.e(987),n.e(557),n.e(142)]).then(n.bind(n,1142)))),w=(0,o.lazy)((()=>n.e(424).then(n.bind(n,8424)))),y=(0,o.lazy)((()=>Promise.all([n.e(816),n.e(731),n.e(457)]).then(n.bind(n,457)))),k=(0,o.lazy)((()=>Promise.all([n.e(816),n.e(392),n.e(731),n.e(523)]).then(n.bind(n,9523)))),N=(0,o.lazy)((()=>n.e(893).then(n.bind(n,2917)))),R=(0,o.lazy)((()=>n.e(546).then(n.bind(n,1546)))),S={location:"/settings/",label:"Settings"};function T(e,t){const n=t.cause;switch(e((0,h.zA)(v.x6.DEBUG)),null==n?void 0:n.code){case"StaleVocabActiveGrp":{const i=n.value;e((0,h.kg)("Error: "+t.message,v.x6.ERROR)),e((0,h.kg)("Group "+JSON.stringify(i)+" Removed",v.x6.ERROR)),e((0,p.sG)(i))}break;case"StalePhraseActiveGrp":{const i=n.value;e((0,h.kg)("Error: "+t.message,v.x6.ERROR)),e((0,h.kg)("Group "+JSON.stringify(i)+" Removed",v.x6.ERROR)),e((0,g.cz)(i))}break;case"DeviceMotionEvent":e((0,h.kg)("Error: "+t.message,v.x6.ERROR)),e((0,h.cv)(0))}}function C(e,t,n){return function(i){try{(0,u.Mm)(i,t,(e=>{n(Number(e.toFixed(2))),setTimeout((()=>{n(void 0)}),300)}))}catch(t){t instanceof Error&&T(e,t)}}}function O(e,t){const n=e?(0,i.jsx)(s.oOx,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,i.jsx)(s.wl8,{className:"clickable",size:"medium","aria-label":"expand"});return(0,i.jsx)("h2",{onClick:()=>t((e=>!e)),children:n})}const D=a()({"mb-5":!0});function A(){const e=(0,l.I0)(),t=(0,o.useRef)(void 0),{darkMode:n,swipeThreshold:r,motionThreshold:g,memory:p,debug:S}=(0,d.E)(),[A,E]=(0,o.useState)(!1),[M,P]=(0,o.useState)(!1),[I,L]=(0,o.useState)(!1),[V,W]=(0,o.useState)(!1),[F,G]=(0,o.useState)(!1),[Z,q]=(0,o.useState)(!1),[U,_]=(0,o.useState)(!1),[J,$]=(0,o.useState)(!1),[z,K]=(0,o.useState)(!1),[B,H]=(0,o.useState)(""),[Y,X]=(0,o.useState)(""),[Q,ee]=(0,o.useState)(""),[te,ne]=(0,o.useState)(!1),[ie,se]=(0,o.useState)(0);(0,o.useEffect)((()=>{var n;return e((0,h.M4)()),navigator.serviceWorker.addEventListener("message",re),null===(n=navigator.serviceWorker.controller)||void 0===n||n.postMessage({type:"SW_VERSION"}),()=>{navigator.serviceWorker.removeEventListener("message",re),t.current&&window.removeEventListener("devicemotion",t.current)}}),[]),(0,o.useEffect)((()=>{g>0&&void 0===t.current?(t.current=C(e,g,se),(0,u.HG)((()=>{t.current&&window.addEventListener("devicemotion",t.current)}),(t=>T(e,t)))):0===g&&void 0!==t.current?(window.removeEventListener("devicemotion",t.current),t.current=void 0):(t.current&&window.removeEventListener("devicemotion",t.current),t.current=C(e,g,se),(0,u.HG)((()=>{t.current&&window.addEventListener("devicemotion",t.current)}),(t=>T(e,t))))}),[e,g]);const re=(0,o.useCallback)((t=>{const{type:n,error:i}=t.data;if("DO_HARD_REFRESH"===n)i&&e((0,h.kg)(i,v.x6.ERROR)),setTimeout((()=>{E(!1),ne(!0)}),2e3);else if("SW_VERSION"===n){const{swVersion:e,jsVersion:n,bundleVersion:i}=t.data;H(e),X(n),ee(i)}}),[e]);return(0,i.jsx)("div",{className:"settings",children:(0,i.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Global"}),(0,i.jsx)("h2",{})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,i.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,i.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===r}),children:[(0,i.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(r-1<=0?(0,h.nh)(0):(0,h.nh)(r-1))},children:"-"}),(0,i.jsx)("div",{className:"px-2",children:r}),(0,i.jsx)("div",{className:"clickable px-2",onClick:()=>e((0,h.nh)(r+1)),children:"+"})]}),(0,i.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===g}),children:[(0,i.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(g-.5<=0?(0,h.cv)(0):(0,h.cv)(g-.5))},children:"-"}),(0,i.jsx)("div",{className:a()({"px-2":!0,"correct-color":ie&&ie>g&&ie<=g+1,"question-color":ie&&ie>g+1&&ie<=g+2,"incorrect-color":ie&&ie>g+2}),children:null!=ie?ie:g}),(0,i.jsx)("div",{className:"clickable px-2",onClick:()=>{e((0,h.cv)(g+.5))},children:"+"})]})]}),(0,i.jsxs)("div",{className:"column-2",children:[(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(m.Z,{active:n,action:(0,c.c)(e,h.In),statusText:(n?"Dark":"Light")+" Mode"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(m.Z,{active:r>0,action:()=>{e(r>0?(0,h.nh)(0):(0,h.nh)(1))},statusText:"Touch Swipes"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(m.Z,{active:g>0,action:()=>{e(0===g?(0,h.cv)(6):(0,h.cv)(0))},statusText:"Accelerometer"})})]})]})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Phrases"}),O(V,W)]}),V&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"phrases-settings",text:"Loading..."}),children:(0,i.jsx)(x,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Vocabulary"}),O(I,L)]}),I&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"vocabulary-settings",text:"Loading..."}),children:(0,i.jsx)(b,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Kanji"}),O(M,P)]}),M&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"kanji-settings",text:"Loading..."}),children:(0,i.jsx)(j,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Opposites Game"}),O(F,G)]}),F&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"opposites-settings",text:"Loading..."}),children:(0,i.jsx)(w,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Kana Game"}),O(Z,q)]}),Z&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"kana-settings",text:"Loading..."}),children:(0,i.jsx)(y,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Kanji Game"}),O(U,_)]}),U&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"kanji-game-settings",text:"Loading..."}),children:(0,i.jsx)(k,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Particles Game"}),O(J,$)]}),J&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"particle-settings",text:"Loading..."}),children:(0,i.jsx)(N,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Study Stats"}),O(z,K)]}),z&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(f.n,{addlStyle:"stats-settings",text:"Loading..."}),children:(0,i.jsx)(R,{})})]}),(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Application"})}),(0,i.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[(0,i.jsx)("div",{className:"column-1",children:(0,i.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,i.jsxs)("div",{className:"d-flex flex-row w-50 w-sm-100 justify-content-between clickable",onClick:()=>{H(""),X(""),ee(""),setTimeout((()=>{var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"SW_VERSION"})}),1e3)},children:[(0,i.jsxs)("div",{className:"pe-2",children:[(0,i.jsx)("div",{children:"swVersion:"}),(0,i.jsx)("div",{children:"jsVersion:"}),(0,i.jsx)("div",{children:"bundleVersion:"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:B}),(0,i.jsx)("div",{children:Y}),(0,i.jsx)("div",{children:Q})]})]})})}),(0,i.jsxs)("div",{className:"column-2",children:[(0,i.jsx)("div",{className:"setting-block mb-2",children:(0,i.jsx)(m.Z,{active:S>v.x6.OFF,action:(0,c.c)(e,h.zA),color:"default",statusText:(0,u.w_)(S,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,i.jsxs)("div",{className:a()({"d-flex justify-content-end mb-2":!0,"disabled-color":te}),children:[(0,i.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,i.jsx)("div",{className:a()({"spin-a-bit":A}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:()=>{var e;E(!0),ne(!1),setTimeout((()=>{A&&(E(!1),ne(!0))}),3e3),null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"DO_HARD_REFRESH"})},children:(0,i.jsx)(s.bnu,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,i.jsx)("div",{className:"setting-block mb-2",children:(0,i.jsx)(m.Z,{active:p.persistent,action:(0,c.c)(e,h.TJ),disabled:p.persistent,color:"default",statusText:p.persistent?`Persistent ${~~(p.usage/1024/1024)}\n                        /\n                        ${~~(p.quota/1024/1024)}\n                        MB`:"Persistent off"})})]})]})]})]})})}},7509:(e,t,n)=>{n.r(t),n.d(t,{VocabularyMeta:()=>te,default:()=>ne});var i=n(5893),s=n(6514),r=n(8223),a=n(9041),o=n(5529),l=n(4184),c=n.n(l),u=n(3174),d=n.n(u),h=n(7294),g=n(743),v=n(5697),p=n.n(v),f=n(9983),m=n(2850),j=n(9841),x=n(4933),b=n(7891),w=n(3968),y=n(9775);function k(e){const t=(0,g.I0)(),{verb:n,reCache:s,linkToOtherTerm:r,showHint:a}=e,[o,l]=(0,h.useState)(!1),[u,d]=(0,h.useState)(!1),{verbForm:v,swipeThreshold:p,repetition:k,romajiEnabled:R,englishSideUp:S,hintEnabled:T,verbFormsOrder:C,verbColSplit:O}=(0,x.Z)();(0,h.useLayoutEffect)((()=>{l(!1),d(!1)}),[n]);const D=(e,n)=>{const s=c()({"pt-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"ps-sm-3":0===e,"pe-sm-3":0!==e,"text-end":0!==e}),r=n.map((e=>{const n=c()({clickable:!0}),s=c()({invisible:v===e.name});return(0,i.jsxs)("div",{className:n,onClick:()=>{v===e.name?t((0,b.rZ)("dictionary")):t((0,b.rZ)(e.name))},children:[(0,i.jsx)("span",{className:s,children:"["}),(0,i.jsx)("span",{children:e.name}),(0,i.jsx)("span",{className:s,children:"]"})]},e.name)}));return(0,i.jsx)("div",{className:s,children:r},e)},A=(0,j.kf)(n,C),{t1:E,t2:M}=function(e,t){const n=N(e,t);return{t1:e.slice(0,n),t2:e.slice(n)}}(A,O),P=(0,f.$q)(n.uid,k,S,(()=>{t((0,b._n)(n.uid))})),{inJapanese:I,inEnglish:L,romaji:V,japaneseObj:W}=function(e,t,n,s,r){var a,o;const l=null!==(a=e.romaji)&&void 0!==a?a:".",c=N(t,s),u=t.find((e=>e.name===n)),d=null!==(o=null==u?void 0:u.value)&&void 0!==o?o:t[c].value;return{inJapanese:d.toHTML(r),inEnglish:(0,i.jsx)(i.Fragment,{children:e.english}),romaji:l,japaneseObj:d}}(n,A,v,O,P),F=(0,h.useMemo)((()=>j.Rs.parse(n)),[n]),G=(0,f.hF)(S,F,I,r),Z=(0,f.yT)(S,F,L,r),{jLabel:q,eLabel:U}=(0,h.useMemo)((()=>{let e=(0,i.jsx)("span",{children:"[English]"}),t=(0,i.jsx)(y.Z,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(T&&a)if(S){const e=(0,f.tu)(W);e&&(t=e)}else{const t=(0,f.iz)(n);t&&(e=t)}return{jLabel:t,eLabel:e}}),[T,a,S,W,n]),{topValue:_,bottomValue:J,bottomLabel:$}=(0,f.JS)(S,Z,G,U,q),z=(0,h.useMemo)((()=>Object.assign(Object.assign({},n),{japanese:W.toString(),pronounce:n.pronounce&&W.getPronunciation(),form:v})),[n,W,v]),K=(0,h.useMemo)((()=>S?{tl:"en",q:z.english,uid:z.uid+".en"}:{tl:"ja",q:(0,m._I)(z),uid:(0,f.gW)(z)}),[S,z]),B=(0,i.jsx)(w.Z,{visible:0===p,word:K,reCache:s});return(0,i.jsxs)(i.Fragment,{children:[D(0,E),(0,i.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(y.Z,{breakPoint:"md",smallClassName:Object.assign({},S?{h5:!0}:{"fs-display-6":!0}),largeClassName:{"fs-display-6":!0},children:_}),R&&V&&(0,i.jsx)("div",{children:(0,i.jsx)("span",{className:"clickable loop-no-interrupt",onClick:()=>d((e=>!e)),children:u?V:"[romaji]"})}),(0,i.jsx)(y.Z,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:Object.assign({},S?{"fs-display-6":!0}:{h5:!0}),largeClassName:{"fs-display-6":!0},onClick:()=>l((e=>!e)),children:o?J:$}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:B})]},1),D(2,M)]})}function N(e,t){const n=Math.trunc(e.length/2)+(e.length%2==0?0:1)-t;return Math.trunc(e.length/2)+n}k.propTypes={verb:p().object.isRequired,reCache:p().bool,linkToOtherTerm:p().func,showHint:p().bool};var R=n(8527);function S(e){var t;const n=(0,g.I0)(),{vocabulary:s,reCache:r,showHint:a,wasPlayed:o}=e,[l,c]=(0,h.useState)(!1),[u,d]=(0,h.useState)(!1),[v,p]=(0,h.useState)(void 0),{swipeThreshold:j,repetition:k,romajiEnabled:N,englishSideUp:S,hintEnabled:T,bareKanji:C}=(0,x.Z)();(0,h.useLayoutEffect)((()=>{c(!1),d(!1)}),[s]);const O=(0,h.useCallback)((()=>n((0,b._n)(s.uid))),[n,s.uid]),D=S&&C&&!1===(null===(t=k[s.uid])||void 0===t?void 0:t.f),A=(0,h.useMemo)((()=>{const e=S&&!D||!o?void 0:{[s.uid]:Object.assign(Object.assign({},k[s.uid]),{f:!0})};return(0,f.$q)(s.uid,null!=e?e:k,S,O)}),[O,s.uid,k,S,D,o]);let E=(0,i.jsx)("span",{children:"[Japanese]"}),M=(0,i.jsx)("span",{children:"[English]"});const P=m.TZ.parse(s),I=P.toHTML(A),L=(0,i.jsx)(h.Fragment,{children:s.english}),V=s.romaji,W=(0,f.hF)(S,P,I),F=(0,f.yT)(S,P,L);if(T&&a)if(S){const e=(0,f.tu)(P);E=null!=e?e:E}else{const e=(0,f.iz)(s);M=null!=e?e:M}const{topValue:G,bottomValue:Z,bottomLabel:q}=(0,f.JS)(S,F,W,M,E),U=(0,h.useMemo)((()=>{let e=s;if(m.TZ.parse(s).isNaAdj()){const t=m.TZ.parse(s).append(v&&"な");e=Object.assign(Object.assign({},s),{japanese:t.toString(),pronounce:s.pronounce&&t.getPronunciation(),form:v})}return S?{tl:"en",q:s.english,uid:s.uid+".en"}:{tl:S?"en":"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)}}),[s,S,v]),_=(0,h.useCallback)((()=>p((e=>e?void 0:"-na"))),[]),J=(0,i.jsx)(w.Z,{visible:0===j,word:U,reCache:r,onPushedPlay:_}),$=s.english.length<55;return(0,i.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(y.Z,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},S?Object.assign({[$?"fs-display-6":"h3"]:!0},$?{"lh-xs":!0}:{}):{"fs-display-6":!0}),children:G}),N&&V&&(0,i.jsx)("h5",{children:(0,i.jsx)("span",{onClick:(0,R.k)(d,(e=>!e)),className:"clickable loop-no-interrupt",children:u?V:"[Romaji]"})}),(0,i.jsx)(y.Z,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},S?{"fs-display-6":!0}:{[$?"fs-display-6":"h3"]:!0}),onClick:D?void 0:(0,R.k)(c,(e=>!e)),children:l||D?Z:q}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:J})]})}S.propTypes={vocabulary:p().object.isRequired,reCache:p().bool,showHint:p().bool};var T=n(7186),C=n(5965),O=n(5863);function D(e){if("mediaSession"in navigator){const t=navigator.mediaSession;try{t.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}var A=n(4953),E=n(3162),M=n(7962),P=n(9226);var I=n(6693),L=n(6989),V=n(7625),W=n(6024);function F(e){return e.visible?null:(0,i.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,i.jsx)(o.reW,{className:c()({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,i.jsx)("span",{className:"notification",children:e.loop})]})}function G(e){const{className:t}=e;return e.visible?null:(0,i.jsxs)("div",{className:c()(Object.assign({"loop-btn loop-start-btn clickable":!0},t||{})),"aria-label":"Loop start button",children:[(0,i.jsx)(V.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:W.aQ}),null!=e.countDown&&(0,i.jsx)("span",{className:"notification",children:e.countDown})]})}function Z(e){const{className:t}=e;return e.visible?null:(0,i.jsx)("div",{className:c()(Object.assign({"loop-btn loop-stop-btn clickable":!0},t||{})),"aria-label":"Loop stop button",children:(0,i.jsx)(V.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:W.oD})})}F.propTypes={visible:p().bool,active:p().bool,loop:p().number,onClick:p().func},G.propTypes={visible:p().bool,onClick:p().func,className:p().object,countDown:p().number},Z.propTypes={visible:p().bool,onClick:p().func,className:p().object};var q=n(2405);const U=15e3;function _(e,t){null!==e&&setTimeout((()=>{t(0),setTimeout((()=>{t((e=>0===e?null:e))}),1e3)}),1500)}var J=n(8056),$=n(4133),z=n(9180),K=n(5626),B=n(6537),H=n(3047),Y=n(7127),X=n(7791),Q=n(195);function ee(e){const t=e.list.length-1,[n,s]=(0,h.useState)((()=>Math.min(t,e.initial)));return(0,i.jsx)("div",{className:"vocabulary-slider",children:(0,i.jsx)(Q.ZP,{defaultValue:n,valueLabelFormat:t=>e.list[t].label,getAriaValueText:t=>e.list[t].label,"aria-label":"Alphabetic quick scroll",step:1,min:0,max:t,valueLabelDisplay:"auto",onChangeCommitted:(t,n)=>{"number"==typeof n&&(e.setIndex(n),s(n))}},n)})}ee.propTypes={initial:p().number.isRequired,list:p().array.isRequired,setIndex:p().func.isRequired};const te={location:"/vocabulary/",label:"Vocabulary"};function ne(){var e,t,n,l;const u=(0,g.I0)(),[v,p]=(0,h.useState)(!1),w=(0,h.useRef)(!1),y=(0,h.useRef)(null),N=(0,h.useRef)(0),[V,W]=(0,h.useState)(null),[Q,te]=(0,h.useState)(Date.now()),ne=(0,h.useRef)(Date.now()),[se,re]=(0,h.useState)(0),[ae,oe]=(0,h.useState)(void 0),[le,ce]=(0,h.useState)([]),[ue,de]=(0,h.useState)(!1),he=(0,h.useRef)(),[ge,ve]=(0,h.useState)(!1),[pe,fe]=(0,h.useState)(!1),[me,je]=(0,h.useState)([]),xe=(0,h.useRef)(),{motionThreshold:be,difficultyThreshold:we,vocabList:ye,reinforce:ke,filterType:Ne,hintEnabled:Re,sortMethod:Se,activeGroup:Te,includeNew:Ce,includeReviewed:Oe,autoVerbView:De,englishSideUp:Ae,verbForm:Ee,repetition:Me,spaRepMaxReviewItem:Pe}=(0,x.Z)(),Ie=(0,h.useRef)(Pe),Le=(0,h.useRef)(we),Ve=(0,h.useRef)(Me);Ve.current=Me,(0,h.useEffect)((()=>{0===ye.length&&u((0,b.Rz)())}),[]);const{filteredVocab:We}=(0,h.useMemo)((()=>{if(0===ye.length)return{filteredVocab:[]};if(0===Object.keys(Ve.current).length&&0===Te.length)return{filteredVocab:ye};const e=Object.keys(Ve.current).reduce(((e,t)=>{var n;return!0===(null===(n=Ve.current[t])||void 0===n?void 0:n.rein)&&(e=[...e,t]),e}),[]);let t=(0,f.Dm)(Ne.current,ye,e,Te,(0,R.c)(u,b.ZZ));const n=(0,E.WU)(Le.current,t,Ve.current);switch(n.length>0?t=n:je((e=>[...e,{msg:"Excluded all terms. Discarding memorized subfiltering.",lvl:$.x6.WARN}])),Se.current){case $.vl.GAME:if(ke.current){const[e,n]=d()(t,(e=>{var t;return!0===(null===(t=Ve.current[e.uid])||void 0===t?void 0:t.rein)}));t=[...n,...e]}break;case $.vl.RECALL:const{failed:e,overdue:n,overLimit:i}=(0,A.fC)(t,Ve.current,Ie.current),s=[...e,...n];s.length>0&&t.length!==s.length&&(t=s.map((e=>t[e])));const r=s.map(((e,n)=>{const{accuracyP:i=0,lastReview:s,daysBetweenReviews:r}=Ve.current[t[n].uid],a=s?(0,O.O5)(s):void 0;return(0,A.ct)({accuracy:i,daysSinceReview:a,daysBetweenReviews:r}).toFixed(2).replace(".00","").replace("0.",".")})),a=i.length>0?`+${i.length}`:"";je((e=>[...e,{msg:`Space Rep 2 (${r.length})${a} [${r.toString()}]`,lvl:0===s.length?$.x6.WARN:$.x6.DEBUG}]));break;case $.vl.VIEW_DATE:Ce||(t=t.filter((e=>{var t;return void 0!==(null===(t=Ve.current[e.uid])||void 0===t?void 0:t.lastView)}))),Oe||(t=t.filter((e=>{var t;return void 0===(null===(t=Ve.current[e.uid])||void 0===t?void 0:t.lastReview)})))}const i=t.reduce(((e,t)=>{var n;return!0===(null===(n=Ve.current[t.uid])||void 0===n?void 0:n.rein)&&(e=[...e,t.uid]),e}),[]);return ce(i),{filteredVocab:t}}),[u,Ne,Se,Le,ke,ye,Te,Ce,Oe]),{newOrder:Fe,ebare:Ge,jbare:Ze,recallGame:qe}=(0,h.useMemo)((()=>{if(0===We.length)return{newOrder:[]};let e,t,n,i=[];switch(Se.current){case $.vl.RANDOM:i=(0,E.tq)(We),je((e=>[...e,{msg:`Random (${i.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.VIEW_DATE:i=(0,E.EL)(We,Ve.current);let s=0,r=NaN;const a=i.map((e=>{var t;const n=null===(t=Ve.current[We[e].uid])||void 0===t?void 0:t.lastView;return s=n?s:s+1,r=n&&Number.isNaN(r)?(0,O.O5)(n):r,n?(0,O.O5)(n):0}));je((e=>[...e,{msg:`Date Viewed (${a.length}) New:${s} Old:${r}d`,lvl:$.x6.DEBUG}]));break;case $.vl.GAME:if(ke.current){let e=-1;for(let t=We.length-1;t>-1;t--){const n=Ve.current[We[t].uid],i=t-1>-1?t-1:0,s=Ve.current[We[i].uid];if(!0===(null==n?void 0:n.rein)&&!(null==s?void 0:s.rein)){e=t;break}}if(-1!==e){const t=We.slice(0,e),n=We.slice(e),s=(0,E.rU)(t,Ve.current),r=n.map(((e,n)=>t.length+n));i=[...s,...r]}}0===i.length&&(i=(0,E.rU)(We,Ve.current)),je((e=>[...e,{msg:`Space Rep 1 (${i.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.DIFFICULTY:i=(0,E.J0)(We,Ve.current),je((e=>[...e,{msg:`Difficulty (${i.length})`,lvl:$.x6.DEBUG}]));break;case $.vl.RECALL:const{failed:o,overdue:l,notPlayed:c,todayDone:u}=(0,A.fC)(We,Ve.current),d=[...o,...l];i=d.length>0?d:[...c,...u],n=d.length;break;default:({order:i,jOrder:e,eOrder:t}=(0,E.fx)(We)),je((e=>[...e,{msg:`Alphabetic (${i.length})`,lvl:$.x6.DEBUG}]))}return fe(!0),{newOrder:i,jbare:e,ebare:t,recallGame:n}}),[ke,Se,We]);(0,h.useEffect)((()=>{me.forEach((e=>{u((0,J.kg)(e.msg,e.lvl))}))}),[u,me]);const Ue=(0,h.useCallback)((()=>{const e=We.length;let t=(se+1)%e;ne.current=Q,te(Date.now()),N.current=se,re(t),W(null)}),[We,se,Q]),_e=(0,h.useCallback)((()=>{(0,f.hY)(ke.current,Ne.current,le,We,Ve.current,V,(e=>{y.current=V,W(e)}),Ue)}),[Ne,ke,le,We,V,Ue]),Je=(0,h.useCallback)((()=>{const e=We.length;let t;t=V?se:(e+(se-1))%e,ne.current=Q,te(Date.now()),N.current=se,re(t),W(null)}),[We,se,V,Q]),$e=function(e,t,n,i,s,r,a,o,l,c,u){return function(d,h){let g;if("left"===d)e(),g=Promise.all([Promise.resolve(),Promise.resolve()]);else if("right"===d)t(),g=Promise.all([Promise.resolve(),Promise.resolve()]);else{const e=null!=n?n:(0,f.vr)(i,o,a),t=(0,f.cc)(e,s),v=l?"/override_cache":"";if(u(!0),"up"===d){let e;if(D("playing"),"Verb"===t.grp&&"dictionary"!==r){const n=(0,j.dP)(t,r);e=Object.assign(Object.assign({},t),{japanese:n.toString(),pronounce:t.pronounce&&n.getPronunciation(),form:r})}else if(m.TZ.parse(t).isNaAdj()){const n=m.TZ.parse(t).append(c.current&&"な");e=Object.assign(Object.assign({},t),{japanese:n.toString(),pronounce:t.pronounce&&n.getPronunciation(),form:c.current}),c.current=c.current?void 0:"-na"}else e=t;const n=(0,M.b1)(T.vT+v,{tl:"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)});g=(0,C.R$)(n,h)}else if("down"===d){D("playing");const e=t.english,n=(0,M.b1)(T.vT+v,{tl:"en",q:e,uid:t.uid+".en"});g=(0,C.R$)(n,h)}}return null!=g?g:Promise.reject()}}(_e,Je,V,se,ye,Ee,Fe,We,ue,he,ve),ze=function(e){return function(t){const n=n=>{try{(0,f.Mm)(n,e,t)}catch(e){Error}};return{addDeviceMotionEvent:function(){e>0&&(0,f.HG)((()=>{window.addEventListener("devicemotion",n)}),(()=>{}))},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",n)}}}}(be),{beginLoop:Ke,abortLoop:Be,looperSwipe:He,loopSettingBtn:Ye,loopActionBtn:Xe,timedPlayVerifyBtn:Qe,timedPlayAnswerHandlerWrapper:et,gradeTimedPlayEvent:tt,resetTimedPlay:nt,loop:it,tpAnswered:st,tpAnimation:rt}=function(e,t,n){var s;const r=(0,h.useRef)(void 0),a=(0,h.useRef)(null),[o,l]=(0,h.useState)(0),[c,u]=(0,h.useState)(U/1e3),d=(0,h.useRef)(void 0),[g,v]=(0,h.useState)(null),p=(0,h.useRef)(void 0),m=(0,h.useRef)(void 0),[j,x]=(0,h.useState)(void 0);(0,h.useEffect)((()=>{const e=r;return()=>{var t;null===(t=e.current)||void 0===t||t.forEach((e=>e.abort()))}}),[]);const w=(0,L.o)();let y;0===o?y=null:0===(null===(s=r.current)||void 0===s?void 0:s.length)?y=(0,i.jsx)(Z,{}):void 0===r.current?y=(0,i.jsx)(G,{countDown:Array.isArray(a.current)?c:void 0,onClick:()=>{if(Array.isArray(r.current));else{if(Array.isArray(a.current)){const[e]=a.current;clearInterval(e),u(U/1e3)}d.current=void 0,x(void 0),r.current=[],setTimeout(N,100),w()}}}):void 0!==r.current&&(y=(0,i.jsx)(Z,{onClick:()=>{R(),C(),l(0)}}));const k=(0,i.jsx)(F,{active:o>0,loop:o,onClick:()=>{const e=R();a.current=null,e&&_(g,v),l((e=>{const t=3===e;return d.current=t?void 0:d.current,t?0:e+1}))}});function N(){R();const e=new AbortController,i=new AbortController,s=new AbortController,a=new AbortController,c=new AbortController,u=()=>{void 0!==p&&(R(),C(),l(0))};let d,h,g;if("function"==typeof n){const{addDeviceMotionEvent:e,removeDeviceMotionEvent:t}=n(u);e(),d=t}r.current=[e,i,s,a,c],t?(h=e=>S("down",e),g=e=>(0,f.nD)(o,(()=>S("up",e)),1500,e)):(h=e=>S("up",e),g=e=>(0,f.nD)(o,(()=>S("down",e)),1500,e));const m=(e,t)=>{v((n=>{let i;return i=null===n||100-n<1?e/t*100:n+e/t*100,i}))};(0,f.wO)(700,e).then((()=>(p.current=Date.now(),h(i).catch((e=>{var t;if("UserAborted"===(null===(t=e.cause)||void 0===t?void 0:t.code))throw e}))))).then((()=>(0,f.wO)(3e3,s,m))).then((()=>(v(null),p.current=void 0,g(a).then((()=>(r.current=void 0,S("left")))).catch((e=>{var t;if("UserAborted"!==(null===(t=e.cause)||void 0===t?void 0:t.code))return r.current=void 0,S("left")}))))).then((()=>(0,f.wO)(100,c))).catch((()=>{})).then((()=>{"function"==typeof d&&d()}))}const R=(0,h.useCallback)((()=>{var e;let t=!1;return null===(e=r.current)||void 0===e||e.forEach((e=>{t=!0,e.abort()})),r.current=void 0,t}),[r]);function S(t,n){let i;return o>0&&(i=e(t,n)),null!=i?i:Promise.reject(new Error("loop disabled"))}function T(){let e;if(void 0!==p.current){const t=p.current;e=Math.abs(Date.now()-t)}return{tpElapsed:e}}function C(){var e;let t=!1;return o>0&&void 0===r.current&&(null===(e=a.current)||void 0===e||e.forEach((e=>{clearTimeout(e)})),a.current=null,u(U/1e3),d.current=void 0,x(void 0),p.current=void 0,m.current=void 0,v(null),t=!0),t}return{beginLoop:N,abortLoop:R,looperSwipe:S,gradeTimedPlayEvent:function(e,t,n){var i;if(o>0&&void 0!==d.current)if("reset"===j)!0===(null===(i=n[t])||void 0===i?void 0:i.pron)&&void 0!==m.current&&e((0,b.Gy)(t,m.current,{pronunciation:void 0}));else if(d.current)void 0!==m.current&&e((0,b.Gy)(t,m.current));else{const n={pronunciation:"pronunciation"===j||void 0};e((0,b.d1)(t,n))}},resetTimedPlay:C,loopSettingBtn:k,loopActionBtn:y,timedPlayVerifyBtn:e=>(0,i.jsx)(q.lh,{visible:void 0!==d.current,hover:j,prevMissPronu:e,onPronunciation:()=>{e?(d.current=!1,x((e=>"reset"===e?void 0:"reset"))):(d.current=!1,x((e=>"pronunciation"===e?void 0:"pronunciation")))},onIncorrect:()=>{d.current=!1,x((e=>"incorrect"===e?void 0:"incorrect"))},onReset:()=>{d.current=!1,x((e=>"reset"===e?void 0:"reset"))}}),timedPlayAnswerHandlerWrapper:function(e,n){if(0===o)return n;let i=n;if("up"===e||"down"===e){const e=t?"up":"down";i=()=>n(e)}const s=function(e,t,n,i,s,r,a,o,l,c,u,d){let h=t,g=!0;if(l()){const t=null===i&&void 0!==o.current,l=null!==i&&void 0!==o.current,v=null===i&&void 0===o.current;if("up"===e||"down"===e){const e=c();d.current=e.tpElapsed,u.current=!0,t?(g=!1,u.current=void 0,setTimeout((()=>{u.current=!0}),1500),s(0),setTimeout((()=>{s(null)}),1500)):l||v&&(u.current=!1,h=()=>Promise.resolve(),g=!1)}else{v&&(g=!1);const e=function(e,t){const n=setInterval((()=>{t((t=>{const i=1===t;return e((e=>i?0:e)),i&&clearTimeout(n),i?U/1e3:t-1}))}),1e3);return n}(n,r);a.current=[e]}g&&_(i,s),D("paused")}return h}(e,i,l,g,v,u,a,p,R,T,d,m);return s},loop:o,setLoop:l,tpAnimation:g,tpAnswered:d}}($e,Ae,ze);(0,P.q)($e,(0,R.c)(u,b.$u),et);const{HTMLDivElementSwipeRef:at}=(0,I.M)($e,et);(function(e,t,n,i,s){(0,h.useEffect)((()=>(function(e,t="Nmemonica App",n){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:t,album:n,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]}))}(e),function(e){if("mediaSession"in navigator){const t=navigator.mediaSession;try{for(const[n,i]of e)try{t.setActionHandler(n,i)}catch(e){console.error(e)}}catch(e){console.error(e)}}else console.error("mediaSession not available")}([["play",()=>{t&&(n(),D("playing"))}],["pause",()=>{t&&(i(),D("paused"))}],["stop",()=>{t&&(i(),D("paused"))}],["previoustrack",()=>{t&&(i(),s("right"))}],["nexttrack",()=>{t&&(i(),s("left"))}]]),()=>{!function(){if("mediaSession"in navigator){const e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}()})),[e,t,n,i,s])})("Vocabulary Loop",it,Ke,Be,He),(0,h.useLayoutEffect)((()=>{var e,t;const n={selectedIndex:N.current,reinforcedUID:y.current,lastNext:ne.current};if(V!==n.reinforcedUID||se!==n.selectedIndex){const i=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,f.vr)(n.selectedIndex,We,Fe),s=(0,f.cc)(i,We,ye);tt(u,i,Ve.current);let r=Promise.resolve();(null===(t=Ve.current[i])||void 0===t?void 0:t.difficultyP)&&xe.current?r=u((0,b.Jg)({uid:i})):null===xe.current&&(r=u((0,b.Qs)({uid:i}))),r.then((e=>{if(e&&"payload"in e){const{newValue:t,oldValue:n}=e.payload;(0,A.z1)(u,i,t,n,s.english)}if((0,f.Zc)(n.lastNext)){const e=i!==n.reinforcedUID,t=null!==n.reinforcedUID;u((0,b.Wo)({uid:i,shouldIncrement:e})).unwrap().then((e=>{var n;const{value:r,prevVal:a}=e;let o;o=xe.current&&a.lastReview?a.lastReview:null!==(n=a.lastView)&&void 0!==n?n:r.lastView;const l={[i]:Object.assign(Object.assign({},r),{lastView:o})},c=(e,t)=>u((0,J.kg)(e,t));void 0!==st.current?(0,O.lP)(c,s,l,{frequency:t}):(0,O.Ps)(c,s,l,{frequency:t})}))}})),nt()&&(0,f.u3)(n.lastNext)&&Ke(),oe(void 0),N.current=se,y.current=V,xe.current=void 0,ve(!1)}}),[u,st,Ke,tt,nt,ye,V,se,We,Fe,qe]);const ot=(0,h.useCallback)(((e,t,n)=>(0,i.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,i.jsxs)("div",{ref:at,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(Y.Z,{ariaLabel:"Previous",action:Je,children:(0,i.jsx)(o.wyc,{size:16})}),n&&De?(0,i.jsx)(k,{verb:t,reCache:ue,linkToOtherTerm:e=>W(e),showHint:ae===e}):(0,i.jsx)(S,{vocabulary:t,reCache:ue,showHint:ae===e,wasPlayed:ge}),(0,i.jsx)(Y.Z,{ariaLabel:"Next",action:_e,children:(0,i.jsx)(o.XCv,{size:16})})]})})),[_e,Je,at,De,ue,ae,ge]),lt=(0,h.useCallback)(((e,t,n,s,r,a,o,l)=>{var d,h,g;return(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,i.jsx)(q.uY,{toggle:Ae,action:()=>{Be()&&nt(),u((0,b.$u)())}}),(0,i.jsx)(q.Ro,{active:ue,action:ie(ue,de)}),(0,i.jsx)(q.ph,{visible:n,toggleAutoVerbView:(0,R.c)(u,b.eK),autoVerbView:De}),(0,i.jsx)("div",{className:"sm-icon-grp",children:Ye}),(0,i.jsx)("div",{className:"sm-icon-grp",children:Xe})]})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[Qe(!0===(null===(d=Ve.current[e])||void 0===d?void 0:d.pron)),(0,i.jsxs)(X.u,{className:c()({"question-color opacity-50":Se.current===$.vl.RECALL&&!o,"done-color opacity-50":o}),idKey:e,notification:l,children:[(0,i.jsx)(K.Y,{difficulty:null===(h=Ve.current[e])||void 0===h?void 0:h.difficultyP,resetOn:e,onChange:t=>{u((0,b.kn)(e,t))}}),(0,i.jsx)(z.w,{accuracy:null===(g=Ve.current[e])||void 0===g?void 0:g.accuracyP,resetOn:e,onChange:t=>{void 0!==t&&(u((0,b.s)(e,t)),xe.current=t)}}),(0,i.jsx)("div",{className:"fs-xx-small me-2",children:(0,i.jsx)(H.H,{metadata:Ve.current[e]})})]}),(0,i.jsx)(q.y8,{visible:Re.current,active:r,setShowHint:(0,R.k)(oe,(t=>t?void 0:e))}),(0,i.jsx)(q.A,{active:s,toggle:(0,f.$q)(t.uid,Ve.current).furigana.show,toggleFurigana:(0,R.c)(u,b._n),vocabulary:t}),(0,i.jsx)(q.R_,{term:t,count:le.length,isReinforced:null!==V,hasReinforce:a,addFrequencyTerm:e=>{ce((t=>[...t,e])),(0,R.c)(u,b.S5)(e)},removeFrequencyTerm:e=>{ce((t=>t.filter((t=>t!==e)))),(0,R.c)(u,b.xz)(e)}})]})})]})})}),[Be,De,u,Ae,le.length,Re,Xe,Ye,ue,V,nt,Se,Qe]),{pList:ct,pIdx:ut}=(0,h.useMemo)((()=>{let e=[],t=se;return pe?Ze&&(e=Ze):(Ze&&(t=Ze[se].idx),Ge&&(e=Ge)),{pList:e,pIdx:t}}),[se,pe,Ze,Ge]),dt=(0,h.useMemo)((()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{in:v,timeout:500,children:(0,i.jsx)(r.Z,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,i.jsx)("div",{onClick:(0,R.k)(fe,(e=>!e)),children:pe?"JP":"EN"})})}),(0,i.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:()=>{w.current=!0},onTouchEnd:()=>{w.current=!1},onMouseDown:()=>{w.current=!0},onMouseUp:()=>{w.current=!1},children:(0,i.jsx)(ee,{initial:ut,list:ct,setIndex:e=>{if(pe)re(e);else if(Ge){const t=Ge[e].idx;re(t)}}})})]})),[Ge,ut,ct,pe,v]);if(0===qe)return(0,i.jsx)(B.n,{addlStyle:"main-panel",text:"No pending items"});if(We.length<1||Fe.length<1)return(0,i.jsx)(B.n,{addlStyle:"main-panel"});const ht=null!=V?V:(0,f.vr)(se,We,Fe),gt=(0,f.cc)(ht,We,ye),vt=!0===(null===(e=Ve.current[gt.uid])||void 0===e?void 0:e.rein),pt="Verb"===gt.grp,ft=m.TZ.parse(gt),mt=ft.hasFurigana(),jt=ft.isHintable(3),xt=void 0!==gt.grp&&""!==gt.grp,bt=ae!==ht&&Ae?jt:xt,wt=(se+1)/We.length*100,yt=null===(t=Ve.current[ht])||void 0===t?void 0:t.lastReview,kt=void 0!==yt&&0===(0,O.O5)(yt),Nt=(0,A.AR)(null===(n=Ve.current[ht])||void 0===n?void 0:n.daysBetweenReviews,null===(l=Ve.current[ht])||void 0===l?void 0:l.lastReview),Rt=(0,i.jsx)("div",{className:"progress-line flex-shrink-1",onClick:()=>{if(Se.current===$.vl.ALPHABETIC){const e=4e3;p(!0);const t=()=>{w.current?setTimeout(t,e):p(!1)};setTimeout(t,e)}},children:(0,i.jsx)(a.Z,{variant:null===rt?"determinate":"buffer",value:null===rt?wt:0,valueBuffer:null!=rt?rt:void 0,color:vt?"secondary":"primary"})});let St;return St=v?(0,i.jsxs)(h.Fragment,{children:[ot(ht,gt,pt),dt]}):(0,i.jsxs)(h.Fragment,{children:[ot(ht,gt,pt),lt(ht,gt,pt,mt,bt,vt,kt,Nt),Rt]}),St}function ie(e,t){return function(){if(!e){const e=2e3;t(!0),setTimeout((()=>{t(!1)}),e)}}}},5665:(e,t,n)=>{n.d(t,{L6:()=>r,jP:()=>i,kh:()=>s});const i="add_frequency_word",s="add_frequency_phrase",r="service_worker_logger_msg"},5741:(e,t,n)=>{n.d(t,{_:()=>i});const i="userSettings"},2850:(e,t,n)=>{n.d(t,{TZ:()=>l,Wp:()=>u,_I:()=>h});var i=n(5893),s=n(4184),r=n.n(s),a=(n(7294),n(9815)),o=n(3996);class l{constructor(e,t){this._furigana=e,this._kanji=t,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}get[Symbol.toStringTag](){return"JapaneseText"}get furigana(){return this._furigana}set furigana(e){this._furigana=e}get kanji(){return this._kanji}set kanji(e){this._kanji=e}get parseObj(){return 0!==this._parseObj.furiganas.length||0!==this._parseObj.kanjis.length||0!==this._parseObj.okuriganas.length||this._parseObj.startsWKana||(this.hasFurigana()?this._parseObj=u(this.getPronunciation(),this.getSpellingRAW()):this._parseObj={okuriganas:[this.getSpellingRAW()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj}hasFurigana(){return!!this._kanji}getSpellingRAW(){return this._kanji?this._kanji:this._furigana}getSpelling(){return this._kanji?this._kanji.replaceAll(" ",""):this._furigana.replaceAll(" ","")}getPronunciation(){return this._furigana}getObject(){return{furigana:this._furigana,kanji:this._kanji}}isSlang(){return this.slang}isKeigo(){return this.keigo}isNaAdj(){return"na"===this.adj}isIAdj(){return"i"===this.adj}debug(){return JSON.stringify(this)}append(e=""){return this.hasFurigana()?new l(this.getPronunciation()+e,this.getSpelling()+e):new l(this.getSpelling()+e)}toString(){return this._furigana+(this._kanji?"\n"+this._kanji:"")}isHintable(e=3){let t=!0;if(!this.toString().split("").every((e=>(0,a.AF)(e)||(0,a.f_)(e)||(0,a.xn)(e)||"\n"===e)))return!1;if(this.hasFurigana()){const n=this.getPronunciation(),i=this.getSpellingRAW();if(n.length<e)t=!1;else try{u(n,i)}catch(e){console.log(e),t=!1}}else this.getSpelling().length<e&&(t=!1);return t}getHint(e,t,n=3,i=1){const s={shown:"hint-mora",hidden:"invisible"};let r;if(this.isHintable(n))if(this.hasFurigana()){const e=this.getPronunciation(),n=this.getSpellingRAW(),{kanjis:a,furiganas:o,okuriganas:l,startsWKana:c}=u(e,n);r=t(s,a,o,l,c,i)}else r=e(s,this.getSpelling(),i);else r=null;return r}toHTML(e){var t,n;let s;const a=!1===(null===(t=null==e?void 0:e.furigana)||void 0===t?void 0:t.show),l=null===(n=null==e?void 0:e.furigana)||void 0===n?void 0:n.toggle,c=r()({"incorrect-color":!0,"d-block":!0}),u=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:c,children:this.getPronunciation()}),(0,i.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{const{kanjis:e,furiganas:t,okuriganas:n,startsWKana:c}=this.parseObj,u=(0,o.je)(this.parseObj),d=r()({clickable:Boolean(l)})||void 0,h=l||void 0,g=a?"transparent-font":void 0;s=(0,i.jsx)("span",{className:d,onClick:h,children:u.map(((i,s)=>{const r=(0,o.re)(e[s]),a=(0,o.re)(),l=(0,o.re)(t[s],g),u=(0,o.re)(),d=(0,o.re)(n[s]),h=(0,o.re)();return(0,o.v5)(s,{sk:r,hk:a},{sf:l,hf:u},{so:d,ho:h},c)}))})}catch(t){!1!==(null==e?void 0:e.showError)&&console.error(t),s=u}else s=(0,i.jsx)("span",{children:this.getSpelling()});return s}}function c(e,t){const n=e.japanese.split("\n");let i;if("function"==typeof t)i=t(e);else{const[e,t]=n;i=new l(e,t)}return e.slang&&e.slang&&(i.slang=!0),e.keigo&&e.keigo&&(i.keigo=!0),!e.adj||"na"!==e.adj&&"i"!==e.adj||(i.adj=e.adj),i}function u(e,t){let n,i,s,r;try{({kanjis:n,furiganas:i,okuriganas:s,startsWKana:r}=d(e,t))}catch(o){if(o instanceof Error){const l=o.cause;if("ParseError"===(null==l?void 0:l.code))try{const o=e.split("").reverse().join(""),l=t.split("").reverse().join(""),{kanjis:c,furiganas:u,okuriganas:h}=d(o,l);return n=c.map((e=>e.split("").reverse().join(""))).reverse(),i=u.map((e=>e.split("").reverse().join(""))).reverse(),s=h.map((e=>e.split("").reverse().join(""))).reverse(),r=!(0,a.AF)(t.charAt(0)),{kanjis:n,furiganas:i,okuriganas:s,startsWKana:r}}catch(e){}}throw o}return{kanjis:n,furiganas:i,okuriganas:s,startsWKana:r}}function d(e,t){if(t.split("").every((e=>(0,a.AF)(e)||(0,a.BE)(e))))return{kanjis:[t],furiganas:[e],okuriganas:[],startsWKana:!1};const n=new RegExp(/\s/g),i=n.test(e)||n.test(t),s=!(0,a.AF)(t.charAt(0))&&!(0,a.IE)(t.charAt(0));let r=0,o=[],l=[],c=[],u="",d="",h="",g=!1;t.split("").forEach(((n,s)=>{if((0,a.AF)(n)||function(e,t,n){const i=n.charAt(e);return(Number.isInteger((0,a.F8)(i))||Number.isInteger(Number.parseInt(i)))&&!t.includes(i)&&!(0,a.AF)(i)&&!(0,a.f_)(i)&&!(0,a.xn)(i)&&e<n.length-1}(s,e,t))" "!==e.charAt(r)&&(u+=e.charAt(r))," "!==n&&(d+=n),g=!0,r++,""!==h&&(c.push(h),h=""),t.length-s==1&&(" "!==e.slice(r)&&(u+=e.slice(r)),o.push(u),l.push(d));else{if(g){for(;e.charAt(r)!==n;)if(" "!==e.charAt(r)&&(u+=e.charAt(r)),r++,r>e.length)throw new Error("The two phrases do not match"+(i?" (contains white space)":""),{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:t},kanjis:l,furiganas:o,okuriganas:c}}});o.push(u),u=""}" "!==n&&(h+=n),""!==d&&(l.push(d),d=""),r++,g=!1}})),""!==h&&c.push(h);const[v,p]=function(e,t,n,i){let s,r;return i?(r=n.reduce(((t,n,i)=>t+n+(e[i]||"")),""),s=n.reduce(((e,n,i)=>e+n+(t[i]||"")),"")):(r=e.reduce(((e,t,i)=>e+t+(n[i]||"")),""),s=t.reduce(((e,t,i)=>e+t+(n[i]||"")),"")),[s,r]}(l,o,c,s),f=e.replaceAll(" ",""),m=t.replaceAll(" ","");if(v!==f||p!==m)throw new Error("Failed to parse text to build furigana"+(i?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:t},output:{pronunciation:v,orthography:p}}}});return{kanjis:l,furiganas:o,okuriganas:c,startsWKana:s}}function h(e){let t;if(e.pronounce){if(!e.pronounce.split("").every((e=>(0,a.f_)(e)||(0,a.xn)(e))))throw new Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});t=e.pronounce}else t=l.parse(e).getSpelling().replaceAll(" ","");return t}l.parse=e=>c(e),l.parser=c},9841:(e,t,n)=>{n.d(t,{Rs:()=>l,dP:()=>o,kf:()=>a});var i=n(2850),s=n(9815),r=n(6954);function a(e,t){var n,i,s,r,a,o,c,u,d;const h={dictionary:void 0===e?void 0:l.parse(e)},g=[{name:"-masu",value:null===(n=h.dictionary)||void 0===n?void 0:n.masuForm(),description:"Polite Present"},{name:"-mashou",value:null===(i=h.dictionary)||void 0===i?void 0:i.mashouForm(),description:"Polite Volitional"},{name:"dictionary",value:h.dictionary,description:"Dictionary"},{name:"-nai",value:null===(s=h.dictionary)||void 0===s?void 0:s.naiForm(),description:"Negative"},{name:"-saseru",value:null===(r=h.dictionary)||void 0===r?void 0:r.saseruForm(),description:"Causative"},{name:"-te",value:null===(a=h.dictionary)||void 0===a?void 0:a.teForm(),description:"Te form"},{name:"-ta",value:null===(o=h.dictionary)||void 0===o?void 0:o.taForm(),description:"Past"},{name:"-chatta",value:null===(c=h.dictionary)||void 0===c?void 0:c.chattaForm(),description:"Casual Past"},{name:"-reru",value:null===(u=h.dictionary)||void 0===u?void 0:u.reruForm(),description:"Potential"},{name:"-rareru",value:null===(d=h.dictionary)||void 0===d?void 0:d.rareruForm(),description:"Passive"}];if(void 0===e)return g.map((e=>({name:e.name})));{const e=g.filter((e=>null!==e.value));let n=[];return t&&t.length>0&&(n=t.reduce(((t,n)=>{const i=e.find((e=>e.name===n));return void 0!==i&&(t=[...t,i]),t}),[])),0===n.length&&(n=e),n}}function o(e,t){const n=a(e).find((e=>e.name===t));if(!n)throw new Error("Invalid targetForm");return n.value}class l extends i.TZ{constructor(e,t){super(e,t),this.trans=void 0,this.intr=void 0,this.exv=void 0}get[Symbol.toStringTag](){return"JapaneseVerb"}isExceptionVerb(){return void 0!==this.exv}isIntransitive(){return void 0!==this.trans||!0===this.intr}getTransitivePair(){return this.isIntransitive()&&this.trans?this.trans:void 0}getIntransitivePair(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr}getVerbClass(){const e=super.getPronunciation(),t=super.getSpelling();if(this.exv&&this.isExceptionVerb())return this.exv;const n=e.slice(-1),i=e.slice(-2,-1),{iVowel:r}=(0,s.dv)(i);return t.endsWith("する")||"くる"===e||"だ"===e||"ある"===e?3:1===r&&"る"===n||3===r&&"る"===n?2:1}getStem(){let e;const t=r.Bw;let n;super.hasFurigana()&&(n=super.getSpelling().slice(0,-1));const i=super.getPronunciation().slice(-1),a=super.getPronunciation().slice(0,-1);if(1===this.getVerbClass()||"る"!==i){const r=1,{iConsonant:o}=(0,s.dv)(i);e=n?[a+t[o][r],n+t[o][r]]:[a+t[o][r]]}else{if("る"!==i)throw new Error("Unknown verb type");e=n?[a,n]:[a]}return e}naiForm(){let e,t="ない";const n=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===n){const n=a[a.length-1],l=r.Bw,c=r.Be.indexOf("a"),{iConsonant:u}=(0,s.dv)(n),d=l[0===u?14:u][c]+t,h=super.getSpelling().slice(0,-1);if(o){const t=super.getPronunciation().slice(0,-1);e=new i.TZ(t+d,h+d)}else e=new i.TZ(h+d)}else if(2===n){const[n,s]=this.getStem();e=s?new i.TZ(n+t,s+t):new i.TZ(n+t)}else if("来る"===a||"くる"===a)e=new i.TZ("こない","来ない");else if("する"===a)e=new i.TZ("しない");else if("ある"===a)e=new i.TZ("ない");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const t=super.getSpelling().slice(0,-2);if(o){const n=super.getPronunciation().slice(0,-2);e=new i.TZ(n+"しない",t+"しない")}else e=new i.TZ(t+"しない")}}return e}saseruForm(){let e,t="せる";const n=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===n){const n=a[a.length-1],l=r.Bw,c=r.Be.indexOf("a"),{iConsonant:u}=(0,s.dv)(n),d=l[0===u?14:u][c]+t,h=super.getSpelling().slice(0,-1);if(o){const t=super.getPronunciation().slice(0,-1);e=new i.TZ(t+d,h+d)}else e=new i.TZ(h+d)}else if(2===n){"居る"!==a&&"いる"!==a||(e=new i.TZ("いる","居る"));const[n,s]=this.getStem();e=o?new i.TZ(n+"さ"+t,s+"さ"+t):new i.TZ(n+"さ"+t)}else if("来る"===a||"くる"===a)e=new i.TZ("こさせる","来させる");else if("する"===a)e=new i.TZ("させる");else if("ある"===a)e=new i.TZ("ある");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const t=super.getSpelling().slice(0,-2);if(o){const n=super.getPronunciation().slice(0,-2);e=new i.TZ(n+"させる",t+"させる")}else e=new i.TZ(t+"させる")}}return e}reruForm(){let e;const t=this.getVerbClass();let n=super.getSpelling(),a=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===t){const t=n[n.length-1],o=r.Bw,l=r.Be.indexOf("e"),{iConsonant:c}=(0,s.dv)(t),u=o[c][l]+"る",d=super.getSpelling().slice(0,-1);if(a){const t=super.getPronunciation().slice(0,-1);e=new i.TZ(t+u,d+u)}else e=new i.TZ(d+u)}else if(2===t){const[t,n]=this.getStem();e=a?new i.TZ(t+"られる",n+"られる"):new i.TZ(t+"られる")}else if("来る"===n||"くる"===n)e=new i.TZ("こられる","来られる");else if(n.endsWith("する")){const t=super.getSpelling().slice(0,-2);if(a){const n=super.getPronunciation().slice(0,-2);e=new i.TZ(n+"できる",t+"できる")}else e=new i.TZ(t+"できる")}else{if("ある"!==n&&"いる"!==n)throw new Error("Unknown exception verb type");e=null}return e}rareruForm(){let e;const t=this.getVerbClass();let n=super.getSpelling(),a=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===t){const t=n[n.length-1],o=r.Bw,l=r.Be.indexOf("a"),{iConsonant:c}=(0,s.dv)(t),u=o[0===c?14:c][l]+"れる",d=super.getSpelling().slice(0,-1);if(a){const t=super.getPronunciation().slice(0,-1);e=new i.TZ(t+u,d+u)}else e=new i.TZ(d+u)}else if(2===t){const[t,n]=this.getStem();e=a?new i.TZ(t+"られる",n+"られる"):new i.TZ(t+"られる")}else if("来る"===n||"くる"===n)e=new i.TZ("こられる","来られる");else if(n.endsWith("する")){const t=super.getSpelling().slice(0,-2);if(a){const n=super.getPronunciation().slice(0,-2);e=new i.TZ(n+"される",t+"される")}else e=new i.TZ(t+"される")}else{if("ある"!==n&&"いる"!==n)throw new Error("Unknown exception verb type");e=null}return e}masuForm(){const e="ます";let t;switch(this.toString()){case"くる\n来る":t=new i.TZ("きます","来ます");break;case"ある":t=new i.TZ("あります");break;case"だ":t=new i.TZ("です")}if("する"===super.getSpelling().slice(-2)){const e="します",n=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);t=super.hasFurigana()?new i.TZ(n+e,s+e):new i.TZ(n+e)}if(!t){const[n,s]=this.getStem();t=s?new i.TZ(n+e,s+e):new i.TZ(n+e)}return t}mashouForm(){const e="ましょう";let t;switch(this.toString()){case"くる\n来る":t=new i.TZ("きましょう","来ましょう");break;case"ある":t=new i.TZ("ありましょう");break;case"だ":t=new i.TZ("でしょう")}if("する"===super.getSpelling().slice(-2)){const e="しましょう",n=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);t=super.hasFurigana()?new i.TZ(n+e,s+e):new i.TZ(n+e)}if(!t){const[n,s]=this.getStem();t=s?new i.TZ(n+e,s+e):new i.TZ(n+e)}return t}taForm(){return this.t_Form(c)}chattaForm(){if(3===this.getVerbClass())return null;const e=super.hasFurigana()?super.getSpelling():super.getPronunciation();let t;switch(e[e.length-1]){case"ぶ":case"む":case"ぬ":case"ぐ":t="じゃった";break;default:t="ちゃった"}const n=this.t_Form(c);return new i.TZ(n.getPronunciation().slice(0,-1)+t,n.getSpelling().slice(0,-1)+t)}teForm(){return this.t_Form(u)}t_Form(e){const t=this.getVerbClass();let n,s,r,a=this.furigana;this.hasFurigana()&&this.kanji&&(s=this.furigana,a=this.kanji);const o=a[a.length-1];if(1===t)if("行く"===a||"いく"===a)n=i.TZ.parse({japanese:e.g1.iku});else{switch(o){case"う":case"つ":case"る":r=e.g1.u_tsu_ru;break;case"く":r=e.g1.ku;break;case"ぐ":r=e.g1.gu;break;case"ぬ":case"ぶ":case"む":r=e.g1.mu_nu_bu;break;case"す":r=e.g1.su}n=s?new i.TZ(`${s.slice(0,-1)}${null!=r?r:""}`,`${a.slice(0,-1)}${null!=r?r:""}`):new i.TZ(`${a.slice(0,-1)}${null!=r?r:""}`)}else if(2===t)r=e.g2.ru,n=s?new i.TZ(s.slice(0,-1)+r,a.slice(0,-1)+r):new i.TZ(a.slice(0,-1)+r);else if("来る"===a||"くる"===a)n=i.TZ.parse({japanese:e.g3.kuru});else if("する"===a)n=i.TZ.parse({japanese:e.g3.suru});else if("だ"===a)n=i.TZ.parse({japanese:e.g3.da});else if("ある"===a)n=i.TZ.parse({japanese:e.g3.aru});else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const t=e.g3.suru,r=a.slice(0,-2);if(s){const e=s.slice(0,-2);n=new i.TZ(e+t,r+t)}else n=new i.TZ(r+t)}}return n}}l.parse=e=>{const t=i.TZ.parser(e,(e=>{const[t,n]=e.japanese.split("\n");return new l(t,n)}));return e.intr&&(t.intr=e.intr),e.trans&&(t.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(t.exv=e.exv),t};const c={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},u={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}}},8916:(e,t,n)=>{n.d(t,{IY:()=>r,Kd:()=>o,Si:()=>a,Yg:()=>s,pK:()=>i});const i="slick-swipe-ignore";function s(e,t=!1){let n,i,s,r;return n=e.startX-e.curX,i=e.startY-e.curY,s=Math.atan2(i,n),r=Math.round(180*s/Math.PI),r<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===t?r>=35&&r<=135?"up":"down":"vertical"}function r(e,{verticalSwiping:t,touchThreshold:n}={verticalSwiping:!1,touchThreshold:5}){return e.target.tagName,{verticalSwiping:t,touchThreshold:n,touchObject:{swipeLength:0,startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}function a(e,t){const n=t.verticalSwiping,i=t.touchThreshold,r=t.swiped,a=t.swiping,o=t.touchObject,l=t.swipeEvent;o.curX="touches"in e?e.touches[0].pageX:e.clientX,o.curY="touches"in e?e.touches[0].pageY:e.clientY,o.swipeLength=Math.abs(o.curX-o.startX);const c=Math.abs(o.curY-o.startY);if(!n&&!a&&c>10)return{touchObject:o,touchThreshold:i,scrolling:!0};n&&(o.swipeLength=Math.sqrt(Math.pow(c,2)+Math.pow(o.swipeLength,2)));const u=s(t.touchObject,n);let d={touchObject:o,verticalSwiping:n,touchThreshold:i,swiped:!1,swiping:!1};return!r&&l&&(l(u),d=Object.assign(Object.assign({},d),{swiped:!0})),o.swipeLength>10&&(d=Object.assign(Object.assign({},d),{swiping:!0})),d}function o(e,t){let n=t.touchObject,i=t.touchThreshold,r=t.verticalSwiping,a=t.onSwipe;const o=i;let l;return n.swipeLength&&(l=s(n,r)),n.swipeLength>o&&a&&a(l),Object.assign({swipeDirection:l},t)}},6892:(e,t,n)=>{function i(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function s(e,t,n,{clamped:i=!0}={}){const s=Math.min(1,n),r=i?Math.max(s,0):n;return(1-r)*e+r*t}n.d(t,{Sy:()=>i,t7:()=>s})},5965:(e,t,n)=>{n.d(t,{R$:()=>r});const i=new Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),s=new AudioContext;function r(e,t){const n=s.createBufferSource(),r=fetch(e).then((e=>e.arrayBuffer())).then((e=>s.decodeAudioData(e).then((e=>{n.buffer=e,n.connect(s.destination),n.start()})))),a=new Promise(((e,s)=>{const r=()=>{n.stop(),s(i)};n.addEventListener("ended",(()=>{null==t||t.signal.removeEventListener("abort",r),e()})),(null==t?void 0:t.signal.aborted)&&r(),null==t||t.signal.addEventListener("abort",r)}));return Promise.all([a,r])}},2647:(e,t,n)=>{function i(){return window}n.d(t,{J:()=>i})},1683:(e,t,n)=>{n.d(t,{O:()=>s});var i=n(6892);function s(e,t=.25){const[n,s,r]=[13,110,256],a=[n,(0,i.t7)(s,255,e),(0,i.t7)(r,0,e)],o=[(0,i.t7)(0,255,e),255,0],l=[255,(0,i.t7)(255,0,e),0],c=[(0,i.t7)(a[0],o[0],e),(0,i.t7)(a[1],o[1],e),(0,i.t7)(a[2],o[2],e)],u=[(0,i.t7)(o[0],l[0],e),(0,i.t7)(o[1],l[1],e),(0,i.t7)(o[2],l[2],e)],d=[(0,i.t7)(c[0],u[0],e),(0,i.t7)(c[1],u[1],e),(0,i.t7)(c[2],u[2],e)],[h,g,v]=d.map((e=>Math.floor(e)));return`rgb(${h},${g},${v},${t})`}},5863:(e,t,n)=>{n.d(t,{Gd:()=>a,O5:()=>r,Ps:()=>o,Y3:()=>c,lP:()=>l,xr:()=>s});var i=n(4133);function s(e,t){const n=Math.ceil(t/2);return e.length<t?e:e.slice(0,n)+"..."+e.slice(-(t-n))}function r(e){const[t]=e.split("T"),n=Date.parse(t),i=Math.abs(Date.now()-n);return Math.floor(i/864e5)}function a(e){const t=Date.parse(e),n=Math.abs(Date.now()-t);return Math.ceil(n/6e4)}function o(e,t,n,a){var o,l,c;const u=null===(o=n[t.uid])||void 0===o?void 0:o.lastView;if(u){const o=s(t.english,30),d=(null==a?void 0:a.frequency)?" F[w]":"",h=` ${r(u)}d`,g=null===(l=n[t.uid])||void 0===l?void 0:l.vC,v=` ${null!=g?g:0}v`,p=null===(c=n[t.uid])||void 0===c?void 0:c.tpAcc;e("Space Rep ["+o+"]"+d+h+v+(void 0!==p?" "+(100*p).toFixed(0)+"%":""),i.x6.DEBUG)}}function l(e,t,n,a){var o,l,c,u;const d=null===(o=n[t.uid])||void 0===o?void 0:o.lastView;if(d){const o=s(t.english,30),g=(null==a?void 0:a.frequency)?" F[w]":"",v=` ${r(d)}d`,p=null===(l=n[t.uid])||void 0===l?void 0:l.tpPc,f=void 0!==p?` ${p}v`:"",m=null===(c=n[t.uid])||void 0===c?void 0:c.tpAcc,j=void 0!==m?" "+(100*m).toFixed(0)+"%":"",x=null===(u=n[t.uid])||void 0===u?void 0:u.tpCAvg;e("Timed Play ["+o+"]"+g+v+f+j+(void 0!==x?" "+(h=x,(Math.round(h)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"")+"s"):""),i.x6.DEBUG)}var h}function c(e){let t=[];if(e.length<2)return e;const[n,i]=e,s=n.msg===i.msg,r=n.msg.endsWith("+")&&n.msg.slice(0,-4)===i.msg;if(s||r)if(s)t=[Object.assign(Object.assign({},i),{msg:`${i.msg} 1 +`})];else{const e=Number(n.msg.slice(-3).slice(0,1));t=[Object.assign(Object.assign({},i),{msg:`${i.msg} ${e+1} +`})]}else t=e;return t}},8527:(e,t,n)=>{function i(e,t){return function(){(t||"function"==typeof t)&&e(t)}}function s(e,t,n){return function(i){e(n?t(n):i instanceof Object&&"_reactName"in i||void 0===i?t():t(i))}}n.d(t,{c:()=>s,k:()=>i})},9983:(e,t,n)=>{n.d(t,{$q:()=>C,Dm:()=>v,HG:()=>E,II:()=>w,JS:()=>N,Mm:()=>A,XQ:()=>m,Zc:()=>j,cc:()=>g,gW:()=>T,hF:()=>y,hY:()=>d,iz:()=>R,nD:()=>D,tu:()=>S,u3:()=>x,vr:()=>h,wG:()=>f,wO:()=>O,w_:()=>b,yT:()=>k});var i=n(5893),s=n(4184),r=n.n(s),a=(n(7294),n(5863)),o=n(9841),l=n(9815),c=n(3996),u=n(4133);function d(e,t,n,i,s,r,o,l){const c=e&&Math.random()<1/3;if(t!==u.Lx.FREQUENCY&&c&&n.length>0){const e=0,t=n.filter((e=>{var t;const i=null===(t=s[e])||void 0===t?void 0:t.lastView;return i&&(0,a.Gd)(i)>n.length})),l=t.length,c=Math.floor(Math.random()*(l-e)+e),u=i.find((e=>t[c]===e.uid));if(u&&r!==u.uid)return void o(u.uid)}l()}function h(e,t,n){let i;if(i=n?t[n[e]]:t[e],!i)throw new Error("No term found");return i.uid}function g(e,t,n){let i=t.find((t=>e===t.uid));if(!i&&n&&(i=n.find((t=>e===t.uid))),!i)throw new Error("No term found");return i}function v(e,t,n=[],i,s){let r=t;if(e===u.Lx.FREQUENCY){if(!n)throw new TypeError("Filter type requires frequencyList");n.length>0?r=i.length>0?t.filter((e=>n.includes(e.uid)&&p(i,e))):t.filter((e=>n.includes(e.uid))):"function"==typeof s&&s(u.Lx.GROUP)}else e===u.Lx.TAGS?i.length>0&&(r=t.filter((e=>e.tags.some((e=>i.includes(e)))))):i.length>0&&(r=t.filter((e=>p(i,e))));return r}function p(e,t){return void 0!==t.grp&&(e.includes(t.grp)||void 0!==t.subGrp&&e.includes(`${t.grp}.${t.subGrp}`))||void 0===t.grp&&(e.includes("undefined")||void 0!==t.subGrp&&e.includes(`undefined.${t.subGrp}`))}function f(e,t){const n=Object.keys(e).reduce(((t,n)=>[...t,n,...e[n].map((e=>n+"."+e))]),[]);return t.reduce(((e,t)=>(n.includes(t)||(e=[...e,t]),e)),[])}function m(e,t,n){const i=new Set(Object.keys({lastView:null,vC:null,f:null,rein:null,pron:null,tpPc:null,tpAcc:null,tpCAvg:null,lastReview:null,consecutiveRight:null,difficultyP:null,accuracyP:null,daysBetweenReviews:null}));let s=new Set,r=[];return Object.keys(e).forEach((a=>{const o=e[a];void 0!==o&&Object.keys(o).forEach((e=>{let o;if(!i.has(e)){let i;try{i=g(a,t)}catch(e){i={english:n}}o={key:e,uid:a,english:i.english}}void 0!==o&&(s.add(e),r=[...r,o])}))})),{keys:s,list:r}}function j(e){return~~(Date.now()-e)>1500}function x(e){return~~(Date.now()-e)>300}function b(e,t){return t[e]}function w(e,t){return e+1<t.length?e+1:0}function y(e,t,n,s,a){var l;const c=!e;let u,d=[],h=!1,g=!1;t.constructor.name===o.Rs.name&&"isExceptionVerb"in t&&(h=t.isExceptionVerb()||3===t.getVerbClass(),g=t.isIntransitive(),u=null!==(l=t.getTransitivePair())&&void 0!==l?l:t.getIntransitivePair());const v=t.isNaAdj(),p=t.isSlang(),f=t.isKeigo(),m=null==a?void 0:a.inverse;if(c&&(g||u)){let e;if(void 0!==u&&"function"==typeof s){const t=u;e=()=>{s(t)}}d=[...d,(0,i.jsx)("span",{className:r()({clickable:u,"question-color":u}),onClick:e,children:g?"intr":"trans"},d.length+1)]}if(c&&p&&(d=[...d,(0,i.jsx)("span",{children:"slang"},d.length+1)]),c&&f&&(d=[...d,(0,i.jsx)("span",{children:"keigo"},d.length+1)]),h&&d.length>0&&(d=[(0,i.jsx)("span",{children:"*"},d.length+1),...d]),c&&void 0!==m){let e;"function"==typeof s&&(e=()=>{s(m)}),d=[...d,(0,i.jsx)("span",{className:r()({clickable:m,"question-color":m}),onClick:e,children:"inv"},d.length+1)]}let j;return j=d.length>0?(0,i.jsxs)("span",{children:[n,v&&(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,i.jsxs)("span",{className:"fs-5",children:[(0,i.jsx)("span",{children:" ("}),d.reduce(((e,t,n)=>{if(n>0&&n<d.length){const s=(0,i.jsx)("span",{children:", "},d.length+n);return[...e,s,t]}return[...e,t]}),[]),(0,i.jsx)("span",{children:")"})]})]}):h?(0,i.jsxs)("span",{children:[n,(0,i.jsxs)("span",{children:[" ","*"]})]}):v?(0,i.jsxs)("span",{children:[n,(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):n,j}function k(e,t,n,s,a){var l;let c,u=[],d=!1;t.constructor.name===o.Rs.name&&"isExceptionVerb"in t&&(d=t.isIntransitive(),c=null!==(l=t.getTransitivePair())&&void 0!==l?l:t.getIntransitivePair());const h=t.isSlang(),g=t.isKeigo();if(e&&(d||c)){let e;if(void 0!==c&&"function"==typeof s){const t=c;e=()=>{s(t)}}u=[...u,(0,i.jsx)("span",{className:r()({clickable:c,"question-color":c}),onClick:e,children:d?"intr":"trans"},u.length+1)]}e&&h&&(u=[...u,(0,i.jsx)("span",{children:"slang"},u.length+1)]),e&&g&&(u=[...u,(0,i.jsx)("span",{children:"keigo"},u.length+1)]);const v=null==a?void 0:a.inverse,p=null==a?void 0:a.polite;if(e&&void 0!==v){let e;"function"==typeof s&&(e=()=>{s(v)}),u=[...u,(0,i.jsx)("span",{className:r()({clickable:v,"question-color":v}),onClick:e,children:"inv"},u.length+1)]}let f;return e&&p&&(u=[...u,(0,i.jsx)("span",{children:"polite"},u.length+1)]),f=u.length>0?(0,i.jsxs)("span",{children:[n,(0,i.jsxs)("span",{className:"fs-5",children:[(0,i.jsx)("span",{children:" ("}),u.reduce(((e,t,n)=>{if(n>0&&n<u.length){const s=(0,i.jsx)("span",{children:", "},u.length+n);return[...e,s,t]}return[...e,t]}),[]),(0,i.jsx)("span",{children:")"})]})]}):n,f}function N(e,t,n,i,s){let r,a,o,l;return e?(r=t,a=n,o=i,l=s):(r=n,a=t,o=s,l=i),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:l}}function R(e){return e.grp&&""!==e.grp?(0,i.jsx)("span",{className:"hint",children:e.grp+(e.subGrp?", "+e.subGrp:"")}):void 0}function S(e){const t=e.getPronunciation().slice(1,2);let n;return n=(0,l.BM)(t)?e.getHint(l.Ot,c.AG,3,2):e.getHint(l.Ot,c.AG,3,1),n}function T(e){let{uid:t}=e;if(!t)throw console.warn(JSON.stringify(e)),new Error("Missing uid");return e.form&&(t+="dictionary"!==e.form?e.form.replace("-","."):""),t}function C(e,t,n,i){var s;return{furigana:{show:!(!1===(null===(s=null==t?void 0:t[e])||void 0===s?void 0:s.f)),toggle:!1===n&&"function"==typeof i?i:void 0}}}function O(e,{signal:t},n){return new Promise(((i,s)=>{const r=()=>{clearTimeout(o),clearInterval(a),s(new Error("Aborted"))},a="function"==typeof n?setInterval(n,200,200,e):-1,o=setTimeout((()=>{null==t||t.removeEventListener("abort",r),clearInterval(a),i()}),e);(null==t?void 0:t.aborted)&&r(),null==t||t.addEventListener("abort",r)}))}function D(e,t,n,{signal:i}){return new Promise(((s,r)=>{const a=()=>{clearTimeout(o);const e=new Error("User interrupted loop.",{cause:{code:"UserAborted"}});r(e)},o=setTimeout((()=>{e>0?t().then((()=>D(e-1,t,n,{signal:i}).then((()=>{null==i||i.removeEventListener("abort",a),s()})))).catch((e=>{r(e)})):(null==i||i.removeEventListener("abort",a),s())}),n);(null==i?void 0:i.aborted)&&a(),null==i||i.addEventListener("abort",a)}))}function A(e,t,n){var i,s;const r=null===(i=e.acceleration)||void 0===i?void 0:i.y,a=null===(s=e.acceleration)||void 0===s?void 0:s.z;if(null==r||null==a)throw new Error("Device does not support DeviceMotionEvent",{cause:{code:"DeviceMotionEvent"}});{const e=Math.sqrt(r*r+a*a);e>t&&"function"==typeof n&&n(e)}}function E(e,t){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(t):e()}},9815:(e,t,n)=>{n.d(t,{AF:()=>r,BE:()=>u,BM:()=>l,C5:()=>h,F8:()=>g,IE:()=>c,Ot:()=>p,Vj:()=>d,dv:()=>v,f_:()=>a,xn:()=>o});var i=n(5893),s=(n(7294),n(6954));function r(e){return new RegExp("[一-龯㐀-䶿々]").test(e)}function a(e){return new RegExp("[ぁ-ゟ]").test(e)}function o(e){return new RegExp("[゠-ヿ]").test(e)}function l(e){return new RegExp("^[ゃャゅュょョ]$").test(e)}function c(e){return new RegExp("[０-９]").test(e)}function u(e){return new RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(e)}function d(e){let t=e;if(a(e)){const n=e.codePointAt(0);if(n){const e=n+96;t=String.fromCharCode(e)}}else if(o(e)){const n=e.codePointAt(0);if(n){const e=n-96;t=String.fromCharCode(e)}}return t}function h(e){let t;switch(e){case"は":t="wa";break;case"には":t="niwa";break;case"を":t="o";break;case"って":t="tte";break;default:t=e.split("").map((e=>function(e){let t=e;if(a(e)){const{iConsonant:n,iVowel:i}=v(e);t=s.sH[n]+s.Be[i]}else if(o(e)){const n=e.codePointAt(0);if(n){const e=n-96,i=String.fromCharCode(e),{iConsonant:r,iVowel:a}=v(i);t=s.sH[r]+s.Be[a]}}return t}(e))).join("")}return t}function g(e){let t=Number.NaN;if(c(e)){const n=e.codePointAt(0);if(n){const e=n-65248;t=Number.parseInt(String.fromCharCode(e))}}return t}function v(e){const t=s.Bw;let n=-1,i=-1;return" "===e||""===e?{iConsonant:n,iVowel:i}:"ん"===e?{iConsonant:15,iVowel:i}:(t.some(((t,s)=>t.some(((t,r)=>(t===e&&(n=s,i=r),t===e))))),{iConsonant:n,iVowel:i})}function p(e,t,n){return(0,i.jsxs)("span",{className:"hint",children:[(0,i.jsx)("span",{className:e.shown,children:t.slice(0,n)}),(0,i.jsx)("span",{className:e.hidden,children:t.slice(n)})]})}},3996:(e,t,n)=>{n.d(t,{AG:()=>a,je:()=>o,re:()=>c,tn:()=>l,v5:()=>u});var i=n(5893),s=n(4184),r=n.n(s);function a(e,t,n,s,r,a=1){const o=function({kanjis:e,furiganas:t,okuriganas:n,startsWKana:i},s){let r,a,o=s;return t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]),t.reduce(((s,l,c)=>{const u=Math.trunc(t[c].length/e[c].length);if(o>0)if(i)if(r=n[c],a=t[c],r.length<=o){let t;o-=r.length;let n=o;a.length<=o?(o-=a.length,t=e[c].length,n=a.length):(t=Math.ceil(o/u),o=0),s=[...s,{k:t,f:n,o:r.length}]}else s=[...s,{k:0,f:0,o}],o=0;else if(r=t[c],a=n[c],r.length<=o){let t;o-=r.length,a.length<o?(o-=a.length,t=a.length):(t=o,o=0),s=[...s,{k:e[c].length,f:r.length,o:t}]}else{const e=Math.ceil(o/u);s=[...s,{k:e,f:o,o:0}],o=0}else s=[...s,{k:0,f:0,o:0}];return s}),[])}({kanjis:t,furiganas:n,okuriganas:s,startsWKana:r},a);n.length>s.length?s=[...s,""]:n.length<s.length&&(t=[...t,""],n=[...n,""]);const l=(e,t,n=1)=>t?[(0,i.jsx)("span",{className:e,children:t},n)]:[],c=o.map(((i,a)=>u(a,{sk:i.k>0?l(e.shown,t[a].slice(0,i.k)):[],hk:i.k<t[a].length?l(e.hidden,t[a].slice(i.k)):[]},{sf:i.f>0?l(e.shown,n[a].slice(0,i.f)):[],hf:i.f<n[a].length?l(e.hidden,n[a].slice(i.f)):[]},{so:i.o>0?l(e.shown,s[a].slice(0,i.o)):[],ho:i.o<s[a].length?l(e.hidden,s[a].slice(i.o)):[]},r)));return(0,i.jsx)("span",{className:"hint",children:c})}function o(e){let{kanjis:t,furiganas:n,okuriganas:i}=e;return n.length>i.length?i=[...i,""]:n.length<i.length&&(t=[...t,""],n=[...n,""]),n.map(((e,s)=>({k:t[s].length,f:n[s].length,o:i[s].length})))}function l({kanjis:e,furiganas:t,okuriganas:n,startsWKana:s},r,a,l=a+1){const{shown:c,hidden:d}=r,h=function({kanjis:e,furiganas:t,okuriganas:n,startsWKana:i},s,r=s+1){let a=r-s;t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]);const l=o({kanjis:e,furiganas:t,okuriganas:n,startsWKana:i});let c=[0];return l.map(((e,t)=>{let{k:n,o}=e,l=0,u=0;if(c=[...c,c[t]+n+o],i){if(c[t]+o>s)if(c[t]+o<r){const e=s-(c[t]+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0;if(c[t]+o+n>s)if(c[t]+o+n<r){const e=s-(c[t]+o+n);l=Math.min(n,Math.abs(e)),a-=l}else l=a,a=0}else{if(c[t]+n>s)if(c[t]+n<r){const e=s-(c[t]+n);l=Math.min(n,Math.abs(e)),a-=l}else l=a,a=0;if(c[t]+n+o>s)if(c[t]+n+o<r){const e=s-(c[t]+n+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0}return{k:l,f:0,o:u}}))}({kanjis:e,furiganas:t,okuriganas:n,startsWKana:s},a,l);t.length>n.length?n=[...n,""]:t.length<n.length&&(e=[...e,""],t=[...t,""]);const g=(e,t,n=1)=>t?[(0,i.jsx)("span",{className:e,children:t},n)]:[],v=(e,t,n,i)=>{let s=[],r=[];const o=e.length;if(o>0)if(0===t)r=g(c,e);else if(t===o)s=g(d,e),n-=o;else if(t<o)if(n<t)s=g(d,e.slice(0,t)),r=g(c,e.slice(t-o)),n=0;else if(n===t){const t=i,s=a-t,l=s+n;r=[...g(c,e.slice(0,s),t+1),...g(d,e.slice(s,l),t+2),...g(c,e.slice(l,o),t+3)],n=0}else n>t&&(r=g(c,e.slice(0,t)),s=g(d,e.slice(t-o)),n-=t);return{s:r,h:s,spliceLen:n}};let p=l-a,f=[0];const m=h.map(((i,r)=>{const a=e[r].length,o=n[r].length;let l,d;f=[...f,f[r]+o+a],({s:l,h:d,spliceLen:p}=v(e[r],i.k,p,f[r]+(s?o:0)));const h=g(c,t[r]);let m,j;return({s:m,h:j,spliceLen:p}=v(n[r],i.o,p,f[r]+(s?0:a))),u(r,{sk:l,hk:d},{sf:h,hf:[]},{so:m,ho:j},s)}));return(0,i.jsx)("span",{className:"decorated",children:m})}function c(e,t,n=1){return e?[(0,i.jsx)("span",{className:t,children:e},n)]:[]}function u(e,{sk:t,hk:n},{sf:s,hf:a},{so:o,ho:l},c){const u=t.length>0||n.length>0,d=s.length>0||a.length>0,h=o.length>0||l.length>0,g=u&&d&&(0,i.jsxs)("ruby",{children:[t,n,(0,i.jsxs)("rt",{children:[s,a]})]})||void 0,v=h&&(0,i.jsxs)("span",{children:[o,l]})||void 0,p=c?v:g,f=c?g:v,m=r()({"lh-furigana":u&&d})||void 0;return(p||f)&&(0,i.jsxs)("span",{className:m,children:[p,f]},e)||void 0}n(7294)},3859:(e,t,n)=>{n.d(t,{JW:()=>o,xr:()=>l});var i=n(5741),s=n(2647);function r(e,t){var n;if(1===t.length)return e[t[0]];const[i,...s]=t;return r(null!==(n=e[i])&&void 0!==n?n:{},s)}function a(e,t,n){var i;if(1===t.length){const i=t[0];return Object.assign(Object.assign({},e),{[i]:n})}const[s,...r]=t,o=null!==(i=e[s])&&void 0!==i?i:{};return Object.assign(Object.assign({},e),{[s]:a(o,r,n)})}function o(e,t,n,o,c){var u;let d=null!==(u=l(i._))&&void 0!==u?u:{};const h=[...n.split("/").filter((e=>""!==e)),o];let g;void 0===c&&(g=!r(t,h));const v=a(Object.assign({},d),h,null!=g?g:c),p=r(v,h);return function(e,t){const{localStorage:n}=(0,s.J)();n.setItem(e,JSON.stringify(t))}(i._,Object.assign(Object.assign({},v),{lastModified:e})),p}function l(e){let t=null;const{localStorage:n}=(0,s.J)(),i=n.getItem(e);let r=null;return null!==i&&(r=JSON.parse(i)),"object"!=typeof r||Array.isArray(r)||null===r||(t=r),t}},4953:(e,t,n)=>{n.d(t,{$h:()=>g,AR:()=>b,Gx:()=>j,Kw:()=>v,_9:()=>u,ct:()=>p,fC:()=>f,iR:()=>m,z1:()=>x});var i=n(4691),s=n.n(i),r=n(5472),a=n.n(r),o=n(5863),l=n(8056),c=n(4133);const u=.6,d=1,h=2,g=5;function v({difficulty:e,accuracy:t,daysSinceReview:n,daysBetweenReviews:i}){const r=p({accuracy:t,daysSinceReview:n,daysBetweenReviews:i}),a=e+s()(r/17*(8-9*t),0,1),o=3-1.7*a;let l;if(t>=u)l=("number"==typeof i&&i>1?i:1)*(1+r*(Math.random()<.5?.95:1.05)*(o-1));else{const e="number"==typeof i&&i>0?i:1;l=Math.min(1,e/(1+3*a))}return l}function p({accuracy:e,daysSinceReview:t,daysBetweenReviews:n}){let i;return i="number"==typeof t&&t>0&&"number"==typeof n&&n>0&&e>=u?Math.min(h,t/n):d,i}function f(e,t,n){let i=[],s=[],r=[],l=[];e.forEach(((e,n)=>{const a=e.uid,c=t[a],d=!(!(null==c?void 0:c.lastView)||0!==(0,o.O5)(c.lastView)),h=!(!(null==c?void 0:c.lastReview)||0!==(0,o.O5)(c.lastReview));if(!(null==c?void 0:c.lastReview)||h||d||"number"!=typeof c.accuracyP)c&&h?l=[...l,{lastView:c.lastView,views:c.vC,uid:a,index:Number(n)}]:i=[...i,Number(n)];else if(c.accuracyP<100*u)r=[...r,{lastView:c.lastView,views:c.vC,uid:a,index:Number(n)}];else{const e=(0,o.O5)(c.lastReview),t=p({accuracy:c.accuracyP/100,daysSinceReview:e,daysBetweenReviews:c.daysBetweenReviews});s=[...s,{percentOverdueCalc:t,lastView:c.lastView,uid:a,index:Number(n)}]}}));const c=a()(r,["lastView","uid"],["asc","asc"]),d=a()(s,["percentOverdueCalc","lastView","uid"],["desc","asc","asc"]),h=c.map((e=>e.index)),{due:g,notDue:v}=d.reduce(((e,t)=>(t.percentOverdueCalc<1?e.notDue=[...e.notDue,t.index]:e.due=[...e.due,t.index],e)),{due:[],notDue:[]}),f=l.map((e=>e.index)),{failed:m,overdue:j,overLimit:x}=function(e,t,n){if(!n)return{failed:e,overdue:t,overLimit:[]};const i=Math.max(0,n-e.length);return{failed:e.slice(0,Math.max(i,n)),overdue:t.slice(0,Math.min(t.length,i)),overLimit:[...e.slice(Math.max(i,n)),...t.slice(Math.min(t.length,i))]}}(h,g,n);return{failed:m,overdue:j,notDue:v,overLimit:x,notPlayed:i,todayDone:f}}function m(e,t){const n=t[e];if(!n)return;const i=Object.assign(Object.assign({},n),{daysBetweenReviews:void 0,consecutiveRight:void 0,lastReview:void 0});return Object.assign(Object.assign({},t),{[e]:i})}function j(e,t){var n,i,s,r,a;const l=null!==(n=t[e])&&void 0!==n?n:{lastView:(new Date).toJSON(),vC:1},{difficultyP:c,accuracyP:d,daysBetweenReviews:h}=l;if(void 0===c||void 0===d)return{newValue:t,oldValue:t};const g=c/100,p=d/100,f=null!==(r=null!==(i=l.lastReview)&&void 0!==i?i:null===(s=t[e])||void 0===s?void 0:s.lastView)&&void 0!==r?r:(new Date).toJSON(),m=v({difficulty:g,accuracy:p,daysSinceReview:(0,o.O5)(f),daysBetweenReviews:h}),j=d>=u?(null!==(a=l.consecutiveRight)&&void 0!==a?a:0)+1:0,x=(new Date).toJSON(),b=Object.assign(Object.assign({},l),{daysBetweenReviews:m,consecutiveRight:j,lastView:x,lastReview:x});return{newValue:Object.assign(Object.assign({},t),{[e]:b}),oldValue:Object.assign({},t)}}function x(e,t,n,i,s){var r,a,u,d,h;const g=null===(r=i[t])||void 0===r?void 0:r.lastReview,v=g?`${(0,o.O5)(g)}d`:"",p=null===(a=n[t].daysBetweenReviews)||void 0===a?void 0:a.toFixed(0),f=(0,o.xr)(s,30),m=null!==(d=null===(u=i[t].daysBetweenReviews)||void 0===u?void 0:u.toFixed(0))&&void 0!==d?d:"",j=null!==(h=i[t].consecutiveRight)&&void 0!==h?h:"0",x=void 0===p?`Space Rep [${f}] removed`:`Space Rep [${f}] updated ${v} f:${m}d #${j} -> f:${p}d`;e((0,l.kg)(x,c.x6.WARN))}function b(e,t){if(void 0===e||void 0===t)return;const n=((null!=e?e:0)-(void 0!==t?(0,o.O5)(t):0)).toFixed(0);return void 0!==t?n.toString():void 0}},1059:(e,t,n)=>{function i(e){if(void 0===e)return{tags:[]};const t=e.split(/[\n;]+/),n="[ぁ-ゟ]{1,4}",i=new RegExp("p:"+n+"(,"+n+")*"),s=new RegExp("inv:[a-z0-9]{32}"),r=new RegExp("intr:[a-z0-9]{32}"),a=new RegExp("(i|na)-adj"),o=new RegExp(/\S/);let l,c,u,d,h,g,v,p=[],f=[];return t.forEach((e=>{const t=e.trim();switch(t){case"slang":c=!0;break;case"keigo":u=!0;break;case"EV1":d=1;break;case"intr":h=!0;break;case r.test(t)&&t:g=t.split(":")[1];break;case a.test(t)&&t:v=t.split("-")[0];break;case i.test(t)&&t:f=t.split(":")[1].split(",");break;case s.test(t)&&t:l=t.split(":")[1];break;default:t&&o.test(t)&&(p=0===p.length?[t]:[...p,t])}})),{tags:p,slang:c,keigo:u,exv:d,intr:h,trans:g,adj:v,inverse:l,particles:f}}function s(e){let t={},n=Object.keys(e).map((n=>{const{tags:s,slang:r,keigo:a,exv:o,intr:l,trans:c,adj:u}=i(e[n].tag);if(c){const e=c;t[e]={intr:n,trans:e}}return Object.assign(Object.assign({},e[n]),{uid:n,tag:void 0,tags:s,slang:r,keigo:a,adj:u,exv:o,intr:l,trans:c})}));return n=n.map((e=>t[e.uid]?Object.assign(Object.assign({},e),{intr:t[e.uid].intr}):e)),n}function r(e){const t="grp",n="subGrp";return Object.values(e).reduce(((e,i)=>i[t]?e[i[t]]?i[n]&&!e[i[t]].includes(i[n])?Object.assign(Object.assign({},e),{[i[t]]:[...e[i[t]],i[n]]}):e:i[n]?Object.assign(Object.assign({},e),{[i[t]]:[i[n]]}):Object.assign(Object.assign({},e),{[i[t]]:[]}):Object.assign({},e)),{})}function a(e){const t="tags";let n=[];return e.forEach((e=>{var i;e[t]&&(null===(i=e[t])||void 0===i?void 0:i.length)>0&&(n=[...n,...e[t]])})),Array.from(new Set(n))}n.d(t,{SA:()=>i,by:()=>r,fh:()=>a,yc:()=>s})},3162:(e,t,n)=>{n.d(t,{$t:()=>c,EL:()=>v,J0:()=>u,WU:()=>d,YZ:()=>l,fx:()=>h,rU:()=>p,tq:()=>g});var i=n(5472),s=n.n(i),r=n(6892),a=n(5863),o=n(2850);const l=20,c=70;function u(e,t){let n=[],i=[],r=[];return e.forEach(((e,s)=>{const a=e.uid,o=t[a];if(void 0!==(null==o?void 0:o.difficultyP)){const e=Number(o.difficultyP);e<l?i=[...i,{difficulty:e,uid:a,index:Number(s)}]:r=[...r,Number(s)]}else n=[...n,Number(s)]})),[...s()(i,["difficulty","uid"],["asc","asc"]).map((e=>e.index)),...n,...r]}function d(e,t,n){return t.filter((t=>{var i;const s=e,r=null===(i=n[t.uid])||void 0===i?void 0:i.difficultyP;let a=!1,o=!1;return void 0===r?a=s<0?-1*s>c:s<c:o=s<0?r<-1*s:r>s,a||o}))}function h(e){let t={},n=[];e.forEach(((e,i)=>{t[e.uid]=i,n=[...n,{uid:e.uid,japanese:e.japanese,english:e.english}]}));let i=[],r=[],a=[];return n=s()(n,["japanese"],["asc"]),n.forEach(((e,n)=>{i=[...i,t[e.uid]],a=[...a,{uid:e.uid,label:o.TZ.parse(e).getPronunciation(),idx:-1}],r=[...r,{uid:e.uid,label:e.english.toLowerCase(),idx:n}]})),r=s()(r,["label"],["asc"]),r.forEach(((e,t)=>{a[e.idx]=Object.assign(Object.assign({},a[e.idx]),{idx:t})})),{order:i,jOrder:a,eOrder:r}}function g(e){const t=e.map(((e,t)=>t));return(0,r.Sy)(t),t}function v(e,t){let n=[],i=[];e.forEach(((e,s)=>{const r=e.uid,a=t[r];void 0!==(null==a?void 0:a.lastView)?i=[...i,{lastView:a.lastView,uid:r,index:Number(s)}]:n=[...n,Number(s)]}));const r=s()(i,["lastView","uid"],["asc","asc"]).map((e=>e.index));return[...n,...r]}function p(e,t){let n=[],i=[],r=[],a=[],o=[];e.forEach(((e,s)=>{const l=e.uid,c=t[l];if(void 0!==c){if(void 0===c.tpAcc)a=[...a,{date:c.lastView,views:c.vC,uid:l,index:Number(s)}];else if(!0===c.pron){const e=f(c.lastView,c.tpAcc,c.vC),t=m(c.tpPc,c.tpCAvg);i=[...i,{staleness:e,correctness:t,uid:l,index:Number(s)}]}else if(c.tpAcc>=.65){const e=f(c.lastView,c.tpAcc,c.vC),t=m(c.tpPc,c.tpCAvg);o=[...o,{staleness:e,correctness:t,uid:l,index:Number(s)}]}else if(c.tpAcc<.65){const e=f(c.lastView,c.tpAcc,c.vC),t=m(c.tpPc,c.tpCAvg);n=[...n,{staleness:e,correctness:t,uid:l,index:Number(s)}]}}else r=[...r,Number(s)]}));const l=s()(n,["staleness","correctness","uid"],["desc","asc","asc"]),c=s()(i,["staleness","correctness","uid"],["desc","asc","asc"]),u=s()(a,["date","views","uid"],["asc","asc","asc"]),d=s()(o,["staleness","correctness","uid"],["desc","asc","asc"]),h=l.map((e=>e.index)),g=c.map((e=>e.index)),v=u.map((e=>e.index)),p=d.map((e=>e.index));return[...h,...g,...r,...v,...p]}function f(e,t,n=1){let i=Number.MAX_SAFE_INTEGER;return void 0!==e&&t>0&&n>0&&(i=(0,a.O5)(e)*(1/t)*(1/n)),i}function m(e=0,t=0){let n=Number.MIN_SAFE_INTEGER;return e>0&&t>0&&(n=e*(1/t)),n}},7962:(e,t,n)=>{function i(e,t){const[n,i]=e.includes("?")?e.split("?"):[e,""],s=new URLSearchParams(i);for(const[e,n]of Object.entries(t))void 0!==n&&s.append(e,n);return[n,s.toString()].join("?")}n.d(t,{b1:()=>i})},8084:(e,t,n)=>{n.d(t,{P:()=>s});var i=n(743);function s(){const e=(0,i.v9)((({global:e})=>e.debug)),[t,n,s,r,a]=(0,i.v9)((({kana:e})=>{const{hiragana:t,katakana:n,vowels:i,consonants:s,sounds:r}=e;return[t,n,i,s,r]}),(()=>!0)),[o,l,c,u]=(0,i.v9)((({kana:e})=>{const{wideMode:t,easyMode:n,charSet:i,choiceN:s}=e.setting;return[t,n,i,s]}),i.wU);return{debug:e,hiragana:t,katakana:n,vowels:s,consonants:r,sounds:a,choiceN:o?31:u,wideMode:o,easyMode:l,charSet:c}}},6278:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(7294),s=n(743);function r(){const e=(0,s.v9)((({global:e})=>e.swipeThreshold)),{value:t}=(0,s.v9)((({kanji:e})=>e),((e,t)=>e.version===t.version)),n=(0,s.v9)((({kanji:e})=>e.tagObj),s.wU),{repetition:r}=(0,s.v9)((({kanji:e})=>e.setting),((e,t)=>e.repTID===t.repTID)),[a,o,l,c,u,d,h,g,v]=(0,s.v9)((({kanji:e})=>{const{reinforce:t,filter:n,ordered:i,difficultyThreshold:s,choiceN:r,fadeInAnswers:a,spaRepMaxReviewItem:o,includeNew:l,includeReviewed:c}=e.setting;return[t,n,i,s,r,a,o,l,c]}),s.wU),p=(0,s.v9)((({kanji:e})=>{const{activeTags:t}=e.setting;return t}),s.wU),f=(0,i.useRef)(a);f.current=a;const m=(0,i.useRef)(o);m.current=o;const j=(0,i.useRef)(l);return j.current=l,{repetition:r,swipeThreshold:e,difficultyThreshold:c,kanjiList:t,kanjiTagObj:n,activeTags:p,choiceN:u,fadeInAnswers:d,spaRepMaxReviewItem:h,includeNew:g,includeReviewed:v,reinforce:f,filterType:m,orderType:j}}},158:(e,t,n)=>{n.d(t,{Q:()=>r});var i=n(7294),s=n(743);function r(){const[e,t,n]=(0,s.v9)((({global:e})=>[e.debug,e.motionThreshold,e.swipeThreshold]),s.wU),{value:r,grpObj:a}=(0,s.v9)((({phrases:e})=>e),((e,t)=>e.version===t.version)),{repetition:o}=(0,s.v9)((({phrases:e})=>e.setting),((e,t)=>e.repTID===t.repTID)),[l,c,u]=(0,s.v9)((({phrases:e})=>{const{englishSideUp:t,includeNew:n,includeReviewed:i}=e.setting;return[t,n,i]}),s.wU),[d,h,g,v,p,f]=(0,s.v9)((({phrases:e})=>{const{reinforce:t,filter:n,ordered:i,romaji:s,difficultyThreshold:r,spaRepMaxReviewItem:a}=e.setting;return[t,n,i,s,r,a]}),s.wU),m=(0,s.v9)((({phrases:e})=>{const{activeGroup:t}=e.setting;return t}),s.wU),j=(0,i.useRef)(d);j.current=d;const x=(0,i.useRef)(h);x.current=h;const b=(0,i.useRef)(g);b.current=g;const w=(0,i.useRef)(v);return w.current=v,{englishSideUp:l,repetition:o,difficultyThreshold:p,debugLevel:e,motionThreshold:t,swipeThreshold:n,phraseList:r,phraseGroups:a,activeGroup:m,spaRepMaxReviewItem:f,includeNew:c,includeReviewed:u,reinforce:j,romajiActive:w,filterType:x,sortMethod:b}}},5507:(e,t,n)=>{n.d(t,{E:()=>s});var i=n(743);function s(){const[e,t,n,s]=(0,i.v9)((({global:e})=>{const{darkMode:t,swipeThreshold:n,motionThreshold:i,debug:s}=e;return[t,n,i,s]}),i.wU),r=(0,i.v9)((({global:e})=>{const{memory:t}=e;return t}),((e,t)=>e.usage===t.usage)),[a,o,l]=(0,i.v9)((({opposite:e})=>{const{qRomaji:t,aRomaji:n,fadeInAnswers:i}=e;return[t,n,i]}),i.wU),[c,u]=(0,i.v9)((({particle:e})=>{const{aRomaji:t,fadeInAnswers:n}=e.setting;return[t,n]}),i.wU);return{darkMode:e,swipeThreshold:t,motionThreshold:n,memory:r,debug:s,oppositesQRomaji:a,oppositesARomaji:o,oppositeFadeInAnswers:l,particlesARomaji:c,particleFadeInAnswer:u}}},4933:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(7294),s=n(743);function r(){const[e,t,n]=(0,s.v9)((({global:e})=>[e.debug,e.swipeThreshold,e.motionThreshold]),s.wU),{value:r,grpObj:a}=(0,s.v9)((({vocabulary:e})=>e),((e,t)=>e.version===t.version)),{repetition:o}=(0,s.v9)((({vocabulary:e})=>e.setting),((e,t)=>e.repTID===t.repTID)),[l,c,u,d,h,g]=(0,s.v9)((({vocabulary:e})=>{const{englishSideUp:t,autoVerbView:n,spaRepMaxReviewItem:i,includeNew:s,includeReviewed:r}=e.setting,{verbForm:a}=e;return[t,n,a,i,s,r]}),s.wU),[v,p,f,m,j,x,b,w]=(0,s.v9)((({vocabulary:e})=>{const{difficultyThreshold:t,reinforce:n,filter:i,hintEnabled:s,romaji:r,bareKanji:a,verbColSplit:o,ordered:l}=e.setting;return[t,n,i,s,r,a,o,l]}),s.wU),y=(0,s.v9)((({vocabulary:e})=>{const{verbFormsOrder:t}=e.setting;return t}),s.wU),k=(0,s.v9)((({vocabulary:e})=>{const{activeGroup:t}=e.setting;return t}),s.wU),N=(0,i.useRef)(p);N.current=p;const R=(0,i.useRef)(f);R.current=f;const S=(0,i.useRef)(m);S.current=m;const T=(0,i.useRef)(w);return T.current=w,{englishSideUp:l,autoVerbView:c,verbForm:u,repetition:o,difficultyThreshold:v,debugLevel:e,swipeThreshold:t,motionThreshold:n,vocabList:r,vocabGroups:a,romajiEnabled:j,bareKanji:x,verbFormsOrder:y,verbColSplit:b,activeGroup:k,spaRepMaxReviewItem:d,includeNew:h,includeReviewed:g,reinforce:N,hintEnabled:S,filterType:R,sortMethod:T}}},6989:(e,t,n)=>{n.d(t,{d:()=>s,o:()=>r});var i=n(7294);function s(e){const[t,n]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{let i;return e>0&&(i=setTimeout((()=>{t&&n(!1)}),e)),()=>{e>0&&clearTimeout(i)}})),e>0?[!t,()=>n(!0)]:[void 0,()=>{}]}function r(){const[e,t]=(0,i.useState)(!0);return()=>t(!e)}},9226:(e,t,n)=>{n.d(t,{q:()=>s});var i=n(7294);function s(e,t,n){(0,i.useEffect)((()=>{const i=function(e,t,n){return function(i){const s=[["ArrowRight",()=>e("left")],["ArrowLeft",()=>e("right")],["ArrowUp",()=>e("up")],["ArrowDown",()=>e("down")],[" ",t]];for(const[t,r]of s)if(t===i.key){let i=r;" "!==t&&"function"==typeof n&&(i=n({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[t]||"",(t=>{t?e(t):r()}))),i();break}}}(e,t,n);return document.addEventListener("keydown",i,!0),()=>{document.removeEventListener("keydown",i,!0)}}),[e,t,n])}},6693:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(7294),s=n(743),r=n(8916);function a(e,t){const n=(0,s.v9)((({global:e})=>e.swipeThreshold)),a=(0,i.useRef)({}),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const i=function(e,t){return function(n){t.current=(0,r.IY)(n,{verticalSwiping:!0,touchThreshold:e})}}(n,a),s=function(e){return function(t){e.current&&(e.current=(0,r.Si)(t,e.current))}}(a),l=function(e,t,n,i){return function(s){var a;let o=n;const l=s.target,c=Array.from(document.getElementsByClassName("loop-stop-btn")).some((e=>e.contains(l))),u=Array.from(document.getElementsByClassName("loop-no-interrupt")).some((e=>e.contains(l))),d=void 0===(null===(a=e.current.touchObject)||void 0===a?void 0:a.swipeLength)||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!(c||u&&d)){const a=(0,r.Yg)(e.current.touchObject,!0);"function"==typeof i&&(o=i(a,n)),t(s,Object.assign(Object.assign({},e.current),{onSwipe:o}))}}}(a,r.Kd,e,t);o.current&&n>0&&(o.current.addEventListener("touchstart",i),o.current.addEventListener("touchmove",s),o.current.addEventListener("touchend",l));const c=o.current;return()=>{n>0&&(null==c||c.removeEventListener("touchstart",i),null==c||c.removeEventListener("touchmove",s),null==c||c.removeEventListener("touchend",l))}}),[a,n,e,t]),{HTMLDivElementSwipeRef:o}}},4699:(e,t,n)=>{n.d(t,{i:()=>r});var i=n(7294),s=n(2647);function r(){const[e,t]=(0,i.useState)({width:void 0,height:void 0});return(0,i.useEffect)((()=>{const e=(0,s.J)();function n(){t({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",n),n(),()=>e.removeEventListener("resize",n)}),[]),e}},5707:(e,t,n)=>{var i=n(5893),s=n(7294),r=n(745),a=n(743),o=n(9829),l=n(8056),c=n(1659),u=n(8673),d=n(9385),h=n(7988),g=n(7652),v=n(5665);const p=(0,o.hg)("serviceWorker/serviceWorkerRegistered",(()=>{return e=void 0,t=void 0,i=function*(){return"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then((e=>{var t;return null===(t=e.active)||void 0===t?void 0:t.state})):Promise.reject("No Service Worker")},new((n=void 0)||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i})),f=(0,o.oM)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded(e,t){const{newestWords:n}=t.payload;for(let e in n){const{freq:t,dic:i}=n[e];let s=v.jP,r="GET_VOCABULARY";"phrases"===e&&(s=v.kh,r="GET_PHRASES"),console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(`${t.length} new ${e}`)}}},extraReducers:e=>{e.addCase(p.fulfilled,(e=>{e.registered=!0}))}}),{serviceWorkerNewTermsAdded:m}=f.actions,j=f.reducer;var x=n(7186);const b=(0,o.hg)("version/getVersions",(()=>{return e=void 0,t=void 0,i=function*(){return fetch(x.qe.databaseURL+"/lambda/cache.json").then((e=>e.json()))},new((n=void 0)||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i})),w=(0,o.oM)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:e=>{e.addCase(b.fulfilled,((e,t)=>t.payload))}}).reducer;var y=n(7891);const k=(0,o.xC)({reducer:{global:l.ZP,sw:j,version:w,kana:c.ZP,vocabulary:y.ZP,opposite:d.ZP,phrases:g.ZP,kanji:u.ZP,particle:h.ZP}});var N=n(4184),R=n.n(N),S=n(9655),T=n(6335),C=n(5697),O=n.n(C),D=n(4133);function A(e){const t=!0===e.connected,n=(0,a.v9)((({global:n})=>!t&&e.messages?D.x6.DEBUG:n.debug)),r=(0,a.v9)((({global:n})=>!t&&e.messages?e.messages:n.console)),[o,l]=(0,s.useState)(6),[c,u]=(0,s.useState)(0),d=(0,s.useRef)();(0,s.useEffect)((()=>{if(n===D.x6.OFF)u(0);else if(u(0),l(6),void 0!==d.current&&clearTimeout(d.current),t){const e=setTimeout((()=>{l(3),d.current=void 0}),3e3);d.current=Number(e)}}),[t,n,r]);const h=-o-c,g=c>0?-1*c:void 0,v=r.slice(h,g),p=(0,s.useCallback)((()=>{const e=r.length-o>-1?r.length-o:0;if(c<e){l(6),u((e=>e+1)),void 0!==d.current&&clearTimeout(d.current);const e=setTimeout((()=>{l(3),u(0),d.current=void 0}),1e4);d.current=Number(e)}}),[o,c,r]);return(0,i.jsx)("div",{className:R()({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected,"text-break":!0}),children:v.map((e=>{const t=`${e.time}+${e.msg}+${e.lvl}`,n=R()(Object.assign(Object.assign({"app-sm-fs-xx-small":!0},e.css?{[e.css]:!0}:{}),{"correct-color":e.lvl===D.x6.DEBUG,"question-color":e.lvl===D.x6.WARN,"incorrect-color":e.lvl===D.x6.ERROR}));return(0,i.jsx)("div",{className:n,onClick:p,children:e.msg},t)}))})}A.propTypes={connected:O().bool,messages:O().array};var E=n(8012),M=n(2959),P=n(1540),I=n(4921),L=n(1436),V=n(7625),W=n(8527),F=n(9983),G=n(3762),Z=n(8002),q=n(9406),U=n(3295),_=n(7509);function J(){const e=(0,a.I0)(),t=(0,a.v9)((e=>e.kana.setting.charSet)),[n,r]=(0,s.useState)(!0),[o,l]=(0,s.useState)(0),[u,d]=(0,s.useState)(0),h=(0,s.useCallback)((()=>{n?(r(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(r(!0),document.body.classList.remove("no-scroll"))}),[n]),g=(0,s.useCallback)((e=>{if(e.target){const t=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(t))h();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(t))return h(),!1}}),[h]);let v=(0,s.useMemo)((()=>[{meta:Object.assign(Object.assign({},G.KanaGameMeta),{label:(0,F.w_)(t,G.KanaGameMeta.label)}),icon:(0,i.jsx)("div",{className:"not-a-real-icon",children:(0,F.w_)(t,["あ","ア","*"])}),wrap:t=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.c)(e,c.I_),children:t})},{meta:P.OppositesGameMeta,icon:(0,i.jsx)(V.G,{icon:L.ejD,size:"2x"})},{meta:[_.VocabularyMeta,q.PhrasesMeta][o],icon:(0,i.jsx)(V.G,{icon:L.yGG,size:"2x"}),wrap:e=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.k)(l,(e=>(0,F.II)(e,["Vocab","Phrases"]))),children:e})},{meta:I.ParticlesGameMeta,icon:(0,i.jsx)(V.G,{icon:L._zQ,size:"2x"})},{meta:[Z.KanjiMeta,E.KanjiGameMeta][u],icon:(0,i.jsx)("div",{className:"not-a-real-icon",children:(0,F.w_)(u,["漢","G"])}),wrap:e=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.k)(d,(e=>(0,F.II)(e,["Kanji","KanjiGame"]))),children:e})},{meta:U.SettingsMeta,icon:(0,i.jsx)(V.G,{icon:L.klh,size:"2x"})}]),[e,t,u,o]);return(0,i.jsx)("div",{className:"navigation",children:(0,i.jsxs)("nav",{className:"my-navbar",children:[(0,i.jsx)(S.rU,{"aria-label":"Home",to:"/"}),(0,i.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:h,children:(0,i.jsxs)("button",{className:R()({"nav-menu-btn":!0,collapsed:n}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,i.jsx)("span",{className:"nav-btn-line"}),(0,i.jsx)("span",{className:"nav-btn-line"}),(0,i.jsx)("span",{className:"nav-btn-line"})]})}),(0,i.jsx)("div",{className:R()({"mobile d-lg-none":!0,collapse:n}),id:"nav-menu-mobile",onClick:g,children:(0,i.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:v.map((e=>(0,i.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,i.jsx)(S.rU,{to:e.meta.location,children:(0,i.jsx)("div",{className:"icon force-collapse mb-2",children:e.icon})}),(0,i.jsx)("div",{className:"caption",children:e.wrap?e.wrap(e.meta.label):e.meta.label})]},`${e.meta.location}`)))})}),(0,i.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,i.jsx)("ul",{className:"d-flex",children:v.map((e=>(0,i.jsx)("li",{children:(0,i.jsx)(S.rU,{className:"desktop-link",to:e.meta.location,children:e.wrap?e.wrap(e.meta.label):e.meta.label})},`${e.meta.location}`)))})})]})})}const $=(0,s.lazy)((()=>n.e(237).then(n.bind(n,8237)))),z=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,9406)))),K=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,7509)))),B=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,1540)))),H=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,3762)))),Y=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,8002)))),X=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,8012)))),Q=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,2959)))),ee=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,4921)))),te=(0,s.lazy)((()=>Promise.resolve().then(n.bind(n,3295)))),ne=document.querySelector("#app-container");(0,r.s)(ne).render((0,i.jsx)(s.StrictMode,{children:(0,i.jsx)(a.zt,{store:k,children:(0,i.jsx)((function(){const e=(0,a.I0)();(0,s.useEffect)((()=>{e(b()),e((0,l.gK)()),e(p()).then((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(t=>{const n=t.data;n.type===v.L6&&e((0,l.kg)(n.msg,n.lvl,v.L6))}))}))}),[]);const t=(0,a.v9)((({global:e})=>e.darkMode)),n=R()({"d-flex flex-column":!0,"dark-mode":t});return(0,i.jsx)(S.UT,{basename:"/",children:(0,i.jsxs)("div",{id:"page-content",className:n,children:[(0,i.jsx)(A,{connected:!0}),(0,i.jsx)(J,{}),(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{}),children:(0,i.jsxs)(T.Z5,{children:[(0,i.jsx)(T.AW,{path:"/",element:(0,i.jsx)(K,{})}),(0,i.jsx)(T.AW,{path:q.PhrasesMeta.location,element:(0,i.jsx)(z,{})}),(0,i.jsx)(T.AW,{path:_.VocabularyMeta.location,element:(0,i.jsx)(K,{})}),(0,i.jsx)(T.AW,{path:P.OppositesGameMeta.location,element:(0,i.jsx)(B,{})}),(0,i.jsx)(T.AW,{path:G.KanaGameMeta.location,element:(0,i.jsx)(H,{})}),(0,i.jsx)(T.AW,{path:Z.KanjiMeta.location,element:(0,i.jsx)(Y,{})}),(0,i.jsx)(T.AW,{path:E.KanjiGameMeta.location,element:(0,i.jsx)(X,{})}),(0,i.jsx)(T.AW,{path:M.KanjiGridMeta.location,element:(0,i.jsx)(Q,{})}),(0,i.jsx)(T.AW,{path:I.ParticlesGameMeta.location,element:(0,i.jsx)(ee,{})}),(0,i.jsx)(T.AW,{path:U.SettingsMeta.location,element:(0,i.jsx)(te,{})}),(0,i.jsx)(T.AW,{path:"*",element:(0,i.jsx)($,{})})]})})]})})}),{})})}))},8056:(e,t,n)=>{n.d(t,{zA:()=>T,ZP:()=>O,M4:()=>b,gK:()=>y,kg:()=>C,cv:()=>R,TJ:()=>w,nh:()=>S,In:()=>N});var i=n(9829),s=n(4613),r=n.n(s),a=n(1659),o=n(8673),l=n(9385),c=n(7988),u=n(7652),d=n(4133);function h(){return new Promise(((e,t)=>{"webkitTemporaryStorage"in navigator?navigator.webkitTemporaryStorage.queryUsageAndQuota(((t,n)=>{e({quota:n,usage:t})}),t):null!=navigator.storage&&null!=navigator.storage.estimate?navigator.storage.estimate().then(e).catch(t):t(new Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}}))}))}var g=n(7891),v=n(5665),p=n(5741),f=n(5863),m=n(3859),j=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};const x={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},b=(0,i.hg)("setting/getMemoryStorageStatus",((e,t)=>j(void 0,void 0,void 0,(function*(){return function(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then((e=>h().then((({quota:t,usage:n})=>({quota:t,usage:n,persistent:e})))));{const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}}().catch((e=>{if(e instanceof Error)throw t.dispatch(C("Could not get memory storage status",d.x6.WARN)),t.dispatch(C(e.message,d.x6.WARN)),e}))})))),w=(0,i.hg)("setting/setPersistentStorage",((e,t)=>j(void 0,void 0,void 0,(function*(){return function(){const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then((function(t){return t?h().then((({quota:e,usage:n})=>({quota:e,usage:n,persistent:t,warning:void 0}))):navigator.storage.persist().then((function(t){let n;return t?(n="Storage will not be cleared except by explicit user action",h().then((({quota:e,usage:n})=>({quota:e,usage:n,persistent:t,warning:"Storage will not be cleared except by explicit user action"})))):Promise.reject(e)}))})):Promise.reject(e)}().then((e=>{const{warning:n}=e;return n&&t.dispatch(C(n,d.x6.WARN)),e})).catch((e=>{if(e instanceof Error)throw t.dispatch(C("Could not set persistent storage",d.x6.WARN)),t.dispatch(C(e.message,d.x6.WARN)),e}))})))),y=(0,i.hg)("setting/localStorageSettingsInitialized",((e,t)=>{let n=null,i=x;try{n=(0,m.xr)(p._)}catch(e){t.dispatch(C("localStorage not supported"))}return null!==n&&(t.dispatch((0,l.DA)(n.opposite)),t.dispatch((0,u.fN)(n.phrases)),t.dispatch((0,o.QJ)(n.kanji)),t.dispatch((0,a.z7)(n.kana)),t.dispatch((0,c.ok)(n.particle)),t.dispatch((0,g.az)(n.vocabulary)),i=r()(x,Object.assign({},n.global))),i})),k=(0,i.oM)({name:"setting",initialState:x,reducers:{toggleDarkMode(e){const t=new Date;(0,m.JW)(t,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold(e,t){let n=t.payload;const i=new Date;e.swipeThreshold=(0,m.JW)(i,{global:e},"/global/","swipeThreshold",n)},setMotionThreshold(e,t){let n=t.payload;const i=new Date;e.motionThreshold=(0,m.JW)(i,{global:e},"/global/","motionThreshold",n)},debugToggled:{reducer:(e,t)=>{const n=t.payload,i=(0,d.P_)(e.debug+1,Object.values(d.x6),n);e.debug=(0,m.JW)(new Date,{global:e},"/global/","debug",i)},prepare:e=>({payload:e})},logger:{reducer:(e,t)=>{const{debug:n}=e,{msg:i,lvl:s,type:r}=t.payload;if(0!==n&&s<=n){let t;t=r===v.L6?`SW: ${i}`:`UI: ${i}`;const n=e.console.slice(0,-1),a=e.console.slice(-1),o={msg:t,lvl:s,time:Date.now()},l=(0,f.Y3)([...a,o]);if(n.length>100){const t=n.slice(-100);e.console=[...t,...l]}else e.console=[...n,...l]}},prepare:(e,t=d.x6.DEBUG,n="ui_logger_msg")=>({payload:{msg:e,lvl:t,type:n}})}},extraReducers:e=>{e.addCase(y.fulfilled,((e,t)=>{const n=t.payload;return Object.assign({},n)})),e.addCase(b.fulfilled,((e,t)=>{const{quota:n,usage:i,persistent:s}=t.payload;e.memory={quota:n,usage:i,persistent:s}})),e.addCase(w.fulfilled,((e,t)=>{const{quota:n,usage:i,persistent:s}=t.payload;e.memory={quota:n,usage:i,persistent:s}}))}}),{toggleDarkMode:N,setMotionThreshold:R,setSwipeThreshold:S,debugToggled:T,logger:C}=k.actions,O=k.reducer},1659:(e,t,n)=>{n.d(t,{Bs:()=>g,I_:()=>h,PD:()=>p,ZP:()=>f,_S:()=>v,z7:()=>u});var i=n(9829),s=n(4613),r=n.n(s),a=n(4133),o=n(6954),l=n(3859);const c={hiragana:o.Bw,katakana:o.TU,vowels:o.Be,consonants:o.sH,sounds:o.jX,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},u=(0,i.hg)("kana/kanaFromLocalStorage",(e=>e)),d=(0,i.oM)({name:"kana",initialState:c,reducers:{toggleKana(e){const{charSet:t}=e.setting,n=t+1<Object.keys(a.kS).length?t+1:a.kS.HIRAGANA;e.setting.charSet=(0,l.JW)(new Date,{kana:e.setting},"/kana/","charSet",n)},setKanaBtnN(e,t){const n=t.payload;e.setting.choiceN=(0,l.JW)(new Date,{kana:e.setting},"/kana/","choiceN",n)},toggleKanaEasyMode(e){e.setting.easyMode=(0,l.JW)(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode(e){e.setting.wideMode=(0,l.JW)(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:e=>{e.addCase(u.fulfilled,((e,t)=>{const n=t.payload,i=r()(c.setting,n);return Object.assign(Object.assign({},e),{setting:Object.assign({},i)})}))}}),{toggleKana:h,setKanaBtnN:g,toggleKanaEasyMode:v,toggleKanaGameWideMode:p}=d.actions,f=d.reducer},8673:(e,t,n)=>{n.d(t,{EE:()=>S,F$:()=>R,Jg:()=>m,LD:()=>b,Mh:()=>y,QJ:()=>v,Qs:()=>f,SI:()=>k,Sm:()=>A,X8:()=>x,ZP:()=>P,_4:()=>N,cX:()=>p,cy:()=>C,im:()=>M,nw:()=>D,ow:()=>E,rg:()=>T,tk:()=>g,vT:()=>O,vX:()=>w});var i=n(9829),s=n(4613),r=n.n(s),a=n(4133),o=n(7186),l=n(3859),c=n(4953),u=n(1059),d=n(3162);const h={value:[],version:"",tagObj:[],setting:{filter:2,ordered:0,reinforce:!1,difficultyThreshold:d.YZ,repTID:-1,repetition:{},spaRepMaxReviewItem:c.$h,activeGroup:[],activeTags:[],includeNew:!0,includeReviewed:!0,choiceN:32,fadeInAnswers:!1}},g=(0,i.hg)("kanji/getKanji",((e,t)=>{return n=void 0,i=void 0,r=function*(){var e;const n=null!==(e=t.getState().version.kanji)&&void 0!==e?e:"0";return{value:yield fetch(o.qe.databaseURL+"/lambda/kanji.json",{headers:{"Data-Version":n}}).then((e=>e.json())),version:n}},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{l(r.next(e))}catch(e){t(e)}}function o(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}l((r=r.apply(n,i||[])).next())}));var n,i,s,r})),v=(0,i.hg)("kanji/kanjiFromLocalStorage",(e=>e)),p=(0,i.hg)("kanji/updateSpaceRepKanji",((e,t)=>{const{uid:n,shouldIncrement:i}=e,s=t.getState().kanji.setting.repetition;return(0,a.pg)(n,s,{count:i,date:!0})})),f=(0,i.hg)("kanji/removeFromSpaceRepetition",((e,t)=>{const{uid:n}=e,i=t.getState().kanji.setting.repetition;return(0,c.iR)(n,i)})),m=(0,i.hg)("kanji/setSpaceRepetitionMetadata",((e,t)=>{const{uid:n}=e,i=t.getState().kanji.setting.repetition;return(0,c.Gx)(n,i)})),j=(0,i.oM)({name:"kanji",initialState:h,reducers:{toggleKanjiActiveTag(e,t){const n=t.payload,{activeTags:i}=e.setting;let s;s=i.includes(n)?i.filter((e=>e!==n)):[...i,n],e.setting.activeTags=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeTags",s)},toggleKanjiActiveGrp:(e,t)=>{const n=t.payload,{activeGroup:i}=e.setting,s=Array.isArray(n)?n:[n],r=(0,a.c0)(s,i);e.setting.activeGroup=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeGroup",r)},toggleKanjiOrdering(e,t){const{ordered:n}=e.setting,i=t.payload,s=[a.vl.DIFFICULTY,a.vl.RANDOM,a.vl.VIEW_DATE,a.vl.RECALL],r=(0,a.P_)(n+1,s,i);e.setting.ordered=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","ordered",r)},addFrequencyKanji(e,t){const n=t.payload,{record:i}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},removeFrequencyKanji(e,t){var n;const i=t.payload,s=e.setting.repetition;if(!0===(null===(n=s[i])||void 0===n?void 0:n.rein)){const{record:t}=(0,a.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",t),t&&(e.setting.repTID=Date.now(),e.setting.repetition=t)}},setMemorizedThreshold(e,t){const n=t.payload;e.setting.difficultyThreshold=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","difficultyThreshold",n)},setKanjiDifficulty:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setKanjiAccuracy:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setSpaRepMaxItemReview(e,t){const n=Math.max(c.$h,t.payload);e.setting.spaRepMaxReviewItem=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","spaRepMaxReviewItem",n)},setKanjiBtnN(e,t){const n=t.payload;e.setting.choiceN=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","choiceN",n)},toggleKanjiFadeInAnswers(e,t){const n=t.payload;e.setting.fadeInAnswers=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","fadeInAnswers",n)},toggleKanjiFilter(e,t){const n=t.payload,{filter:i,reinforce:s}=e.setting,r=(0,a.P_)(i+1,[a.Lx.FREQUENCY,a.Lx.TAGS],n);e.setting.filter=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","filter",r),0!==r&&s&&(e.setting.reinforce=!1)},toggleKanjiReinforcement(e,t){const n=t.payload;e.setting.reinforce=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","reinforce",n)},toggleIncludeNew(e){e.setting.includeNew=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","includeReviewed")}},extraReducers:e=>{e.addCase(g.fulfilled,((e,t)=>{const{value:n,version:i}=t.payload,s=Object.keys(n).map((e=>{var t,i,s;const{tags:r}=(0,u.SA)(n[e].tag),a="radical"===(null===(t=n[e].grp)||void 0===t?void 0:t.toLowerCase())||r.find((e=>"radical"===e.toLowerCase()));return Object.assign(Object.assign({},n[e]),{uid:e,tag:void 0,tags:r,radical:a?{example:null!==(s=null===(i=n[e].radex)||void 0===i?void 0:i.split(""))&&void 0!==s?s:[]}:void 0})}));e.tagObj=(0,u.fh)(s),e.value=s,e.version=i})),e.addCase(v.fulfilled,((e,t)=>{const n=t.payload,i=r()(h.setting,n);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})})),e.addCase(p.fulfilled,((e,t)=>{const{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n)})),e.addCase(m.fulfilled,((e,t)=>{const{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n)})),e.addCase(f.fulfilled,((e,t)=>{const n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n))}))}}),{toggleKanjiActiveTag:x,toggleKanjiActiveGrp:b,toggleKanjiOrdering:w,addFrequencyKanji:y,removeFrequencyKanji:k,setMemorizedThreshold:N,setKanjiDifficulty:R,setKanjiAccuracy:S,setSpaRepMaxItemReview:T,toggleKanjiFilter:C,toggleKanjiReinforcement:O,toggleIncludeNew:D,toggleIncludeReviewed:A,setKanjiBtnN:E,toggleKanjiFadeInAnswers:M}=j.actions,P=j.reducer},9385:(e,t,n)=>{n.d(t,{CO:()=>u,Cz:()=>d,DA:()=>l,ZP:()=>g,bt:()=>o,tI:()=>h});var i=n(9829),s=n(7186),r=n(3859),a=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};const o=(0,i.hg)("opposite/getOpposite",((e,t)=>a(void 0,void 0,void 0,(function*(){var e;const n=null!==(e=t.getState().version.phrases)&&void 0!==e?e:"0";return fetch(s.qe.databaseURL+"/lambda/opposites.json",{headers:{"Data-Version":n}}).then((e=>e.json().then((e=>({value:e,version:n})))))})))),l=(0,i.hg)("opposite/oppositeFromLocalStorage",(e=>a(void 0,void 0,void 0,(function*(){return e})))),c=(0,i.oM)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1,fadeInAnswers:!1},reducers:{setOppositesARomaji(e){const t=new Date,n={opposite:e};e.aRomaji=(0,r.JW)(t,n,"/opposite/","aRomaji")},setOppositesQRomaji(e){const t=new Date,n={opposite:e};(0,r.JW)(t,n,"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji},toggleOppositeFadeInAnswers(e,t){const n=t.payload;e.fadeInAnswers=(0,r.JW)(new Date,{opposite:e},"/opposite/","fadeInAnswers",n)}},extraReducers:e=>{e.addCase(o.fulfilled,((e,t)=>{const{value:n,version:i}=t.payload;e.value=n,e.version=i})),e.addCase(l.fulfilled,((e,t)=>{const n=t.payload;return Object.assign(Object.assign({},e),n)}))}}),{setOppositesARomaji:u,setOppositesQRomaji:d,toggleOppositeFadeInAnswers:h}=c.actions,g=c.reducer},7988:(e,t,n)=>{n.d(t,{C_:()=>j,ZP:()=>x,aq:()=>g,ok:()=>v,ro:()=>m});var i=n(9829),s=n(4613),r=n.n(s),a=n(8056),o=n(7652),l=n(4133),c=n(2850),u=n(9815),d=n(3859);const h={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1,fadeInAnswers:!1}},g=(0,i.hg)("particle/getParticleGame",((e,t)=>{return n=void 0,i=void 0,r=function*(){const e=t.getState().particle,n=t.getState().phrases.value;if(n.length>0){let i;if(0===e.particleGame.phrases.length){i=p(n);const{errors:e}=i;e&&Object.keys(e).forEach((n=>{t.dispatch((0,a.kg)(`Multiple match ${e[n].japanese}`,l.x6.WARN)),t.dispatch((0,a.kg)(`Particle ${e[n].particle}: ${e[n].times}`,l.x6.WARN))}))}return{game:i}}return t.dispatch((0,o.cC)()).unwrap().then((e=>{const{values:n}=e,i=p(n),{errors:s}=i;return s&&Object.keys(s).forEach((e=>{t.dispatch((0,a.kg)(`Multiple match ${s[e].japanese}`,l.x6.WARN)),t.dispatch((0,a.kg)(`Particle ${s[e].particle}: ${s[e].times}`,l.x6.WARN))})),{phrase:n,game:i}}))},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{l(r.next(e))}catch(e){t(e)}}function o(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}l((r=r.apply(n,i||[])).next())}));var n,i,s,r})),v=(0,i.hg)("particleGame/particleFromLocalStorage",(e=>e));function p(e){let t,n=[];return{phrases:e.reduce(((e,i)=>{var s;if(i.particles&&(null===(s=i.particles)||void 0===s?void 0:s.length)>0){const s=c.TZ.parse(i).getSpelling();i.particles.forEach((r=>{if(2===s.split(r).length){const t=(0,u.C5)(r),a=s.indexOf(r),o={japanese:r,romaji:t},l={japanese:r,romaji:t,start:a,end:a+r.length};n=[...n,o],e=[...e,{answer:l,question:i,english:i.english,literal:i.lit}]}else t=Object.assign(Object.assign({},null!=t?t:{}),{[i.english]:{japanese:s,particle:r,times:s.split(r).length}})}))}return e}),[]),particles:n,errors:t}}const f=(0,i.oM)({name:"particleGame",initialState:h,reducers:{setParticlesARomaji(e){e.setting.aRomaji=(0,d.JW)(new Date,{particle:e.setting},"/particle/","aRomaji")},toggleParticleFadeInAnswers(e,t){const n=t.payload;e.setting.fadeInAnswers=(0,d.JW)(new Date,{particle:e.setting},"/particle/","fadeInAnswers",n)}},extraReducers:e=>{e.addCase(g.fulfilled,((e,t)=>{const{game:n}=t.payload;n&&(e.particleGame=n)})),e.addCase(v.fulfilled,((e,t)=>{const n=t.payload,i=r()(h.setting,n);return Object.assign(Object.assign({},e),{setting:Object.assign({},i)})}))}}),{setParticlesARomaji:m,toggleParticleFadeInAnswers:j}=f.actions,x=f.reducer},7652:(e,t,n)=>{n.d(t,{Jg:()=>j,Lp:()=>T,OJ:()=>w,Qs:()=>m,Sm:()=>S,ZP:()=>P,_4:()=>D,cC:()=>v,cz:()=>k,d1:()=>b,f6:()=>y,fN:()=>p,g0:()=>C,gP:()=>E,mW:()=>M,nw:()=>R,rg:()=>A,s5:()=>f,vy:()=>N,xH:()=>O});var i=n(9829),s=n(4613),r=n.n(s),a=n(8056),o=n(4133),l=n(7186),c=n(3859),u=n(4953),d=n(1059),h=n(3162);const g={value:[],version:"",grpObj:{},setting:{ordered:0,englishSideUp:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},spaRepMaxReviewItem:u.$h,frequency:{uid:void 0,count:0},activeGroup:[],filter:0,difficultyThreshold:h.YZ,includeNew:!0,includeReviewed:!0}};const v=(0,i.hg)("phrase/getPhrase",((e,t)=>{return n=void 0,i=void 0,r=function*(){var e;const n=null!==(e=t.getState().version.phrases)&&void 0!==e?e:"0",i=yield fetch(l.qe.databaseURL+"/lambda/phrases.json",{headers:{"Data-Version":n}}).then((e=>e.json())),s=(0,d.by)(i),{values:r,errors:c}=function(e){let t;return{values:Object.keys(e).map((n=>{let{tags:i,particles:s,inverse:r}=(0,d.SA)(e[n].tag);t=function(e,t){var n;let i,{inverse:s}=(0,d.SA)(t[e].tag),r=s;for(;r&&r!==e;){const{inverse:s}=(0,d.SA)(null===(n=t[r])||void 0===n?void 0:n.tag);s?r=s:(r=void 0,i=[...null!=i?i:[],`Missing inverse pair for ${t[e].japanese}`])}return i}(n,e);const a=function(e){let t={polite:!1};if(e.japanese.endsWith("。")){const[n,i]=e.japanese.split("\n");let s;n.indexOf("。")!==n.lastIndexOf("。")||n.includes("、")?t={polite:!0}:(s=(null==i?void 0:i.endsWith("。"))&&n.endsWith("。")?`${n.slice(0,-1)}\n${i.slice(0,-1)}`:e.japanese.slice(0,-1),t={japanese:s,polite:!0})}return t}(e[n]);return Object.assign(Object.assign(Object.assign({},e[n]),{uid:n,tag:void 0,tags:i,particles:s,inverse:r}),a)})),errors:t}}(i);return c&&c.forEach((e=>{t.dispatch((0,a.kg)(e,o.x6.WARN))})),{version:n,values:r,groups:s}},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{l(r.next(e))}catch(e){t(e)}}function o(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}l((r=r.apply(n,i||[])).next())}));var n,i,s,r})),p=(0,i.hg)("phrase/phraseFromLocalStorage",(e=>e)),f=(0,i.hg)("phrase/updateSpaceRepPhrase",((e,t)=>{const{uid:n,shouldIncrement:i}=e,s=t.getState().phrases.setting.repetition;return(0,o.pg)(n,s,{count:i,date:!0})})),m=(0,i.hg)("phrase/removeFromSpaceRepetition",((e,t)=>{const{uid:n}=e,i=t.getState().phrases.setting.repetition;return(0,u.iR)(n,i)})),j=(0,i.hg)("phrase/setSpaceRepetitionMetadata",((e,t)=>{const{uid:n}=e,i=t.getState().phrases.setting.repetition;return(0,u.Gx)(n,i)})),x=(0,i.oM)({name:"phrase",initialState:g,reducers:{togglePhrasesFilter(e,t){const n=t.payload,i=[o.Lx.FREQUENCY,o.Lx.GROUP],{filter:s,reinforce:r}=e.setting,a=(0,o.P_)(s+1,i,n);e.setting.filter=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","filter",a),a!==o.Lx.GROUP&&r&&(e.setting.reinforce=!1)},togglePhraseActiveGrp(e,t){const n=t.payload,{activeGroup:i}=e.setting,s=Array.isArray(n)?n:[n],r=(0,o.c0)(s,i);e.setting.activeGroup=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","activeGroup",r)},togglePhrasesReinforcement(e,t){const n=t.payload;e.setting.reinforce=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","reinforce",n)},setMemorizedThreshold(e,t){const n=t.payload;e.setting.difficultyThreshold=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","difficultyThreshold",n)},setPhraseDifficulty:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,o.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setSpaRepMaxItemReview(e,t){const n=Math.max(u.$h,t.payload);e.setting.spaRepMaxReviewItem=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","spaRepMaxReviewItem",n)},setPhraseAccuracy:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,o.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},addFrequencyPhrase(e,t){const n=t.payload,{record:i}=(0,o.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",i);let s={uid:n,count:e.setting.frequency.count+1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",s)},removeFrequencyPhrase(e,t){var n;const i=t.payload,s=e.setting.repetition;if(!0===(null===(n=s[i])||void 0===n?void 0:n.rein)){const{record:t}=(0,o.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t);let n={uid:i,count:e.setting.frequency.count-1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",n)}},flipPhrasesPracticeSide(e){e.setting.englishSideUp=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","englishSideUp")},togglePhrasesRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering(e,t){const n=[o.vl.RANDOM,o.vl.VIEW_DATE,o.vl.RECALL],i=t.payload,{ordered:s}=e.setting;let r=(0,o.P_)(s+1,n,i);e.setting.ordered=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","ordered",r)},toggleIncludeNew(e){e.setting.includeNew=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","includeReviewed")}},extraReducers:e=>{e.addCase(v.fulfilled,((e,t)=>{const{version:n,values:i,groups:s}=t.payload;e.grpObj=s,e.value=i,e.version=n})),e.addCase(p.fulfilled,((e,t)=>{const n=t.payload,i=r()(g.setting,n),s=Object.keys(i.repetition).filter((e=>{var t;return!0===(null===(t=i.repetition[e])||void 0===t?void 0:t.rein)}));return i.frequency={uid:void 0,count:s.length},Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})})),e.addCase(f.fulfilled,((e,t)=>{const{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n)})),e.addCase(j.fulfilled,((e,t)=>{const{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n)})),e.addCase(m.fulfilled,((e,t)=>{const n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n))}))}}),{flipPhrasesPracticeSide:b,togglePhrasesRomaji:w,togglePhrasesFilter:y,togglePhraseActiveGrp:k,togglePhrasesReinforcement:N,toggleIncludeNew:R,toggleIncludeReviewed:S,addFrequencyPhrase:T,setPhraseDifficulty:C,setPhraseAccuracy:O,setMemorizedThreshold:D,setSpaRepMaxItemReview:A,removeFrequencyPhrase:E,togglePhrasesOrdering:M}=x.actions,P=x.reducer},4133:(e,t,n)=>{n.d(t,{Lx:()=>s,P_:()=>l,c0:()=>c,iU:()=>o,kS:()=>a,pg:()=>u,vl:()=>r,x6:()=>i});const i=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),s=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),r=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4,RECALL:5}),a=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),o=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty","Recall"];function l(e,t,n){const i=Math.max(...t);let s=e;if(void 0!==n&&t.includes(n))s=n;else for(;!t.includes(s)||s>i;)s=s+1>i?0:s+1;return s}function c(e,t){const n=Array.from(new Set(e));let i=Array.from(new Set(t));return n.forEach((e=>{const t=!e.includes(".");i=i.includes(e)?i.filter((t=>t!==e)):[...i,e],t&&i.some((t=>t.includes(e+".")))&&(i=i.filter((t=>!t.startsWith(e+"."))))})),i}function u(e,t,n={count:!0,date:!0},i){var s,r;const a=t[e],o=t[e]?Object.assign({},t[e]):void 0,l=null!==(s=null==a?void 0:a.vC)&&void 0!==s?s:-1;let c;c=l>0&&!0===n.count?l+1:l>0&&!1===n.count?l:1;let u={};if(void 0!==i){if(i.toggle){const n=i.toggle.reduce(((n,i)=>{var s,r;let a;return a=["f"].includes(i)?!(!1===(null===(s=t[e])||void 0===s?void 0:s[i])):null===(r=t[e])||void 0===r?void 0:r[i],Object.assign(Object.assign({},n),{[i]:!a})}),{});u=Object.assign(Object.assign({},u),n)}if(void 0!==i.set){const e=Object.keys(i.set).reduce(((e,t)=>{var n;return void 0!==(null===(n=i.set)||void 0===n?void 0:n[t])&&(e=null===i.set[t]?Object.assign(Object.assign({},e),{[t]:void 0}):Object.assign(Object.assign({},e),{[t]:i.set[t]})),e}),{});u=Object.assign(Object.assign({},u),e)}}const d=null==a?void 0:a.lastView,h=void 0!==d&&!1===n.date?d:(new Date).toJSON(),g=Object.assign(Object.assign(Object.assign({},null!==(r=t[e])&&void 0!==r?r:{}),{vC:c,lastView:h}),u);return{record:Object.assign(Object.assign({},t),{[e]:g}),value:g,prevVal:null!=o?o:g}}},7891:(e,t,n)=>{n.d(t,{$u:()=>I,Gy:()=>F,Hi:()=>k,Jg:()=>m,Qs:()=>f,Rz:()=>v,S5:()=>L,Sm:()=>E,Tn:()=>C,VX:()=>D,Vb:()=>P,Wo:()=>p,ZP:()=>U,ZZ:()=>T,_4:()=>W,_n:()=>w,az:()=>j,d1:()=>G,eK:()=>S,gl:()=>O,kT:()=>g,kn:()=>V,nw:()=>A,oG:()=>M,rZ:()=>b,rg:()=>Z,s:()=>q,sG:()=>R,wf:()=>N,xz:()=>y});var i=n(9829),s=n(4613),r=n.n(s),a=n(4133),o=n(7186),l=n(9841),c=n(3859),u=n(4953),d=n(1059),h=n(3162);const g={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,englishSideUp:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,difficultyThreshold:h.YZ,reinforce:!1,repTID:-1,repetition:{},spaRepMaxReviewItem:u.$h,activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:(0,l.kf)().map((e=>e.name)),includeNew:!0,includeReviewed:!0}},v=(0,i.hg)("vocabulary/getVocabulary",((e,t)=>{return n=void 0,i=void 0,r=function*(){var e;const n=null!==(e=t.getState().version.vocabulary)&&void 0!==e?e:"0";return{value:yield fetch(o.qe.databaseURL+"/lambda/vocabulary.json",{headers:{"Data-Version":n}}).then((e=>e.json())),version:n}},new((s=void 0)||(s=Promise))((function(e,t){function a(e){try{l(r.next(e))}catch(e){t(e)}}function o(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}l((r=r.apply(n,i||[])).next())}));var n,i,s,r})),p=(0,i.hg)("vocabulary/updateSpaceRepWord",((e,t)=>{const{uid:n,shouldIncrement:i}=e,s=t.getState().vocabulary.setting.repetition;return(0,a.pg)(n,s,{count:i,date:!0})})),f=(0,i.hg)("vocabulary/removeFromSpaceRepetition",((e,t)=>{const{uid:n}=e,i=t.getState().vocabulary.setting.repetition;return(0,u.iR)(n,i)})),m=(0,i.hg)("vocabulary/setSpaceRepetitionMetadata",((e,t)=>{const{uid:n}=e,i=t.getState().vocabulary.setting.repetition;return(0,u.Gx)(n,i)})),j=(0,i.hg)("vocabulary/vocabularyFromLocalStorage",(e=>e)),x=(0,i.oM)({name:"vocabulary",initialState:g,reducers:{verbFormChanged:(e,t)=>Object.assign(Object.assign({},e),{verbForm:t.payload}),toggleVocabularyActiveGrp:(e,t)=>{const n=t.payload,{activeGroup:i}=e.setting,s=Array.isArray(n)?n:[n],r=(0,a.c0)(s,i);e.setting.activeGroup=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",r)},furiganaToggled(e,t){const n=t.payload,{record:i}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},toggleVocabularyReinforcement(e,t){const n=t.payload;e.setting.reinforce=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce",n)},toggleVocabularyOrdering(e,t){const{ordered:n}=e.setting,i=t.payload,s=[a.vl.ALPHABETIC,a.vl.DIFFICULTY,a.vl.GAME,a.vl.RANDOM,a.vl.VIEW_DATE,a.vl.RECALL],r=(0,a.P_)(n+1,s,i);e.setting.ordered=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",r)},flipVocabularyPracticeSide(e){e.setting.englishSideUp=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","englishSideUp")},toggleVocabularyRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji(e){e.setting.bareKanji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint(e){e.setting.hintEnabled=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter(e,t){const n=[a.Lx.FREQUENCY,a.Lx.GROUP],i=t.payload,{filter:s,reinforce:r}=e.setting,o=(0,a.P_)(s+1,n,i);e.setting.filter=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","filter",o),0!==o&&r&&(e.setting.reinforce=!1)},setVerbFormsOrder(e,t){const n=t.payload;e.setting.verbFormsOrder=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",n)},toggleAutoVerbView(e){e.setting.autoVerbView=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit(e,t){const n=t.payload;e.setting.verbColSplit=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",n)},addFrequencyWord(e,t){const n=t.payload,{record:i}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},removeFrequencyWord(e,t){var n;const i=t.payload,s=e.setting.repetition;if(!0===(null===(n=s[i])||void 0===n?void 0:n.rein)){const{record:t}=(0,a.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)}},setMemorizedThreshold(e,t){const n=t.payload;e.setting.difficultyThreshold=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","difficultyThreshold",n)},setWordDifficulty:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{difficultyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},setWordTPCorrect:{reducer:(e,t)=>{var n,i,s;const{uid:r,tpElapsed:a,pronunciation:o}=t.payload,l=e.setting.repetition;let u=1,d=1,h=a;const g=l[r];if(void 0!==g){const e=g.tpPc,t=g.tpAcc,i=null!==(n=g.tpCAvg)&&void 0!==n?n:0;if(void 0!==e&&void 0!==t){u=e+1;const n=e*t;d=(n+1)/u,h=(i*n+a)/(n+1)}}const v=!0===o||null!==(i=null==g?void 0:g.pron)&&void 0!==i&&i,p=Object.assign(Object.assign({},null!==(s=l[r])&&void 0!==s?s:{lastView:(new Date).toJSON(),vC:1}),{pron:v||void 0,tpPc:u,tpAcc:d,tpCAvg:h}),f=Object.assign(Object.assign({},l),{[r]:p});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",f)},prepare:(e,t,{pronunciation:n}={})=>({type:"string",payload:{uid:e,tpElapsed:t,pronunciation:n}})},setWordTPIncorrect:{reducer:(e,t)=>{var n;const{uid:i,pronunciation:s}=t.payload,r=e.setting.repetition;let a=1,o=0;const l=r[i];if(void 0!==l){const e=l.tpPc,t=l.tpAcc;void 0!==e&&void 0!==t&&(a=e+1,o=(e*t+0)/a)}const u=Object.assign(Object.assign({},null!==(n=r[i])&&void 0!==n?n:{lastView:(new Date).toJSON(),vC:1}),{tpPc:a,tpAcc:o,pron:!0===s||void 0}),d=Object.assign(Object.assign({},r),{[i]:u});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",d)},prepare:(e,{pronunciation:t}={})=>({payload:{uid:e,pronunciation:t}})},setSpaRepMaxItemReview(e,t){const n=Math.max(u.$h,t.payload);e.setting.spaRepMaxReviewItem=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","spaRepMaxReviewItem",n)},setWordAccuracy:{reducer:(e,t)=>{const{uid:n,value:i}=t.payload,{record:s}=(0,a.pg)(n,e.setting.repetition,{count:!1,date:!1},{set:{accuracyP:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},prepare:(e,t)=>({payload:{uid:e,value:t}})},toggleIncludeNew(e){e.setting.includeNew=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","includeNew")},toggleIncludeReviewed(e){e.setting.includeReviewed=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","includeReviewed")}},extraReducers:e=>{e.addCase(j.fulfilled,((e,t)=>{const n=t.payload,i=r()(g.setting,n);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})})),e.addCase(v.fulfilled,((e,t)=>{const{value:n,version:i}=t.payload;e.grpObj=(0,d.by)(n),e.value=(0,d.yc)(n),e.version=i})),e.addCase(p.fulfilled,((e,t)=>{const{record:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)})),e.addCase(m.fulfilled,((e,t)=>{const{newValue:n}=t.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)})),e.addCase(f.fulfilled,((e,t)=>{const n=t.payload;n&&(e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n))}))}}),{verbFormChanged:b,furiganaToggled:w,removeFrequencyWord:y,setVerbFormsOrder:k,toggleVocabularyOrdering:N,toggleVocabularyActiveGrp:R,toggleAutoVerbView:S,toggleVocabularyFilter:T,toggleVocabularyHint:C,toggleVocabularyReinforcement:O,toggleVocabularyRomaji:D,toggleIncludeNew:A,toggleIncludeReviewed:E,updateVerbColSplit:M,toggleVocabularyBareKanji:P,flipVocabularyPracticeSide:I,addFrequencyWord:L,setWordDifficulty:V,setMemorizedThreshold:W,setWordTPCorrect:F,setWordTPIncorrect:G,setSpaRepMaxItemReview:Z,setWordAccuracy:q}=x.actions,U=x.reducer},6954:e=>{e.exports=JSON.parse('{"Be":["a","i","u","e","o"],"sH":["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],"Bw":[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],"TU":[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],"jX":{"si":"shi","ti":"chi","tu":"tsu","hu":"fu","zi":"ji","di":"dji","du":"dzu","Na":"n"}}')}},e=>{e.O(0,[816,913,794,931,612,697,555,774,25,104,105,418,642,995,86,220,183,323,593,623,617,216,810,260,303,979,655],(()=>(5707,e(e.s=5707)))),e.O()}]);