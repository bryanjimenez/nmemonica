"use strict";(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([[179],{7186:(e,n,t)=>{t.d(n,{qe:()=>s,vT:()=>r});const i="nmemonica-9d977",s={apiKey:"AIzaSyD0R3dzI2GREIuA0irO3dMT0n4CP59-GjQ",authDomain:i+".firebaseapp.com",databaseURL:"https://"+i+".firebaseio.com",projectId:i,storageBucket:i+".appspot.com",messagingSenderId:"839840260761",appId:"1:839840260761:web:6d72438c4131e3ce368e08"},r="https://us-east1-"+i+".cloudfunctions.net/g_translate_pronounce"},3968:(e,n,t)=>{t.d(n,{Z:()=>u});var i=t(5893),s=(t(7294),t(5697)),r=t.n(s),a=t(5529),o=t(7186),c=t(7962),l=t(5965);function u(e){let n;const t=e.word;return(0,i.jsx)("div",{className:"clickable",onTouchStart:e.visible?()=>{n=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?()=>{const i=~~(Date.now()-n)<500&&!e.reCache?"":"/override_cache",s=(0,c.b1)(o.vT+i,t);(0,l.R$)(s)}:void 0,children:e.visible&&(0,i.jsx)(a.Ibz,{size:"medium","aria-label":"pronunciation"})})}u.defaultProps={visible:!1},u.propTypes={word:r().shape({tl:r().string.isRequired,q:r().string.isRequired,uid:r().string.isRequired}).isRequired,reCache:r().bool,onPushedPlay:r().func,visible:r().bool}},8737:(e,n,t)=>{t.d(n,{M:()=>l});var i=t(5893),s=t(4184),r=t.n(s),a=t(5697),o=t.n(a),c=t(5529);function l(e){const n=r()({[""+e.addlStyle]:!!e.addlStyle,"p-0 px-2":!0,"font-weight-bold":e.active});return(0,i.jsxs)("div",{className:n,onClick:e.onClick,children:[(0,i.jsx)("span",{className:"p-1",children:e.active?(0,i.jsx)(c.oOx,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,i.jsx)(c.wl8,{className:"clickable",size:"small","aria-label":"add"})}),(0,i.jsx)("span",{className:"p-1",children:e.children})]})}t(7294),l.propTypes={addlStyle:o().string,active:o().bool,onClick:o().func,children:o().string}},6537:(e,n,t)=>{t.d(n,{n:()=>c});var i=t(5893),s=(t(7294),t(4184)),r=t.n(s),a=t(5697),o=t.n(a);function c(e){var n;const t=r()({[e.addlStyle]:!0,"d-flex flex-column justify-content-around text-center h-100":!0});return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("div",{children:null!==(n=e.text)&&void 0!==n?n:"Awaiting data ..."})})}c.propTypes={addlStyle:o().string}},2405:(e,n,t)=>{t.d(n,{A:()=>g,D4:()=>x,Qp:()=>y,R_:()=>p,Ro:()=>j,lh:()=>w,ph:()=>m,uY:()=>b,y8:()=>f});var i=t(5893),s=t(7294),r=t(4184),a=t.n(r),o=t(5697),c=t.n(o),l=t(5529),u=t(7625),d=t(1436),h=t(8670);function g(e){const{active:n,toggle:t,toggleFurigana:s,vocabulary:r}=e;return!1===e.visible?null:(0,i.jsx)("div",{className:a()({clickable:n,"sm-icon-grp":!0,"sm-kanji":n}),onClick:n?()=>s(r.uid):void 0,"aria-label":"Toggle furigana",children:n?(0,i.jsxs)("ruby",{children:["漢",(0,i.jsx)("rt",{className:a()({"disabled disabled-color":!t}),children:"ふりがな"})]}):(0,i.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function v(e){const n=(0,s.useRef)(0),{addFrequencyTerm:t,removeFrequencyTerm:r,toggle:o,term:c,count:u=n.current}=e,d=(0,h.oU)(),g=n.current===u;return(0,s.useEffect)((()=>{n.current=void 0!==u?u:0,!1===g&&d()}),[u,g,d]),!1===e.visible?null:(0,i.jsxs)("div",{"aria-label":o?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:()=>{o?r(c.uid):t(c.uid)},children:[o?(0,i.jsx)(l.oOx,{size:"small"}):(0,i.jsx)(l.wl8,{size:"small"}),void 0!==u&&u>-1&&(0,i.jsx)("span",{className:a()({notification:!0,"notification-fade":g}),children:u})]})}g.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,toggleFurigana:c().func,hasFurigana:c().bool,vocabulary:c().object},v.propTypes={visible:c().bool,active:c().bool,addFrequencyTerm:c().func,removeFrequencyTerm:c().func,toggle:c().bool,term:c().object,count:c().number};const p=(0,s.memo)(v);function f(e){const{active:n,setShowHint:t}=e;return e.visible?(0,i.jsx)("div",{className:a()({"sm-icon-grp":!0,clickable:n,"disabled disabled-color":!n}),onClick:n?()=>{t(!0),setTimeout((()=>{t(!1)}),1500)}:void 0,"aria-label":n?"Show hint":"Hint unavailable",children:(0,i.jsx)(l.OgN,{size:"small"})}):null}function m(e){const{toggleAutoVerbView:n,autoVerbView:t}=e;return e.visible?(0,i.jsx)("div",{className:"sm-icon-grp clickable",onClick:()=>n(),"aria-label":"Toggle auto verb view",children:(0,i.jsx)(u.G,{icon:t?d.gPx:d.Bxq})}):null}function j(e){const{active:n,action:t}=e;return!1===e.visible?null:(0,i.jsx)("div",{className:a()({clickable:!0,"sm-icon-grp":!0,"disabled-color":n}),onClick:()=>{"function"==typeof t&&t()},"aria-label":"Override audio",children:(0,i.jsx)(u.G,{icon:d.TZC})})}function b(e){const{action:n,toggle:t}=e;return!1===e.visible?null:(0,i.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,i.jsx)(u.G,{className:"clickable",onClick:n,icon:t?d.dzc:d.UJf}),(0,i.jsx)("span",{className:"notification",children:(0,i.jsx)(u.G,{icon:t?d.UJf:d.dzc})})]})}function x(e){const{action:n,toggle:t}=e;return e.visible?(0,i.jsx)("div",{className:a()({clickable:!0,"sm-icon-grp":!0,"info-color":t}),onClick:()=>{"function"==typeof n&&n()},"aria-label":"Literal english translation",children:(0,i.jsx)(l.Rg1,{size:"small"})}):null}function y(e){return e.visible?(0,i.jsx)("div",{children:(0,i.jsx)(u.G,{icon:d.RJo})}):null}function w(e){return e.visible?(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,i.jsx)("span",{className:a()({"border-bottom":"incorrect"===e.hover}),children:"-1"})},0),(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,i.jsx)("span",{className:a()({"border-bottom":"pronunciation"===e.hover||"reset"!==e.hover&&!0===e.prevMissPronu}),children:"P"})},1),(0,i.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,i.jsx)("span",{className:a()({"border-bottom":"reset"===e.hover}),children:"0"})},2)]}):null}f.propTypes={visible:c().bool,active:c().bool,setShowHint:c().func},m.propTypes={visible:c().bool,active:c().bool,toggleAutoVerbView:c().func,autoVerbView:c().bool},j.propTypes={visible:c().bool,active:c().bool,action:c().func},b.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,action:c().func},x.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,action:c().func},y.propTypes={visible:c().bool},w.propTypes={visible:c().bool,hover:c().string,onClick:c().func,onIncorrect:c().func,onPronunciation:c().func,onReset:c().func,prevMissPronu:c().bool}},7567:(e,n,t)=>{t.d(n,{Z:()=>u});var i=t(5893),s=(t(7294),t(5697)),r=t.n(s),a=t(6259),o=t(4184),c=t.n(o);function l(e){const n={disabled:!!e.disabled||void 0};return(0,i.jsxs)("div",{className:"settings-switch-root",children:[(0,i.jsx)("p",{className:c()({"disabled-color":n.disabled}),children:e.statusText}),(0,i.jsx)(a.Z,Object.assign({},n,{checked:e.active,onChange:()=>e.action(),color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}}))]})}l.propTypes={active:r().bool,action:r().func.isRequired,statusText:r().string.isRequired,color:r().string,disabled:r().bool};const u=l},9775:(e,n,t)=>{t.d(n,{Z:()=>l});var i=t(5893),s=t(7294),r=t(5697),a=t.n(r),o=t(4184),c=t.n(o);function l(e){let n,t;e.children&&(n=e.children,t=e.children),e.largeValue&&(n=e.largeValue),e.smallValue&&(t=e.smallValue);const r=void 0!==e.rootClassName&&c()(e.rootClassName)||void 0,a=void 0!==e.className&&e.className||{},o="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+c()(e.largeClassName):""),l="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+c()(e.smallClassName):""),u=()=>{"function"==typeof e.onClick&&e.onClick()},d=[(0,i.jsx)("span",{"data-name":"large",className:c()(Object.assign(Object.assign({[o]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:n},0),(0,i.jsx)("span",{"data-name":"small",className:c()(Object.assign(Object.assign({[l]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:t},1)];return!0===e.fragment?(0,i.jsx)(s.Fragment,{children:d}):(0,i.jsx)("div",{className:r,children:d})}l.propTypes={fragment:a().bool,breakPoint:a().string,rootClassName:a().object,className:a().object,largeClassName:a().object,smallClassName:a().object,onClick:a().func,children:a().oneOfType([a().string,a().element]),largeValue:a().oneOfType([a().string,a().element]),smallValue:a().oneOfType([a().string,a().element])}},7127:(e,n,t)=>{t.d(n,{Z:()=>c});var i=t(5893),s=(t(7294),t(5697)),r=t.n(s),a=t(6914);function o(e){return(0,i.jsx)(a.Z,{size:"small",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}o.propTypes={action:r().func.isRequired,color:r().string,ariaLabel:r().string.isRequired,children:r().object.isRequired};const c=o},2937:(e,n,t)=>{t.d(n,{Z:()=>h});var i=t(5893),s=t(7294),r=t(5697),a=t.n(r),o=t(4184),c=t.n(o),l=t(5529),u=t(7127);function d(e){const[n,t]=(0,s.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:!1}),r=()=>{t({showMeaning:!1,correct:!1,incorrect:[]})},a=e.question,o=e.choices;let d=void 0!==a.english?"[English]":"";return void 0===e.hint?n.showMeaning&&a.english&&(d=a.english):d=n.showMeaning&&a.english?a.english:e.hint,(0,i.jsx)("div",{className:"pick4game main-panel h-100",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(u.Z,{ariaLabel:"Previous",action:()=>{r(),e.gotoPrev()},children:(0,i.jsx)(l.wyc,{size:16})}),(0,i.jsxs)("div",{className:c()({"question d-flex flex-column justify-content-center text-center w-50":!0}),children:[(0,i.jsx)("h1",{children:a.toHTML(n.correct)}),(0,i.jsx)("span",{className:c()({invisible:!e.qRomaji}),children:a.romaji}),void 0!==d&&(0,i.jsx)("span",{className:"clickable",onClick:()=>{t({showMeaning:!n.showMeaning})},children:d})]}),(0,i.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-50",children:o.map(((s,a)=>{const l=e.isCorrect(o[a])&&n.correct,u=n.incorrect.includes(a),d=c()({"w-50 h-50 pt-3 d-flex flex-column justify-content-evenly text-center clickable":!0,"correct-color":l,"incorrect-color":u});return(0,i.jsx)("div",{className:d,onClick:()=>{((i,s)=>{e.isCorrect(i)?(t({correct:!0,showMeaning:!0}),setTimeout((()=>{r(),e.gotoNext()}),1e3)):2===n.incorrect.length?(t({incorrect:[...n.incorrect,s],correct:!0,showMeaning:!0}),setTimeout((()=>{r(),e.gotoNext()}),1e3)):t({incorrect:[...n.incorrect,s]})})(s,a)},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{children:s.toHTML()}),l&&(0,i.jsx)("div",{children:s.english}),(0,i.jsx)("span",{className:c()({invisible:!e.aRomaji}),children:s.romaji})]})},a)}))}),(0,i.jsx)(u.Z,{ariaLabel:"Next",action:()=>{r(),e.gotoNext()},children:(0,i.jsx)(l.XCv,{size:16})})]})},0)}d.propTypes={question:a().object,hint:a().string,isCorrect:a().func.isRequired,choices:a().array,gotoNext:a().func.isRequired,gotoPrev:a().func.isRequired,qRomaji:a().bool,aRomaji:a().bool};const h=d},8012:(e,n,t)=>{t.r(n),t.d(n,{KanjiGameMeta:()=>b,default:()=>y,oneFromList:()=>x});var i=t(5893),s=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(9655),u=t(6892),d=t(9983),h=t(6278),g=t(8673),v=t(6537),p=t(2405),f=t(2937),m=t(4766),j=t(4133);const b={location:"/kanji-game/",label:"Kanji Game"};function x(e){let n=e;const t=e.split(",");if(t.length>1){const e=t[Math.floor(Math.random()*t.length)].trim();n=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}return n}function y(){var e;const n=(0,c.I0)(),{kanjiList:t,activeTags:r,repetition:b,filterType:y,reinforce:w}=(0,h.R)();(0,o.useEffect)((()=>{0===t.length&&n((0,g.tk)())}),[]);const k=(0,o.useRef)(b);k.current=b;const[N,T]=(0,o.useState)([]),[S,C]=(0,o.useState)(0),[M,O]=(0,o.useState)(void 0),R=(0,o.useMemo)((()=>{if(0===t.length)return[];if(0===Object.keys(k.current).length&&0===r.length)return t;const e=Object.keys(k.current).reduce(((e,n)=>{var t;return!0===(null===(t=k.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,d.Dm)(y.current,t,e,y.current===j.Lx.TAGS?r:[],(()=>{}));if(w.current&&y.current===j.Lx.TAGS){const i=n.map((e=>e.uid)),s=t.filter((n=>e.includes(n.uid)&&!i.includes(n.uid)));n=[...n,...s]}const i=n.reduce(((e,n)=>{var t;return!0===(null===(t=k.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return T(i),n}),[t,r,w,y]),P=(0,o.useMemo)((()=>(0,d.tq)(R)),[R]),A=(0,o.useCallback)((()=>{const e=R.length;C((S+1)%e),O(void 0)}),[R,S]),E=(0,o.useCallback)((()=>{(0,d.hY)(w.current,y.current,N,R,k.current,M,(e=>{O(e)}),A)}),[N,R,M,A,w,y]),D=(0,o.useCallback)((()=>{const e=R.length;let n;n=M?S:(e+(S-1))%e,C(n),O(void 0)}),[R,S,M]),L=(0,o.useCallback)((e=>{T((n=>[...n,e])),n((0,g.Mh)(e))}),[n]),F=(0,o.useCallback)((e=>{T((n=>n.filter((n=>n!==e)))),n((0,g.SI)(e))}),[n]);if(0===P.length)return(0,i.jsx)(v.n,{addlStyle:"main-panel"});const I=null!=M?M:(0,d.vr)(S,R,P),q=(0,d.cc)(I,t),Z=q&&!0===(null===(e=b[q.uid])||void 0===e?void 0:e.rein),G=function(e,n){const{uid:t,kanji:s,on:r,kun:o}=e,c=function(e,n){const t=e=>e.split(",").map((e=>e.trim()));let i=[Object.assign(Object.assign({},e),{english:x(e.english)})];const s=t(e.english);for(;i.length<4;){const e=n[Math.floor(Math.random()*n.length)],r=t(e.english);r.every((e=>s.every((n=>n!==e))))&&r.every((e=>i.every((n=>e!==n.english))))&&(i=[...i,Object.assign(Object.assign({},e),{english:x(e.english)})])}return(0,u.Sy)(i),i}(e,n);return{question:{toHTML:e=>(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:a()({"correct-color":e}),children:(0,i.jsx)("span",{children:s})}),(void 0!==r||void 0!==o)&&(0,i.jsxs)("div",{className:a()({"d-flex flex-column mt-3 h4":!0,invisible:!e,"correct-color":e}),children:[(0,i.jsx)("span",{children:r}),(0,i.jsx)("span",{children:o})]})]})},answer:t,choices:c.map((e=>({compare:e.uid,toHTML:()=>e.english})))}}(q,t),W=(S+1)/R.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,{question:G.question,isCorrect:e=>e.compare===G.answer,choices:G.choices,gotoPrev:D,gotoNext:E}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start",children:(0,i.jsx)(l.rU,{to:m.KanjiGridMeta.location,children:(0,i.jsx)(p.uY,{toggle:!0,action:()=>{}})})})}),(0,i.jsx)("div",{className:"col text-center",children:(0,i.jsx)(p.Qp,{visible:Z&&q.uid!==R[P[S]].uid})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)(p.R_,{addFrequencyTerm:L,removeFrequencyTerm:F,toggle:Z,term:q})})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:W,color:Z?"secondary":"primary"})})]})}},4766:(e,n,t)=>{t.r(n),t.d(n,{KanjiGridMeta:()=>S,default:()=>M,useCreateChoices:()=>C});var i=t(5893),s=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(9655),u=t(9983),d=t(8670),h=t(6278),g=t(8673),v=t(6537),p=t(2405),f=t(8012),m=t(5529),j=t(5697),b=t.n(j),x=t(7127);function y(e){const[n,t]=(0,o.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:-1}),s=(0,o.useCallback)((()=>{t({showMeaning:!1,correct:-1,incorrect:[]})}),[t]),{isCorrect:r,choices:c,gotoNext:l,gotoPrev:u}=e,d=(0,o.useCallback)((()=>{s(),u()}),[s,u]),h=(0,o.useCallback)((()=>{s(),l()}),[s,l]),g=a()({"pickXgame main-panel h-100":!0});return(0,i.jsx)("div",{className:g,children:(0,i.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(x.Z,{ariaLabel:"Previous",action:d,children:(0,i.jsx)(m.wyc,{size:16})}),(0,i.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:c.map(((e,o)=>(e=>{const o=c.length,u=n.incorrect.includes(e),d=n.correct===e,h=a()({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":d,"incorrect-color":u}),g=a()({"mb-0":!0}),v=Math.trunc(1/Math.ceil(Math.sqrt(o))*.75*100)+"%";return(0,i.jsx)("div",{onClick:()=>((e,i)=>{const[a,o]=r(e);a?(t({correct:i,showMeaning:!0}),setTimeout((()=>{s(),l()}),1e3)):2===n.incorrect.length?(t({incorrect:[...n.incorrect,i],correct:o,showMeaning:!0}),setTimeout((()=>{s(),l()}),2500)):t({incorrect:[...n.incorrect,i]})})(c[e],e),className:h,style:{width:v},children:(0,i.jsx)("h2",{className:g,children:c[e].toHTML()})},e)})(o)))}),(0,i.jsx)(x.Z,{ariaLabel:"Next",action:h,children:(0,i.jsx)(m.XCv,{size:16})})]})},0)}y.propTypes={question:b().object,isCorrect:b().func.isRequired,choices:b().array,gotoNext:b().func.isRequired,gotoPrev:b().func.isRequired};var w=t(4133),k=t(6892),N=t(2409),T=t(8301);const S={location:"/kanji-grid/",label:"Kanji Grid Game"};function C(e,n,t,i){return(0,o.useMemo)((()=>{if(!t)return[];let s=[t];for(;s.length<e;){const e=Math.floor(Math.random()*i.length),t=i[e];s.every((e=>e[n]!==t[n]))&&(s=[...s,t])}return(0,k.Sy)(s),s}),[e,n,t,i])}function M(){var e;const n=(0,c.I0)(),{kanjiList:t,activeTags:r,repetition:m,filterType:j,reinforce:b,choiceN:x}=(0,h.R)();(0,o.useEffect)((()=>{0===t.length&&n((0,g.tk)())}),[]);const C=(0,o.useRef)(m);C.current=m;const[M,O]=(0,o.useState)([]),[R,P]=(0,o.useState)(0),[A,E]=(0,o.useState)(void 0),D=(0,o.useRef)(""),[L,F]=(0,o.useState)(!1),I=(0,o.useRef)([]),[q,Z]=(0,o.useState)(null),G=(0,o.useMemo)((()=>{if(0===t.length)return[];if(0===Object.keys(C.current).length&&0===r.length)return t;const e=Object.keys(C.current).reduce(((e,n)=>{var t;return!0===(null===(t=C.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,u.Dm)(j.current,t,e,j.current===w.Lx.TAGS?r:[],(()=>{}));if(b.current&&j.current===w.Lx.TAGS){const i=n.map((e=>e.uid)),s=t.filter((n=>e.includes(n.uid)&&!i.includes(n.uid)));n=[...n,...s]}const i=n.reduce(((e,n)=>{var t;return!0===(null===(t=C.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return O(i),n}),[t,r,b,j]),W=(0,o.useMemo)((()=>(0,u.tq)(G)),[G]),V=(0,o.useCallback)((()=>{const e=G.length;P((R+1)%e),E(void 0),Z(null)}),[G,R]),_=(0,o.useCallback)((()=>{(0,u.hY)(b.current,j.current,M,G,C.current,A,(e=>{E(e)}),V)}),[M,G,A,V,b,j]),U=(0,o.useCallback)((()=>{const e=G.length;let n;n=A?R:(e+(R-1))%e,P(n),E(void 0),Z(null)}),[G,R,A]),K=(0,o.useRef)(-1),{blastEl:H,anchorElRef:z,text:J,setText:B}=function(){const[e,n]=(0,o.useState)(""),[t,s]=(0,o.useState)({w:0,h:0}),r=(0,d.iP)(),{x:c,y:l,strategy:u,refs:h,update:g}=(0,N.YF)({placement:"bottom",middleware:[(0,T.cv)({mainAxis:void 0===r.height?0:r.height/2-t.h,crossAxis:0}),(0,T.uY)()]});return(0,o.useEffect)((()=>{var n,t;const i=null===(n=h.floating.current)||void 0===n?void 0:n.clientWidth,r=null===(t=h.floating.current)||void 0===t?void 0:t.clientHeight;e.length>0&&i&&i>0&&r&&r>0&&(s({w:i,h:r}),g())}),[e,s,h.floating,g]),{blastEl:(0,i.jsx)("div",{ref:h.setFloating,style:{position:u,top:null!=l?l:0,left:null!=c?c:0,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"},className:a()({"dark-mode-color":!0,"notification-fade":e.length>0}),children:e}),anchorElRef:h.setReference,text:e,setText:n}}(),Y=(0,o.useCallback)((e=>{O((n=>[...n,e])),n((0,g.Mh)(e))}),[n]),X=(0,o.useCallback)((e=>{O((n=>n.filter((n=>n!==e)))),n((0,g.SI)(e))}),[n]);if(0===W.length)return(0,i.jsx)(v.n,{addlStyle:"main-panel"});const Q=null!=A?A:(0,u.vr)(R,G,W),$=(0,u.cc)(Q,t);let ee;D.current!==$.uid?(D.current=$.uid,I.current=function(e,n,t,i){let s=[t];for(;s.length<e;){const e=i[Math.floor(Math.random()*i.length)];s.every((t=>t[n]!==e[n]))&&(s=[...s,e])}return(0,k.Sy)(s),s}(x,"english",$,t),ee=(0,f.oneFromList)($.english)):ee=null!=q?q:(0,f.oneFromList)($.english);const ne=function(e,n,t){return function(){if(null==e?void 0:e.english.includes(",")){let i=(0,f.oneFromList)(e.english);for(;i===n;)i=(0,f.oneFromList)(e.english);t(i)}}}($,ee,Z),te=function(e,n,t,[s,r]){const{english:o,kanji:c,on:l,kun:u,uid:d}=e,h=s!==o;return{question:{toHTML:e=>t?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:a()({"correct-color":e}),children:(0,i.jsx)("span",{children:c})}),(void 0!==l||void 0!==u)&&(0,i.jsxs)("div",{className:a()({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,i.jsx)("span",{children:l}),(0,i.jsx)("span",{children:u})]})]}):(0,i.jsx)("div",{onClick:h?r:void 0,children:s+(h?"...":"")})},answer:d,choices:n.map((e=>({compare:e.uid,toHTML:n=>(null!=n?n:t)?e.english:e.kanji})))}}($,I.current,L,[ee,ne]),ie=function(e,n,t,i,s){return function(r){const a=r.compare===(null==n?void 0:n.answer),o=(null==n?void 0:n.choices.findIndex((e=>e.compare===(null==n?void 0:n.answer))))||-1;return a||(s.current>-1&&t.length>0?(clearTimeout(s.current),i(""),setTimeout((()=>i(r.toHTML(!e))),100)):(i(r.toHTML(!e)),s.current=window.setTimeout((()=>i("")),2500))),[a,o]}}(L,te,J,B,K),se=$&&!0===(null===(e=m[$.uid])||void 0===e?void 0:e.rein),re=(R+1)/G.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"tooltip-anchor",ref:z}),H,(0,i.jsx)(y,{question:te.question,isCorrect:ie,choices:te.choices,gotoPrev:U,gotoNext:_}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start",children:(0,i.jsx)(l.rU,{to:L?S.location:f.KanjiGameMeta.location,children:(0,i.jsx)(p.uY,{toggle:L,action:(0,d.kP)(F,(e=>!e))})})})}),(0,i.jsx)("div",{className:"col text-center",children:(0,i.jsx)(p.Qp,{visible:se&&$.uid!==G[W[R]].uid})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)("span",{children:te.question.toHTML(!1)}),(0,i.jsx)(p.R_,{addFrequencyTerm:Y,removeFrequencyTerm:X,toggle:se,term:$})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:re,color:se?"secondary":"primary"})})]})}},1540:(e,n,t)=>{t.r(n),t.d(n,{OppositesGameMeta:()=>p,default:()=>f});var i=t(5893),s=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(2850),u=t(6892),d=t(9983),h=t(9385),g=t(6537),v=t(2937);const p={location:"/opposites/",label:"Opposites Game"};function f(){const e=(0,c.I0)(),{value:n}=(0,c.v9)((({opposite:e})=>e),((e,n)=>e.version===n.version)),[t,r]=(0,c.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t}=e;return[n,t]}),c.wU);(0,o.useEffect)((()=>{0===n.length&&e((0,h.bt)())}),[]);const p=(0,o.useMemo)((()=>0===n.length?[]:(0,d.tq)(n)),[n]),[f,m]=(0,o.useState)(0);if(0===p.length)return(0,i.jsx)(g.n,{addlStyle:"main-panel"});const j=function(e,n,t){let[s,r]=e[n[t]];const o=l.TZ.parse(s),c=l.TZ.parse(r),d=Object.assign(Object.assign({},s),{toHTML:e=>(0,i.jsx)("span",{className:a()({"correct-color":e}),children:o.toHTML()})}),h=Object.assign(Object.assign({},r),{compare:r.japanese,toHTML:()=>c.toHTML()});let g=[h],v=[h.romaji,d.romaji];for(;g.length<4;){const n=Math.floor(Math.random()*e.length),[t,i]=e[n];if(!v.includes(t.romaji)&&!v.includes(i.romaji))if(0===Math.floor(2*Math.random())){const e=l.TZ.parse(t);g=[...g,Object.assign(Object.assign({},t),{compare:t.japanese,toHTML:()=>e.toHTML()})],v=[...v,t.romaji]}else{const e=l.TZ.parse(i);g=[...g,Object.assign(Object.assign({},i),{compare:i.japanese,toHTML:()=>e.toHTML()})],v=[...v,i.romaji]}}return(0,u.Sy)(g),{question:d,answer:h,choices:g}}(n,p,f),b=(f+1)/n.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z,{question:j.question,isCorrect:e=>e.compare===j.answer.compare,choices:j.choices,qRomaji:t,aRomaji:r,gotoPrev:function(){const e=n.length,t=f-1;m(t<0?(e+t)%e:t%e)},gotoNext:function(){const e=n.length;m((f+1)%e)}},0),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:b})},1)]})}},4921:(e,n,t)=>{t.r(n),t.d(n,{ParticlesGameMeta:()=>v,default:()=>p});var i=t(5893),s=t(7294),r=t(743),a=t(9041),o=t(6892),c=t(3996),l=t(9983),u=t(6537),d=t(2937),h=t(7988),g=t(2850);const v={location:"/particles/",label:"Particles Game"};function p(){const e=(0,r.I0)(),{phrases:n,particles:t}=(0,r.v9)((({particle:e})=>e.particleGame));(0,s.useEffect)((()=>{0===n.length&&e((0,h.aq)())}),[]);const v=(0,s.useRef)([]),[p,f]=(0,s.useState)(0),m=(0,r.v9)((({particle:e})=>e.setting.aRomaji)),j=function(e,n,t){if(0===n.length||0===t.length)return;0===v.current.length&&(v.current=(0,l.tq)(n));const i=n[v.current[e]],{answer:s,question:r,english:a,literal:u}=i,d=Object.assign(Object.assign({},s),{toHTML:()=>s.html});t=t.map((e=>Object.assign(Object.assign({},e),{toHTML:()=>e.html})));const h=function(e,n){let t=[e];for(;t.length<4;){const e=n[Math.floor(Math.random()*n.length)];t.every((n=>n.japanese!==e.japanese))&&(t=[...t,e])}return(0,o.Sy)(t),t}(d,t);return{question:{english:a,toHTML:e=>((e,{start:n,end:t},i)=>{const s=i?"correct-color":"transparent-font underline";return(0,c.tn)(null==e?void 0:e.parseObj,{hidden:s},n,t)})(g.TZ.parse(r),d,e)},answer:d,choices:h,literal:u}}(p,n,t);if(void 0===j)return(0,i.jsx)(u.n,{addlStyle:"main-panel"});const b=(p+1)/n.length*100;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{question:j.question,isCorrect:e=>e.japanese===j.answer.japanese,hint:j.literal,choices:j.choices,aRomaji:m,gotoPrev:function(){const e=n.length,t=p-1;f(t<0?(e+t)%e:t%e)},gotoNext:function(){const e=n.length;f((p+1)%e)}},0),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(a.Z,{variant:"determinate",value:b})},1)]})}},8859:(e,n,t)=>{t.r(n),t.d(n,{KanaGameMeta:()=>f,buildChoiceButton:()=>x,default:()=>m,usePrepareGame:()=>b});var i=t(5893),s=t(5529),r=t(4184),a=t.n(r),o=t(7294),c=t(9815),l=t(8670),u=t(6537),d=t(2405),h=t(7127),g=t(743),v=t(6892),p=t(4133);const f={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function m(){const{hiragana:e,katakana:n,vowels:t,consonants:r,sounds:v,choiceN:p,wideMode:f,easyMode:m,charSet:j}=function(){const e=(0,g.v9)((({global:e})=>e.debug)),[n,t,i,s,r]=(0,g.v9)((({kana:e})=>{const{hiragana:n,katakana:t,vowels:i,consonants:s,sounds:r}=e;return[n,t,i,s,r]}),(()=>!0)),[a,o,c,l]=(0,g.v9)((({kana:e})=>{const{wideMode:n,easyMode:t,charSet:i,choiceN:s}=e.setting;return[n,t,i,s]}),g.wU);return{debug:e,hiragana:n,katakana:t,vowels:i,consonants:s,sounds:r,choiceN:a?31:l,wideMode:a,easyMode:o,charSet:c}}(),y=(0,o.useRef)(t),w=(0,o.useRef)(r),k=(0,o.useRef)(v),N=(0,o.useRef)(e),T=(0,o.useRef)(n),S=(0,o.useRef)(f),C=(0,o.useRef)(m),M=(0,o.useRef)(p),[O,R]=(0,o.useState)(0),[P,A]=(0,o.useState)([]),[E,D]=(0,o.useState)(!1),{prepareGame:L,setWrongs:F,setCorrect:I,answer:q,correct:Z,question:G,wrongs:W,choices:V,gameOrder:_}=b({charSet:j,choiceN:M.current,wideMode:S.current,practiceSide:E,reinforce:P,selectedIndex:O,vowelsR:y,consonantsR:w,soundsR:k,hiraganaR:N,katakanaR:T}),U=(0,o.useCallback)((()=>{const e=_.length;R((O+1)%e),F([]),I(!1)}),[I,F,_,O]),K=(0,o.useCallback)((()=>{const e=_.length,n=O-1;R(n<0?(e+n)%e:n%e),F([]),I(!1)}),[I,F,_,O]),H=function({setCorrect:e,setWrongs:n,setReinforce:t,gotoNext:i,answer:s,choices:r,wrongs:a,reinforce:o,practiceSide:c}){return function(l){if(l.val===(null==s?void 0:s.val))e(!0),setTimeout(i,500);else{const e=r.findIndex((e=>e.val===l.val));n([...a,e]),t([...o,Object.assign(Object.assign({},l),{practiceSide:c})])}}}({setCorrect:I,setWrongs:F,setReinforce:A,gotoNext:U,practiceSide:E,answer:q,choices:V,wrongs:W,reinforce:P}),z=x({checkAnswer:H,charSet:j,practiceSide:E,wrongs:W,choices:V,answer:q,correct:Z,wideMode:S.current,easyMode:C.current,choiceN:M.current});if((0,o.useEffect)((()=>{N.current.length>0&&L()}),[O,E,j]),!G)return(0,i.jsx)(u.n,{addlStyle:"kana"});const J=a()({"kana main-panel h-100":!0}),B=a()({"choices-row d-flex justify-content-around":!0,"w-50":!S.current,"w-100":S.current});return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)("div",{className:J,children:(0,i.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(h.Z,{ariaLabel:"Previous",action:K,children:(0,i.jsx)(s.wyc,{size:16})}),!S.current&&(0,i.jsxs)("div",{className:a()({"pt-3 d-flex flex-column justify-content-center text-center w-50":!0,"correct-color":Z}),children:[(0,i.jsx)("h1",{className:"clickable",children:G}),C.current&&!E&&(0,i.jsx)("div",{className:"d-flex justify-content-around",children:(0,i.jsx)("h6",{children:(0,c.Vj)(G)})})]}),(0,i.jsx)("div",{className:B,children:(0,i.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:V.map(((e,n)=>z(n)))})}),(0,i.jsx)(h.Z,{ariaLabel:"Next",action:U,children:(0,i.jsx)(s.XCv,{size:16})})]})}),(0,i.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)(d.uY,{toggle:E,action:(0,l.kP)(D,(e=>!e))})}),(0,i.jsx)("div",{className:"col"}),(0,i.jsx)("div",{className:"col"})]})})]})}function j(e){let n;return n=e===p.kS.MIXED?Math.floor(2*Math.random()):e,n}function b({charSet:e,choiceN:n,wideMode:t,vowelsR:i,consonantsR:s,soundsR:r,hiraganaR:a,katakanaR:c,practiceSide:l,reinforce:u,selectedIndex:d}){const[h,g]=(0,o.useState)("undefined"),[f,m]=(0,o.useState)({val:"",hint:"",cSet:p.kS.HIRAGANA}),[b,x]=(0,o.useState)([]),[y,w]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[T,S]=(0,o.useState)(!1),C=(0,o.useCallback)((()=>{const o=a.current,h=c.current;let f,b,k;f=y.length>0?y:function(e){let n=[];const t=e[0].length,i=e.length;for(let e=0;e<t;e++)for(let t=0;t<i;t++)1==e&&12==t||3==e&&12==t||2==e&&14==t||0!==e&&15==t||(n=[...n,{vowel:e,consonant:t}]);return(0,v.Sy)(n),n}(o);const T=Math.random()<1/3,C=function({vowels:e,consonants:n,sounds:t}){return(i,s)=>{const r=n[i]+e[s];return t[r]||r}}({vowels:i.current,consonants:s.current,sounds:r.current}),M=function({hiragana:e,katakana:n}){return(t,i,s)=>{let r;return r=s===p.kS.HIRAGANA?e[t][i]:n[t][i],r}}({hiragana:o,katakana:h});if(T&&u.length>0){const e=u[u.length-1];if(l===e.practiceSide)k=e;else{const{val:n,hint:t,cSet:i}=e;k={val:t,hint:n,cSet:i}}}else{const{consonant:n,vowel:t}=f[d];let i=j(e);const s=C(n,t),r=M(n,t,i);k=l?{val:r,hint:s,cSet:i}:{val:s,hint:r,cSet:i}}b=k.hint;let O=function({getPronunciation:e,getKanaCharacter:n,charSet:t,choiceN:i,practiceSide:s},r,a){let o=[r];const c=s;for(;o.length<i;){const i=0,s=a.length,r=Math.floor(Math.random()*(s-i)+i);let l=j(t);const u=e(a[r].consonant,a[r].vowel),d=n(a[r].consonant,a[r].vowel,l);let h;h=c?{val:d,hint:u,cSet:l}:{val:u,hint:d,cSet:l},(c&&!o.some((e=>e.hint===h.hint))||!c&&!o.some((e=>e.val===h.val)))&&(o=[...o,h])}return(0,v.Sy)(o),o}({getPronunciation:C,getKanaCharacter:M,charSet:e,choiceN:n,practiceSide:l},k,f);t&&(O=[...O,{val:b,hint:b,cSet:k.cSet,q:!0}]),g(b),m(k),x(O),w(f),N([]),S(!1)}),[e,y,s,i,r,a,c,l,u,d,t,n]);return{prepareGame:C,setWrongs:N,setCorrect:S,answer:f,correct:T,wrongs:k,question:h,choices:b,gameOrder:y}}function x({checkAnswer:e,wideMode:n,easyMode:t,charSet:s,practiceSide:r,wrongs:o,choices:l,answer:u,correct:d,choiceN:h}){return function(g){const v=o.includes(g),f=l[g].val===u.val&&d,m=a()({clickable:!l[g].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":f||n&&l[g].q&&d,"incorrect-color":v,"question-color":n&&l[g].q&&!d}),j=a()({"mb-0":n}),b="d-flex justify-content-around",x=a()({"mb-0":!0,invisible:!v}),y=n?3/4:1,w=Math.trunc(1/Math.ceil(Math.sqrt(h))*y*100)+"%",k=!r;let N;return N=!t||t&&!k?t&&!k&&!0!==l[g].q&&s===p.kS.MIXED?(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)("h6",{className:x,children:l[g].hint}),(0,i.jsx)("h6",{className:x,children:(0,c.Vj)(l[g].val)})]}):!0!==l[g].q?(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:x,children:l[g].cSet===u.cSet?l[g].hint:(0,c.Vj)(l[g].hint)})}):(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:"mb-0 invisible",children:(0,c.Vj)(l[g].val)})}):!0!==l[g].q?(0,i.jsxs)("div",{className:b,children:[(0,i.jsx)("h6",{className:x,children:l[g].cSet===p.kS.HIRAGANA?l[g].hint:(0,c.Vj)(l[g].hint)}),(0,i.jsx)("h6",{className:x,children:l[g].cSet===p.kS.HIRAGANA?(0,c.Vj)(l[g].hint):l[g].hint})]}):(0,i.jsx)("div",{className:b,children:(0,i.jsx)("h6",{className:"mb-0",children:(0,c.Vj)(l[g].val)})}),(0,i.jsxs)("div",{onClick:()=>{l[g].q||e(l[g])},className:m,style:{width:w},children:[(0,i.jsx)("h2",{className:j,children:l[g].val}),N]},g)}}},6291:(e,n,t)=>{t.r(n),t.d(n,{KanjiMeta:()=>T,default:()=>S});var i=t(5893),s=t(9041),r=t(5529),a=t(4184),o=t.n(a),c=t(5472),l=t.n(c),u=t(7294),d=t(743),h=t(2850),g=t(6892),v=t(9983),p=t(8670),f=t(6278),m=t(8673),j=t(4133),b=t(7891),x=t(6537),y=t(2405),w=t(7127),k=t(6176),N=t(6693);const T={location:"/kanji/",label:"Kanji"};function S(){var e,n,t;const a=(0,d.I0)(),c=(0,u.useCallback)((e=>{q((n=>[...n,e])),a((0,m.Mh)(e))}),[a]),T=(0,u.useCallback)((e=>{q((n=>n.filter((n=>n!==e)))),a((0,m.SI)(e))}),[a]),{kanjiList:S,vocabList:C,filterType:M,reinforce:O,activeTags:R,repetition:P}=(0,f.R)();(0,u.useEffect)((()=>{0===S.length&&a((0,m.tk)()),0===C.length&&a((0,b.Rz)())}),[]);const A=(0,u.useRef)(P);A.current=P;const[E,D]=(0,u.useState)(0),[L,F]=(0,u.useState)(void 0),[I,q]=(0,u.useState)([]),[Z,G]=(0,u.useState)(!1),[W,V]=(0,u.useState)(!1),[_,U]=(0,u.useState)(!1),[K,H]=(0,u.useState)(!1),z=(0,u.useMemo)((()=>{if(0===S.length)return[];if(0===Object.keys(A.current).length&&0===R.length)return S;const e=Object.keys(A.current).reduce(((e,n)=>{var t;return!0===(null===(t=A.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,v.Dm)(M.current,S,e,M.current===j.Lx.TAGS?R:[],(0,p.cM)(a,m.cy));const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=A.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return q(t),n}),[a,S,M,R]),J=(0,u.useMemo)((()=>0===z.length?[]:(0,v.tq)(z)),[z]),B=(0,u.useCallback)((()=>{const e=z.length;D((E+1)%e),F(void 0),G(!1),V(!1),U(!1),H(!1)}),[z,E]),Y=(0,u.useCallback)((()=>{let e=z;if(O.current&&M.current===j.Lx.TAGS){const n=Object.keys(P).reduce(((e,n)=>{var t;return!0===(null===(t=P[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]),t=S.filter((e=>n.includes(e.uid)));e=[...z,...t]}(0,v.hY)(O.current,M.current,I,e,P,L,F,B)}),[B,S,z,I,L,P,O,M]),X=(0,u.useCallback)((()=>{const e=z.length,n=E-1;D(n<0?(e+n)%e:n%e),F(void 0),G(!1),V(!1),U(!1),H(!1)}),[z,E]),Q=(0,u.useCallback)((e=>{"left"===e?Y():"right"===e&&X()}),[Y,X]),{HTMLDivElementSwipeRef:$}=(0,N.M)(Q);if(J.length<1)return(0,i.jsx)(x.n,{addlStyle:"main-panel"});const ee=null!=L?L:(0,v.vr)(E,z,J),ne=(0,v.cc)(ee,S),te=C.filter((e=>h.TZ.parse(e).getSpelling().includes(ne.kanji)&&e.english.toLowerCase()===ne.english.toLowerCase()||h.TZ.parse(e).getSpelling().includes(ne.kanji)&&e.english.toLowerCase().includes(ne.english.toLowerCase())&&"Verb"===e.grp||h.TZ.parse(e).getSpelling()===ne.kanji&&(e.english.toLowerCase().includes(ne.english.toLowerCase())||ne.english.toLowerCase().includes(e.english.toLowerCase()))));let ie=[];if(te.length>0){const[e,...n]=l()(te,(e=>e.english.length));ie=[e,...(0,g.Sy)(n)]}const se=(null===(e=ne.tag.find((e=>R.includes(e)&&(0,k.F)(e))))||void 0===e?void 0:e.replace("_"," "))||(null===(n=ne.tag.find((e=>(0,k.F)(e))))||void 0===n?void 0:n.replace("_"," "))||"",re=!0===(null===(t=P[ne.uid])||void 0===t?void 0:t.rein),ae=ie.slice(0,3).map(((e,n,t)=>(0,i.jsxs)(u.Fragment,{children:[e.english+" ",h.TZ.parse(e).toHTML(),n<t.length-1?"; ":"",(0,i.jsx)("wbr",{})]},e.uid))),oe=(0,i.jsx)("span",{children:ne.english}),ce=(E+1)/z.length*100;return(0,i.jsxs)(u.Fragment,{children:[(0,i.jsx)("div",{className:"kanji main-panel h-100",children:(0,i.jsxs)("div",{ref:$,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(w.Z,{ariaLabel:"Previous",action:X,children:(0,i.jsx)(r.wyc,{size:16})}),(0,i.jsx)("div",{className:"grp-info",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:ne.grp}),(0,i.jsx)("div",{children:se})]})}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"pt-0",children:(0,i.jsx)("span",{children:ne.kanji})}),ne.on&&(0,i.jsx)("h4",{className:"pt-0",onClick:(0,p.kP)(G,(e=>!e)),children:(0,i.jsx)("span",{children:Z?ne.on:"[On]"})})||(0,i.jsx)("h4",{className:"pt-0",children:"."}),ne.kun&&(0,i.jsx)("h4",{className:"pt-2",onClick:(0,p.kP)(V,(e=>!e)),children:(0,i.jsx)("span",{children:W?ne.kun:"[Kun]"})})||(0,i.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)("span",{className:o()({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===ae.length}),onClick:(0,p.kP)(U,(e=>!e)),children:(0,i.jsx)("span",{className:"text-nowrap",children:_&&ae.length>0?ae:"[Examples]"})}),(0,i.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:(0,p.kP)(H,(e=>!e)),children:K?oe:(0,i.jsx)("span",{children:"[Meaning]"})})]})]}),(0,i.jsx)("div",{className:"right-info"}),(0,i.jsx)(w.Z,{ariaLabel:"Next",action:Y,children:(0,i.jsx)(r.XCv,{size:16})})]})}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-start"})}),(0,i.jsx)("div",{className:"col text-center",children:(0,i.jsx)(y.Qp,{visible:void 0!==L&&""!==L})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsx)("div",{className:"d-flex justify-content-end",children:(0,i.jsx)(y.R_,{addFrequencyTerm:c,removeFrequencyTerm:T,toggle:re,term:ne,count:I.length})})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:"determinate",value:ce,color:re?"secondary":"primary"})})]})}},985:(e,n,t)=>{t.r(n),t.d(n,{PhrasesMeta:()=>M,default:()=>O});var i=t(5893),s=t(9041),r=t(5529),a=t(7294),o=t(743),c=t(7186),l=t(2850),u=t(5965),d=t(5863),h=t(9983),g=t(7962),v=t(8670),p=t(8218),f=t(9226),m=t(3518),j=t(6693),b=t(6281),x=t(8056),y=t(7652),w=t(4133),k=t(3968),N=t(6537),T=t(2405),S=t(9775),C=t(7127);const M={location:"/phrases/",label:"Phrases"};function O(){var e,n;const t=(0,o.I0)(),M=(0,a.useRef)(void 0),O=(0,a.useRef)(0),[E,D]=(0,a.useState)(void 0),[L,F]=(0,a.useState)([]),[I,q]=(0,a.useState)(-1),[Z,G]=(0,a.useState)(Date.now()),W=(0,a.useRef)(Date.now()),[V,_]=(0,a.useState)(0),[U,K]=(0,a.useState)(null),[H,z]=(0,a.useState)(null),[J,B]=(0,a.useState)(null),[Y,X]=(0,a.useState)([]),[Q,$]=(0,a.useState)(!1),{englishSideUp:ee,repetition:ne,motionThreshold:te,swipeThreshold:ie,phraseList:se,activeGroup:re,reinforce:ae,romajiActive:oe,filterType:ce,sortMethod:le}=function(){const[e,n,t]=(0,o.v9)((({global:e})=>[e.debug,e.motionThreshold,e.swipeThreshold]),o.wU),{value:i}=(0,o.v9)((({phrases:e})=>e),((e,n)=>e.version===n.version)),{repetition:s}=(0,o.v9)((({phrases:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),r=(0,o.v9)((({phrases:e})=>{const{practiceSide:n}=e.setting;return n})),[c,l,u,d]=(0,o.v9)((({phrases:e})=>{const{reinforce:n,filter:t,ordered:i,romaji:s}=e.setting;return[n,t,i,s]}),o.wU),h=(0,o.v9)((({vocabulary:e})=>{const{activeGroup:n}=e.setting;return n}),o.wU),g=(0,a.useRef)(c);g.current=c;const v=(0,a.useRef)(l);v.current=l;const p=(0,a.useRef)(u);p.current=u;const f=(0,a.useRef)(d);return f.current=d,{englishSideUp:r,repetition:s,debugLevel:e,motionThreshold:n,swipeThreshold:t,phraseList:i,activeGroup:h,reinforce:g,romajiActive:f,filterType:v,sortMethod:p}}(),ue=(0,a.useRef)(ne);ue.current=ne,(0,a.useEffect)((()=>{0===se.length&&t((0,y.cC)())}),[]);const de=(0,a.useMemo)((()=>{const e=ue.current;if(0===se.length)return[];if(0===Object.keys(e).length&&0===re.length)return se;const n=Object.keys(e).reduce(((n,t)=>{var i;return!0===(null===(i=e[t])||void 0===i?void 0:i.rein)&&(n=[...n,t]),n}),[]),i=(0,h.Dm)(ce.current,se,n,re,(0,v.cM)(t,y.f6)),s=i.reduce(((n,t)=>{var i;return!0===(null===(i=e[t.uid])||void 0===i?void 0:i.rein)&&(n=[...n,t.uid]),n}),[]);return X(s),i}),[t,se,ce,re]),he=(0,a.useMemo)((()=>{const e=ue.current;if(0===de.length)return[];let n;switch(le.current){case w.vl.RANDOM:n=(0,h.tq)(de);break;case w.vl.VIEW_DATE:n=(0,h.EL)(de,e);break;default:({order:n}=(0,h.fx)(de))}return n}),[de]),ge=(0,a.useCallback)((()=>{const e=de.length;let n=(V+1)%e;n===I&&(n=(e+n+1)%e),W.current=Z,G(Date.now()),O.current=V,_(n),D(void 0)}),[de,V,Z,I]),ve=(0,a.useCallback)((()=>{(0,h.hY)(ae.current,ce.current,Y,de,ue.current,E,(e=>{M.current=E,D(e)}),ge)}),[t,ae,ce,Y,de,E,ge]),pe=(0,a.useCallback)((()=>{const e=de.length;let n;n=E?V:(e+(V-1))%e,n===I&&(n=(e+n-1)%e),W.current=Z,G(Date.now()),O.current=V,_(n),D(void 0)}),[de,V,E,Z,I]),fe=function(e,n,t,i,s,r,a,o){return function(d,v){let p;if("left"===d)e(),p=Promise.all([Promise.resolve()]);else if("right"===d)n(),p=Promise.all([Promise.resolve()]);else{const e=null!=t?t:(0,h.vr)(i,a,r),n=(0,h.cc)(e,s),f=o?"/override_cache":"";if("up"===d){const t=(0,l._I)(n),i=(0,g.b1)(c.vT+f,{tl:"ja",q:t,uid:e});p=(0,u.R$)(i,v)}else if("down"===d){const e=n.english,t=(0,g.b1)(c.vT+f,{tl:"en",q:e,uid:n.uid+".en"});p=(0,u.R$)(t,v)}}return p||Promise.reject()}}(ve,pe,E,V,se,he,de,Q),me=(0,p.E)(te),{beginLoop:je,abortLoop:be,looperSwipe:xe,loopSettingBtn:ye,loopActionBtn:we,timedPlayAnswerHandlerWrapper:ke,gradeTimedPlayEvent:Ne,resetTimedPlay:Te,loop:Se,tpAnswered:Ce,tpAnimation:Me}=(0,b.T)(fe,ee,me);(0,a.useEffect)((()=>{var e;const n={selectedIndex:O.current,reinforcedUID:M.current,lastNext:W.current};if(E!==n.reinforcedUID||V!==n.selectedIndex){const i=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,h.vr)(n.selectedIndex,de,he);if((0,h.Zc)(n.lastNext)){const e=(0,h.cc)(i,se),s=i!==n.reinforcedUID;t((0,y.s5)({uid:i,shouldIncrement:s})).unwrap().then((s=>{var r;const{map:a,prevMap:o}=s,c=o[i]&&(null===(r=o[i])||void 0===r?void 0:r.d),l={[i]:Object.assign(Object.assign({},a[i]),{d:c})},u=(e,n)=>t((0,x.kg)(e,n)),h=void 0!==n.reinforcedUID;void 0!==Ce.current?(0,d.lP)(u,e,l,{frequency:h}):(0,d.Ps)(u,e,l,{frequency:h})}))}Te()&&(0,h.u3)(n.lastNext)&&je(),K(null),z(null),B(null),F([]),O.current=V,M.current=E}}),[t,je,Te,E,V,se,de,he,Se]),(0,a.useEffect)((()=>{t((0,x.kg)((0,h.w_)(le.current,["Random","Alphhabetic","View Date"]),w.x6.DEBUG))}),[t]),(0,f.q)(fe,(0,v.cM)(t,y.d1),ke),(0,m.Z)("Phrases Loop",Se,je,be,xe);const{HTMLDivElementSwipeRef:Oe}=(0,j.M)(fe,ke);if(de.length<1||he.length<1)return(0,i.jsx)(N.n,{addlStyle:"main-panel"});const Re=null!=E?E:(0,h.vr)(V,de,he),Pe=(0,h.cc)(Re,se),Ae=function(e,n,t,s,r){const a=n?{tl:"en",q:t.english,uid:t.uid+".en"}:{tl:"ja",q:(0,l._I)(t),uid:(0,h.gW)(t)};return(0,i.jsx)(k.Z,{visible:0===e&&0===r,word:a,reCache:s})}(ie,ee,Pe,Q,Se),[Ee,De]=function(e){const n=l.TZ.parse(e);return[n,n.toHTML()]}(Pe),Le=function(e,n,t){return(0,i.jsx)("span",{onClick:e.lit?()=>{t((n=>n?null:e.uid))}:void 0,children:n?e.lit:e.english})}(Pe,J,B),{topValue:Fe,bottomValue:Ie,bottomLabel:qe}=(0,h.JS)(ee,Le,De,R,P),Ze=Pe&&((null===(e=Pe.lit)||void 0===e?void 0:e.length)||Pe.english.length)<55,Ge=Ee&&Ee.getSpelling().length<55,{aboveSmallCss:We,aboveLargeCss:Ve,belowNoInterruptCss:_e,belowSmallCss:Ue,belowLargeCss:Ke}=function(e,n,t){const i={"fs-display-5":!0},s=i;return{aboveSmallCss:Object.assign({},e?{[t?"h1":"h3"]:!0}:{[n?"h1":"h3"]:!0}),aboveLargeCss:i,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:Object.assign({},e?{[n?"h1":"h3"]:!0}:{[t?"h1":"h3"]:!0}),belowLargeCss:s}}(ee,Ge,Ze),He=!0===(null===(n=ne[Pe.uid])||void 0===n?void 0:n.rein),ze=Pe.romaji,Je=(V+1)/de.length*100;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:"phrases main-panel h-100",children:(0,i.jsxs)("div",{ref:Oe,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(C.Z,{ariaLabel:"Previous",action:pe,children:(0,i.jsx)(r.wyc,{size:16})}),(0,i.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(S.Z,{breakPoint:"md",largeClassName:Ve,smallClassName:We,children:Fe}),oe.current&&ze&&(0,i.jsx)("h5",{children:(0,i.jsx)("span",{onClick:(0,v.kP)(z,(e=>e?null:Re)),className:"clickable loop-no-interrupt",children:H===Re?ze:"[Romaji]"})}),(0,i.jsx)(S.Z,{className:_e,breakPoint:"md",onClick:(0,v.kP)(K,(e=>e?null:Re)),largeClassName:Ke,smallClassName:Ue,children:U===Re?Ie:qe}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:Ae})]}),(0,i.jsx)(C.Z,{ariaLabel:"Next",action:ve,children:(0,i.jsx)(r.XCv,{size:16})})]})}),(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,i.jsx)(T.uY,{toggle:ee,action:(0,v.cM)(t,y.d1)}),(0,i.jsx)(T.Ro,{active:Q,action:A(Q,$)}),(0,i.jsx)("div",{className:"sm-icon-grp",children:ye}),(0,i.jsx)("div",{className:"sm-icon-grp",children:we})]})}),(0,i.jsx)("div",{className:"col text-center",children:(0,i.jsx)(T.Qp,{visible:void 0!==E&&""!==E})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(T.D4,{visible:ee&&void 0!==Pe.lit&&""!==Pe.lit,toggle:J===Re,action:(0,v.kP)(B,(e=>e?null:Re))}),(0,i.jsx)(T.R_,{addFrequencyTerm:e=>{X((n=>[...n,e])),(0,v.cM)(t,y.Lp)(e)},removeFrequencyTerm:e=>{X((n=>n.filter((n=>n!==e)))),(0,v.cM)(t,y.gP)(e)},toggle:He,term:Pe,count:Y.length})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,i.jsx)(s.Z,{variant:null===Me?"determinate":"buffer",value:null===Me?Je:0,valueBuffer:null!=Me?Me:void 0,color:He?"secondary":"primary"})})]})}const R=(0,i.jsx)("span",{children:"[English]"}),P=(0,i.jsx)("span",{children:"[Japanese]"});function A(e,n){return function(){if(!1===e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},4567:(e,n,t)=>{t.d(n,{a:()=>u});var i=t(5893),s=(t(7294),t(5697)),r=t.n(s),a=t(5529),o=t(4184),c=t.n(o);function l(e,n,t,s,r){return(0,i.jsxs)("div",{className:c()({"p-0 px-2":!0,clickable:e}),onClick:()=>{e&&r(t)},children:[(0,i.jsxs)("span",{className:"p-1",children:[e&&(0,i.jsx)(a.oOx,{className:"incorrect-color",size:"small","aria-label":"remove"}),!e&&(0,i.jsx)(a.aNF,{size:"small","aria-label":"inactive"})]}),(0,i.jsx)("span",{className:"p-1",children:s})]},n)}function u(e){let n=[];const t=e.termsFreq.reduce(((t,i)=>{const s=e.terms.find((e=>e.uid===i));return s?t=[...t,s]:n=[...n,i],t}),[]).reduce(((e,n)=>{const t=n.grp?n.grp:"undefined";return e[t]?e[t]=[...e[t],n]:e[t]=[n],e}),{});return(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{children:"Frequency"},0),(0,i.jsx)("div",{children:Object.keys(t).map(((n,s)=>{const r=e.termsActive.includes(n);return(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("span",{className:c()({"font-weight-bold":r}),onClick:()=>e.toggleTermActiveGrp(n),children:n}),(0,i.jsx)("div",{children:t[n].map(((n,t)=>l(r,t,n.uid,n.english,e.removeFrequencyTerm)))})]},s)}))},1),n.length>0&&(0,i.jsxs)("div",{className:"mt-5 text-break",children:[(0,i.jsx)("span",{className:"font-weight-bold",children:"Manual cleanup"}),n.map(((n,t)=>l(!0,t,n,n,e.removeFrequencyTerm)))]})]})}u.propTypes={termsActive:r().array,termsFreq:r().array,terms:r().array,removeFrequencyTerm:r().func,toggleTermActiveGrp:r().func}},6176:(e,n,t)=>{t.d(n,{E:()=>g,F:()=>h});var i=t(5893),s=t(5472),r=t.n(s),a=t(3174),o=t.n(a),c=t(5697),l=t.n(c),u=t(7294),d=t(8737);function h(e){return e.includes("_")&&Number.isInteger(parseInt(e.split("_")[1],10))}function g(e){const{termsActive:n,termsTags:t,toggleTermActive:s,selectedCount:a}=e;(0,u.useEffect)((()=>{n.forEach((e=>{t.includes(e)||s(e)}))}),[n,t,s]);const[c,l]=o()(t,(e=>h(e))),g=Object.values(c.reduce(((e,n)=>{const t=n.split("_")[0];return e[t]?e[t]=[...e[t],n]:e[t]=[n],e}),{})),v=[...r()(l),...g.reduce(((e,n)=>[...e,...r()(n,(e=>{const[,n]=e.split("_");return Number.isInteger(parseInt(n,10))?parseInt(n,10):e}))]),[])],p=a&&a>0&&"("+a+")"||"";return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h5",{children:["Tag List ",p]},0),v.map(((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)(d.M,{active:n.includes(e),onClick:()=>{s(e)},children:e},t)},t+1)))]})}g.propTypes={termsTags:l().array,termsActive:l().array,toggleTermActive:l().func,selectedCount:l().number}},7885:(e,n,t)=>{t.r(n),t.d(n,{SettingsMeta:()=>A,default:()=>I});var i=t(5893),s=t(5529),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(2850),u=t(9983),d=t(8670),h=t(5507),g=t(8056),v=t(1659),p=t(8673),f=t(9385),m=t(7988),j=t(7652),b=t(4133),x=t(7891),y=t(5697),w=t.n(y),k=t(245),N=t(195);function T(e){const[n]=(0,o.useState)(e.initial),t=32;let s=[],r={};for(let e=4;e<17;e++){const n=(e-4)/13*75;s=[...s,{value:n,raw:e}],r["r"+n]=e,r["s"+e]=n}s=[...s,{value:100,raw:t}],r.r100=t,r.s32=100;const a=e=>r["r"+e];return(0,i.jsxs)("div",{className:"kana-slider",children:[(0,i.jsx)(k.Z,{id:"discrete-slider-restrict",gutterBottom:!0,children:"Difficulty"}),(0,i.jsx)(N.ZP,{defaultValue:(c=n,r["s"+c]),valueLabelFormat:a,getAriaValueText:e=>""+a(e),"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:s,onChangeCommitted:(n,i)=>{"number"==typeof i&&(n=>{const i=e.initial,s=a(n);s!==t&&i!==t&&s!==i||s!==t&&i===t&&s!==i?(e.setChoiceN(s),!0===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide()):s===t&&s!==i&&(e.setChoiceN(s),!1===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide())})(i)}})]});var c}T.propTypes={initial:w().number,wideMode:w().bool,setChoiceN:w().func,toggleWide:w().func};var S=t(6537),C=t(7567),M=t(4567),O=t(6176);const R=(0,o.lazy)((()=>Promise.all([t.e(557),t.e(251)]).then(t.bind(t,598)))),P=(0,o.lazy)((()=>Promise.all([t.e(816),t.e(557),t.e(196)]).then(t.bind(t,4196)))),A={location:"/settings/",label:"Settings"};function E(e,n){const t=n.cause;switch(e((0,g.zA)(b.x6.DEBUG)),null==t?void 0:t.code){case"StaleVocabActiveGrp":{const i=t.value;e((0,g.kg)("Error: "+n.message,b.x6.ERROR)),e((0,g.kg)("Group "+JSON.stringify(i)+" Removed",b.x6.ERROR)),e((0,x.sG)(i))}break;case"StalePhraseActiveGrp":{const i=t.value;e((0,g.kg)("Error: "+n.message,b.x6.ERROR)),e((0,g.kg)("Group "+JSON.stringify(i)+" Removed",b.x6.ERROR)),e((0,j.cz)(i))}break;case"DeviceMotionEvent":e((0,g.kg)("Error: "+n.message,b.x6.ERROR)),e((0,g.cv)(0))}}function D(e,n,t){return function(i){try{(0,u.Mm)(i,n,(e=>{t(Number(e.toFixed(2))),setTimeout((()=>{t(void 0)}),300)}))}catch(n){n instanceof Error&&E(e,n)}}}function L(e,n){const t=e?(0,i.jsx)(s.oOx,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,i.jsx)(s.wl8,{className:"clickable",size:"medium","aria-label":"expand"});return(0,i.jsx)("h2",{onClick:()=>n((e=>!e)),children:t})}const F=a()({"mb-5":!0});function I(){const e=(0,c.I0)(),n=(0,o.useRef)(void 0),{darkMode:t,swipeThreshold:r,motionThreshold:y,memory:w,debug:k,kanjiChoiceN:N,kanjiFilter:A,kanjiReinforce:I,kanjiActiveTags:q,oppositesQRomaji:Z,oppositesARomaji:G,choiceN:W,wideMode:V,easyMode:_,charSet:U,particlesARomaji:K,vocabList:H,kanjiTagObj:z,phraseList:J,KanjiList:B,vocabMeta:Y,phraseMeta:X,kanjiMeta:Q}=(0,h.Eh)(),[$,ee]=(0,o.useState)(!1),[ne,te]=(0,o.useState)(!1),[ie,se]=(0,o.useState)(!1),[re,ae]=(0,o.useState)(!1),[oe,ce]=(0,o.useState)(!1),[le,ue]=(0,o.useState)(""),[de,he]=(0,o.useState)(""),[ge,ve]=(0,o.useState)(""),[pe,fe]=(0,o.useState)(!1),[me,je]=(0,o.useState)([]),[be,xe]=(0,o.useState)(0);(0,o.useEffect)((()=>{var t;return e((0,g.M4)()),0===H.length&&e((0,x.Rz)()),0===z.length&&e((0,p.tk)()),0===J.length&&e((0,j.cC)()),navigator.serviceWorker.addEventListener("message",ye),null===(t=navigator.serviceWorker.controller)||void 0===t||t.postMessage({type:"SW_VERSION"}),()=>{navigator.serviceWorker.removeEventListener("message",ye),n.current&&window.removeEventListener("devicemotion",n.current)}}),[]),(0,o.useEffect)((()=>{y>0&&void 0===n.current?(n.current=D(e,y,xe),(0,u.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>E(e,n)))):0===y&&void 0!==n.current?(window.removeEventListener("devicemotion",n.current),n.current=void 0):(n.current&&window.removeEventListener("devicemotion",n.current),n.current=D(e,y,xe),(0,u.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>E(e,n))))}),[e,y]);const ye=(0,o.useCallback)((n=>{if("DO_HARD_REFRESH"===n.data.type){const{error:t}=n.data;t&&e((0,g.kg)(t,b.x6.ERROR)),setTimeout((()=>{ee(!1),fe(t)}),2e3)}else if("SW_VERSION"===n.data.type){const{swVersion:e,jsVersion:t,bundleVersion:i}=n.data;ue(e),he(t),ve(i)}}),[e]),{keys:we,list:ke}=(0,o.useMemo)((()=>(0,u.XQ)(Y,H,"[Stale Vocabulary]")),[H,Y]),{keys:Ne,list:Te}=(0,o.useMemo)((()=>(0,u.XQ)(X,J,"[Stale Phrase]")),[J,X]),{keys:Se,list:Ce}=(0,o.useMemo)((()=>(0,u.XQ)(Q,B,"[Stale Kanji]")),[B,Q]),Me=(0,o.useMemo)((()=>{return(e=[...J,...H]).reduce(((n,t,s)=>{const r=l.TZ.parse(t);if(r.hasFurigana())try{(0,l.Wp)(r.getPronunciation(),r.getSpelling())}catch(a){if(a instanceof Error&&"cause"in a){const o=a.cause;if("ParseError"===o.code||"InputError"===o.code){const c=(0,i.jsx)("hr",{},`parse-err-sep-${t.uid}`),l=(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("span",{className:"col p-0",children:r.toHTML({showError:!1})}),(0,i.jsx)("span",{className:"col p-0",children:t.english}),(0,i.jsxs)("span",{className:"col p-0 app-sm-fs-xx-small",children:[(0,i.jsx)("div",{children:a.message}),(0,i.jsx)("div",{children:o.info?JSON.stringify(o.info):""})]})]},`parse-err-${t.uid}`);return n.length>0&&s<e.length-1?[...n,c,l]:[...n,l]}}}return n}),[]);var e}),[H,J]),Oe=(0,o.useMemo)((()=>new Set([...we,...Ne,...Se])),[we,Ne,Se]),Re=(0,o.useMemo)((()=>{return(e=[...ke,...Te,...Ce]).reduce(((n,t,s)=>{const r=(0,i.jsx)("hr",{},`stale-meta-${t.uid}`),a=(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("span",{className:"col p-0",children:t.key}),(0,i.jsx)("span",{className:"col p-0",children:t.english}),(0,i.jsx)("span",{className:"col p-0 app-sm-fs-xx-small",children:(0,i.jsx)("div",{children:t.uid})})]},s);return n.length>0&&s<e.length?[...n,r,a]:[...n,a]}),[]);var e}),[ke,Te,Ce]);if(H.length<1||J.length<1||z.length<1)return(0,i.jsx)(S.n,{addlStyle:"main-panel"});const Pe=Object.values(B).filter((e=>e.tag.some((e=>q.includes(e))))),Ae=Pe.map((e=>e.uid)),Ee=Object.keys(Q).filter((e=>{var n;return!0===(null===(n=Q[e])||void 0===n?void 0:n.rein)})),De=Ee.filter((e=>!Ae.includes(e)));return(0,i.jsx)("div",{className:"settings",children:(0,i.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,i.jsxs)("div",{className:F,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Global"}),(0,i.jsx)("h2",{})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,i.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,i.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===r}),children:[(0,i.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(r-1<=0?(0,g.nh)(0):(0,g.nh)(r-1))},children:"-"}),(0,i.jsx)("div",{className:"px-2",children:r}),(0,i.jsx)("div",{className:"clickable px-2",onClick:()=>e((0,g.nh)(r+1)),children:"+"})]}),(0,i.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===y}),children:[(0,i.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(y-.5<=0?(0,g.cv)(0):(0,g.cv)(y-.5))},children:"-"}),(0,i.jsx)("div",{className:a()({"px-2":!0,"correct-color":be>y&&be<=y+1,"question-color":be>y+1&&be<=y+2,"incorrect-color":be>y+2}),children:null!=be?be:y}),(0,i.jsx)("div",{className:"clickable px-2",onClick:()=>{e((0,g.cv)(y+.5))},children:"+"})]})]}),(0,i.jsxs)("div",{className:"column-2",children:[(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(C.Z,{active:t,action:(0,d.cM)(e,g.In),statusText:(t?"Dark":"Light")+" Mode"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(C.Z,{active:r>0,action:()=>{e(r>0?(0,g.nh)(0):(0,g.nh)(1))},statusText:"Touch Swipes"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(C.Z,{active:y>0,action:()=>{e(0===y?(0,g.cv)(6):(0,g.cv)(0))},statusText:"Accelerometer"})})]})]})})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Phrases"}),L(re,ae)]}),re&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(S.n,{addlStyle:"phrases-settings",text:"Loading..."}),children:(0,i.jsx)(R,{})})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Vocabulary"}),L(ie,se)]}),ie&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(S.n,{addlStyle:"vocabulary-settings",text:"Loading..."}),children:(0,i.jsx)(P,{})})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h2",{children:"Kanji"}),L(ne,te)]}),ne&&(0,i.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,i.jsxs)("div",{className:"column-1",children:[(0,i.jsx)("h4",{children:(0,u.w_)(A,["Kanji Group","Frequency List","Tags"])}),(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(C.Z,{active:A%2==0,action:(0,d.cM)(e,p.cy),color:"default",statusText:"Filter by"})}),A===b.Lx.FREQUENCY&&0===Ee.length&&(0,i.jsx)("div",{className:"fst-italic",children:"No words have been chosen"}),A===b.Lx.TAGS&&(0,i.jsx)(O.E,{selectedCount:0===Pe.length?Object.values(B).length:Pe.length,termsTags:z,termsActive:q,toggleTermActive:(0,d.cM)(e,p.X8)}),A===b.Lx.FREQUENCY&&Ee.length>0&&(0,i.jsx)(M.a,{termsActive:q,termsFreq:Ee,terms:B,removeFrequencyTerm:(0,d.cM)(e,p.SI),toggleTermActiveGrp:(0,d.cM)(e,p.LD)})]}),(0,i.jsx)("div",{className:"column-2 setting-block",children:(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(C.Z,{active:I,action:(0,d.cM)(e,p.vT),disabled:A===b.Lx.FREQUENCY,statusText:(I?"(+"+De.length+") ":"")+"Reinforcement"})})})]})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Opposites Game"})}),(0,i.jsxs)("div",{className:"setting-block",children:[(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(C.Z,{active:Z,action:(0,d.cM)(e,f.Cz),statusText:"Question Romaji"})}),(0,i.jsx)("div",{children:(0,i.jsx)(C.Z,{active:G,action:(0,d.cM)(e,f.CO),statusText:"Answer Romaji"})})]})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Kana Game"})}),(0,i.jsxs)("div",{className:"setting-block",children:[(0,i.jsx)("div",{children:(0,i.jsx)(C.Z,{active:U===b.kS.HIRAGANA,action:(0,d.cM)(e,v.I_),statusText:(0,u.w_)(U,["Hiragana","Katakana","Mixed"])})}),(0,i.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,i.jsx)(T,{initial:W,wideMode:V,setChoiceN:(0,d.cM)(e,v.Bs),toggleWide:(0,d.cM)(e,v.PD)})}),(0,i.jsx)("div",{children:(0,i.jsx)(C.Z,{active:_,action:(0,d.cM)(e,v._S),statusText:"Kana Hints"})})]})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Kanji Game"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,i.jsx)(T,{initial:N,setChoiceN:(0,d.cM)(e,p.ow)})})})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Particles Game"})}),(0,i.jsx)("div",{className:"setting-block",children:(0,i.jsx)(C.Z,{active:K,action:(0,d.cM)(e,m.ro),statusText:"Answer Romaji"})})]}),(0,i.jsxs)("div",{className:F,children:[(0,i.jsx)("div",{className:"d-flex justify-content-between",children:(0,i.jsx)("h2",{children:"Application"})}),(0,i.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,i.jsx)("div",{className:"column-1",children:(0,i.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,i.jsxs)("div",{className:"d-flex flex-row justify-content-between clickable",onClick:()=>{ue(""),he(""),ve(""),setTimeout((()=>{var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"SW_VERSION"})}),1e3)},children:[(0,i.jsxs)("div",{className:"pe-2",children:[(0,i.jsx)("div",{children:"swVersion:"}),(0,i.jsx)("div",{children:"jsVersion:"}),(0,i.jsx)("div",{children:"bundleVersion:"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:le}),(0,i.jsx)("div",{children:de}),(0,i.jsx)("div",{children:ge})]})]})})}),(0,i.jsxs)("div",{className:"column-2",children:[(0,i.jsx)("div",{className:"setting-block mb-2",children:(0,i.jsx)(C.Z,{active:k>b.x6.OFF,action:(0,d.cM)(e,g.zA),color:"default",statusText:(0,u.w_)(k,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,i.jsxs)("div",{className:a()({"d-flex justify-content-end mb-2":!0,"disabled-color":pe}),children:[(0,i.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,i.jsx)("div",{className:a()({"spin-a-bit":$}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:()=>{var e;ee(!0),fe(!1),setTimeout((()=>{$&&(ee(!1),fe(!0))}),3e3),null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"DO_HARD_REFRESH"})},children:(0,i.jsx)(s.bnu,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,i.jsx)("div",{className:"setting-block mb-2",children:(0,i.jsx)(C.Z,{active:w.persistent,action:(0,d.cM)(e,g.TJ),disabled:w.persistent,color:"default",statusText:w.persistent?"Persistent "+~~(w.usage/1024/1024)+"/"+~~(w.quota/1024/1024)+"MB":"Persistent off"})})]})]}),Re.length>0&&(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("h5",{children:"Stale Space Repetition"}),L(oe,ce)]}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)("span",{children:"keys: "+JSON.stringify(Array.from(Oe))})}),oe&&(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(S.n,{addlStyle:"failed-spacerep-view"}),children:(0,i.jsx)("div",{className:"failed-spacerep-view container mt-2 p-0",children:Re})})]}),Me.length>0&&(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("h5",{children:"Failed Furigana Parse"}),(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(S.n,{addlStyle:"failed-furigana-view"}),children:(0,i.jsx)("div",{className:"failed-furigana-view container mt-2 p-0",children:Me})})]})]})]})})}},4460:(e,n,t)=>{t.r(n),t.d(n,{VocabularyMeta:()=>X,default:()=>Q});var i=t(5893),s=t(9041),r=t(6514),a=t(8223),o=t(5529),c=t(3174),l=t.n(c),u=t(7294),d=t(743),h=t(7186),g=t(2850),v=t(5965),p=t(5863),f=t(9983),m=t(5439),j=t(7962),b=t(8670),x=t(8218),y=t(9226),w=t(3518),k=t(6693),N=t(6281);function T(){const[e,n,t]=(0,d.v9)((({global:e})=>[e.debug,e.swipeThreshold,e.motionThreshold]),d.wU),{value:i}=(0,d.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:s}=(0,d.v9)((({vocabulary:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[r,a,o]=(0,d.v9)((({vocabulary:e})=>{const{practiceSide:n,autoVerbView:t}=e.setting,{verbForm:i}=e;return[n,t,i]}),d.wU),[c,l,h,g,v,p,f,m]=(0,d.v9)((({vocabulary:e})=>{const{memoThreshold:n,reinforce:t,filter:i,hintEnabled:s,romaji:r,bareKanji:a,verbColSplit:o,ordered:c}=e.setting;return[n,t,i,s,r,a,o,c]}),d.wU),j=(0,d.v9)((({vocabulary:e})=>{const{verbFormsOrder:n}=e.setting;return n}),d.wU),b=(0,d.v9)((({vocabulary:e})=>{const{activeGroup:n}=e.setting;return n}),d.wU),x=(0,u.useRef)(c);x.current=c;const y=(0,u.useRef)(l);y.current=l;const w=(0,u.useRef)(h);w.current=h;const k=(0,u.useRef)(g);k.current=g;const N=(0,u.useRef)(m);return N.current=m,{englishSideUp:r,autoVerbView:a,verbForm:o,repetition:s,debugLevel:e,swipeThreshold:n,motionThreshold:t,vocabList:i,romajiEnabled:v,bareKanji:p,verbFormsOrder:j,verbColSplit:f,activeGroup:b,reinforce:y,hintEnabled:k,filterType:w,sortMethod:N,memoThreshold:x}}var S=t(8056),C=t(4133),M=t(7891),O=t(2409),R=t(8301),P=t(1436),A=t(7625),E=t(195),D=t(4184),L=t.n(D),F=t(5697),I=t.n(F),q=t(6892),Z=t(8916);function G(e){var n,t,s;const r=null!==(n=e.value)&&void 0!==n?n:30,[a,o]=(0,u.useState)(r);(0,u.useEffect)((()=>{o(r)}),[r]);const c=a/100,[l,d,h]=[13,110,256],g=[255,(0,q.t7)(0,255,c),0],v=[(0,q.t7)(255,0,c),255,0],p=[l,(0,q.t7)(255,d,c),(0,q.t7)(0,h,c)],m=[(0,q.t7)(g[0],v[0],c),(0,q.t7)(g[1],v[1],c),(0,q.t7)(g[2],v[2],c)],j=[(0,q.t7)(v[0],p[0],c),(0,q.t7)(v[1],p[1],c),(0,q.t7)(v[2],p[2],c)],x=[(0,q.t7)(m[0],j[0],c),(0,q.t7)(m[1],j[1],c),(0,q.t7)(m[2],j[2],c)],[y,w,k]=x.map((e=>Math.floor(e))),N="rgb("+y+","+w+","+k+",0.25)",T=[{value:f.YZ},{value:f.$t}],S=(0,b.iP)(),[C,M]=(0,u.useState)(-1),D=(0,u.useRef)(null),{x:F,y:I,strategy:G,refs:W,middlewareData:V,update:_}=(0,O.YF)({placement:"top",middleware:[(0,R.cv)({mainAxis:8,crossAxis:10}),(0,R.uY)(),(0,O.x7)({element:D})]});return(0,u.useEffect)((()=>{_()}),[_,S.height,S.width,e.manualUpdate]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:W.setReference,className:"sm-icon-grp clickable","aria-label":"Set difficulty",onClick:()=>{M((e=>{e>0&&clearTimeout(e);const n=setTimeout((()=>M(-1)),3500);return Number(n)}))},children:(0,i.jsx)(A.G,{icon:P.scR})}),(0,i.jsxs)("div",{id:"tooltip",ref:W.setFloating,style:{height:"200px",position:G,top:null!=I?I:0,left:null!=F?F:0,width:"max-content"},className:L()({invisible:C<0,"tooltip-fade":C<0,[Z.pK]:!0}),children:[(0,i.jsx)(E.ZP,{sx:{color:N},orientation:"vertical",value:a,onChange:(e,n)=>{clearTimeout(C),M(0),"number"==typeof n&&o(n)},onChangeCommitted:(n,t)=>{const i=setTimeout((()=>M(-1)),1e3);M(Number(i)),"function"==typeof e.onChange&&"number"==typeof t&&e.onChange(t)},marks:T,step:10,valueLabelFormat:e=>e>f.$t?"Pass":"Fail"}),(0,i.jsx)("div",{ref:D,id:"arrow",style:{position:G,height:8,width:8,bottom:-4,left:8+(null!==(s=null===(t=V.arrow)||void 0===t?void 0:t.x)&&void 0!==s?s:0)}})]})]})}G.propTypes={value:I().number,onChange:I().func,manualUpdate:I().string};var W=t(6537),V=t(2405),_=t(7127);function U(e){const n=e.list.length-1,[t,s]=(0,u.useState)((()=>Math.min(n,e.initial)));return(0,i.jsx)("div",{className:"vocabulary-slider",children:(0,i.jsx)(E.ZP,{defaultValue:t,valueLabelFormat:n=>e.list[n].label,getAriaValueText:n=>e.list[n].label,"aria-label":"Alphabetic quick scroll",step:1,min:0,max:n,valueLabelDisplay:"auto",onChangeCommitted:(n,t)=>{"number"==typeof t&&(e.setIndex(t),s(t))}},t)})}U.propTypes={initial:I().number.isRequired,list:I().array.isRequired,setIndex:I().func.isRequired};var K=t(9841),H=t(3968),z=t(9775);function J(e,n){const t=Math.trunc(e.length/2)+(e.length%2==0?0:1)-n;return Math.trunc(e.length/2)+t}function B(e){const n=(0,d.I0)(),{verb:t,reCache:s,linkToOtherTerm:r,showHint:a}=e,[o,c]=(0,u.useState)(void 0),[l,h]=(0,u.useState)(void 0),{verbForm:v,swipeThreshold:p,repetition:m,romajiEnabled:j,englishSideUp:b,hintEnabled:x,verbFormsOrder:y,verbColSplit:w}=T();(0,u.useEffect)((()=>{const e=t.uid;c((n=>n===e?n:void 0)),h((n=>n===e?n:void 0))}),[t]);const k=(e,t)=>{const s=L()({"pt-3 pe-sm-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"text-end":0!==e}),r=t.map(((e,t)=>{const s=L()({clickable:!0}),r=L()({invisible:v===e.name});return(0,i.jsxs)("div",{className:s,onClick:()=>{v===e.name?n((0,M.rZ)("dictionary")):n((0,M.rZ)(e.name))},children:[(0,i.jsx)("span",{className:r,children:"["}),(0,i.jsx)("span",{children:e.name}),(0,i.jsx)("span",{className:r,children:"]"})]},t)}));return(0,i.jsx)("div",{className:s,children:r},e)},N=(S=t,C=y,(0,u.useMemo)((()=>{var e,n,t,i,s,r,a,o,c,l;const u={dictionary:void 0===S?void 0:K.R.parse(S)},d=[{name:"-masu",value:null===(e=u.dictionary)||void 0===e?void 0:e.masuForm()},{name:"-mashou",value:null===(n=u.dictionary)||void 0===n?void 0:n.mashouForm()},{name:"dictionary",value:u.dictionary},{name:"-nai",value:null===(t=u.dictionary)||void 0===t?void 0:t.naiForm()},{name:"-saseru",value:null===(i=u.dictionary)||void 0===i?void 0:i.saseruForm()},{name:"-te",value:null===(s=u.dictionary)||void 0===s?void 0:s.teForm()},{name:"-ta",value:null===(r=u.dictionary)||void 0===r?void 0:r.taForm()},...null!==(null===(a=u.dictionary)||void 0===a?void 0:a.chattaForm())?[{name:"-chatta",value:null===(o=u.dictionary)||void 0===o?void 0:o.chattaForm()}]:[],...null!==(null===(c=u.dictionary)||void 0===c?void 0:c.reruForm())?[{name:"-reru",value:null===(l=u.dictionary)||void 0===l?void 0:l.reruForm()}]:[]];let h;return C&&C.length>0&&(h=C.reduce(((e,n)=>{const t=d.find((e=>e.name===n));return void 0!==t&&(e=[...e,t]),e}),[])),null!=h?h:d}),[S,C]));var S,C;const{t1:O,t2:R}=function(e,n){const t=J(e,n);return{t1:e.slice(0,t),t2:e.slice(t)}}(N,w),P=function(e,n,t){const i=(0,d.I0)(),s=!(n&&n[e]&&!1===n[e].f);return(0,u.useMemo)((()=>({furigana:{show:s,toggle:!1===t&&(()=>{i((0,M._n)(e))})||void 0}})),[i,e,s,t])}(t.uid,m,b),{inJapanese:A,inEnglish:E,romaji:D,japaneseObj:F}=function(e,n,t,i,s){const r=e.romaji||".",a=J(n,i),o=n.find((e=>e.name===t)),c=o?o.value:n[a].value;return{inJapanese:c.toHTML(s),inEnglish:e.english,romaji:r,japaneseObj:c}}(t,N,v,w,P),I=(0,u.useMemo)((()=>K.R.parse(t)),[t]),q=function(e,n,t,s){return(0,u.useMemo)((()=>{const r=!e;let a,o=[],c=!1,l=!1;n.constructor.name===K.R.name&&"isExceptionVerb"in n&&(c=n.isExceptionVerb()||3===n.getVerbClass(),l=n.isIntransitive(),a=n.getTransitivePair()||n.getIntransitivePair());const u=n.isNaAdj(),d=n.isSlang(),h=n.isKeigo();let g;return r&&(l||a)&&(o=[...o,(0,i.jsx)("span",{className:L()({clickable:a,"question-color":a}),onClick:a&&s?()=>{s(a)}:void 0,children:l?"intr":"trans"},o.length+1)]),r&&d&&(o=[...o,(0,i.jsx)("span",{children:"slang"},o.length+1)]),r&&h&&(o=[...o,(0,i.jsx)("span",{children:"keigo"},o.length+1)]),c&&o.length>0&&(o=[(0,i.jsx)("span",{children:"*"},o.length+1),...o]),g=o.length>0?(0,i.jsxs)("span",{children:[t,u&&(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,i.jsxs)("span",{className:"fs-5",children:[(0,i.jsx)("span",{children:" ("}),o.reduce(((e,n,t)=>t>0&&t<o.length?[...e,(0,i.jsx)("span",{children:" , "},o.length+t),n]:[...e,n]),[]),(0,i.jsx)("span",{children:")"})]})]}):c?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{children:[" ","*"]})]}):u?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t,g}),[e,n,t,s])}(b,I,A,r),Z=function(e,n,t,s){return(0,u.useMemo)((()=>{let r,a=[],o=!1;n.constructor.name===K.R.name&&"isExceptionVerb"in n&&(o=n.isIntransitive(),r=n.getTransitivePair()||n.getIntransitivePair());const c=n.isSlang(),l=n.isKeigo();let u;return e&&(o||r)&&(a=[...a,(0,i.jsx)("span",{className:L()({clickable:r,"question-color":r}),onClick:r&&s?()=>{s(r)}:void 0,children:o?"intr":"trans"},a.length+1)]),e&&c&&(a=[...a,(0,i.jsx)("span",{children:"slang"},a.length+1)]),e&&l&&(a=[...a,(0,i.jsx)("span",{children:"keigo"},a.length+1)]),u=a.length>0?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{children:" ("}),a.reduce(((e,n,t)=>t>0&&t<a.length?[...e,(0,i.jsx)("span",{children:" , "},a.length+t),n]:[...e,n]),[]),(0,i.jsx)("span",{children:")"})]})]}):t,u}),[e,n,t,s])}(b,I,E,r),{jLabel:G,eLabel:W}=(0,u.useMemo)((()=>{let e=(0,i.jsx)("span",{children:"[English]"}),n=(0,i.jsx)(z.Z,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(x&&a)if(b){const e=(0,f.tu)(F);e&&(n=e)}else{const n=(0,f.iz)(t);n&&(e=n)}return{jLabel:n,eLabel:e}}),[x,a,b,F,t]),{topValue:V,bottomValue:_,bottomLabel:U}=function(e,n,t,i,s){return(0,u.useMemo)((()=>{let r,a,o,c;return e?(r=n,a=t,o=i,c=s):(r=t,a=n,o=s,c=i),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:c}}),[e,n,t,i,s])}(b,Z,q,W,G),B=(0,u.useMemo)((()=>Object.assign(Object.assign({},t),{japanese:F.toString(),pronounce:t.pronounce&&F.getPronunciation(),form:v})),[t,F,v]),Y=(0,u.useMemo)((()=>b?{tl:"en",q:B.english,uid:B.uid+".en"}:{tl:"ja",q:(0,g._I)(B),uid:(0,f.gW)(B)}),[b,B]),X=(0,i.jsx)(H.Z,{visible:0===p,word:Y,reCache:s});return(0,i.jsxs)(i.Fragment,{children:[k(0,O),(0,i.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(z.Z,{breakPoint:"md",smallClassName:Object.assign({},b?{h5:!0}:{"fs-display-6":!0}),largeClassName:{"fs-display-6":!0},children:V}),j&&D&&(0,i.jsx)("div",{children:(0,i.jsx)("span",{className:"clickable loop-no-interrupt",onClick:()=>h((e=>e===t.uid?void 0:t.uid)),children:l===t.uid?D:"[romaji]"})}),(0,i.jsx)(z.Z,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:Object.assign({},b?{"fs-display-6":!0}:{h5:!0}),largeClassName:{"fs-display-6":!0},onClick:()=>c((e=>e===t.uid?void 0:t.uid)),children:o===t.uid?_:U}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:X})]},1),k(2,R)]})}function Y(e){var n;const t=(0,d.I0)(),{vocabulary:s,reCache:r,showHint:a}=e,[o,c]=(0,u.useState)(void 0),[l,h]=(0,u.useState)(void 0),[v,p]=(0,u.useState)(void 0),{swipeThreshold:m,repetition:j,romajiEnabled:x,englishSideUp:y,hintEnabled:w,bareKanji:k}=T();(0,u.useEffect)((()=>{const e=s.uid;c((n=>n===e?n:void 0)),h((n=>n===e?n:void 0))}),[s]);const N=(0,u.useCallback)((e=>t((0,M._n)(e))),[t]),S=(0,u.useMemo)((()=>(0,f.$q)(s.uid,j,y,N)),[N,s.uid,j,y]);let C=(0,i.jsx)("span",{children:"[Japanese]"}),O=(0,i.jsx)("span",{children:"[English]"});const R=g.TZ.parse(s),P=R.toHTML(S),A=(0,i.jsx)(u.Fragment,{children:s.english}),E=s.romaji,D=(0,f.hF)(y,R,P),L=(0,f.yT)(y,R,A);w&&a&&(y?C=(0,f.tu)(R)||C:O=(0,f.iz)(s)||O);const{topValue:F,bottomValue:I,bottomLabel:q}=(0,f.JS)(y,L,D,O,C),Z=!0===y&&!0===k&&!1===(null===(n=j[s.uid])||void 0===n?void 0:n.f),G=(0,u.useMemo)((()=>{let e=s;if(g.TZ.parse(s).isNaAdj()){const n=g.TZ.parse(s).append(v&&"な");e=Object.assign(Object.assign({},s),{japanese:n.toString(),pronounce:s.pronounce&&n.getPronunciation(),form:v})}return y?{tl:"en",q:s.english,uid:s.uid+".en"}:{tl:y?"en":"ja",q:(0,g._I)(e),uid:(0,f.gW)(e)}}),[s,y,v]),W=(0,u.useCallback)((()=>p((e=>e?void 0:"-na"))),[]),V=(0,i.jsx)(H.Z,{visible:0===m,word:G,reCache:r,onPushedPlay:W}),_=s.english.length<55;return(0,i.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,i.jsx)(z.Z,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},y?Object.assign({[_?"fs-display-6":"h3"]:!0},_?{"lh-xs":!0}:{}):{"fs-display-6":!0}),children:F}),x&&E&&(0,i.jsx)("h5",{children:(0,i.jsx)("span",{onClick:(0,b.kP)(h,(e=>e===s.uid?void 0:s.uid)),className:"clickable loop-no-interrupt",children:l===s.uid?E:"[Romaji]"})}),(0,i.jsx)(z.Z,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},y?{"fs-display-6":!0}:{[_?"fs-display-6":"h3"]:!0}),onClick:Z?void 0:(0,b.kP)(c,(e=>e===s.uid?void 0:s.uid)),children:o===s.uid||Z?I:q}),(0,i.jsx)("div",{className:"d-flex justify-content-center",children:V})]})}B.propTypes={verb:I().object.isRequired,reCache:I().bool,linkToOtherTerm:I().func,showHint:I().bool},Y.propTypes={vocabulary:I().object.isRequired,reCache:I().bool,showHint:I().bool};const X={location:"/vocabulary/",label:"Vocabulary"};function Q(){var e,n,t;const c=(0,d.I0)(),[O,R]=(0,u.useState)(!1),P=(0,u.useRef)(!1),A=(0,u.useRef)(void 0),E=(0,u.useRef)(0),[D,L]=(0,u.useState)(void 0),[F,I]=(0,u.useState)([]),[q,Z]=(0,u.useState)(-1),[K,H]=(0,u.useState)(Date.now()),z=(0,u.useRef)(Date.now()),[J,X]=(0,u.useState)(0),[Q,ee]=(0,u.useState)(void 0),[ne,te]=(0,u.useState)([]),[ie,se]=(0,u.useState)(!1),re=(0,u.useRef)(),[ae,oe]=(0,u.useState)(!1),{motionThreshold:ce,vocabList:le,memoThreshold:ue,reinforce:de,filterType:he,hintEnabled:ge,sortMethod:ve,activeGroup:pe,autoVerbView:fe,englishSideUp:me,verbForm:je,repetition:be}=T(),xe=(0,u.useRef)(be);xe.current=be,(0,u.useEffect)((()=>{0===le.length&&c((0,M.Rz)())}),[]);const ye=(0,u.useMemo)((()=>{if(0===le.length)return[];if(0===Object.keys(xe.current).length&&0===pe.length)return le;const e=Object.keys(xe.current).reduce(((e,n)=>{var t;return!0===(null===(t=xe.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,f.Dm)(he.current,le,e,pe,(0,b.cM)(c,M.ZZ));switch(ve.current){case C.vl.DIFFICULTY:{const e=n.filter((e=>{var n;const t=ue.current,i=null===(n=xe.current[e.uid])||void 0===n?void 0:n.difficulty;return void 0===i&&(t<0?-1*t<f.$t:t>f.$t)||(t<0?i>-1*t:i<t)}));e.length>0?n=e:console.warn("Excluded all terms. Discarding memorized subfiltering.");break}case C.vl.GAME:if(de.current){const[e,t]=l()(n,(e=>{var n;return!0===(null===(n=xe.current[e.uid])||void 0===n?void 0:n.rein)}));n=[...t,...e]}}const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=xe.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return te(t),n}),[c,le,pe]),{newOrder:we,ebare:ke,jbare:Ne}=(0,u.useMemo)((()=>{if(0===ye.length)return{newOrder:[]};let e,n,t;switch(ve.current){case C.vl.RANDOM:e=(0,f.tq)(ye);break;case C.vl.VIEW_DATE:e=(0,f.EL)(ye,xe.current);break;case C.vl.GAME:if(de.current){let n=-1;for(let e=ye.length-1;e>-1;e--){const t=xe.current[ye[e].uid],i=e-1>-1?e-1:0,s=xe.current[ye[i].uid];if(!0===(null==t?void 0:t.rein)&&!(null==s?void 0:s.rein)){n=e;break}}if(-1!==n){const t=ye.slice(0,n),i=ye.slice(n);e=[...(0,f.rU)(t,xe.current),...i.map(((e,n)=>t.length+n))]}}void 0===e&&(e=(0,f.rU)(ye,xe.current));break;case C.vl.DIFFICULTY:e=(0,f.J0)(ye,xe.current);break;default:({order:e,jOrder:n,eOrder:t}=(0,f.fx)(ye))}return oe(!0),{newOrder:e,jbare:n,ebare:t}}),[ye]),Te=(0,u.useCallback)((()=>{const e=ye.length;let n=(J+1)%e;n===q&&(n=(e+n+1)%e),z.current=K,H(Date.now()),E.current=J,X(n),L(void 0)}),[ye,J,K,q]),Se=(0,u.useCallback)((()=>{(0,f.hY)(de.current,he.current,ne,ye,xe.current,D,(e=>{A.current=D,L(e)}),Te)}),[c,ne,ye,D,Te]),Ce=(0,u.useCallback)((()=>{const e=ye.length;let n;n=D?J:(e+(J-1))%e,n===q&&(n=(e+n-1)%e),z.current=K,H(Date.now()),E.current=J,X(n),L(void 0)}),[ye,J,D,K,q]),Me=function(e,n,t,i,s,r,a,o,c,l){return function(u,d){let p;if("left"===u)e(),p=Promise.all([Promise.resolve()]);else if("right"===u)n(),p=Promise.all([Promise.resolve()]);else{const e=null!=t?t:(0,f.vr)(i,o,a),n=(0,f.cc)(e,s),b=c?"/override_cache":"";if("up"===u){let e;if((0,m.gI)("playing"),"Verb"===n.grp&&"dictionary"!==r){const t=(0,f.dP)(n,r);e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:r})}else if(g.TZ.parse(n).isNaAdj()){const t=g.TZ.parse(n).append(l.current&&"な");e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:l.current}),l.current=l.current?void 0:"-na"}else e=n;const t=(0,j.b1)(h.vT+b,{tl:"ja",q:(0,g._I)(e),uid:(0,f.gW)(e)});p=(0,v.R$)(t,d)}else if("down"===u){(0,m.gI)("playing");const e=n.english,t=(0,j.b1)(h.vT+b,{tl:"en",q:e,uid:n.uid+".en"});p=(0,v.R$)(t,d)}}return null!=p?p:Promise.reject()}}(Se,Ce,D,J,le,je,we,ye,ie,re),Oe=(0,x.E)(ce),{beginLoop:Re,abortLoop:Pe,looperSwipe:Ae,loopSettingBtn:Ee,loopActionBtn:De,timedPlayVerifyBtn:Le,timedPlayAnswerHandlerWrapper:Fe,gradeTimedPlayEvent:Ie,resetTimedPlay:qe,loop:Ze,tpAnswered:Ge,tpAnimation:We}=(0,N.T)(Me,me,Oe);(0,y.q)(Me,(0,b.cM)(c,M.$u),Fe);const{HTMLDivElementSwipeRef:Ve}=(0,k.M)(Me,Fe);if((0,w.Z)("Vocabulary Loop",Ze,Re,Pe,Ae),(0,u.useEffect)((()=>{var e;const n={selectedIndex:E.current,reinforcedUID:A.current,lastNext:z.current};if(D!==n.reinforcedUID||J!==n.selectedIndex){const t=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,f.vr)(n.selectedIndex,ye,we);if(Ie(c,t,xe.current),(0,f.Zc)(n.lastNext)){const e=(0,f.cc)(t,le),i=t!==n.reinforcedUID,s=void 0!==n.reinforcedUID;c((0,M.Wo)({uid:t,shouldIncrement:i})).unwrap().then((n=>{var i;const{map:r,prevMap:a}=n,o=null===(i=a[t])||void 0===i?void 0:i.d,l={[t]:Object.assign(Object.assign({},r[t]),{d:o})},u=(e,n)=>c((0,S.kg)(e,n));void 0!==Ge.current?(0,p.lP)(u,e,l,{frequency:s}):(0,p.Ps)(u,e,l,{frequency:s})}))}qe()&&(0,f.u3)(n.lastNext)&&Re(),ee(void 0),I([]),E.current=J,A.current=D}}),[c,Re,Ie,qe,le,D,J,ye,we]),ye.length<1||we.length<1)return(0,i.jsx)(W.n,{addlStyle:"main-panel"});const _e=null!=D?D:(0,f.vr)(J,ye,we),Ue=(0,f.cc)(_e,le),Ke=!0===(null===(e=xe.current[Ue.uid])||void 0===e?void 0:e.rein),He="Verb"===Ue.grp,ze=g.TZ.parse(Ue),Je=ze.hasFurigana(),Be=ze.isHintable(3),Ye=void 0!==Ue.grp&&""!==Ue.grp,Xe=Q!==_e&&me?Be:Ye;let Qe=J,$e=[];ae?Ne&&($e=Ne):(Ne&&(Qe=Ne[J].idx),ke&&($e=ke));const en=(J+1)/ye.length*100;let nn=(0,i.jsx)(u.Fragment,{children:(0,i.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,i.jsxs)("div",{ref:Ve,className:"d-flex justify-content-between h-100",children:[(0,i.jsx)(_.Z,{ariaLabel:"Previous",action:Ce,children:(0,i.jsx)(o.wyc,{size:16})}),He&&fe?(0,i.jsx)(B,{verb:Ue,reCache:ie,linkToOtherTerm:e=>L(e),showHint:Q===_e}):(0,i.jsx)(Y,{vocabulary:Ue,reCache:ie,showHint:Q===_e}),(0,i.jsx)(_.Z,{ariaLabel:"Next",action:Se,children:(0,i.jsx)(o.XCv,{size:16})})]})})});return nn=O?(0,i.jsxs)(u.Fragment,{children:[nn,(0,i.jsx)(r.Z,{in:O,timeout:500,children:(0,i.jsx)(a.Z,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,i.jsx)("div",{onClick:(0,b.kP)(oe,(e=>!e)),children:ae?"JP":"EN"})})}),(0,i.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:()=>{P.current=!0},onTouchEnd:()=>{P.current=!1},onMouseDown:()=>{P.current=!0},onMouseUp:()=>{P.current=!1},children:(0,i.jsx)(U,{initial:Qe,list:$e,setIndex:e=>{if(ae)X(e);else if(ke){const n=ke[e].idx;X(n)}}})})]}):(0,i.jsxs)(u.Fragment,{children:[nn,(0,i.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,i.jsxs)("div",{className:"row opts-max-h",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,i.jsx)(V.uY,{toggle:me,action:()=>{Pe()&&qe(),c((0,M.$u)())}}),(0,i.jsx)(V.Ro,{active:ie,action:$(ie,se)}),(0,i.jsx)(V.ph,{visible:He,toggleAutoVerbView:(0,b.cM)(c,M.eK),autoVerbView:fe}),(0,i.jsx)("div",{className:"sm-icon-grp",children:Ee}),(0,i.jsx)("div",{className:"sm-icon-grp",children:De})]})}),(0,i.jsx)("div",{className:"col text-center",children:(0,i.jsx)(V.Qp,{visible:void 0!==D&&""!==D})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[Le(!0===(null===(n=xe.current[_e])||void 0===n?void 0:n.pron)),(0,i.jsx)(G,{value:null===(t=xe.current[_e])||void 0===t?void 0:t.difficulty,onChange:(0,b.cM)(c,(e=>(0,M.kn)(_e,e))),manualUpdate:_e}),(0,i.jsx)(V.y8,{visible:ge.current,active:Xe,setShowHint:(0,b.kP)(ee,(e=>e?void 0:_e))}),(0,i.jsx)(V.A,{active:Je,toggle:(0,f.$q)(Ue.uid,xe.current).furigana.show,toggleFurigana:(0,b.cM)(c,M._n),vocabulary:Ue}),(0,i.jsx)(V.R_,{addFrequencyTerm:e=>{te((n=>[...n,e])),(0,b.cM)(c,M.S5)(e)},removeFrequencyTerm:e=>{te((n=>n.filter((n=>n!==e)))),(0,b.cM)(c,M.xz)(e)},toggle:Ke,term:Ue,count:ne.length})]})})]})}),(0,i.jsx)("div",{className:"progress-line flex-shrink-1",onClick:()=>{if(ve.current===C.vl.ALPHABETIC){const e=4e3;R(!0);const n=()=>{P.current?setTimeout(n,e):R(!1)};setTimeout(n,e)}},children:(0,i.jsx)(s.Z,{variant:null===We?"determinate":"buffer",value:null===We?en:0,valueBuffer:null!=We?We:void 0,color:Ke?"secondary":"primary"})})]}),nn}function $(e,n){return function(){if(!e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},5665:(e,n,t)=>{t.d(n,{L6:()=>r,jP:()=>i,kh:()=>s});const i="add_frequency_word",s="add_frequency_phrase",r="service_worker_logger_msg"},5741:(e,n,t)=>{t.d(n,{_:()=>i});const i="userSettings"},2850:(e,n,t)=>{t.d(n,{TZ:()=>c,Wp:()=>u,_I:()=>h});var i=t(5893),s=t(4184),r=t.n(s),a=t(9815),o=t(3996);t(7294);class c{constructor(e,n){this._furigana=e,this._kanji=n,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}get[Symbol.toStringTag](){return"JapaneseText"}get furigana(){return this._furigana}set furigana(e){this._furigana=e}get kanji(){return this._kanji}set kanji(e){this._kanji=e}get parseObj(){return 0!==this._parseObj.furiganas.length||0!==this._parseObj.kanjis.length||0!==this._parseObj.okuriganas.length||this._parseObj.startsWKana||(this.hasFurigana()?this._parseObj=u(this.getPronunciation(),this.getSpelling()):this._parseObj={okuriganas:[this.getSpelling()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj}hasFurigana(){return!!this._kanji}getSpelling(){return this._kanji?this._kanji:this._furigana}getPronunciation(){return this._furigana}getObject(){return{furigana:this._furigana,kanji:this._kanji}}isSlang(){return this.slang}isKeigo(){return this.keigo}isNaAdj(){return"na"===this.adj}isIAdj(){return"i"===this.adj}debug(){return JSON.stringify(this)}append(e=""){return this.hasFurigana()?new c(this.getPronunciation()+e,this.getSpelling()+e):new c(this.getSpelling()+e)}toString(){return this._furigana+(this._kanji?"\n"+this._kanji:"")}isHintable(e=3){let n=!0;const t=this;if(!t.toString().split("").every((e=>(0,a.AF)(e)||(0,a.f_)(e)||(0,a.xn)(e)||"\n"===e)))return!1;if(t.hasFurigana()){const i=t.getPronunciation(),s=t.getSpelling();if(i.length<e)n=!1;else try{u(i,s)}catch(e){console.log(e),n=!1}}else t.getSpelling().length<e&&(n=!1);return n}getHint(e,n,t=3,i=1){const s={shown:"hint-mora",hidden:"invisible"};let r;if(this.isHintable(t))if(this.hasFurigana()){const e=this.getPronunciation(),t=this.getSpelling(),{kanjis:a,furiganas:o,okuriganas:c,startsWKana:l}=u(e,t);r=n(s,a,o,c,l,i)}else r=e(s,this.getSpelling(),i);else r=void 0;return r}toHTML(e){var n,t;let s;const a=!1===(null===(n=null==e?void 0:e.furigana)||void 0===n?void 0:n.show),c=null===(t=null==e?void 0:e.furigana)||void 0===t?void 0:t.toggle,l=r()({"incorrect-color":!0,"d-block":!0}),u=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:l,children:this.getPronunciation()}),(0,i.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{const{kanjis:e,furiganas:n,okuriganas:t,startsWKana:l}=this.parseObj,u=(0,o.je)(this.parseObj),d=r()({clickable:!!c})||void 0,h=c||void 0,g=a?"transparent-font":void 0;s=(0,i.jsx)("span",{className:d,onClick:h,children:u.map(((i,s)=>{const r=(0,o.re)(e[s]),a=(0,o.re)(),c=(0,o.re)(n[s],g),u=(0,o.re)(),d=(0,o.re)(t[s]),h=(0,o.re)();return(0,o.v5)(s,{sk:r,hk:a},{sf:c,hf:u},{so:d,ho:h},l)}))})}catch(n){!1!==(null==e?void 0:e.showError)&&console.error(n),s=u}else s=(0,i.jsx)("span",{children:this.getSpelling()});return s}}function l(e,n){const t=e.japanese.split("\n");let i;if("function"==typeof n)i=n(e);else{const[e,n]=t;i=new c(e,n)}return e.slang&&e.slang&&(i.slang=!0),e.keigo&&e.keigo&&(i.keigo=!0),!e.adj||"na"!==e.adj&&"i"!==e.adj||(i.adj=e.adj),i}function u(e,n){var t;let i,s,r,o;try{({kanjis:i,furiganas:s,okuriganas:r,startsWKana:o}=d(e,n))}catch(c){if(c instanceof Error&&"ParseError"===(null===(t=c.cause)||void 0===t?void 0:t.code))try{const t=e.split("").reverse().join(""),c=n.split("").reverse().join(""),{kanjis:l,furiganas:u,okuriganas:h}=d(t,c);return i=l.map((e=>e.split("").reverse().join(""))).reverse(),s=u.map((e=>e.split("").reverse().join(""))).reverse(),r=h.map((e=>e.split("").reverse().join(""))).reverse(),o=!(0,a.AF)(n.charAt(0)),{kanjis:i,furiganas:s,okuriganas:r,startsWKana:o}}catch(e){}throw c}return{kanjis:i,furiganas:s,okuriganas:r,startsWKana:o}}function d(e,n){if(n.split("").every((e=>(0,a.AF)(e)||(0,a.BE)(e))))return{kanjis:[n],furiganas:[e],okuriganas:[],startsWKana:!1};const t=new RegExp(/\s/g),i=t.test(e)||t.test(n),s=!(0,a.AF)(n.charAt(0))&&!(0,a.IE)(n.charAt(0));let r=0,o=[],c=[],l=[],u="",d="",h="",g=!1;n.split("").forEach(((t,s)=>{if((0,a.AF)(t)||function(e,n,t){const i=t.charAt(e);return Number.isInteger((0,a.F8)(i))||Number.isInteger(Number.parseInt(i))&&!n.includes(i)&&!(0,a.AF)(i)&&!(0,a.f_)(i)&&!(0,a.xn)(i)&&e<t.length-1}(s,e,n))" "!==e.charAt(r)&&(u+=e.charAt(r))," "!==t&&(d+=t),g=!0,r++,""!==h&&(l.push(h),h=""),n.length-s==1&&(" "!==e.slice(r)&&(u+=e.slice(r)),o.push(u),c.push(d));else{if(g){for(;e.charAt(r)!=t;)if(" "!==e.charAt(r)&&(u+=e.charAt(r)),r++,r>e.length)throw new Error("The two phrases do not match"+(i?" (contains white space)":""),{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:n},kanjis:c,furiganas:o,okuriganas:l}}});o.push(u),u=""}" "!==t&&(h+=t),""!==d&&(c.push(d),d=""),r++,g=!1}})),""!==h&&l.push(h);const[v,p]=function(e,n,t,i){let s,r;return i?(r=t.reduce(((n,t,i)=>n+t+(e[i]||"")),""),s=t.reduce(((e,t,i)=>e+t+(n[i]||"")),"")):(r=e.reduce(((e,n,i)=>e+n+(t[i]||"")),""),s=n.reduce(((e,n,i)=>e+n+(t[i]||"")),"")),[s,r]}(c,o,l,s),f=e.replaceAll(" ",""),m=n.replaceAll(" ","");if(v!==f||p!==m)throw new Error("Failed to parse text to build furigana"+(i?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:n},output:{pronunciation:v,orthography:p}}}});return{kanjis:c,furiganas:o,okuriganas:l,startsWKana:s}}function h(e){let n;if(e.pronounce){if(!e.pronounce.split("").every((e=>(0,a.f_)(e)||(0,a.xn)(e))))throw new Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});n=e.pronounce}else n=c.parse(e).getSpelling().replaceAll(" ","");return n}c.parse=e=>l(e),c.parser=l},9841:(e,n,t)=>{t.d(n,{R:()=>a});var i=t(6954),s=t(9815),r=t(2850);class a extends r.TZ{constructor(e,n){super(e,n),this.trans=void 0,this.intr=void 0,this.exv=void 0}get[Symbol.toStringTag](){return"JapaneseVerb"}isExceptionVerb(){return void 0!==this.exv}isIntransitive(){return void 0!==this.trans||!0===this.intr}getTransitivePair(){return this.isIntransitive()&&this.trans?this.trans:void 0}getIntransitivePair(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr}getVerbClass(){const e=super.getPronunciation(),n=super.getSpelling();if(this.exv&&this.isExceptionVerb())return this.exv;const t=e.slice(-1),i=e.slice(-2,-1),{iVowel:r}=(0,s.dv)(i);return"する"===n.slice(-2)||"くる"===e||"だ"===e||"ある"===e?3:1===r&&"る"===t||3===r&&"る"===t?2:1}getStem(){let e;const n=i.Bw;let t;super.hasFurigana()&&(t=super.getSpelling().slice(0,-1));const r=super.getPronunciation().slice(-1),a=super.getPronunciation().slice(0,-1);if(1===this.getVerbClass()||"る"!==r){const i=1,{iConsonant:o}=(0,s.dv)(r);e=t?[a+n[o][i],t+n[o][i]]:[a+n[o][i]]}else{if("る"!==r)throw new Error("Unknown verb type");e=t?[a,t]:[a]}return e}naiForm(){let e,n="ない";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],c=i.Bw,l=i.Be.indexOf("a"),{iConsonant:u}=(0,s.dv)(t),d=c[0===u?14:u][l]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){const[t,i]=this.getStem();e=i?new r.TZ(t+n,i+n):new r.TZ(t+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こない","来ない");else if("する"===a)e=new r.TZ("しない");else if("ある"===a)e=new r.TZ("ない");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"しない",n+"しない")}else e=new r.TZ(n+"しない")}}return e}saseruForm(){let e,n="せる";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],c=i.Bw,l=i.Be.indexOf("a"),{iConsonant:u}=(0,s.dv)(t),d=c[0===u?14:u][l]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){"居る"!==a&&"いる"!==a||(e=new r.TZ("いる","居る"));const[t,i]=this.getStem();e=o?new r.TZ(t+"さ"+n,i+"さ"+n):new r.TZ(t+"さ"+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こさせる","来させる");else if("する"===a)e=new r.TZ("させる");else if("ある"===a)e=new r.TZ("ある");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"させる",n+"させる")}else e=new r.TZ(n+"させる")}}return e}reruForm(){let e;const n=this.getVerbClass();let t=super.getSpelling(),a=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===n){const n=t[t.length-1],o=i.Bw,c=i.Be.indexOf("e"),{iConsonant:l}=(0,s.dv)(n),u=o[l][c]+"る",d=super.getSpelling().slice(0,-1);if(a){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+u,d+u)}else e=new r.TZ(d+u)}else if(2===n){const[n,t]=this.getStem();e=a?new r.TZ(n+"られる",t+"られる"):new r.TZ(n+"られる")}else if("来る"===t||"くる"===t)e=new r.TZ("こられる","来られる");else if("する"===t)e=new r.TZ("できる");else if("する"===t.slice(-2)){const n=super.getSpelling().slice(0,-2);if(a){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"できる",n+"できる")}else e=new r.TZ(n+"できる")}else{if("ある"!==t&&"いる"!==t)throw new Error("Unknown exception verb type");e=null}return e}masuForm(){const e="ます";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きます","来ます");break;case"ある":n=new r.TZ("あります");break;case"だ":n=new r.TZ("です")}if("する"===super.getSpelling().slice(-2)){const e="します",t=super.getPronunciation().slice(0,-2),i=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,i+e):new r.TZ(t+e)}if(!n){const[t,i]=this.getStem();n=i?new r.TZ(t+e,i+e):new r.TZ(t+e)}return n}mashouForm(){const e="ましょう";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きましょう","来ましょう");break;case"ある":n=new r.TZ("ありましょう");break;case"だ":n=new r.TZ("でしょう")}if("する"===super.getSpelling().slice(-2)){const e="しましょう",t=super.getPronunciation().slice(0,-2),i=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,i+e):new r.TZ(t+e)}if(!n){const[t,i]=this.getStem();n=i?new r.TZ(t+e,i+e):new r.TZ(t+e)}return n}taForm(){return this.t_Form(o)}chattaForm(){if(3===this.getVerbClass())return null;const e=super.hasFurigana()?super.getSpelling():super.getPronunciation();let n;switch(e[e.length-1]){case"ぶ":case"む":case"ぬ":case"ぐ":n="じゃった";break;default:n="ちゃった"}const t=this.t_Form(o);return new r.TZ(t.getPronunciation().slice(0,-1)+n,t.getSpelling().slice(0,-1)+n)}teForm(){return this.t_Form(c)}t_Form(e){const n=this.getVerbClass();let t,i,s,a=this.furigana;this.hasFurigana()&&this.kanji&&(i=this.furigana,a=this.kanji);const o=a[a.length-1];if(1===n)if("行く"===a||"いく"===a)t=r.TZ.parse({japanese:e.g1.iku});else{switch(o){case"う":case"つ":case"る":s=e.g1.u_tsu_ru;break;case"く":s=e.g1.ku;break;case"ぐ":s=e.g1.gu;break;case"ぬ":case"ぶ":case"む":s=e.g1.mu_nu_bu;break;case"す":s=e.g1.su}t=i?new r.TZ(i.slice(0,-1)+s,a.slice(0,-1)+s):new r.TZ(a.slice(0,-1)+s)}else if(2===n)s=e.g2.ru,t=i?new r.TZ(i.slice(0,-1)+s,a.slice(0,-1)+s):new r.TZ(a.slice(0,-1)+s);else if("来る"===a||"くる"===a)t=r.TZ.parse({japanese:e.g3.kuru});else if("する"===a)t=r.TZ.parse({japanese:e.g3.suru});else if("だ"===a)t=r.TZ.parse({japanese:e.g3.da});else if("ある"===a)t=r.TZ.parse({japanese:e.g3.aru});else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=e.g3.suru,s=a.slice(0,-2);if(i){const e=i.slice(0,-2);t=new r.TZ(e+n,s+n)}else t=new r.TZ(s+n)}}return t}}a.parse=e=>{const n=r.TZ.parser(e,(e=>{const[n,t]=e.japanese.split("\n");return new a(n,t)}));return e.intr&&(n.intr=e.intr),e.trans&&(n.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(n.exv=e.exv),n};const o={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},c={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}}},8916:(e,n,t)=>{t.d(n,{IY:()=>a,Kd:()=>c,Si:()=>o,Yg:()=>r,pK:()=>i});const i="slick-swipe-ignore";function s(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()}function r(e,n=!1){var t,i,s,r;return t=e.startX-e.curX,i=e.startY-e.curY,s=Math.atan2(i,t),(r=Math.round(180*s/Math.PI))<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===n?r>=35&&r<=135?"up":"down":"vertical"}function a(e,{verticalSwiping:n,touchThreshold:t}={verticalSwiping:!1,touchThreshold:5}){return"IMG"===e.target.tagName&&s(e),{verticalSwiping:n,touchThreshold:t,touchObject:{startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}function o(e,n){var t=n.verticalSwiping,i=n.touchThreshold,a=n.swiped,o=n.swiping,c=n.touchObject,l=n.swipeEvent;c.curX="touches"in e?e.touches[0].pageX:e.clientX,c.curY="touches"in e?e.touches[0].pageY:e.clientY,c.swipeLength=Math.abs(c.curX-c.startX);var u=Math.abs(c.curY-c.startY);if(!t&&!o&&u>10)return{touchObject:c,touchThreshold:i,scrolling:!0};t&&(c.swipeLength=Math.sqrt(Math.pow(u,2)+Math.pow(c.swipeLength,2)));var d=r(n.touchObject,t),h={touchObject:c,verticalSwiping:t,touchThreshold:i,swiped:!1,swiping:!1};return!a&&l&&(l(d),h=Object.assign(Object.assign({},h),{swiped:!0})),c.swipeLength>10&&(h=Object.assign(Object.assign({},h),{swiping:!0}),s(e)),h}function c(e,n){var t=n.touchObject,i=n.touchThreshold,a=n.verticalSwiping,o=n.onSwipe,c=i;let l;return t.swipeLength&&(l=r(t,a)),t.swipeLength>c&&(s(e),o&&o(l)),Object.assign({swipeDirection:l},n)}},6892:(e,n,t)=>{function i(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}function s(e,n,t,{clamped:i=!0}={}){const s=Math.min(1,t),r=i?Math.max(s,0):t;return(1-r)*e+r*n}t.d(n,{Sy:()=>i,t7:()=>s})},5965:(e,n,t)=>{t.d(n,{R$:()=>r});const i=new Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),s=new AudioContext;function r(e,n){const t=s.createBufferSource(),r=fetch(e).then((e=>e.arrayBuffer())).then((e=>s.decodeAudioData(e).then((e=>{t.buffer=e,t.connect(s.destination),t.start()})))),a=new Promise(((e,s)=>{const r=()=>{t.stop(),s(i)};t.addEventListener("ended",(()=>{null==n||n.signal.removeEventListener("abort",r),e()})),(null==n?void 0:n.signal.aborted)&&r(),null==n||n.signal.addEventListener("abort",r)}));return Promise.all([a,r])}},2647:(e,n,t)=>{function i(){return window.localStorage}function s(){return window}t.d(n,{F:()=>i,J:()=>s})},5863:(e,n,t)=>{t.d(n,{Gd:()=>a,O5:()=>r,Ps:()=>o,lP:()=>c});var i=t(4133);function s(e,n){const t=Math.ceil(n/2);return e.length<n?e:e.slice(0,t)+"..."+e.slice(-(n-t))}function r(e){const[n]=e.split("T"),t=Date.parse(n),i=Math.abs(Date.now()-t);return Math.ceil(i/864e5)}function a(e){const n=Date.parse(e),t=Math.abs(Date.now()-n);return Math.ceil(t/6e4)}function o(e,n,t,a){var o,c,l;const u=null===(o=t[n.uid])||void 0===o?void 0:o.d;if(u){const o=s(n.english,30),d=(null==a?void 0:a.frequency)?" F[w]":"",h=` ${r(u)-1}d`,g=` ${null===(c=t[n.uid])||void 0===c?void 0:c.vC}v`,v=null===(l=t[n.uid])||void 0===l?void 0:l.tpAcc;e("Space Rep ["+o+"]"+d+h+g+(void 0!==v?" "+(100*v).toFixed(0)+"%":""),i.x6.DEBUG)}}function c(e,n,t,a){var o,c,l,u;const d=null===(o=t[n.uid])||void 0===o?void 0:o.d;if(d){const o=s(n.english,30),g=(null==a?void 0:a.frequency)?" F[w]":"",v=" "+(r(d)-1)+"d",p=null===(c=t[n.uid])||void 0===c?void 0:c.tpPc,f=void 0!==p?" "+p+"v":"",m=null===(l=t[n.uid])||void 0===l?void 0:l.tpAcc,j=void 0!==m?" "+(100*m).toFixed(0)+"%":"",b=null===(u=t[n.uid])||void 0===u?void 0:u.tpCAvg;e("Timed Play ["+o+"]"+g+v+f+j+(void 0!==b?" "+(h=b,(Math.round(h)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"")+"s"):""),i.x6.DEBUG)}var h}},9983:(e,n,t)=>{t.d(n,{$q:()=>_,$t:()=>O,Dm:()=>j,EL:()=>C,HG:()=>z,II:()=>D,J0:()=>R,JS:()=>Z,Mm:()=>H,XQ:()=>y,YZ:()=>M,Zc:()=>w,cc:()=>m,dP:()=>F,fx:()=>P,gW:()=>V,hF:()=>I,hY:()=>p,iz:()=>G,kf:()=>L,nD:()=>K,rU:()=>N,tq:()=>A,tu:()=>W,u3:()=>k,vr:()=>f,wG:()=>x,wO:()=>U,w_:()=>E,yT:()=>q});var i=t(5893),s=(t(7294),t(4184)),r=t.n(s),a=t(5472),o=t.n(a),c=t(4133),l=t(6892),u=t(2850),d=t(9841),h=t(5863),g=t(9815),v=t(3996);function p(e,n,t,i,s,r,a,o){const l=e&&Math.random()<1/3;if(n!==c.Lx.FREQUENCY&&l&&t.length>0){const e=0,n=t.filter((e=>{var n;return(0,h.Gd)(null===(n=s[e])||void 0===n?void 0:n.d)>t.length})),o=n.length,c=Math.floor(Math.random()*(o-e)+e),l=i.find((e=>n[c]===e.uid));if(l&&r!==l.uid)return void a(l.uid)}o()}function f(e,n,t){let i;if(i=t?n[t[e]]:n[e],!i)throw new Error("No term found");return i.uid}function m(e,n){const t=n.find((n=>e===n.uid));if(!t)throw new Error("No term found");return t}function j(e,n,t=[],i,s){let r=n;if(e===c.Lx.FREQUENCY){if(!t)throw new TypeError("Filter type requires frequencyList");if(!s)throw new TypeError("Filter type requires toggleFilterType");t.length>0?r=i.length>0?n.filter((e=>t.includes(e.uid)&&b(i,e))):n.filter((e=>t.includes(e.uid))):s(c.Lx.GROUP)}else e===c.Lx.TAGS?i.length>0&&(r=n.filter((e=>{var n;return null===(n=e.tag)||void 0===n?void 0:n.some((e=>i.includes(e)))}))):i.length>0&&(r=n.filter((e=>b(i,e))));return r}function b(e,n){return n.grp&&e.includes(n.grp)||e.includes(n.grp+"."+n.subGrp)||void 0===n.grp&&(e.includes("undefined")||e.includes("undefined."+n.subGrp))}function x(e,n){const t=Object.keys(e).reduce(((n,t)=>[...n,t,...e[t].map((e=>t+"."+e))]),[]);return n.reduce(((e,n)=>(t.includes(n)||(e=[...e,n]),e)),[])}function y(e,n,t){const i=new Set(Object.keys({d:null,difficulty:null,nextReview:null,vC:null,f:null,rein:null,pron:null,tpPc:null,tpAcc:null,tpCAvg:null}));let s=new Set,r=[];return Object.keys(e).forEach((a=>{Object.keys(e[a]).forEach((e=>{let o;if(!i.has(e)){let i;try{i=m(a,n)}catch(e){i={english:t}}o={key:e,uid:a,english:i.english}}void 0!==o&&(s.add(e),r=[...r,o])}))})),{keys:s,list:r}}function w(e){return~~(Date.now()-e)>1500}function k(e){return~~(Date.now()-e)>300}function N(e,n){let t=[],i=[],s=[],r=[],a=[];for(const o in e){const c=e[o].uid,l=n[c];if(void 0!==l){if(void 0===l.tpAcc)r=[...r,{date:l.d,views:l.vC,uid:c,index:Number(o)}];else if(!0===l.pron){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);i=[...i,{staleness:e,correctness:n,uid:c,index:Number(o)}]}else if(l.tpAcc>=.65){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);a=[...a,{staleness:e,correctness:n,uid:c,index:Number(o)}]}else if(l.tpAcc<.65){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);t=[...t,{staleness:e,correctness:n,uid:c,index:Number(o)}]}}else s=[...s,Number(o)]}const c=o()(t,["staleness","correctness","uid"],["desc","asc","asc"]),l=o()(i,["staleness","correctness","uid"],["desc","asc","asc"]),u=o()(r,["date","views","uid"],["asc","asc","asc"]),d=o()(a,["staleness","correctness","uid"],["desc","asc","asc"]),h=c.map((e=>e.index)),g=l.map((e=>e.index)),v=u.map((e=>e.index)),p=d.map((e=>e.index));return[...h,...g,...s,...v,...p]}function T(e,n,t=1){let i=Number.MAX_SAFE_INTEGER;return void 0!==e&&n>0&&t>0&&(i=(0,h.O5)(e)*(1/n)*(1/t)),i}function S(e=0,n=0){let t=Number.MIN_SAFE_INTEGER;return e>0&&n>0&&(t=e*(1/n)),t}function C(e,n){let t=[],i=[];for(const s in e){const r=e[s].uid,a=n[r];void 0!==a&&void 0!==a.d?i=[...i,{date:a.d,uid:r,index:Number(s)}]:t=[...t,Number(s)]}const s=o()(i,["date","uid"],["asc","asc"]).map((e=>e.index));return[...t,...s]}const M=80,O=30;function R(e,n){let t=[],i=[],s=[];for(const r in e){const a=e[r].uid,o=n[a];if(void 0!==o&&void 0!==o.difficulty){const e=Number(o.difficulty);e<M?i=[...i,{difficulty:e,uid:a,index:Number(r)}]:s=[...s,Number(r)]}else t=[...t,Number(r)]}return[...o()(i,["difficulty","uid"],["asc","asc"]).map((e=>e.index)),...t,...s]}function P(e){let n={},t=[];e.forEach(((e,i)=>{n[e.uid]=i,t=[...t,{uid:e.uid,japanese:e.japanese,english:e.english}]}));let i=[],s=[],r=[];return t=o()(t,["japanese"],["asc"]),t.forEach(((e,t)=>{i=[...i,n[e.uid]],r=[...r,{uid:e.uid,label:u.TZ.parse(e).getPronunciation(),idx:-1}],s=[...s,{uid:e.uid,label:e.english.toLowerCase(),idx:t}]})),s=o()(s,["label"],["asc"]),s.forEach(((e,n)=>{r[e.idx]=Object.assign(Object.assign({},r[e.idx]),{idx:n})})),{order:i,jOrder:r,eOrder:s}}function A(e){const n=e.map(((e,n)=>n));return(0,l.Sy)(n),n}function E(e,n){return n[e]}function D(e,n){return e+1<n.length?e+1:0}function L(e,n){var t,i,s,r,a,o,c,l,u,h;const g={dictionary:void 0===e?void 0:d.R.parse(e)},v=[{name:"-masu",value:null===(t=g.dictionary)||void 0===t?void 0:t.masuForm()},{name:"-mashou",value:null===(i=g.dictionary)||void 0===i?void 0:i.mashouForm()},{name:"dictionary",value:g.dictionary},{name:"-nai",value:null===(s=g.dictionary)||void 0===s?void 0:s.naiForm()},{name:"-saseru",value:null===(r=g.dictionary)||void 0===r?void 0:r.saseruForm()},{name:"-te",value:null===(a=g.dictionary)||void 0===a?void 0:a.teForm()},{name:"-ta",value:null===(o=g.dictionary)||void 0===o?void 0:o.taForm()},...null!==(null===(c=g.dictionary)||void 0===c?void 0:c.chattaForm())?[{name:"-chatta",value:null===(l=g.dictionary)||void 0===l?void 0:l.chattaForm()}]:[],...null!==(null===(u=g.dictionary)||void 0===u?void 0:u.reruForm())?[{name:"-reru",value:null===(h=g.dictionary)||void 0===h?void 0:h.reruForm()}]:[]];let p;return n&&n.length>0&&(p=n.reduce(((e,n)=>{const t=v.find((e=>e.name===n));return void 0!==t&&(e=[...e,t]),e}),[])),null!=p?p:v}function F(e,n){const t=L(e).find((e=>e.name===n));if(!t)throw new Error("Invalid targetForm");return t.value}function I(e,n,t,s){var a;const o=!e;let c,l=[],u=!1,h=!1;n.constructor.name===d.R.name&&"isExceptionVerb"in n&&(u=n.isExceptionVerb()||3===n.getVerbClass(),h=n.isIntransitive(),c=null!==(a=n.getTransitivePair())&&void 0!==a?a:n.getIntransitivePair());const g=n.isNaAdj(),v=n.isSlang(),p=n.isKeigo();let f;return o&&(h||c)&&(l=[...l,(0,i.jsx)("span",{className:r()({clickable:c,"question-color":c}),onClick:c&&s?()=>{s(c)}:void 0,children:h?"intr":"trans"},l.length+1)]),o&&v&&(l=[...l,(0,i.jsx)("span",{children:"slang"},l.length+1)]),o&&p&&(l=[...l,(0,i.jsx)("span",{children:"keigo"},l.length+1)]),u&&l.length>0&&(l=[(0,i.jsx)("span",{children:"*"},l.length+1),...l]),f=l.length>0?(0,i.jsxs)("span",{children:[t,g&&(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,i.jsxs)("span",{className:"fs-5",children:[(0,i.jsx)("span",{children:" ("}),l.reduce(((e,n,t)=>t>0&&t<l.length?[...e,(0,i.jsx)("span",{children:" , "},l.length+t),n]:[...e,n]),[]),(0,i.jsx)("span",{children:")"})]})]}):u?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{children:[" ","*"]})]}):g?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t,f}function q(e,n,t,s){var a;let o,c=[],l=!1;n.constructor.name===d.R.name&&"isExceptionVerb"in n&&(l=n.isIntransitive(),o=null!==(a=n.getTransitivePair())&&void 0!==a?a:n.getIntransitivePair());const u=n.isSlang(),h=n.isKeigo();let g;return e&&(l||o)&&(c=[...c,(0,i.jsx)("span",{className:r()({clickable:o,"question-color":o}),onClick:o&&s?()=>{s(o)}:void 0,children:l?"intr":"trans"},c.length+1)]),e&&u&&(c=[...c,(0,i.jsx)("span",{children:"slang"},c.length+1)]),e&&h&&(c=[...c,(0,i.jsx)("span",{children:"keigo"},c.length+1)]),g=c.length>0?(0,i.jsxs)("span",{children:[t,(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{children:" ("}),c.reduce(((e,n,t)=>t>0&&t<c.length?[...e,(0,i.jsx)("span",{children:" , "},c.length+t),n]:[...e,n]),[]),(0,i.jsx)("span",{children:")"})]})]}):t,g}function Z(e,n,t,i,s){let r,a,o,c;return e?(r=n,a=t,o=i,c=s):(r=t,a=n,o=s,c=i),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:c}}function G(e){return e.grp&&""!==e.grp?(0,i.jsx)("span",{className:"hint",children:e.grp+(e.subGrp?", "+e.subGrp:"")}):void 0}function W(e){const n=e.getPronunciation().slice(1,2);let t;return t=(0,g.BM)(n)?e.getHint(g.Ot,v.AG,3,2):e.getHint(g.Ot,v.AG,3,1),t}function V(e){let{uid:n}=e;if(!n)throw console.warn(JSON.stringify(e)),new Error("Missing uid");return e.form&&(n+="dictionary"!==e.form?e.form.replace("-","."):""),n}function _(e,n,t,i){let s;return s={furigana:{show:!(n&&n[e]&&!1===n[e].f),toggle:!1===t&&i&&(()=>{i(e)})||void 0}},s}function U(e,{signal:n},t){return new Promise(((i,s)=>{const r=()=>{clearTimeout(o),clearInterval(a),s(new Error("Aborted"))},a="function"==typeof t?setInterval(t,200,200,e):-1,o=setTimeout((()=>{null==n||n.removeEventListener("abort",r),clearInterval(a),i()}),e);(null==n?void 0:n.aborted)&&r(),null==n||n.addEventListener("abort",r)}))}function K(e,n,t,{signal:i}){return new Promise(((s,r)=>{const a=()=>{clearTimeout(o);const e=new Error("User interrupted loop.",{cause:{code:"UserAborted"}});r(e)},o=setTimeout((()=>{e>0?n().then((()=>K(e-1,n,t,{signal:i}).then((()=>{null==i||i.removeEventListener("abort",a),s()})))).catch((e=>{r(e)})):(null==i||i.removeEventListener("abort",a),s())}),t);(null==i?void 0:i.aborted)&&a(),null==i||i.addEventListener("abort",a)}))}function H(e,n,t){var i,s;const r=null===(i=e.acceleration)||void 0===i?void 0:i.y,a=null===(s=e.acceleration)||void 0===s?void 0:s.z;if(null==r||null==a)throw new Error("Device does not support DeviceMotionEvent",{cause:{code:"DeviceMotionEvent"}});{const e=Math.sqrt(r*r+a*a);e>n&&"function"==typeof t&&t(e)}}function z(e,n){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((n=>{"granted"===n&&e()})).catch(n):e()}},9815:(e,n,t)=>{t.d(n,{AF:()=>r,BE:()=>u,BM:()=>c,C5:()=>h,F8:()=>g,IE:()=>l,Ot:()=>p,Vj:()=>d,dv:()=>v,f_:()=>a,xn:()=>o});var i=t(5893),s=(t(7294),t(6954));function r(e){return new RegExp("[一-龯㐀-䶿々]").test(e)}function a(e){return new RegExp("[ぁ-ゟ]").test(e)}function o(e){return new RegExp("[゠-ヿ]").test(e)}function c(e){return new RegExp("^[ゃャゅュょョ]$").test(e)}function l(e){return new RegExp("[０-９]").test(e)}function u(e){return new RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(e)}function d(e){let n=e;if(a(e)){const t=e.codePointAt(0);if(t){const e=t+96;n=String.fromCharCode(e)}}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96;n=String.fromCharCode(e)}}return n}function h(e){let n;switch(e){case"は":n="wa";break;case"には":n="niwa";break;case"を":n="o";break;case"って":n="tte";break;default:n=e.split("").map((e=>function(e){let n=e;if(a(e)){const{iConsonant:t,iVowel:i}=v(e);n=s.sH[t]+s.Be[i]}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96,i=String.fromCharCode(e),{iConsonant:r,iVowel:a}=v(i);n=s.sH[r]+s.Be[a]}}return n}(e))).join("")}return n}function g(e){let n=Number.NaN;if(l(e)){const t=e.codePointAt(0);if(t){const e=t-65249;n=Number.parseInt(String.fromCharCode(e))}}return n}function v(e){const n=s.Bw,t=n[0].length,i=n.length;let r=-1,a=-1;if(" "===e||""===e)return{iConsonant:r,iVowel:a};if("ん"===e)return{iConsonant:15,iVowel:a};for(let s=0;s<t&&r<0;s++)for(let t=0;t<i;t++)if(n[t][s]===e){r=t,a=s;break}return{iConsonant:r,iVowel:a}}function p(e,n,t){return(0,i.jsxs)("span",{className:"hint",children:[(0,i.jsx)("span",{className:e.shown,children:n.slice(0,t)}),(0,i.jsx)("span",{className:e.hidden,children:n.slice(t)})]})}},3996:(e,n,t)=>{t.d(n,{AG:()=>a,je:()=>o,re:()=>l,tn:()=>c,v5:()=>u});var i=t(5893),s=t(4184),r=t.n(s);function a(e,n,t,s,r,a=1){const o=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},s){let r,a,o=s;return n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]),n.reduce(((s,c,l)=>{const u=Math.trunc(n[l].length/e[l].length);if(o>0)if(i)if(r=t[l],a=n[l],r.length<=o){let n;o-=r.length;let t=o;a.length<=o?(o-=a.length,n=e[l].length,t=a.length):(n=Math.ceil(o/u),o=0),s=[...s,{k:n,f:t,o:r.length}]}else s=[...s,{k:0,f:0,o}],o=0;else if(r=n[l],a=t[l],r.length<=o){let n;o-=r.length,a.length<o?(o-=a.length,n=a.length):(n=o,o=0),s=[...s,{k:e[l].length,f:r.length,o:n}]}else{const e=Math.ceil(o/u);s=[...s,{k:e,f:o,o:0}],o=0}else s=[...s,{k:0,f:0,o:0}];return s}),[])}({kanjis:n,furiganas:t,okuriganas:s,startsWKana:r},a);t.length>s.length?s=[...s,""]:t.length<s.length&&(n=[...n,""],t=[...t,""]);const c=(e,n,t=1)=>n?[(0,i.jsx)("span",{className:e,children:n},t)]:[],l=o.map(((i,a)=>u(a,{sk:i.k>0?c(e.shown,n[a].slice(0,i.k)):[],hk:i.k<n[a].length?c(e.hidden,n[a].slice(i.k)):[]},{sf:i.f>0?c(e.shown,t[a].slice(0,i.f)):[],hf:i.f<t[a].length?c(e.hidden,t[a].slice(i.f)):[]},{so:i.o>0?c(e.shown,s[a].slice(0,i.o)):[],ho:i.o<s[a].length?c(e.hidden,s[a].slice(i.o)):[]},r)));return(0,i.jsx)("span",{className:"hint",children:l})}function o(e){let{kanjis:n,furiganas:t,okuriganas:i}=e;return t.length>i.length?i=[...i,""]:t.length<i.length&&(n=[...n,""],t=[...t,""]),t.map(((e,s)=>({k:n[s].length,f:t[s].length,o:i[s].length})))}function c({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},r,a,c=a+1){const{shown:l,hidden:d}=r,h=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},s,r=s+1){let a=r-s;n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const c=o({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i});let l=[0];return c.map(((e,n)=>{let{k:t,o}=e,c=0,u=0;if(l=[...l,l[n]+t+o],i){if(l[n]+o>s)if(l[n]+o<r){const e=s-(l[n]+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0;if(l[n]+o+t>s)if(l[n]+o+t<r){const e=s-(l[n]+o+t);c=Math.min(t,Math.abs(e)),a-=c}else c=a,a=0}else{if(l[n]+t>s)if(l[n]+t<r){const e=s-(l[n]+t);c=Math.min(t,Math.abs(e)),a-=c}else c=a,a=0;if(l[n]+t+o>s)if(l[n]+t+o<r){const e=s-(l[n]+t+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0}return{k:c,f:0,o:u}}))}({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},a,c);n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const g=(e,n,t=1)=>n?[(0,i.jsx)("span",{className:e,children:n},t)]:[],v=(e,n,t,i)=>{let s=[],r=[];const o=e.length;if(o>0)if(0===n)r=g(l,e);else if(n===o)s=g(d,e),t-=o;else if(n<o)if(t<n)s=g(d,e.slice(0,n)),r=g(l,e.slice(n-o)),t=0;else if(t===n){const n=i,s=a-n,c=s+t;r=[...g(l,e.slice(0,s),n+1),...g(d,e.slice(s,c),n+2),...g(l,e.slice(c,o),n+3)],t=0}else t>n&&(r=g(l,e.slice(0,n)),s=g(d,e.slice(n-o)),t-=n);return{s:r,h:s,spliceLen:t}};let p=c-a,f=[0];const m=h.map(((i,r)=>{const a=e[r].length,o=t[r].length;let c,d;f=[...f,f[r]+o+a],({s:c,h:d,spliceLen:p}=v(e[r],i.k,p,f[r]+(s?o:0)));const h=g(l,n[r]);let m,j;return({s:m,h:j,spliceLen:p}=v(t[r],i.o,p,f[r]+(s?0:a))),u(r,{sk:c,hk:d},{sf:h,hf:[]},{so:m,ho:j},s)}));return(0,i.jsx)("span",{className:"decorated",children:m})}function l(e,n,t=1){return e?[(0,i.jsx)("span",{className:n,children:e},t)]:[]}function u(e,{sk:n,hk:t},{sf:s,hf:a},{so:o,ho:c},l){const u=n.length>0||t.length>0,d=s.length>0||a.length>0,h=o.length>0||c.length>0,g=u&&d&&(0,i.jsxs)("ruby",{children:[n,t,(0,i.jsxs)("rt",{children:[s,a]})]})||void 0,v=h&&(0,i.jsxs)("span",{children:[o,c]})||void 0,p=l?v:g,f=l?g:v,m=r()({"lh-furigana":u&&d})||void 0;return(p||f)&&(0,i.jsxs)("span",{className:m,children:[p,f]},e)||void 0}t(7294)},3859:(e,n,t)=>{t.d(n,{JW:()=>o,xr:()=>c});var i=t(5741),s=t(2647);function r(e,n){if(1===n.length)return e[n[0]];const[t,...i]=n;return r(e[t],i)}function a(e,n,t){if(1===n.length){const i=n[0];return Object.assign(Object.assign({},e),{[i]:t})}const[i,...s]=n;return Object.assign(Object.assign({},e),{[i]:a(e[i]||{},s,t)})}function o(e,n,t,o,l){let u=c(i._)||{};const d=[...t.split("/").filter((e=>""!==e)),o];void 0===l&&(l=!r(n,d));const h=a(Object.assign({},u),d,l),g=r(h,d);return function(e,n){try{(0,s.F)().setItem(e,JSON.stringify(n))}catch(e){console.log("setLocalStorage failed"),console.error(e)}}(i._,Object.assign(Object.assign({},h),{lastModified:e})),g}function c(e){let n;try{const t=(0,s.F)().getItem(e);let i;try{t&&(i=JSON.parse(t))}catch(e){console.error("localStore parse failed"),console.error(e)}"object"!=typeof i||Array.isArray(i)||null===i||(n=i)}catch(e){console.error("localStore getItem failed"),console.error(e)}return n}},5439:(e,n,t)=>{function i(e,n="Nmemonica App",t){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:n,album:t,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]}))}function s(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{n.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}function r(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{for(const[t,i]of e)try{n.setActionHandler(t,i)}catch(e){console.error(e)}}catch(e){console.error(e)}}else console.error("mediaSession not available")}function a(){if("mediaSession"in navigator){const e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}t.d(n,{$T:()=>i,CU:()=>a,aw:()=>r,gI:()=>s})},1059:(e,n,t)=>{function i(e){let n={},t=Object.keys(e).map((t=>{const i=e[t].trans;return i&&(n[i]={intr:t,trans:e[t].trans}),Object.assign(Object.assign({},e[t]),{uid:t})}));return t=t.map((e=>n[e.uid]?Object.assign(Object.assign({},e),{intr:n[e.uid].intr}):e)),t}function s(e){const n="grp",t="subGrp";return Object.values(e).reduce(((e,i)=>i[n]?e[i[n]]?i[t]&&!e[i[n]].includes(i[t])?Object.assign(Object.assign({},e),{[i[n]]:[...e[i[n]],i[t]]}):e:i[t]?Object.assign(Object.assign({},e),{[i[n]]:[i[t]]}):Object.assign(Object.assign({},e),{[i[n]]:[]}):Object.assign({},e)),{})}function r(e){const n="tag";let t=[];return Object.values(e).forEach((e=>{e[n]&&e[n].length>0&&(t=[...t,...e[n]])})),Array.from(new Set(t))}t.d(n,{MS:()=>i,by:()=>s,fh:()=>r})},7962:(e,n,t)=>{function i(e,n){const[t,i]=e.includes("?")?e.split("?"):[e,""],s=new URLSearchParams(i);for(const[e,t]of Object.entries(n))void 0!==t&&s.append(e,t);return[t,s.toString()].join("?")}t.d(n,{b1:()=>i})},8670:(e,n,t)=>{t.d(n,{cM:()=>c,iP:()=>a,kP:()=>o,oU:()=>r});var i=t(7294),s=t(2647);function r(){const[e,n]=(0,i.useState)(!0);return()=>n(!e)}function a(){const[e,n]=(0,i.useState)({width:void 0,height:void 0});return(0,i.useEffect)((()=>{const e=(0,s.J)();function t(){n({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",t),t(),()=>e.removeEventListener("resize",t)}),[]),e}function o(e,n){return function(){(n||"function"==typeof n)&&e(n)}}function c(e,n,t){return function(i){e(t?n(t):i instanceof Object&&"_reactName"in i?n():i?n(i):n())}}},6278:(e,n,t)=>{t.d(n,{R:()=>r});var i=t(7294),s=t(743);function r(){const e=(0,s.v9)((({global:e})=>e.swipeThreshold)),{value:n}=(0,s.v9)((({kanji:e})=>e),((e,n)=>e.version===n.version)),{value:t}=(0,s.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:r}=(0,s.v9)((({kanji:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[a,o,c]=(0,s.v9)((({kanji:e})=>{const{reinforce:n,filter:t,choiceN:i}=e.setting;return[n,t,i]}),s.wU),l=(0,s.v9)((({kanji:e})=>{const{activeTags:n}=e.setting;return n}),s.wU),u=(0,i.useRef)(a);u.current=a;const d=(0,i.useRef)(o);return d.current=o,{repetition:r,swipeThreshold:e,kanjiList:n,vocabList:t,activeTags:l,choiceN:c,reinforce:u,filterType:d}}},5507:(e,n,t)=>{t.d(n,{Eh:()=>s,JP:()=>r,nF:()=>a});var i=t(743);function s(){const[e,n,t,s]=(0,i.v9)((({global:e})=>{const{darkMode:n,swipeThreshold:t,motionThreshold:i,debug:s}=e;return[n,t,i,s]}),i.wU),r=(0,i.v9)((({global:e})=>{const{memory:n}=e;return n}),((e,n)=>e.usage===n.usage)),[a,o,c,l]=(0,i.v9)((({kanji:e})=>{const{choiceN:n,filter:t,reinforce:i,activeTags:s}=e.setting;return[n,t,i,s]}),i.wU),[u,d]=(0,i.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t}=e;return[n,t]}),i.wU),[h,g,v,p]=(0,i.v9)((({kana:e})=>{const{choiceN:n,wideMode:t,easyMode:i,charSet:s}=e.setting;return[n,t,i,s]}),i.wU),f=(0,i.v9)((({particle:e})=>e.setting.aRomaji)),{value:m}=(0,i.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:j}=(0,i.v9)((({vocabulary:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),{value:b}=(0,i.v9)((({phrases:e})=>e),((e,n)=>e.version===n.version)),{repetition:x}=(0,i.v9)((({phrases:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),{value:y}=(0,i.v9)((({kanji:e})=>e),((e,n)=>e.version===n.version)),w=(0,i.v9)((({kanji:e})=>e.tagObj),i.wU),{repetition:k}=(0,i.v9)((({kanji:e})=>e.setting),((e,n)=>e.repTID===n.repTID));return{darkMode:e,swipeThreshold:n,motionThreshold:t,memory:r,debug:s,kanjiChoiceN:a,kanjiFilter:o,kanjiReinforce:c,kanjiActiveTags:l,oppositesQRomaji:u,oppositesARomaji:d,choiceN:h,wideMode:g,easyMode:v,charSet:p,particlesARomaji:f,vocabList:m,kanjiTagObj:w,phraseList:b,KanjiList:y,vocabMeta:j,phraseMeta:x,kanjiMeta:k}}function r(){const{phrases:e}=(0,i.v9)((({phrases:e})=>({phrases:e}))),{ordered:n,romaji:t,reinforce:s,activeGroup:r,filter:a,repetition:o}=e.setting;return{phrases:e.value,phraseGroups:e.grpObj,phraseOrder:n,phraseRomaji:t,phraseReinforce:s,phraseActive:r,phraseFilter:a,phraseRep:o}}function a(){const{vocabulary:e}=(0,i.v9)((({vocabulary:e})=>({vocabulary:e}))),{ordered:n,romaji:t,bareKanji:s,hintEnabled:r,activeGroup:a,autoVerbView:o,verbColSplit:c,filter:l,memoThreshold:u,repetition:d,reinforce:h,verbFormsOrder:g}=e.setting;return{vocabulary:e.value,vocabGroups:e.grpObj,vocabOrder:n,vocabRomaji:t,showBareKanji:s,vocabHint:r,vocabActive:a,autoVerbView:o,verbColSplit:c,vocabFilter:l,memoThreshold:u,vocabRep:d,vocabReinforce:h,verbFormsOrder:g}}},8218:(e,n,t)=>{t.d(n,{E:()=>s});var i=t(9983);function s(e){return function(n){const t=t=>{try{(0,i.Mm)(t,e,n)}catch(e){Error}};return{addDeviceMotionEvent:function(){e>0&&(0,i.HG)((()=>{window.addEventListener("devicemotion",t)}),(()=>{}))},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",t)}}}}},9226:(e,n,t)=>{t.d(n,{q:()=>s});var i=t(7294);function s(e,n,t){(0,i.useEffect)((()=>{const i=function(e,n,t){return function(i){const s=[["ArrowRight",()=>e("left")],["ArrowLeft",()=>e("right")],["ArrowUp",()=>e("up")],["ArrowDown",()=>e("down")],[" ",n]];for(const[n,r]of s)if(n===i.key){let i=r;" "!==n&&"function"==typeof t&&(i=t({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[n]||"",(n=>{n?e(n):r()}))),i();break}}}(e,n,t);return document.addEventListener("keydown",i,!0),()=>{document.removeEventListener("keydown",i,!0)}}),[e,n,t])}},3518:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(7294),s=t(5439);function r(e,n,t,r,a){(0,i.useEffect)((()=>{(0,s.$T)(e);const i=[["play",()=>{n&&(t(),(0,s.gI)("playing"))}],["pause",()=>{n&&(r(),(0,s.gI)("paused"))}],["stop",()=>{n&&(r(),(0,s.gI)("paused"))}],["previoustrack",()=>{n&&(r(),a("right"))}],["nexttrack",()=>{n&&(r(),a("left"))}]];return(0,s.aw)(i),()=>{(0,s.CU)()}}),[e,n,t,r,a])}},6693:(e,n,t)=>{t.d(n,{M:()=>a});var i=t(7294),s=t(743),r=t(8916);function a(e,n){const t=(0,s.v9)((({global:e})=>e.swipeThreshold)),a=(0,i.useRef)({}),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const i=function(e,n){return function(t){n.current=(0,r.IY)(t,{verticalSwiping:!0,touchThreshold:e})}}(t,a),s=function(e){return function(n){e.current&&(e.current=(0,r.Si)(n,e.current))}}(a),c=function(e,n,t,i){return function(s){var a;let o=t;const c=s.target,l=Array.from(document.getElementsByClassName("loop-stop-btn")).some((e=>e.contains(c))),u=Array.from(document.getElementsByClassName("loop-no-interrupt")).some((e=>e.contains(c))),d=void 0===(null===(a=e.current.touchObject)||void 0===a?void 0:a.swipeLength)||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!(l||u&&d)){const a=(0,r.Yg)(e.current.touchObject,!0);"function"==typeof i&&(o=i(a,t)),n(s,Object.assign(Object.assign({},e.current),{onSwipe:o}))}}}(a,r.Kd,e,n);o.current&&(o.current.addEventListener("touchstart",i),o.current.addEventListener("touchmove",s),o.current.addEventListener("touchend",c));const l=o.current;return()=>{null==l||l.removeEventListener("touchstart",i),null==l||l.removeEventListener("touchmove",s),null==l||l.removeEventListener("touchend",c)}}),[a,t,e,n]),{HTMLDivElementSwipeRef:o}}},6281:(e,n,t)=>{t.d(n,{T:()=>y});var i=t(5893),s=t(7294),r=t(4184),a=t.n(r),o=t(5697),c=t.n(o),l=t(5529),u=t(7625),d=t(6024);function h(e){return e.visible?null:(0,i.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,i.jsx)(l.reW,{className:a()({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,i.jsx)("span",{className:"notification",children:e.loop})]})}function g(e){const{className:n}=e;return e.visible?null:(0,i.jsxs)("div",{className:a()(Object.assign({"loop-btn loop-start-btn clickable":!0},n||{})),"aria-label":"Loop start button",children:[(0,i.jsx)(u.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:d.aQ}),null!=e.countDown&&(0,i.jsx)("span",{className:"notification",children:e.countDown})]})}function v(e){const{className:n}=e;return e.visible?null:(0,i.jsx)("div",{className:a()(Object.assign({"loop-btn loop-stop-btn clickable":!0},n||{})),"aria-label":"Loop stop button",children:(0,i.jsx)(u.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:d.oD})})}h.propTypes={visible:c().bool,active:c().bool,loop:c().number,onClick:c().func},g.propTypes={visible:c().bool,onClick:c().func,className:c().object,countDown:c().number},v.propTypes={visible:c().bool,onClick:c().func,className:c().object};var p=t(2405),f=t(9983),m=t(5439),j=t(7891),b=t(8670);const x=15e3;function y(e,n,t){var r;const a=(0,s.useRef)(void 0),o=(0,s.useRef)(null),[c,l]=(0,s.useState)(0),[u,d]=(0,s.useState)(x/1e3),y=(0,s.useRef)(void 0),[k,N]=(0,s.useState)(null),T=(0,s.useRef)(void 0),S=(0,s.useRef)(void 0),[C,M]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=a;return()=>{var n;null===(n=e.current)||void 0===n||n.forEach((e=>e.abort()))}}),[]);const O=(0,b.oU)();let R;0===c?R=null:0===(null===(r=a.current)||void 0===r?void 0:r.length)?R=(0,i.jsx)(v,{}):void 0===a.current?R=(0,i.jsx)(g,{countDown:Array.isArray(o.current)?u:void 0,onClick:()=>{if(Array.isArray(a.current));else{if(Array.isArray(o.current)){const[e]=o.current;clearInterval(e),d(x/1e3)}y.current=void 0,M(void 0),a.current=[],setTimeout(A,100),O()}}}):void 0!==a.current&&(R=(0,i.jsx)(v,{onClick:()=>{E(),F(),l(0)}}));const P=(0,i.jsx)(h,{active:c>0,loop:c,onClick:()=>{const e=E();o.current=null,e&&w(k,N),l((e=>{const n=3===e;return y.current=n?void 0:y.current,n?0:e+1}))}});function A(){E();const e=new AbortController,i=new AbortController,s=new AbortController,r=new AbortController,o=new AbortController,u=()=>{void 0!==T&&(E(),F(),l(0))};let d,h,g;if("function"==typeof t){const{addDeviceMotionEvent:e,removeDeviceMotionEvent:n}=t(u);e(),d=n}a.current=[e,i,s,r,o],n?(h=e=>D("down",e),g=e=>(0,f.nD)(c,(()=>D("up",e)),1500,e)):(h=e=>D("up",e),g=e=>(0,f.nD)(c,(()=>D("down",e)),1500,e));const v=(e,n)=>{N((t=>{let i;return i=null===t||100-t<1?e/n*100:t+e/n*100,i}))};(0,f.wO)(700,e).then((()=>(T.current=Date.now(),h(i).catch((e=>{var n;if("UserAborted"===(null===(n=e.cause)||void 0===n?void 0:n.code))throw e}))))).then((()=>(0,f.wO)(3e3,s,v))).then((()=>(N(null),T.current=void 0,g(r).then((()=>(a.current=void 0,D("left")))).catch((e=>{var n;if("UserAborted"!==(null===(n=e.cause)||void 0===n?void 0:n.code))return a.current=void 0,D("left")}))))).then((()=>(0,f.wO)(100,o))).catch((()=>{})).then((()=>{"function"==typeof d&&d()}))}const E=(0,s.useCallback)((()=>{var e;let n=!1;return null===(e=a.current)||void 0===e||e.forEach((e=>{n=!0,e.abort()})),a.current=void 0,n}),[a]);function D(n,t){let i;return c>0&&(i=e(n,t)),i||Promise.reject("loop disabled")}function L(){let e;if(void 0!==T.current){const n=T.current;e=Math.abs(Date.now()-n)}return{tpElapsed:e}}function F(){var e;let n=!1;return c>0&&void 0===a.current&&(null===(e=o.current)||void 0===e||e.forEach((e=>{clearTimeout(e)})),o.current=null,d(x/1e3),y.current=void 0,M(void 0),T.current=void 0,S.current=void 0,N(null),n=!0),n}return{beginLoop:A,abortLoop:E,looperSwipe:D,gradeTimedPlayEvent:function(e,n,t){var i;if(c>0&&void 0!==y.current)if("reset"===C)!0===(null===(i=t[n])||void 0===i?void 0:i.pron)&&void 0!==S.current&&e((0,j.Gy)(n,S.current,{pronunciation:void 0}));else if(!0===y.current)void 0!==S.current&&e((0,j.Gy)(n,S.current));else{const t={pronunciation:"pronunciation"===C||void 0};e((0,j.d1)(n,t))}},resetTimedPlay:F,loopSettingBtn:P,loopActionBtn:R,timedPlayVerifyBtn:e=>(0,i.jsx)(p.lh,{visible:void 0!==y.current,hover:C,prevMissPronu:e,onPronunciation:()=>{e?(y.current=!1,M((e=>"reset"===e?void 0:"reset"))):(y.current=!1,M((e=>"pronunciation"===e?void 0:"pronunciation")))},onIncorrect:()=>{y.current=!1,M((e=>"incorrect"===e?void 0:"incorrect"))},onReset:()=>{y.current=!1,M((e=>"reset"===e?void 0:"reset"))}}),timedPlayAnswerHandlerWrapper:function(e,t){if(0===c)return t;let i=t;if("up"===e||"down"===e){const e=n?"up":"down";i=n=>t(e)}const s=function(e,n,t,i,s,r,a,o,c,l,u,d){let h=n;const g=()=>{};let v=()=>w(i,s);if(c()){const n=null===i&&void 0!==o.current,c=null!==i&&void 0!==o.current,p=null===i&&void 0===o.current;if("up"===e||"down"===e){const e=l();d.current=e.tpElapsed,u.current=!0,n?(v=g,u.current=void 0,setTimeout((()=>{u.current=!0}),1500),s(0),setTimeout((()=>{s(null)}),1500)):c||p&&(u.current=!1,h=g,v=g)}else{p&&(v=g);const e=function(e,n){const t=setInterval((()=>{n((n=>{const i=1===n;return e((e=>i?0:e)),i&&clearTimeout(t),i?x/1e3:n-1}))}),1e3);return t}(t,r);a.current=[e]}v(),(0,m.gI)("paused")}return h}(e,i,l,k,N,d,o,T,E,L,y,S);return s},loop:c,setLoop:l,tpAnimation:k,tpAnswered:y}}function w(e,n){null!==e&&setTimeout((()=>{n(0),setTimeout((()=>{n((e=>0===e?null:e))}),1e3)}),1500)}},5707:(e,n,t)=>{var i=t(5893),s=t(7294),r=t(745),a=t(743),o=t(9829),c=t(1659),l=t(8673),u=t(9385),d=t(7652),h=t(7186);const g=(0,o.hg)("version/getVersions",(()=>{return e=void 0,n=void 0,i=function*(){return fetch(h.qe.databaseURL+"/lambda/cache.json").then((e=>e.json()))},new((t=void 0)||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}));var e,n,t,i})),v=(0,o.oM)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:e=>{e.addCase(g.fulfilled,((e,n)=>n.payload))}}).reducer;var p=t(7891),f=t(5665);const m=(0,o.hg)("serviceWorker/serviceWorkerRegistered",(()=>{return e=void 0,n=void 0,i=function*(){return"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then((e=>{var n;return null===(n=e.active)||void 0===n?void 0:n.state})):Promise.reject("No Service Worker")},new((t=void 0)||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}));var e,n,t,i})),j=(0,o.oM)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded(e,n){const{newestWords:t}=n.payload;for(let e in t){const{freq:n,dic:i}=t[e];let s=f.jP,r="GET_VOCABULARY";"phrases"===e&&(s=f.kh,r="GET_PHRASES"),console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(n.length+" new "+e)}}},extraReducers:e=>{e.addCase(m.fulfilled,(e=>{e.registered=!0}))}}),{serviceWorkerNewTermsAdded:b}=j.actions,x=j.reducer;var y=t(7988),w=t(8056);const k=(0,o.xC)({reducer:{global:w.ZP,sw:x,version:v,kana:c.ZP,vocabulary:p.ZP,opposite:u.ZP,phrases:d.ZP,kanji:l.ZP,particle:y.ZP}});var N=t(4184),T=t.n(N),S=t(9655),C=t(6335),M=t(5697),O=t.n(M),R=t(4133);function P(e){let n=[],t=0;return e.forEach(((i,s)=>{if(s>0&&i.msg===e[s-1].msg)t++;else if(t>0){const e=n.slice(0,-1),s=n.slice(-1)[0];n=[...e,Object.assign(Object.assign({},s),{msg:`${s.msg} ${t+1} +`}),i],t=0}else n=[...n,i]})),n}function A(e){const n=!0===e.connected,t=(0,a.v9)((({global:t})=>!n&&e.messages?R.x6.DEBUG:t.debug)),r=(0,a.v9)((({global:t})=>!n&&e.messages?e.messages:t.console),a.wU),[o,c]=(0,s.useState)(6),[l,u]=(0,s.useState)(0),[d,h]=(0,s.useState)(P(r)),g=(0,s.useRef)();(0,s.useMemo)((()=>{if(t===R.x6.OFF)u(0),h([]);else{const e=P(r);if(u(0),h(e),c(6),void 0!==g.current&&clearTimeout(g.current),n){const e=setTimeout((()=>{c(3),g.current=void 0}),3e3);g.current=Number(e)}}}),[n,t,r]);const v=-o-l,p=l>0?-1*l:void 0,f=d.slice(v,p),m=(0,s.useCallback)((()=>{const e=d.length-o>-1?d.length-o:0;if(l<e){c(6),u((e=>e+1)),void 0!==g.current&&clearTimeout(g.current);const e=setTimeout((()=>{c(3),u(0),g.current=void 0}),1e4);g.current=Number(e)}}),[o,l,d]);return(0,i.jsx)("div",{className:T()({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected}),children:f.map(((e,n)=>{const t=T()(Object.assign(Object.assign({"app-sm-fs-xx-small":!0},e.css?{[e.css]:!0}:{}),{"correct-color":e.lvl===R.x6.DEBUG,"question-color":e.lvl===R.x6.WARN,"incorrect-color":e.lvl===R.x6.ERROR}));return(0,i.jsx)("div",{className:t,onClick:m,children:e.msg},`${e.msg} ${e.lvl}`)}))})}A.propTypes={connected:O().bool,messages:O().array};var E=t(8012),D=t(4766),L=t(1540),F=t(4921),I=t(1436),q=t(7625),Z=t(9983),G=t(8670),W=t(8859),V=t(6291),_=t(985),U=t(7885),K=t(4460);function H(){const e=(0,a.I0)(),n=(0,a.v9)((e=>e.kana.setting.charSet)),[t,r]=(0,s.useState)(!0),[o,l]=(0,s.useState)(0),[u,d]=(0,s.useState)(0),h=(0,s.useCallback)((()=>{t?(r(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(r(!0),document.body.classList.remove("no-scroll"))}),[t]),g=(0,s.useCallback)((e=>{if(e.target){const n=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(n))h();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(n))return h(),!1}}),[h]);let v=(0,s.useMemo)((()=>[{meta:Object.assign(Object.assign({},W.KanaGameMeta),{label:(0,Z.w_)(n,W.KanaGameMeta.label)}),icon:(0,i.jsx)("div",{className:"not-a-real-icon",children:(0,Z.w_)(n,["あ","ア","*"])}),wrap:n=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,G.cM)(e,c.I_),children:n})},{meta:L.OppositesGameMeta,icon:(0,i.jsx)(q.G,{icon:I.ejD,size:"2x"})},{meta:[K.VocabularyMeta,_.PhrasesMeta][o],icon:(0,i.jsx)(q.G,{icon:I.yGG,size:"2x"}),wrap:e=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,G.kP)(l,(e=>(0,Z.II)(e,["Vocab","Phrases"]))),children:e})},{meta:F.ParticlesGameMeta,icon:(0,i.jsx)(q.G,{icon:I._zQ,size:"2x"})},{meta:[V.KanjiMeta,E.KanjiGameMeta][u],icon:(0,i.jsx)("div",{className:"not-a-real-icon",children:(0,Z.w_)(u,["漢","G"])}),wrap:e=>(0,i.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,G.kP)(d,(e=>(0,Z.II)(e,["Kanji","KanjiGame"]))),children:e})},{meta:U.SettingsMeta,icon:(0,i.jsx)(q.G,{icon:I.klh,size:"2x"})}]),[e,n,u,o]);return(0,i.jsx)("div",{className:"navigation",children:(0,i.jsxs)("nav",{className:"my-navbar",children:[(0,i.jsx)(S.rU,{"aria-label":"Home",to:"/"}),(0,i.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:h,children:(0,i.jsxs)("button",{className:T()({"nav-menu-btn":!0,collapsed:t}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,i.jsx)("span",{className:"nav-btn-line"}),(0,i.jsx)("span",{className:"nav-btn-line"}),(0,i.jsx)("span",{className:"nav-btn-line"})]})}),(0,i.jsx)("div",{className:T()({"mobile d-lg-none":!0,collapse:t}),id:"nav-menu-mobile",onClick:g,children:(0,i.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:v.map(((e,n)=>(0,i.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,i.jsx)(S.rU,{to:e.meta.location,children:(0,i.jsx)("div",{className:"icon force-collapse mb-2",children:e.icon})}),(0,i.jsx)("div",{className:"caption",children:e.wrap?e.wrap(e.meta.label):e.meta.label})]},n)))})}),(0,i.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,i.jsx)("ul",{className:"d-flex",children:v.map(((e,n)=>(0,i.jsx)("li",{children:(0,i.jsx)(S.rU,{className:"desktop-link",to:e.meta.location,children:e.wrap?e.wrap(e.meta.label):e.meta.label})},n)))})})]})})}const z=(0,s.lazy)((()=>t.e(237).then(t.bind(t,8237)))),J=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,985)))),B=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,4460)))),Y=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,1540)))),X=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,8859)))),Q=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,6291)))),$=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,8012)))),ee=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,4766)))),ne=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,4921)))),te=(0,s.lazy)((()=>Promise.resolve().then(t.bind(t,7885)))),ie=document.querySelector("#app-container");(0,r.s)(ie).render((0,i.jsx)(s.StrictMode,{children:(0,i.jsx)(a.zt,{store:k,children:(0,i.jsx)((function(){const e=(0,a.I0)();(0,s.useEffect)((()=>{e(g()),e((0,w.gK)()),e(m()).then((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(n=>{const t=n.data;t.type===f.L6&&e((0,w.kg)(t.msg,t.lvl,f.L6))}))}))}),[]);const n=(0,a.v9)((({global:e})=>e.darkMode)),t=T()({"d-flex flex-column":!0,"dark-mode":n});return(0,i.jsx)(S.UT,{basename:"/",children:(0,i.jsxs)("div",{id:"page-content",className:t,children:[(0,i.jsx)(A,{connected:!0}),(0,i.jsx)(H,{}),(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{}),children:(0,i.jsxs)(C.Z5,{children:[(0,i.jsx)(C.AW,{path:"/",element:(0,i.jsx)(B,{})}),(0,i.jsx)(C.AW,{path:_.PhrasesMeta.location,element:(0,i.jsx)(J,{})}),(0,i.jsx)(C.AW,{path:K.VocabularyMeta.location,element:(0,i.jsx)(B,{})}),(0,i.jsx)(C.AW,{path:L.OppositesGameMeta.location,element:(0,i.jsx)(Y,{})}),(0,i.jsx)(C.AW,{path:W.KanaGameMeta.location,element:(0,i.jsx)(X,{})}),(0,i.jsx)(C.AW,{path:V.KanjiMeta.location,element:(0,i.jsx)(Q,{})}),(0,i.jsx)(C.AW,{path:E.KanjiGameMeta.location,element:(0,i.jsx)($,{})}),(0,i.jsx)(C.AW,{path:D.KanjiGridMeta.location,element:(0,i.jsx)(ee,{})}),(0,i.jsx)(C.AW,{path:F.ParticlesGameMeta.location,element:(0,i.jsx)(ne,{})}),(0,i.jsx)(C.AW,{path:U.SettingsMeta.location,element:(0,i.jsx)(te,{})}),(0,i.jsx)(C.AW,{path:"*",element:(0,i.jsx)(z,{})})]})})]})})}),{})})}))},8056:(e,n,t)=>{t.d(n,{zA:()=>S,ZP:()=>M,M4:()=>b,gK:()=>y,kg:()=>C,cv:()=>N,TJ:()=>x,nh:()=>T,In:()=>k});var i=t(9829),s=t(4613),r=t.n(s),a=t(5741),o=t(3859),c=t(4133);function l(){return new Promise(((e,n)=>{"webkitTemporaryStorage"in navigator?navigator.webkitTemporaryStorage.queryUsageAndQuota(((n,t)=>{e({quota:t,usage:n})}),n):null!=navigator.storage&&null!=navigator.storage.estimate?navigator.storage.estimate().then(e).catch(n):n(new Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}}))}))}var u=t(7652),d=t(8673),h=t(1659),g=t(9385),v=t(7988),p=t(7891),f=t(5665),m=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const j={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},b=(0,i.hg)("setting/getMemoryStorageStatus",((e,n)=>m(void 0,void 0,void 0,(function*(){return function(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then((e=>l().then((({quota:n,usage:t})=>({quota:n,usage:t,persistent:e})))));{const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}}().catch((e=>{throw n.dispatch(C("Could not get memory storage status",c.x6.WARN)),n.dispatch(C(e.message,c.x6.WARN)),e}))})))),x=(0,i.hg)("setting/setPersistentStorage",((e,n)=>m(void 0,void 0,void 0,(function*(){return function(){const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then((function(n){return n?l().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:void 0}))):navigator.storage.persist().then((function(n){let t;return n?(t="Storage will not be cleared except by explicit user action",l().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:"Storage will not be cleared except by explicit user action"})))):Promise.reject(e)}))})):Promise.reject(e)}().catch((e=>{throw n.dispatch(C("Could not set persistent storage",c.x6.WARN)),n.dispatch(C(e.message,c.x6.WARN)),e}))})))),y=(0,i.hg)("setting/localStorageSettingsInitialized",((e,n)=>m(void 0,void 0,void 0,(function*(){const e=(0,o.xr)(a._);return n.dispatch((0,g.DA)(e.opposite)),n.dispatch((0,u.fN)(e.phrases)),n.dispatch((0,d.QJ)(e.kanji)),n.dispatch((0,h.z7)(e.kana)),n.dispatch((0,v.ok)(e.particle)),n.dispatch((0,p.az)(e.vocabulary)),r()(j,Object.assign({},e.global))})))),w=(0,i.oM)({name:"setting",initialState:j,reducers:{toggleDarkMode(e){const n=new Date;(0,o.JW)(n,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold(e,n){let t=n.payload;const i=new Date;e.swipeThreshold=(0,o.JW)(i,{global:e},"/global/","swipeThreshold",t)},setMotionThreshold(e,n){let t=n.payload;const i=new Date;e.motionThreshold=(0,o.JW)(i,{global:e},"/global/","motionThreshold",t)},debugToggled:{reducer:(e,n)=>{const t=n.payload,i=(0,c.P_)(e.debug+1,Object.values(c.x6),t);e.debug=(0,o.JW)(new Date,{global:e},"/global/","debug",i)},prepare:e=>({payload:e})},logger:{reducer:(e,n)=>{const{debug:t}=e,{msg:i,lvl:s,type:r}=n.payload;if(0!==t&&s<=t){let n;n=r===f.L6?"SW: "+i:"UI: "+i,e.console=[...e.console,{msg:n,lvl:s}]}},prepare:(e,n=c.x6.DEBUG,t="ui_logger_msg")=>({payload:{msg:e,lvl:n,type:t}})}},extraReducers:e=>{e.addCase(y.fulfilled,((e,n)=>{const t=n.payload;return Object.assign({},t)})),e.addCase(b.fulfilled,((e,n)=>{const{quota:t,usage:i,persistent:s}=n.payload;e.memory={quota:t,usage:i,persistent:s}})),e.addCase(x.fulfilled,((e,n)=>{const{quota:t,usage:i,persistent:s,warning:r}=n.payload;r&&console.warn(r),e.memory={quota:t,usage:i,persistent:s}}))}}),{toggleDarkMode:k,setMotionThreshold:N,setSwipeThreshold:T,debugToggled:S,logger:C}=w.actions,M=w.reducer},1659:(e,n,t)=>{t.d(n,{Bs:()=>g,I_:()=>h,PD:()=>p,ZP:()=>f,_S:()=>v,z7:()=>l});var i=t(9829),s=t(4613),r=t.n(s),a=t(6954),o=t(3859),c=t(4133);const l=(0,i.hg)("kana/kanaFromLocalStorage",(e=>{return n=void 0,t=void 0,s=function*(){return e},new((i=void 0)||(i=Promise))((function(e,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}c((s=s.apply(n,t||[])).next())}));var n,t,i,s})),u={hiragana:a.Bw,katakana:a.TU,vowels:a.Be,consonants:a.sH,sounds:a.jX,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},d=(0,i.oM)({name:"kana",initialState:u,reducers:{toggleKana(e){const{charSet:n}=e.setting,t=n+1<Object.keys(c.kS).length?n+1:c.kS.HIRAGANA;e.setting.charSet=(0,o.JW)(new Date,{kana:e.setting},"/kana/","charSet",t)},setKanaBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,o.JW)(new Date,{kana:e.setting},"/kana/","choiceN",t)},toggleKanaEasyMode(e){e.setting.easyMode=(0,o.JW)(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode(e){e.setting.wideMode=(0,o.JW)(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:e=>{e.addCase(l.fulfilled,((e,n)=>{const t=n.payload,i=r()(u.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},i)})}))}}),{toggleKana:h,setKanaBtnN:g,toggleKanaEasyMode:v,toggleKanaGameWideMode:p}=d.actions,f=d.reducer},8673:(e,n,t)=>{t.d(n,{LD:()=>f,Mh:()=>m,QJ:()=>h,SI:()=>j,X8:()=>p,ZP:()=>w,cy:()=>x,ow:()=>b,tk:()=>d,vT:()=>y});var i=t(9829),s=t(4613),r=t.n(s),a=t(7186),o=t(1059),c=t(4133),l=t(3859),u=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const d=(0,i.hg)("kanji/getKanji",((e,n)=>u(void 0,void 0,void 0,(function*(){const e=n.getState().version.kanji||"0";return"0"===e&&console.error("fetching kanji: 0"),fetch(a.qe.databaseURL+"/lambda/kanji.json",{headers:{"Data-Version":e}}).then((n=>n.json().then((n=>({value:n,version:e})))))})))),h=(0,i.hg)("kanji/kanjiFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e})))),g={value:[],version:"",tagObj:[],setting:{choiceN:32,filter:2,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],activeTags:[]}},v=(0,i.oM)({name:"kanji",initialState:g,reducers:{toggleKanjiActiveTag(e,n){const t=n.payload,{activeTags:i}=e.setting;let s;s=i.includes(t)?i.filter((e=>e!==t)):[...i,t],e.setting.activeTags=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeTags",s)},toggleKanjiActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:i}=e.setting,s=Array.isArray(t)?t:[t],r=(0,c.c0)(s,i);e.setting.activeGroup=(0,l.JW)(new Date,{kaji:e.setting},"/kanji/","activeGroup",r)},addFrequencyKanji(e,n){const t=n.payload,{value:i}=(0,c.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",i)},removeFrequencyKanji(e,n){var t;const i=n.payload,s=e.setting.repetition;if(!0===(null===(t=s[i])||void 0===t?void 0:t.rein)){const{value:n}=(0,c.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n),n&&(e.setting.repTID=Date.now(),e.setting.repetition=n)}},setKanjiBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","choiceN",t)},toggleKanjiFilter(e,n){const t=n.payload,{filter:i,reinforce:s}=e.setting,r=(0,c.P_)(i+1,[c.Lx.FREQUENCY,c.Lx.TAGS],t);e.setting.filter=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","filter",r),0!==r&&s&&(e.setting.reinforce=!1)},toggleKanjiReinforcement(e){e.setting.reinforce=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","reinforce")}},extraReducers:e=>{e.addCase(d.fulfilled,((e,n)=>{const{value:t,version:i}=n.payload,s=Object.keys(t).map((e=>Object.assign(Object.assign({},t[e]),{uid:e,tag:void 0===t[e].tag?[]:t[e].tag})));e.tagObj=(0,o.fh)(t),e.value=s,e.version=i})),e.addCase(h.fulfilled,((e,n)=>{const t=n.payload,i=r()(g.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})}))}}),{toggleKanjiActiveTag:p,toggleKanjiActiveGrp:f,addFrequencyKanji:m,removeFrequencyKanji:j,setKanjiBtnN:b,toggleKanjiFilter:x,toggleKanjiReinforcement:y}=v.actions,w=v.reducer},9385:(e,n,t)=>{t.d(n,{CO:()=>u,Cz:()=>d,DA:()=>c,ZP:()=>h,bt:()=>o});var i=t(9829),s=t(7186),r=t(3859),a=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const o=(0,i.hg)("opposite/getOpposite",((e,n)=>a(void 0,void 0,void 0,(function*(){const e=n.getState().version.phrases||"0";return"0"===e&&console.error("fetching opposite: 0"),fetch(s.qe.databaseURL+"/lambda/opposites.json",{headers:{"Data-Version":e}}).then((n=>n.json().then((n=>({value:n,version:e})))))})))),c=(0,i.hg)("opposite/oppositeFromLocalStorage",(e=>a(void 0,void 0,void 0,(function*(){return e})))),l=(0,i.oM)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1},reducers:{setOppositesARomaji(e){const n=new Date,t={opposite:e};e.aRomaji=(0,r.JW)(n,t,"/opposite/","aRomaji")},setOppositesQRomaji(e){const n=new Date,t={opposite:e};(0,r.JW)(n,t,"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji}},extraReducers:e=>{e.addCase(o.fulfilled,((e,n)=>{const{value:t,version:i}=n.payload;e.value=t,e.version=i})),e.addCase(c.fulfilled,((e,n)=>{const t=n.payload;return Object.assign(Object.assign({},e),t)}))}}),{setOppositesARomaji:u,setOppositesQRomaji:d}=l.actions,h=l.reducer},7988:(e,n,t)=>{t.d(n,{ZP:()=>m,aq:()=>d,ok:()=>h,ro:()=>f});var i=t(9829),s=t(4613),r=t.n(s),a=t(9815),o=t(2850),c=t(3859),l=t(7652),u=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const d=(0,i.hg)("particle/getParticleGame",((e,n)=>u(void 0,void 0,void 0,(function*(){const e=n.getState().particle,t=n.getState().phrases.value;if(t.length>0){let n;return 0===e.particleGame.phrases.length&&(n=g(t)),{game:n}}return n.dispatch((0,l.cC)()).then((e=>{const n=e.payload.value,t=(0,l.Y1)(n);return{phrase:t,game:g(t)}}))})))),h=(0,i.hg)("particleGame/particleFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e}))));function g(e){let n=[],t={};const i=e.reduce(((e,i)=>{var s;if(i.particles&&(null===(s=i.particles)||void 0===s?void 0:s.length)>0){const s=o.TZ.parse(i).getSpelling();i.particles.forEach((r=>{if(2===s.split(r).length){const t=(0,a.C5)(r),o=s.indexOf(r),c={japanese:r,romaji:t,html:r},l={japanese:r,romaji:t,start:o,end:o+r.length,html:r};n=[...n,c],e=[...e,{answer:l,question:i,english:i.english,literal:i.lit}]}else t=Object.assign(Object.assign({},t),{[i.english]:{japanese:s,particle:r,times:s.split(r).length}})}))}return e}),[]);return console.error("More than one match "+Object.keys(t).length),console.table(t),{phrases:i,particles:n}}const v={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1}},p=(0,i.oM)({name:"particleGame",initialState:v,reducers:{setParticlesARomaji(e){e.setting.aRomaji=(0,c.JW)(new Date,{particle:e.setting},"/particle/","aRomaji")}},extraReducers:e=>{e.addCase(d.fulfilled,((e,n)=>{const{game:t}=n.payload;t&&(e.particleGame=t)})),e.addCase(h.fulfilled,((e,n)=>{const t=n.payload,i=r()(v.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},i)})}))}}),{setParticlesARomaji:f}=p.actions,m=p.reducer},7652:(e,n,t)=>{t.d(n,{Lp:()=>w,OJ:()=>j,Y1:()=>d,ZP:()=>T,cC:()=>h,cz:()=>x,d1:()=>m,f6:()=>b,fN:()=>g,gP:()=>k,mW:()=>N,s5:()=>v,vy:()=>y});var i=t(9829),s=t(4613),r=t.n(s),a=t(7186),o=t(1059),c=t(3859),l=t(4133),u=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const d=e=>Object.keys(e).map((n=>Object.assign(Object.assign({},e[n]),{uid:n}))),h=(0,i.hg)("phrase/getPhrase",((e,n)=>u(void 0,void 0,void 0,(function*(){const e=n.getState().version.phrases||"0";return"0"===e&&console.error("fetching phrase: 0"),fetch(a.qe.databaseURL+"/lambda/phrases.json",{headers:{"Data-Version":e}}).then((n=>n.json().then((n=>({value:n,version:e})))))})))),g=(0,i.hg)("phrase/phraseFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e})))),v=(0,i.hg)("phrase/updateSpaceRepPhrase",((e,n)=>u(void 0,void 0,void 0,(function*(){const{uid:t,shouldIncrement:i}=e,s=n.getState().phrases.setting.repetition;return(0,l.pg)(t,s,{count:i,date:!0})})))),p={value:[],version:"",grpObj:{},setting:{ordered:0,practiceSide:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},frequency:{uid:void 0,count:0},activeGroup:[],filter:0}},f=(0,i.oM)({name:"phrase",initialState:p,reducers:{togglePhrasesFilter(e,n){const t=n.payload,i=[l.Lx.FREQUENCY,l.Lx.GROUP],{filter:s,reinforce:r}=e.setting,a=(0,l.P_)(s+1,i,t);e.setting.filter=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","filter",a),a!==l.Lx.GROUP&&r&&(e.setting.reinforce=!1)},togglePhraseActiveGrp(e,n){const t=n.payload,{activeGroup:i}=e.setting,s=Array.isArray(t)?t:[t],r=(0,l.c0)(s,i);e.setting.activeGroup=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","activeGroup",r)},togglePhrasesReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","reinforce")},addFrequencyPhrase(e,n){const t=n.payload,{value:i}=(0,l.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",i);let s={uid:t,count:e.setting.frequency.count+1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",s)},removeFrequencyPhrase(e,n){var t;const i=n.payload,s=e.setting.repetition;if(!0===(null===(t=s[i])||void 0===t?void 0:t.rein)){const{value:n}=(0,l.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n);let t={uid:i,count:e.setting.frequency.count-1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",t)}},flipPhrasesPracticeSide(e){e.setting.practiceSide=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","practiceSide")},togglePhrasesRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering(e){const n=[l.vl.RANDOM,l.vl.VIEW_DATE],{ordered:t}=e.setting;let i=(0,l.P_)(t+1,n);e.setting.ordered=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","ordered",i)}},extraReducers:e=>{e.addCase(h.fulfilled,((e,n)=>{const{value:t,version:i}=n.payload;e.grpObj=(0,o.by)(t),e.value=d(t),e.version=i})),e.addCase(g.fulfilled,((e,n)=>{const t=n.payload,i=r()(p.setting,t),s=Object.keys(i.repetition).filter((e=>{var n;return!0===(null===(n=i.repetition[e])||void 0===n?void 0:n.rein)}));return i.frequency={uid:void 0,count:s.length},Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})})),e.addCase(v.fulfilled,((e,n)=>{const{value:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t)}))}}),{flipPhrasesPracticeSide:m,togglePhrasesRomaji:j,togglePhrasesFilter:b,togglePhraseActiveGrp:x,togglePhrasesReinforcement:y,addFrequencyPhrase:w,removeFrequencyPhrase:k,togglePhrasesOrdering:N}=f.actions,T=f.reducer},4133:(e,n,t)=>{t.d(n,{Lx:()=>s,P_:()=>c,c0:()=>l,iU:()=>o,kS:()=>a,pg:()=>u,vl:()=>r,x6:()=>i});const i=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),s=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),r=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4}),a=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),o=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty"];function c(e,n,t){const i=Math.max(...n);let s=e;if(void 0!==t&&n.includes(t))s=t;else for(;!n.includes(s)||s>i;)s=s+1>i?0:s+1;return s}function l(e,n){const t=Array.from(new Set(e));let i=Array.from(new Set(n));return t.forEach((e=>{const n=!e.includes(".");i=i.includes(e)?i.filter((n=>n!==e)):[...i,e],n&&i.some((n=>n.includes(e+".")))&&(i=i.filter((n=>!n.startsWith(e+"."))))})),i}function u(e,n,t={count:!0,date:!0},i){var s;const r=n[e];let a=void 0===r?void 0:{[e]:n[e]};const o=null!==(s=null==r?void 0:r.vC)&&void 0!==s?s:-1;let c;c=o>0&&!0===t.count?o+1:o>0&&!1===t.count?o:1;let l={};if(void 0!==i){if(i.toggle){const t=i.toggle.reduce(((t,i)=>{let s;return s=["f"].includes(i)?!(n[e]&&!1===n[e][i]):n[e]&&n[e][i],Object.assign(Object.assign({},t),{[i]:!s})}),{});l=Object.assign(Object.assign({},l),t)}if(void 0!==i.set){const e=Object.keys(i.set).reduce(((e,n)=>(void 0!==i.set&&void 0!==i.set[n]&&(e=null===i.set[n]?Object.assign(Object.assign({},e),{[n]:void 0}):Object.assign(Object.assign({},e),{[n]:i.set[n]})),e)),{});l=Object.assign(Object.assign({},l),e)}}const u=null==r?void 0:r.d,d=void 0!==u&&!1===t.date?u:(new Date).toJSON(),h=Object.assign(Object.assign(Object.assign({},n[e]||{}),{vC:c,d}),l),g={[e]:h};return a=void 0===a?Object.assign({},g):a,{map:g,prevMap:a,value:Object.assign(Object.assign({},n),g)}}},7891:(e,n,t)=>{t.d(n,{$u:()=>R,E3:()=>p,Gy:()=>D,Hi:()=>x,Rz:()=>h,S5:()=>P,Tn:()=>T,VX:()=>C,Vb:()=>O,Wo:()=>g,ZP:()=>F,ZZ:()=>N,_4:()=>E,_n:()=>j,az:()=>v,d1:()=>L,eK:()=>k,gl:()=>S,kn:()=>A,oG:()=>M,rZ:()=>m,sG:()=>w,wf:()=>y,xz:()=>b});var i=t(9829),s=t(4613),r=t.n(s),a=t(7186),o=t(9983),c=t(3859),l=t(1059),u=t(4133),d=function(e,n,t,i){return new(t||(t=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}))};const h=(0,i.hg)("vocabulary/getVocabulary",((e,n)=>d(void 0,void 0,void 0,(function*(){const e=n.getState().version.vocabulary||"0";return"0"===e&&console.error("fetching vocabulary: 0"),fetch(a.qe.databaseURL+"/lambda/vocabulary.json",{headers:{"Data-Version":e}}).then((n=>n.json().then((n=>({value:n,version:e})))))})))),g=(0,i.hg)("vocabulary/updateSpaceRepWord",((e,n)=>d(void 0,void 0,void 0,(function*(){const{uid:t,shouldIncrement:i}=e,s=n.getState().vocabulary.setting.repetition;return(0,u.pg)(t,s,{count:i,date:!0})})))),v=(0,i.hg)("vocabulary/vocabularyFromLocalStorage",(e=>d(void 0,void 0,void 0,(function*(){return e})))),p={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,practiceSide:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,memoThreshold:o.YZ,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:(0,o.kf)().map((e=>e.name))}},f=(0,i.oM)({name:"vocabulary",initialState:p,reducers:{verbFormChanged:(e,n)=>Object.assign(Object.assign({},e),{verbForm:n.payload}),toggleVocabularyActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:i}=e.setting,s=Array.isArray(t)?t:[t],r=(0,u.c0)(s,i);e.setting.activeGroup=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",r)},furiganaToggled(e,n){const t=n.payload,{value:i}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},toggleVocabularyReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce")},toggleVocabularyOrdering(e,n){const{ordered:t}=e.setting,i=n.payload,s=[u.vl.ALPHABETIC,u.vl.DIFFICULTY,u.vl.GAME,u.vl.RANDOM,u.vl.VIEW_DATE],r=(0,u.P_)(t+1,s,i);e.setting.ordered=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",r)},flipVocabularyPracticeSide(e){e.setting.practiceSide=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","practiceSide")},toggleVocabularyRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji(e){e.setting.bareKanji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint(e){e.setting.hintEnabled=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter(e,n){const t=[u.Lx.FREQUENCY,u.Lx.GROUP],i=n.payload,{filter:s,reinforce:r}=e.setting,a=(0,u.P_)(s+1,t,i);e.setting.filter=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","filter",a),0!==a&&r&&(e.setting.reinforce=!1)},setVerbFormsOrder(e,n){const t=n.payload;e.setting.verbFormsOrder=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",t)},toggleAutoVerbView(e){e.setting.autoVerbView=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit(e,n){const t=n.payload;e.setting.verbColSplit=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",t)},addFrequencyWord(e,n){const t=n.payload,{value:i}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},removeFrequencyWord(e,n){var t;const i=n.payload,s=e.setting.repetition;if(!0===(null===(t=s[i])||void 0===t?void 0:t.rein)){const{value:n}=(0,u.pg)(i,s,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)}},setMemorizedThreshold(e,n){const t=n.payload;e.setting.memoThreshold=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","memoThreshold",t)},setWordDifficulty:{reducer:(e,n)=>{const{uid:t,value:i}=n.payload,{value:s}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:i}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setWordTPCorrect:{reducer:(e,n)=>{var t;const{uid:i,tpElapsed:s,pronunciation:r}=n.payload,a=e.setting.repetition;let o=1,l=1,u=s;const d=a[i];if(void 0!==d){const e=d.tpPc,n=d.tpAcc,t=d.tpCAvg||0;if(void 0!==e&&null!=n){o=e+1;const i=e*n;l=(i+1)/o,u=(t*i+s)/(i+1)}}const h=r||null!==(t=null==d?void 0:d.pron)&&void 0!==t&&t,g=Object.assign(Object.assign({},a[i]||{}),{pron:h||void 0,tpPc:o,tpAcc:l,tpCAvg:u}),v=Object.assign(Object.assign({},a),{[i]:g});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",v)},prepare:(e,n,{pronunciation:t}={})=>({payload:{uid:e,tpElapsed:n,pronunciation:t}})},setWordTPIncorrect:{reducer:(e,n)=>{const{uid:t,pronunciation:i}=n.payload,s=e.setting.repetition;let r=1,a=0;const o=s[t];if(void 0!==o){const e=o.tpPc,n=o.tpAcc;void 0!==e&&null!=n&&(r=e+1,a=(e*n+0)/r)}const l=Object.assign(Object.assign({},s[t]||{}),{tpPc:r,tpAcc:a,pron:!!i||void 0}),u=Object.assign(Object.assign({},s),{[t]:l});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",u)},prepare:(e,{pronunciation:n}={})=>({payload:{uid:e,pronunciation:n}})}},extraReducers:e=>{e.addCase(v.fulfilled,((e,n)=>{const t=n.payload,i=r()(p.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},i),{repTID:Date.now()})})})),e.addCase(h.fulfilled,((e,n)=>{const{value:t,version:i}=n.payload;e.grpObj=(0,l.by)(t),e.value=(0,l.MS)(t),e.version=i})),e.addCase(g.fulfilled,((e,n)=>{const{value:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)}))}}),{verbFormChanged:m,furiganaToggled:j,removeFrequencyWord:b,setVerbFormsOrder:x,toggleVocabularyOrdering:y,toggleVocabularyActiveGrp:w,toggleAutoVerbView:k,toggleVocabularyFilter:N,toggleVocabularyHint:T,toggleVocabularyReinforcement:S,toggleVocabularyRomaji:C,updateVerbColSplit:M,toggleVocabularyBareKanji:O,flipVocabularyPracticeSide:R,addFrequencyWord:P,setWordDifficulty:A,setMemorizedThreshold:E,setWordTPCorrect:D,setWordTPIncorrect:L}=f.actions,F=f.reducer},6954:e=>{e.exports=JSON.parse('{"Be":["a","i","u","e","o"],"sH":["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],"Bw":[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],"TU":[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],"jX":{"si":"shi","ti":"chi","tu":"tsu","hu":"fu","zi":"ji","di":"dji","du":"dzu","Na":"n"}}')}},e=>{e.O(0,[816,913,794,931,612,697,555,774,25,104,105,418,642,995,86,220,183,323,593,623,617,216,810,260,303,979,655],(()=>(5707,e(e.s=5707)))),e.O()}]);