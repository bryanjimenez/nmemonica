"use strict";(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([[179],{7186:(e,n,t)=>{t.d(n,{qe:()=>i,vT:()=>r});const s="nmemonica-9d977",i={apiKey:"AIzaSyD0R3dzI2GREIuA0irO3dMT0n4CP59-GjQ",authDomain:s+".firebaseapp.com",databaseURL:"https://"+s+".firebaseio.com",projectId:s,storageBucket:s+".appspot.com",messagingSenderId:"839840260761",appId:"1:839840260761:web:6d72438c4131e3ce368e08"},r="https://us-east1-"+s+".cloudfunctions.net/g_translate_pronounce"},3968:(e,n,t)=>{t.d(n,{Z:()=>u});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(5529),o=t(7186),c=t(7962),l=t(5965);function u(e){let n;const t=e.word;return(0,s.jsx)("div",{className:"clickable",onTouchStart:e.visible?()=>{n=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?()=>{const s=~~(Date.now()-n)<500&&!e.reCache?"":"/override_cache",i=(0,c.b1)(o.vT+s,t);(0,l.R$)(i)}:void 0,children:e.visible&&(0,s.jsx)(a.Ibz,{size:"medium","aria-label":"pronunciation"})})}u.defaultProps={visible:!1},u.propTypes={word:r().shape({tl:r().string.isRequired,q:r().string.isRequired,uid:r().string.isRequired}).isRequired,reCache:r().bool,onPushedPlay:r().func,visible:r().bool}},8737:(e,n,t)=>{t.d(n,{M:()=>l});var s=t(5893),i=t(4184),r=t.n(i),a=t(5697),o=t.n(a),c=t(5529);function l(e){const n=r()({[""+e.addlStyle]:!!e.addlStyle,"p-0 px-2":!0,"font-weight-bold":e.active});return(0,s.jsxs)("div",{className:n,onClick:e.onClick,children:[(0,s.jsx)("span",{className:"p-1",children:e.active?(0,s.jsx)(c.oOx,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,s.jsx)(c.wl8,{className:"clickable",size:"small","aria-label":"add"})}),(0,s.jsx)("span",{className:"p-1",children:e.children})]})}t(7294),l.propTypes={addlStyle:o().string,active:o().bool,onClick:o().func,children:o().string}},6537:(e,n,t)=>{t.d(n,{n:()=>c});var s=t(5893),i=(t(7294),t(4184)),r=t.n(i),a=t(5697),o=t.n(a);function c(e){var n;const t=r()({[e.addlStyle]:!0,"d-flex flex-column justify-content-around text-center h-100":!0});return(0,s.jsx)("div",{className:t,children:(0,s.jsx)("div",{children:null!==(n=e.text)&&void 0!==n?n:"Awaiting data ..."})})}c.propTypes={addlStyle:o().string}},2405:(e,n,t)=>{t.d(n,{A:()=>g,D4:()=>x,Qp:()=>w,R_:()=>p,Ro:()=>j,lh:()=>y,ph:()=>m,uY:()=>b,y8:()=>f});var s=t(5893),i=t(7294),r=t(4184),a=t.n(r),o=t(5697),c=t.n(o),l=t(5529),u=t(7625),d=t(1436),h=t(8670);function g(e){const{active:n,toggle:t,toggleFurigana:i,vocabulary:r}=e;return!1===e.visible?null:(0,s.jsx)("div",{className:a()({clickable:n,"sm-icon-grp":!0,"sm-kanji":n}),onClick:n?()=>i(r.uid):void 0,"aria-label":"Toggle furigana",children:n?(0,s.jsxs)("ruby",{children:["漢",(0,s.jsx)("rt",{className:a()({"disabled disabled-color":!t}),children:"ふりがな"})]}):(0,s.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function v(e){const n=(0,i.useRef)(0),{addFrequencyTerm:t,removeFrequencyTerm:r,toggle:o,term:c,count:u=n.current}=e,d=(0,h.oU)(),g=n.current===u;return(0,i.useEffect)((()=>{n.current=void 0!==u?u:0,g||d()}),[u,g,d]),!1===e.visible?null:(0,s.jsxs)("div",{"aria-label":o?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:()=>{o?r(c.uid):t(c.uid)},children:[o?(0,s.jsx)(l.oOx,{size:"small"}):(0,s.jsx)(l.wl8,{size:"small"}),void 0!==u&&u>-1&&(0,s.jsx)("span",{className:a()({notification:!0,"notification-fade":g}),children:u})]})}g.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,toggleFurigana:c().func,hasFurigana:c().bool,vocabulary:c().object},v.propTypes={visible:c().bool,active:c().bool,addFrequencyTerm:c().func,removeFrequencyTerm:c().func,toggle:c().bool,term:c().object,count:c().number};const p=(0,i.memo)(v);function f(e){const{active:n,setShowHint:t}=e;return e.visible?(0,s.jsx)("div",{className:a()({"sm-icon-grp":!0,clickable:n,"disabled disabled-color":!n}),onClick:n?()=>{t(!0),setTimeout((()=>{t(!1)}),1500)}:void 0,"aria-label":n?"Show hint":"Hint unavailable",children:(0,s.jsx)(l.OgN,{size:"small"})}):null}function m(e){const{toggleAutoVerbView:n,autoVerbView:t}=e;return e.visible?(0,s.jsx)("div",{className:"sm-icon-grp clickable",onClick:()=>n(),"aria-label":"Toggle auto verb view",children:(0,s.jsx)(u.G,{icon:t?d.gPx:d.Bxq})}):null}function j(e){const{active:n,action:t}=e;return!1===e.visible?null:(0,s.jsx)("div",{className:a()({clickable:!0,"sm-icon-grp":!0,"disabled-color":n}),onClick:()=>{"function"==typeof t&&t()},"aria-label":"Override audio",children:(0,s.jsx)(u.G,{icon:d.TZC})})}function b(e){const{action:n,toggle:t}=e;return!1===e.visible?null:(0,s.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,s.jsx)(u.G,{className:"clickable",onClick:n,icon:t?d.dzc:d.UJf}),(0,s.jsx)("span",{className:"notification",children:(0,s.jsx)(u.G,{icon:t?d.UJf:d.dzc})})]})}function x(e){const{action:n,toggle:t}=e;return e.visible?(0,s.jsx)("div",{className:a()({clickable:!0,"sm-icon-grp":!0,"info-color":t}),onClick:()=>{"function"==typeof n&&n()},"aria-label":"Literal english translation",children:(0,s.jsx)(l.Rg1,{size:"small"})}):null}function w(e){return e.visible?(0,s.jsx)("div",{children:(0,s.jsx)(u.G,{icon:d.RJo})}):null}function y(e){return e.visible?(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,s.jsx)("span",{className:a()({"border-bottom":"incorrect"===e.hover}),children:"-1"})},0),(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,s.jsx)("span",{className:a()({"border-bottom":"pronunciation"===e.hover||"reset"!==e.hover&&e.prevMissPronu}),children:"P"})},1),(0,s.jsx)("div",{className:"sm-icon-grp",onClick:()=>{"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,s.jsx)("span",{className:a()({"border-bottom":"reset"===e.hover}),children:"0"})},2)]}):null}f.propTypes={visible:c().bool,active:c().bool,setShowHint:c().func},m.propTypes={visible:c().bool,active:c().bool,toggleAutoVerbView:c().func,autoVerbView:c().bool},j.propTypes={visible:c().bool,active:c().bool,action:c().func},b.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,action:c().func},x.propTypes={visible:c().bool,active:c().bool,toggle:c().bool,action:c().func},w.propTypes={visible:c().bool},y.propTypes={visible:c().bool,hover:c().string,onClick:c().func,onIncorrect:c().func,onPronunciation:c().func,onReset:c().func,prevMissPronu:c().bool}},7567:(e,n,t)=>{t.d(n,{Z:()=>u});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(6259),o=t(4184),c=t.n(o);function l(e){const n={disabled:!!e.disabled||void 0};return(0,s.jsxs)("div",{className:"settings-switch-root",children:[(0,s.jsx)("p",{className:c()({"disabled-color":n.disabled}),children:e.statusText}),(0,s.jsx)(a.Z,Object.assign({},n,{checked:e.active,onChange:()=>e.action(),color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}}))]})}l.propTypes={active:r().bool,action:r().func.isRequired,statusText:r().string.isRequired,color:r().string,disabled:r().bool};const u=l},9775:(e,n,t)=>{t.d(n,{Z:()=>l});var s=t(5893),i=t(7294),r=t(5697),a=t.n(r),o=t(4184),c=t.n(o);function l(e){let n,t;e.children&&(n=e.children,t=e.children),e.largeValue&&(n=e.largeValue),e.smallValue&&(t=e.smallValue);const r=void 0!==e.rootClassName&&c()(e.rootClassName)||void 0,a=void 0!==e.className&&e.className||{},o="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+c()(e.largeClassName):""),l="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+c()(e.smallClassName):""),u=()=>{"function"==typeof e.onClick&&e.onClick()},d=[(0,s.jsx)("span",{"data-name":"large",className:c()(Object.assign(Object.assign({[o]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:n},0),(0,s.jsx)("span",{"data-name":"small",className:c()(Object.assign(Object.assign({[l]:!0},a),{clickable:"function"==typeof e.onClick}))||void 0,onClick:u,children:t},1)];return!0===e.fragment?(0,s.jsx)(i.Fragment,{children:d}):(0,s.jsx)("div",{className:r,children:d})}l.propTypes={fragment:a().bool,breakPoint:a().string,rootClassName:a().object,className:a().object,largeClassName:a().object,smallClassName:a().object,onClick:a().func,children:a().oneOfType([a().string,a().element]),largeValue:a().oneOfType([a().string,a().element]),smallValue:a().oneOfType([a().string,a().element])}},7127:(e,n,t)=>{t.d(n,{Z:()=>c});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(6914);function o(e){return(0,s.jsx)(a.Z,{size:"small",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}o.propTypes={action:r().func.isRequired,color:r().string,ariaLabel:r().string.isRequired,children:r().object.isRequired};const c=o},2937:(e,n,t)=>{t.d(n,{yv:()=>d});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),c=t(8670),l=t(7127);function u(e){var n,t,i;const{c:r,i:o,isRight:l,isWrong:u,checkAnswer:d,aRomaji:h,fadeIn:g}=e,[v]=(0,c.dH)(!1===g?0:1e3*(o+1)),p={"notification-fade":!v,"notification-fade-in":v},f=a()(Object.assign(Object.assign(Object.assign({"d-flex flex-column justify-content-evenly":!0,"w-50 h-50 pt-3 text-center clickable":!0},e.css?{[e.css]:!0}:{}),!1===g?{}:p),{"correct-color":l,"incorrect-color":u}));return(0,s.jsx)("div",{className:f,onClick:()=>{"function"==typeof d&&d(r,o)},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{children:r.toHTML()}),l&&(0,s.jsx)("div",{children:r.english}),(0,s.jsx)("span",{className:a()({invisible:!h}),children:r.romaji})]})},`${null!==(n=r.compare)&&void 0!==n?n:""}${null!==(t=r.english)&&void 0!==t?t:""}${null!==(i=r.japanese)&&void 0!==i?i:""}`)}const d=(0,o.forwardRef)((function(e,n){const[t,r]=(0,o.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:!1}),c=(0,o.useRef)(Date.now()),d=(0,o.useRef)(void 0),{gotoNext:h,gotoPrev:g}=e;(0,o.useLayoutEffect)((()=>{!1!==e.fadeInAnswers&&(c.current=Date.now(),d.current=void 0),r({showMeaning:!1,correct:!1,incorrect:[]})}),[e.question]);const v=(n,s)=>{t.correct||(e.isCorrect(n)?(d.current=Date.now(),r({correct:!0,showMeaning:!0})):2===t.incorrect.length?r({incorrect:[...t.incorrect,s],correct:!0,showMeaning:!0}):r({incorrect:[...t.incorrect,s]}))},p=e.question,f=e.choices;let m=void 0!==p.english?"[English]":"";void 0===e.hint?t.showMeaning&&p.english&&(m=p.english):m=t.showMeaning&&p.english?p.english:e.hint;const j=void 0===n.current?void 0:n;return(0,s.jsx)("div",{ref:j,className:"pick4game main-panel h-100",children:(0,s.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(l.Z,{ariaLabel:"Previous",action:g,children:(0,s.jsx)(i.wyc,{size:16})}),(0,s.jsxs)("div",{className:a()({"question d-flex flex-column justify-content-center text-center w-50":!0}),children:[(0,s.jsx)("h1",{children:p.toHTML(t.correct)}),(0,s.jsx)("span",{className:a()({invisible:!e.qRomaji}),children:p.romaji}),void 0!==m&&(0,s.jsx)("span",{className:"clickable",onClick:()=>{r({showMeaning:!t.showMeaning})},children:m})]}),(0,s.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-50",children:f.map(((n,i)=>{var r;const a=e.isCorrect(f[i])&&t.correct,o=t.incorrect.includes(i);let l;return l=e.fadeInAnswers&&t.correct?1e3*(i+1)>Math.abs((null!==(r=d.current)&&void 0!==r?r:Date.now())-c.current)?(0,s.jsx)("div",{className:"invisible w-50 h-50",children:n.english},n.compare):(0,s.jsx)(u,{css:a?void 0:"disabled-color",fadeIn:!1,c:n,i,isRight:a,isWrong:o,aRomaji:e.aRomaji},String(c.current)+n.compare):(0,s.jsx)(u,{c:n,i,isRight:a,isWrong:o,checkAnswer:v,aRomaji:e.aRomaji,fadeIn:e.fadeInAnswers},String(c.current)+n.compare),l}))}),(0,s.jsx)(l.Z,{ariaLabel:"Next",action:h,children:(0,s.jsx)(i.XCv,{size:16})})]})})}))},8012:(e,n,t)=>{t.r(n),t.d(n,{KanjiGameMeta:()=>N,default:()=>M,oneFromList:()=>S});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(9655),u=t(2937),d=t(4766),h=t(6892),g=t(9983),v=t(2850),p=t(9815),f=t(6278),m=t(4933),j=t(6693),b=t(8673),x=t(4133),w=t(7891),y=t(6537),k=t(2405);const N={location:"/kanji-game/",label:"Kanji Game"};function T(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function S(e){let n=e;const t=e.split(",");return n=t.length>1?T(t[Math.floor(Math.random()*t.length)].trim()):T(e),n}function C(e,n,t){const{uid:i,kanji:r,on:o,kun:c}=e,l=function(e,n){const t=e=>e.split(",").map((e=>e.trim()));let s=[Object.assign(Object.assign({},e),{english:S(e.english)})];const i=t(e.english);for(;s.length<4;){const e=n[Math.floor(Math.random()*n.length)],r=t(e.english);r.every((e=>i.every((n=>n!==e))))&&r.every((e=>s.every((n=>e!==n.english))))&&(s=[...s,Object.assign(Object.assign({},e),{english:S(e.english)})])}return(0,h.Sy)(s),s}(e,n);return{question:{toHTML:e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:a()({"pb-3":t.length>0||o||c,"correct-color":e}),children:(0,s.jsx)("span",{children:r})}),(0,s.jsx)("table",{className:"w-100 fs-4 text-start",children:(0,s.jsxs)("tbody",{children:[o&&(0,s.jsxs)("tr",{className:a()({invisible:!e}),children:[(0,s.jsx)("td",{className:"w-50 fs-6 ps-2",children:v.TZ.parse({japanese:"おんよみ\n音読み"}).toHTML()}),(0,s.jsx)("td",{className:"fs-5 ps-2",children:o})]}),c&&(0,s.jsxs)("tr",{className:a()({invisible:!e}),children:[(0,s.jsx)("td",{className:"w-50 fs-6 ps-2",children:v.TZ.parse({japanese:"くんよみ\n訓読み"}).toHTML()}),(0,s.jsx)("td",{className:"fs-5 ps-2",children:c})]}),t.reduce(((n,t,i)=>{const r=(0,s.jsxs)("tr",{className:a()({invisible:!e}),children:[(0,s.jsx)("td",{className:"w-50 ps-2",children:S(t.english)}),(0,s.jsx)("td",{className:"pt-2 ps-2",children:v.TZ.parse(t).toHTML()})]},t.uid);return 0===i?n=[...n,r]:o||1!==i?!c&&(1===i||o&&i>1)&&(n=[...n,r]):n=[...n,r],n}),[])]})})]})},answer:i,choices:l.map((e=>({compare:e.uid,toHTML:()=>(0,s.jsx)(s.Fragment,{children:e.english})})))}}function M(){var e;const n=(0,c.I0)(),{kanjiList:t,activeTags:r,repetition:a,fadeInAnswers:h,filterType:v,reinforce:N}=(0,f.R)(),{vocabList:T}=(0,m.Z)();(0,o.useEffect)((()=>{0===t.length&&n((0,b.tk)()),0===T.length&&n((0,w.Rz)())}),[]);const S=(0,o.useRef)(a);S.current=a;const[M,O]=(0,o.useState)([]),[A,R]=(0,o.useState)(0),[P,E]=(0,o.useState)(void 0),I=(0,o.useMemo)((()=>{if(0===t.length)return[];if(0===Object.keys(S.current).length&&0===r.length)return t;const e=Object.keys(S.current).reduce(((e,n)=>{var t;return!0===(null===(t=S.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,g.Dm)(v.current,t,e,v.current===x.Lx.TAGS?r:[],void 0);if(N.current&&v.current===x.Lx.TAGS){const s=n.map((e=>e.uid)),i=t.filter((n=>e.includes(n.uid)&&!s.includes(n.uid)));n=[...n,...i]}const s=n.reduce(((e,n)=>{var t;return!0===(null===(t=S.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return O(s),n}),[t,r,N,v]),D=(0,o.useMemo)((()=>(0,g.tq)(I)),[I]),L=(0,o.useMemo)((()=>I.map((e=>{const n=T.reduce(((n,t)=>{var s,i;const r=t.english.includes(e.english),a=t.japanese.includes(e.kanji);return e.radical&&a&&(0,p.xn)(e.kanji)?n:e.radical&&(null===(s=e.radical)||void 0===s?void 0:s.example.length)>0?(null===(i=e.radical)||void 0===i?void 0:i.example.filter((e=>t.japanese.includes(e)))).length>0?[...n,t]:n:(a&&r?n=[t,...n]:a&&(n=[...n,t]),n)}),[]);return n}))),[I,T]),F=(0,o.useCallback)((()=>{const e=I.length;R((A+1)%e),E(void 0)}),[I,A]),q=(0,o.useCallback)((()=>{(0,g.hY)(N.current,v.current,M,I,S.current,P,(e=>{E(e)}),F)}),[M,I,P,F,N,v]),Z=(0,o.useCallback)((()=>{const e=I.length;let n;n=P?A:(e+(A-1))%e,R(n),E(void 0)}),[I,A,P]),W=(0,o.useCallback)((e=>{O((n=>[...n,e])),n((0,b.Mh)(e))}),[n]),G=(0,o.useCallback)((e=>{O((n=>n.filter((n=>n!==e)))),n((0,b.SI)(e))}),[n]),{kanji:V,game:_}=(0,o.useMemo)((()=>{if(0===D.length)return{};const e=null!=P?P:(0,g.vr)(A,I,D),n=(0,g.cc)(e,t),s=L[D[A]];return{kanji:n,game:C(n,t,s)}}),[P,t,I,D,A,L]),U=(0,o.useCallback)((e=>{switch(e){case"right":Z();break;case"left":q()}}),[Z,q]),{HTMLDivElementSwipeRef:H}=(0,j.M)(U);if(!_)return(0,s.jsx)(y.n,{addlStyle:"main-panel"});const K=V&&!0===(null===(e=a[V.uid])||void 0===e?void 0:e.rein),z=(A+1)/I.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.yv,{ref:H,question:_.question,isCorrect:e=>e.compare===_.answer,choices:_.choices,gotoPrev:Z,gotoNext:q,fadeInAnswers:h}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start",children:(0,s.jsx)(l.rU,{to:d.KanjiGridMeta.location,children:(0,s.jsx)(k.uY,{toggle:!0,action:null})})})}),(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)(k.Qp,{visible:K&&V.uid!==I[D[A]].uid})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-end",children:(0,s.jsx)(k.R_,{addFrequencyTerm:W,removeFrequencyTerm:G,toggle:K,term:V})})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:z,color:K?"secondary":"primary"})})]})}},4766:(e,n,t)=>{t.r(n),t.d(n,{KanjiGridMeta:()=>S,default:()=>M,useCreateChoices:()=>C});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(9655),u=t(8012),d=t(5529),h=t(5697),g=t.n(h),v=t(7127);function p(e){const[n,t]=(0,o.useReducer)(((e,n)=>Object.assign(Object.assign({},e),n)),{showMeaning:!1,incorrect:[],correct:-1}),i=(0,o.useCallback)((()=>{t({showMeaning:!1,correct:-1,incorrect:[]})}),[t]),{isCorrect:r,choices:c,gotoNext:l,gotoPrev:u}=e,h=(0,o.useCallback)((()=>{i(),u()}),[i,u]),g=(0,o.useCallback)((()=>{i(),l()}),[i,l]),p=a()({"pickXgame main-panel h-100":!0});return(0,s.jsx)("div",{className:p,children:(0,s.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(v.Z,{ariaLabel:"Previous",action:h,children:(0,s.jsx)(d.wyc,{size:16})}),(0,s.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:c.map(((e,o)=>(e=>{const o=c.length,u=n.incorrect.includes(e),d=n.correct===e,h=a()({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":d,"incorrect-color":u}),g=a()({"mb-0":!0}),v=`${Math.trunc(1/Math.ceil(Math.sqrt(o))*.75*100)}%`;return(0,s.jsx)("div",{onClick:()=>((e,s)=>{const[a,o]=r(e);a?(t({correct:s,showMeaning:!0}),setTimeout((()=>{i(),l()}),1e3)):2===n.incorrect.length?(t({incorrect:[...n.incorrect,s],correct:o,showMeaning:!0}),setTimeout((()=>{i(),l()}),2500)):t({incorrect:[...n.incorrect,s]})})(c[e],e),className:h,style:{width:v},children:(0,s.jsx)("h2",{className:g,children:c[e].toHTML()})},e)})(o)))}),(0,s.jsx)(v.Z,{ariaLabel:"Next",action:g,children:(0,s.jsx)(d.XCv,{size:16})})]})},0)}p.propTypes={question:g().object,isCorrect:g().func.isRequired,choices:g().array,gotoNext:g().func.isRequired,gotoPrev:g().func.isRequired};var f=t(6892),m=t(9983),j=t(8670),b=t(2409),x=t(8301),w=t(6278),y=t(8673),k=t(4133),N=t(6537),T=t(2405);const S={location:"/kanji-grid/",label:"Kanji Grid Game"};function C(e,n,t,s){return(0,o.useMemo)((()=>{if(!t)return[];let i=[t];for(;i.length<e;){const e=Math.floor(Math.random()*s.length),t=s[e];i.every((e=>e[n]!==t[n]))&&(i=[...i,t])}return(0,f.Sy)(i),i}),[e,n,t,s])}function M(){var e;const n=(0,c.I0)(),{kanjiList:t,activeTags:r,repetition:d,filterType:h,reinforce:g,choiceN:v}=(0,w.R)();(0,o.useEffect)((()=>{0===t.length&&n((0,y.tk)())}),[]);const C=(0,o.useRef)(d);C.current=d;const[M,O]=(0,o.useState)([]),[A,R]=(0,o.useState)(0),[P,E]=(0,o.useState)(void 0),I=(0,o.useRef)(""),[D,L]=(0,o.useState)(!1),F=(0,o.useRef)([]),[q,Z]=(0,o.useState)(null),W=(0,o.useMemo)((()=>{if(0===t.length)return[];if(0===Object.keys(C.current).length&&0===r.length)return t;const e=Object.keys(C.current).reduce(((e,n)=>{var t;return!0===(null===(t=C.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,m.Dm)(h.current,t,e,h.current===k.Lx.TAGS?r:[],(()=>{}));if(g.current&&h.current===k.Lx.TAGS){const s=n.map((e=>e.uid)),i=t.filter((n=>e.includes(n.uid)&&!s.includes(n.uid)));n=[...n,...i]}const s=n.reduce(((e,n)=>{var t;return!0===(null===(t=C.current[n.uid])||void 0===t?void 0:t.rein)?[...e,n.uid]:e}),[]);return O(s),n}),[t,r,g,h]),G=(0,o.useMemo)((()=>(0,m.tq)(W)),[W]),V=(0,o.useCallback)((()=>{const e=W.length;R((A+1)%e),E(void 0),Z(null)}),[W,A]),_=(0,o.useCallback)((()=>{(0,m.hY)(g.current,h.current,M,W,C.current,P,(e=>{E(e)}),V)}),[M,W,P,V,g,h]),U=(0,o.useCallback)((()=>{const e=W.length;let n;n=P?A:(e+(A-1))%e,R(n),E(void 0),Z(null)}),[W,A,P]),H=(0,o.useRef)(-1),{blastEl:K,anchorElRef:z,text:J,setText:B}=function(){const[e,n]=(0,o.useState)(""),[t,i]=(0,o.useState)({w:0,h:0}),r=(0,j.iP)(),{x:c,y:l,strategy:u,refs:d,update:h}=(0,b.YF)({placement:"bottom",middleware:[(0,x.cv)({mainAxis:void 0===r.height?0:r.height/2-t.h,crossAxis:0}),(0,x.uY)()]});return(0,o.useEffect)((()=>{var n,t;const s=null===(n=d.floating.current)||void 0===n?void 0:n.clientWidth,r=null===(t=d.floating.current)||void 0===t?void 0:t.clientHeight;e.length>0&&s&&s>0&&r&&r>0&&(i({w:s,h:r}),h())}),[e,i,d.floating,h]),{blastEl:(0,s.jsx)("div",{ref:d.setFloating,style:{position:u,top:null!=l?l:0,left:null!=c?c:0,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"},className:a()({"dark-mode-color":!0,"notification-fade":e.length>0}),children:e}),anchorElRef:d.setReference,text:e,setText:n}}(),Y=(0,o.useCallback)((e=>{O((n=>[...n,e])),n((0,y.Mh)(e))}),[n]),$=(0,o.useCallback)((e=>{O((n=>n.filter((n=>n!==e)))),n((0,y.SI)(e))}),[n]);if(0===G.length)return(0,s.jsx)(N.n,{addlStyle:"main-panel"});const Q=null!=P?P:(0,m.vr)(A,W,G),X=(0,m.cc)(Q,t);let ee;I.current!==X.uid?(I.current=X.uid,F.current=function(e,n,t,s){let i=[t];for(;i.length<e;){const e=s[Math.floor(Math.random()*s.length)];i.every((t=>t[n]!==e[n]))&&(i=[...i,e])}return(0,f.Sy)(i),i}(v,"english",X,t),ee=(0,u.oneFromList)(X.english)):ee=null!=q?q:(0,u.oneFromList)(X.english);const ne=function(e,n,t){return function(){if(null==e?void 0:e.english.includes(",")){let s=(0,u.oneFromList)(e.english);for(;s===n;)s=(0,u.oneFromList)(e.english);t(s)}}}(X,ee,Z),te=function(e,n,t,[i,r]){const{english:o,kanji:c,on:l,kun:u,uid:d}=e,h=i!==o;return{question:{toHTML:e=>t?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:a()({"correct-color":e}),children:(0,s.jsx)("span",{children:c})}),(void 0!==l||void 0!==u)&&(0,s.jsxs)("div",{className:a()({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,s.jsx)("span",{children:l}),(0,s.jsx)("span",{children:u})]})]}):(0,s.jsx)("div",{onClick:h?r:void 0,children:i+(h?"...":"")})},answer:d,choices:n.map((e=>({compare:e.uid,toString:n=>(null!=n?n:t)?e.english:e.kanji,toHTML:n=>(0,s.jsx)(s.Fragment,{children:(null!=n?n:t)?e.english:e.kanji})})))}}(X,F.current,D,[ee,ne]),se=function(e,n,t,s,i){return function(r){const a=r.compare===(null==n?void 0:n.answer),o=(null==n?void 0:n.choices.findIndex((e=>e.compare===(null==n?void 0:n.answer))))||-1;return a||(i.current>-1&&t.length>0?(clearTimeout(i.current),s(""),setTimeout((()=>s(r.toString(!e))),100)):(s(r.toString(!e)),i.current=window.setTimeout((()=>s("")),2500))),[a,o]}}(D,te,J,B,H),ie=X&&!0===(null===(e=d[X.uid])||void 0===e?void 0:e.rein),re=(A+1)/W.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"tooltip-anchor",ref:z}),K,(0,s.jsx)(p,{question:te.question,isCorrect:se,choices:te.choices,gotoPrev:U,gotoNext:_}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start",children:(0,s.jsx)(l.rU,{to:D?S.location:u.KanjiGameMeta.location,children:(0,s.jsx)(T.uY,{toggle:D,action:(0,j.kP)(L,(e=>!e))})})})}),(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)(T.Qp,{visible:ie&&X.uid!==W[G[A]].uid})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)("span",{children:te.question.toHTML(!1)}),(0,s.jsx)(T.R_,{addFrequencyTerm:Y,removeFrequencyTerm:$,toggle:ie,term:X})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:re,color:ie?"secondary":"primary"})})]})}},1540:(e,n,t)=>{t.r(n),t.d(n,{OppositesGameMeta:()=>f,default:()=>m});var s=t(5893),i=t(9041),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(2937),u=t(6892),d=t(9983),h=t(2850),g=t(6693),v=t(9385),p=t(6537);const f={location:"/opposites/",label:"Opposites Game"};function m(){const e=(0,c.I0)(),{value:n}=(0,c.v9)((({opposite:e})=>e),((e,n)=>e.version===n.version)),[t,r,f]=(0,c.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t,fadeInAnswers:s}=e;return[n,t,s]}),c.wU);(0,o.useEffect)((()=>{0===n.length&&e((0,v.bt)())}),[]);const m=(0,o.useMemo)((()=>0===n.length?[]:(0,d.tq)(n)),[n]),[j,b]=(0,o.useState)(0),x=(0,o.useCallback)((()=>{const e=n.length;b((j+1)%e)}),[j,n]),w=(0,o.useCallback)((()=>{const e=n.length,t=j-1;b(t<0?(e+t)%e:t%e)}),[j,n]),y=(0,o.useCallback)((e=>{switch(e){case"right":w();break;case"left":x()}}),[w,x]),{HTMLDivElementSwipeRef:k}=(0,g.M)(y);if(0===m.length)return(0,s.jsx)(p.n,{addlStyle:"main-panel"});const N=function(e,n,t){let[i,r]=e[n[t]];const o=h.TZ.parse(i),c=h.TZ.parse(r),l=Object.assign(Object.assign({},i),{toHTML:e=>(0,s.jsx)("span",{className:a()({"correct-color":e}),children:o.toHTML()})}),d=Object.assign(Object.assign({},r),{compare:r.japanese,toHTML:()=>c.toHTML()});let g=[d],v=[r.romaji,i.romaji];for(;g.length<4;){const n=Math.floor(Math.random()*e.length),[t,s]=e[n];if(!v.includes(t.romaji)&&!v.includes(s.romaji))if(0===Math.floor(2*Math.random())){const e=h.TZ.parse(t);g=[...g,Object.assign(Object.assign({},t),{compare:t.japanese,toHTML:()=>e.toHTML()})],v=[...v,t.romaji]}else{const e=h.TZ.parse(s);g=[...g,Object.assign(Object.assign({},s),{compare:s.japanese,toHTML:()=>e.toHTML()})],v=[...v,s.romaji]}}return(0,u.Sy)(g),{question:l,answer:d,choices:g}}(n,m,j),T=(j+1)/n.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.yv,{ref:k,question:N.question,isCorrect:e=>e.compare===N.answer.compare,choices:N.choices,qRomaji:t,aRomaji:r,gotoPrev:w,gotoNext:x,fadeInAnswers:f}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:T})},1)]})}},4921:(e,n,t)=>{t.r(n),t.d(n,{ParticlesGameMeta:()=>p,default:()=>f});var s=t(5893),i=t(9041),r=t(7294),a=t(743),o=t(2937),c=t(6892),l=t(9983),u=t(2850),d=t(3996),h=t(6693),g=t(7988),v=t(6537);const p={location:"/particles/",label:"Particles Game"};function f(){const e=(0,a.I0)(),{phrases:n,particles:t}=(0,a.v9)((({particle:e})=>e.particleGame)),[d,p]=(0,a.v9)((({particle:e})=>{const{aRomaji:n,fadeInAnswers:t}=e.setting;return[n,t]}));(0,r.useEffect)((()=>{0===n.length&&e((0,g.aq)())}),[]);const f=(0,r.useRef)([]),[j,b]=(0,r.useState)(0),x=(0,r.useCallback)((()=>{const e=n.length;b((j+1)%e)}),[j,n]),w=(0,r.useCallback)((()=>{const e=n.length,t=j-1;b(t<0?(e+t)%e:t%e)}),[j,n]),y=function(e,n,t){if(0===n.length||0===t.length)return;0===f.current.length&&(f.current=(0,l.tq)(n));const i=n[f.current[e]],{answer:r,question:a,english:o,literal:d}=i,h=Object.assign(Object.assign({},r),{toHTML:()=>(0,s.jsx)(s.Fragment,{children:r.japanese})});t=t.map((e=>Object.assign(Object.assign({},e),{toHTML:()=>(0,s.jsx)(s.Fragment,{children:e.japanese})})));const g=function(e,n){let t=[Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,s.jsx)(s.Fragment,{children:e.japanese})})];for(;t.length<4;){const e=n[Math.floor(Math.random()*n.length)];t.every((n=>n.compare!==e.japanese))&&(t=[...t,Object.assign(Object.assign({},e),{compare:e.japanese,toHTML:()=>(0,s.jsx)(s.Fragment,{children:e.japanese})})])}return(0,c.Sy)(t),t}(h,t);return{question:{english:o,toHTML:e=>m(u.TZ.parse(a),h,e)},answer:h,choices:g,literal:d}}(j,n,t),k=(0,r.useCallback)((e=>{switch(e){case"right":w();break;case"left":x()}}),[w,x]),{HTMLDivElementSwipeRef:N}=(0,h.M)(k);if(!y)return(0,s.jsx)(v.n,{addlStyle:"main-panel"});const T=(j+1)/n.length*100;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.yv,{ref:N,question:y.question,isCorrect:e=>e.japanese===y.answer.japanese,hint:y.literal,choices:y.choices,aRomaji:d,gotoPrev:w,gotoNext:x,fadeInAnswers:p}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:T})})]})}const m=(e,{start:n,end:t},s)=>{const i=s?"correct-color":"transparent-font underline";return(0,d.tn)(null==e?void 0:e.parseObj,{hidden:i},n,t)}},8859:(e,n,t)=>{t.r(n),t.d(n,{KanaGameMeta:()=>f,buildChoiceButton:()=>x,default:()=>m,usePrepareGame:()=>b});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),c=t(9815),l=t(8670),u=t(6537),d=t(2405),h=t(7127),g=t(743),v=t(6892),p=t(4133);const f={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function m(){const{hiragana:e,katakana:n,vowels:t,consonants:r,sounds:v,choiceN:p,wideMode:f,easyMode:m,charSet:j}=function(){const e=(0,g.v9)((({global:e})=>e.debug)),[n,t,s,i,r]=(0,g.v9)((({kana:e})=>{const{hiragana:n,katakana:t,vowels:s,consonants:i,sounds:r}=e;return[n,t,s,i,r]}),(()=>!0)),[a,o,c,l]=(0,g.v9)((({kana:e})=>{const{wideMode:n,easyMode:t,charSet:s,choiceN:i}=e.setting;return[n,t,s,i]}),g.wU);return{debug:e,hiragana:n,katakana:t,vowels:s,consonants:i,sounds:r,choiceN:a?31:l,wideMode:a,easyMode:o,charSet:c}}(),w=(0,o.useRef)(t),y=(0,o.useRef)(r),k=(0,o.useRef)(v),N=(0,o.useRef)(e),T=(0,o.useRef)(n),S=(0,o.useRef)(f),C=(0,o.useRef)(m),M=(0,o.useRef)(p),[O,A]=(0,o.useState)(0),[R,P]=(0,o.useState)([]),[E,I]=(0,o.useState)(!1),{prepareGame:D,setWrongs:L,setCorrect:F,answer:q,correct:Z,question:W,wrongs:G,choices:V,gameOrder:_}=b({charSet:j,choiceN:M.current,wideMode:S.current,practiceSide:E,reinforce:R,selectedIndex:O,vowelsR:w,consonantsR:y,soundsR:k,hiraganaR:N,katakanaR:T}),U=(0,o.useCallback)((()=>{const e=_.length;A((O+1)%e),L([]),F(!1)}),[F,L,_,O]),H=(0,o.useCallback)((()=>{const e=_.length,n=O-1;A(n<0?(e+n)%e:n%e),L([]),F(!1)}),[F,L,_,O]),K=function({setCorrect:e,setWrongs:n,setReinforce:t,gotoNext:s,answer:i,choices:r,wrongs:a,reinforce:o,practiceSide:c}){return function(l){if(l.val===(null==i?void 0:i.val))e(!0),setTimeout(s,500);else{const e=r.findIndex((e=>e.val===l.val));n([...a,e]),t([...o,Object.assign(Object.assign({},l),{practiceSide:c})])}}}({setCorrect:F,setWrongs:L,setReinforce:P,gotoNext:U,practiceSide:E,answer:q,choices:V,wrongs:G,reinforce:R}),z=x({checkAnswer:K,charSet:j,practiceSide:E,wrongs:G,choices:V,answer:q,correct:Z,wideMode:S.current,easyMode:C.current,choiceN:M.current});if((0,o.useEffect)((()=>{N.current.length>0&&D()}),[O,E,j]),!W)return(0,s.jsx)(u.n,{addlStyle:"kana"});const J=a()({"kana main-panel h-100":!0}),B=a()({"choices-row d-flex justify-content-around":!0,"w-50":!S.current,"w-100":S.current});return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("div",{className:J,children:(0,s.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(h.Z,{ariaLabel:"Previous",action:H,children:(0,s.jsx)(i.wyc,{size:16})}),!S.current&&(0,s.jsxs)("div",{className:a()({"pt-3 d-flex flex-column justify-content-center text-center w-50":!0,"correct-color":Z}),children:[(0,s.jsx)("h1",{className:"clickable",children:W}),C.current&&!E&&(0,s.jsx)("div",{className:"d-flex justify-content-around",children:(0,s.jsx)("h6",{children:(0,c.Vj)(W)})})]}),(0,s.jsx)("div",{className:B,children:(0,s.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:V.map(((e,n)=>z(n)))})}),(0,s.jsx)(h.Z,{ariaLabel:"Next",action:U,children:(0,s.jsx)(i.XCv,{size:16})})]})}),(0,s.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(d.uY,{toggle:E,action:(0,l.kP)(I,(e=>!e))})}),(0,s.jsx)("div",{className:"col"}),(0,s.jsx)("div",{className:"col"})]})})]})}function j(e){let n;return n=e===p.kS.MIXED?Math.floor(2*Math.random()):e,n}function b({charSet:e,choiceN:n,wideMode:t,vowelsR:s,consonantsR:i,soundsR:r,hiraganaR:a,katakanaR:c,practiceSide:l,reinforce:u,selectedIndex:d}){const[h,g]=(0,o.useState)("undefined"),[f,m]=(0,o.useState)({val:"",hint:"",cSet:p.kS.HIRAGANA}),[b,x]=(0,o.useState)([]),[w,y]=(0,o.useState)([]),[k,N]=(0,o.useState)([]),[T,S]=(0,o.useState)(!1),C=(0,o.useCallback)((()=>{const o=a.current,h=c.current;let f,b,k;f=w.length>0?w:function(e){let n=[];const t=e[0].length,s=e.length;for(let e=0;e<t;e++)for(let t=0;t<s;t++)1==e&&12==t||3==e&&12==t||2==e&&14==t||0!==e&&15==t||(n=[...n,{vowel:e,consonant:t}]);return(0,v.Sy)(n),n}(o);const T=Math.random()<1/3,C=function({vowels:e,consonants:n,sounds:t}){return(s,i)=>{const r=n[s]+e[i];return t[r]||r}}({vowels:s.current,consonants:i.current,sounds:r.current}),M=function({hiragana:e,katakana:n}){return(t,s,i)=>{let r;return r=i===p.kS.HIRAGANA?e[t][s]:n[t][s],r}}({hiragana:o,katakana:h});if(T&&u.length>0){const e=u[u.length-1];if(l===e.practiceSide)k=e;else{const{val:n,hint:t,cSet:s}=e;k={val:t,hint:n,cSet:s}}}else{const{consonant:n,vowel:t}=f[d];let s=j(e);const i=C(n,t),r=M(n,t,s);k=l?{val:r,hint:i,cSet:s}:{val:i,hint:r,cSet:s}}b=k.hint;let O=function({getPronunciation:e,getKanaCharacter:n,charSet:t,choiceN:s,practiceSide:i},r,a){let o=[r];const c=i;for(;o.length<s;){const s=0,i=a.length,r=Math.floor(Math.random()*(i-s)+s);let l=j(t);const u=e(a[r].consonant,a[r].vowel),d=n(a[r].consonant,a[r].vowel,l);let h;h=c?{val:d,hint:u,cSet:l}:{val:u,hint:d,cSet:l},(c&&!o.some((e=>e.hint===h.hint))||!c&&!o.some((e=>e.val===h.val)))&&(o=[...o,h])}return(0,v.Sy)(o),o}({getPronunciation:C,getKanaCharacter:M,charSet:e,choiceN:n,practiceSide:l},k,f);t&&(O=[...O,{val:b,hint:b,cSet:k.cSet,q:!0}]),g(b),m(k),x(O),y(f),N([]),S(!1)}),[e,w,i,s,r,a,c,l,u,d,t,n]);return{prepareGame:C,setWrongs:N,setCorrect:S,answer:f,correct:T,wrongs:k,question:h,choices:b,gameOrder:w}}function x({checkAnswer:e,wideMode:n,easyMode:t,charSet:i,practiceSide:r,wrongs:o,choices:l,answer:u,correct:d,choiceN:h}){return function(g){const v=o.includes(g),f=l[g].val===u.val&&d,m=a()({clickable:!l[g].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":f||n&&l[g].q&&d,"incorrect-color":v,"question-color":n&&l[g].q&&!d}),j=a()({"mb-0":n}),b="d-flex justify-content-around",x=a()({"mb-0":!0,invisible:!v}),w=n?3/4:1,y=`${Math.trunc(1/Math.ceil(Math.sqrt(h))*w*100)}%`,k=!r;let N;return N=!t||t&&!k?t&&!k&&!0!==l[g].q&&i===p.kS.MIXED?(0,s.jsxs)("div",{className:b,children:[(0,s.jsx)("h6",{className:x,children:l[g].hint}),(0,s.jsx)("h6",{className:x,children:(0,c.Vj)(l[g].val)})]}):!0!==l[g].q?(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:x,children:l[g].cSet===u.cSet?l[g].hint:(0,c.Vj)(l[g].hint)})}):(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:"mb-0 invisible",children:(0,c.Vj)(l[g].val)})}):!0!==l[g].q?(0,s.jsxs)("div",{className:b,children:[(0,s.jsx)("h6",{className:x,children:l[g].cSet===p.kS.HIRAGANA?l[g].hint:(0,c.Vj)(l[g].hint)}),(0,s.jsx)("h6",{className:x,children:l[g].cSet===p.kS.HIRAGANA?(0,c.Vj)(l[g].hint):l[g].hint})]}):(0,s.jsx)("div",{className:b,children:(0,s.jsx)("h6",{className:"mb-0",children:(0,c.Vj)(l[g].val)})}),(0,s.jsxs)("div",{onClick:()=>{l[g].q||e(l[g])},className:m,style:{width:y},children:[(0,s.jsx)("h2",{className:j,children:l[g].val}),N]},g)}}},6291:(e,n,t)=>{t.r(n),t.d(n,{KanjiMeta:()=>T,default:()=>S});var s=t(5893),i=t(9041),r=t(5529),a=t(4184),o=t.n(a),c=t(5472),l=t.n(c),u=t(7294),d=t(743),h=t(6892),g=t(9983),v=t(2850),p=t(8670),f=t(6278),m=t(8673),j=t(4133),b=t(7891),x=t(6537),w=t(2405),y=t(7127),k=t(6176),N=t(6693);const T={location:"/kanji/",label:"Kanji"};function S(){var e,n,t,a,c;const T=(0,d.I0)(),S=(0,u.useCallback)((e=>{W((n=>[...n,e])),T((0,m.Mh)(e))}),[T]),C=(0,u.useCallback)((e=>{W((n=>n.filter((n=>n!==e)))),T((0,m.SI)(e))}),[T]),{kanjiList:M,vocabList:O,filterType:A,reinforce:R,activeTags:P,repetition:E}=(0,f.R)();(0,u.useEffect)((()=>{0===M.length&&T((0,m.tk)()),0===O.length&&T((0,b.Rz)())}),[]);const I=(0,u.useRef)(E);I.current=E;const[D,L]=(0,u.useState)(0),[F,q]=(0,u.useState)(void 0),[Z,W]=(0,u.useState)([]),[G,V]=(0,u.useState)(!1),[_,U]=(0,u.useState)(!1),[H,K]=(0,u.useState)(!1),[z,J]=(0,u.useState)(!1),B=(0,u.useMemo)((()=>{if(0===M.length)return[];if(0===Object.keys(I.current).length&&0===P.length)return M;const e=Object.keys(I.current).reduce(((e,n)=>{var t;return!0===(null===(t=I.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,g.Dm)(A.current,M,e,A.current===j.Lx.TAGS?P:[],(0,p.cM)(T,m.cy));const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=I.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return W(t),n}),[T,M,A,P]),Y=(0,u.useMemo)((()=>0===B.length?[]:(0,g.tq)(B)),[B]),$=(0,u.useCallback)((()=>{const e=B.length;L((D+1)%e),q(void 0),V(!1),U(!1),K(!1),J(!1)}),[B,D]),Q=(0,u.useCallback)((()=>{let e=B;if(R.current&&A.current===j.Lx.TAGS){const n=Object.keys(E).reduce(((e,n)=>{var t;return!0===(null===(t=E[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]),t=M.filter((e=>n.includes(e.uid)));e=[...B,...t]}(0,g.hY)(R.current,A.current,Z,e,E,F,q,$)}),[$,M,B,Z,F,E,R,A]),X=(0,u.useCallback)((()=>{const e=B.length,n=D-1;L(n<0?(e+n)%e:n%e),q(void 0),V(!1),U(!1),K(!1),J(!1)}),[B,D]),ee=(0,u.useCallback)((e=>{"left"===e?Q():"right"===e&&X()}),[Q,X]),{HTMLDivElementSwipeRef:ne}=(0,N.M)(ee);if(Y.length<1)return(0,s.jsx)(x.n,{addlStyle:"main-panel"});const te=null!=F?F:(0,g.vr)(D,B,Y),se=(0,g.cc)(te,M),ie=O.filter((e=>v.TZ.parse(e).getSpelling().includes(se.kanji)&&e.english.toLowerCase()===se.english.toLowerCase()||v.TZ.parse(e).getSpelling().includes(se.kanji)&&e.english.toLowerCase().includes(se.english.toLowerCase())&&"Verb"===e.grp||v.TZ.parse(e).getSpelling()===se.kanji&&(e.english.toLowerCase().includes(se.english.toLowerCase())||se.english.toLowerCase().includes(e.english.toLowerCase()))));let re=[];if(ie.length>0){const[e,...n]=l()(ie,(e=>e.english.length));re=[e,...(0,h.Sy)(n)]}const ae=(null===(n=null===(e=se.tag)||void 0===e?void 0:e.find((e=>P.includes(e)&&(0,k.F)(e))))||void 0===n?void 0:n.replace("_"," "))||(null===(a=null===(t=se.tag)||void 0===t?void 0:t.find((e=>(0,k.F)(e))))||void 0===a?void 0:a.replace("_"," "))||"",oe=!0===(null===(c=E[se.uid])||void 0===c?void 0:c.rein),ce=re.slice(0,3).map(((e,n,t)=>(0,s.jsxs)(u.Fragment,{children:[e.english+" ",v.TZ.parse(e).toHTML(),n<t.length-1?"; ":"",(0,s.jsx)("wbr",{})]},e.uid))),le=(0,s.jsx)("span",{children:se.english}),ue=(D+1)/B.length*100;return(0,s.jsxs)(u.Fragment,{children:[(0,s.jsx)("div",{className:"kanji main-panel h-100",children:(0,s.jsxs)("div",{ref:ne,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(y.Z,{ariaLabel:"Previous",action:X,children:(0,s.jsx)(r.wyc,{size:16})}),(0,s.jsx)("div",{className:"grp-info",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:se.grp}),(0,s.jsx)("div",{children:ae})]})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"pt-0",children:(0,s.jsx)("span",{children:se.kanji})}),se.on&&(0,s.jsx)("h4",{className:"pt-0",onClick:(0,p.kP)(V,(e=>!e)),children:(0,s.jsx)("span",{children:G?se.on:"[On]"})})||(0,s.jsx)("h4",{className:"pt-0",children:"."}),se.kun&&(0,s.jsx)("h4",{className:"pt-2",onClick:(0,p.kP)(U,(e=>!e)),children:(0,s.jsx)("span",{children:_?se.kun:"[Kun]"})})||(0,s.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("span",{className:o()({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===ce.length}),onClick:(0,p.kP)(K,(e=>!e)),children:(0,s.jsx)("span",{className:"text-nowrap",children:H&&ce.length>0?ce:"[Examples]"})}),(0,s.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:(0,p.kP)(J,(e=>!e)),children:z?le:(0,s.jsx)("span",{children:"[Meaning]"})})]})]}),(0,s.jsx)("div",{className:"right-info"}),(0,s.jsx)(y.Z,{ariaLabel:"Next",action:Q,children:(0,s.jsx)(r.XCv,{size:16})})]})}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-start"})}),(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)(w.Qp,{visible:void 0!==F&&""!==F})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)("div",{className:"d-flex justify-content-end",children:(0,s.jsx)(w.R_,{addFrequencyTerm:S,removeFrequencyTerm:C,toggle:oe,term:se,count:Z.length})})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:"determinate",value:ue,color:oe?"secondary":"primary"})})]})}},9406:(e,n,t)=>{t.r(n),t.d(n,{PhrasesMeta:()=>O,default:()=>A});var s=t(5893),i=t(9041),r=t(5529),a=t(7294),o=t(743),c=t(7186),l=t(5965),u=t(5863),d=t(9983),h=t(2850),g=t(7962),v=t(8670),p=t(158),f=t(8218),m=t(9226),j=t(3518),b=t(6693),x=t(6281),w=t(8056),y=t(7652),k=t(4133),N=t(3968),T=t(6537),S=t(2405),C=t(9775),M=t(7127);const O={location:"/phrases/",label:"Phrases"};function A(){var e,n;const t=(0,o.I0)(),O=(0,a.useRef)(void 0),A=(0,a.useRef)(0),[I,D]=(0,a.useState)(void 0),[L,F]=(0,a.useState)([]),[q,Z]=(0,a.useState)(-1),[W,G]=(0,a.useState)(Date.now()),V=(0,a.useRef)(Date.now()),[_,U]=(0,a.useState)(0),[H,K]=(0,a.useState)(null),[z,J]=(0,a.useState)(null),[B,Y]=(0,a.useState)(null),[$,Q]=(0,a.useState)([]),[X,ee]=(0,a.useState)(!1),{englishSideUp:ne,repetition:te,motionThreshold:se,swipeThreshold:ie,phraseList:re,activeGroup:ae,reinforce:oe,romajiActive:ce,filterType:le,sortMethod:ue}=(0,p.Q)(),de=(0,a.useRef)(te);de.current=te,(0,a.useEffect)((()=>{0===re.length&&t((0,y.cC)())}),[]);const he=(0,a.useMemo)((()=>{const e=de.current;if(0===re.length)return[];if(0===Object.keys(e).length&&0===ae.length)return re;const n=Object.keys(e).reduce(((n,t)=>{var s;return!0===(null===(s=e[t])||void 0===s?void 0:s.rein)&&(n=[...n,t]),n}),[]),s=(0,d.Dm)(le.current,re,n,ae,(0,v.cM)(t,y.f6)),i=s.reduce(((n,t)=>{var s;return!0===(null===(s=e[t.uid])||void 0===s?void 0:s.rein)&&(n=[...n,t.uid]),n}),[]);return Q(i),s}),[t,re,le,ae]),ge=(0,a.useMemo)((()=>{const e=de.current;if(0===he.length)return[];let n;switch(ue.current){case k.vl.RANDOM:n=(0,d.tq)(he);break;case k.vl.VIEW_DATE:n=(0,d.EL)(he,e);break;default:({order:n}=(0,d.fx)(he))}return n}),[he]),ve=(0,a.useCallback)((()=>{const e=he.length;let n=(_+1)%e;n===q&&(n=(e+n+1)%e),V.current=W,G(Date.now()),A.current=_,U(n),D(void 0)}),[he,_,W,q]),pe=(0,a.useCallback)((()=>{(0,d.hY)(oe.current,le.current,$,he,de.current,I,(e=>{O.current=I,D(e)}),ve)}),[t,oe,le,$,he,I,ve]),fe=(0,a.useCallback)((()=>{const e=he.length;let n;n=I?_:(e+(_-1))%e,n===q&&(n=(e+n-1)%e),V.current=W,G(Date.now()),A.current=_,U(n),D(void 0)}),[he,_,I,W,q]),me=function(e,n,t,s,i,r,a,o){return function(u,v){let p;if("left"===u)e(),p=Promise.all([Promise.resolve()]);else if("right"===u)n(),p=Promise.all([Promise.resolve()]);else{const e=null!=t?t:(0,d.vr)(s,a,r),n=(0,d.cc)(e,i),f=o?"/override_cache":"";if("up"===u){const t=(0,h._I)(n),s=(0,g.b1)(c.vT+f,{tl:"ja",q:t,uid:e});p=(0,l.R$)(s,v)}else if("down"===u){const e=n.english,t=(0,g.b1)(c.vT+f,{tl:"en",q:e,uid:n.uid+".en"});p=(0,l.R$)(t,v)}}return p||Promise.reject()}}(pe,fe,I,_,re,ge,he,X),je=(0,f.E)(se),{beginLoop:be,abortLoop:xe,looperSwipe:we,loopSettingBtn:ye,loopActionBtn:ke,timedPlayAnswerHandlerWrapper:Ne,gradeTimedPlayEvent:Te,resetTimedPlay:Se,loop:Ce,tpAnswered:Me,tpAnimation:Oe}=(0,x.T)(me,ne,je);(0,a.useEffect)((()=>{var e;const n={selectedIndex:A.current,reinforcedUID:O.current,lastNext:V.current};if(I!==n.reinforcedUID||_!==n.selectedIndex){const s=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,d.vr)(n.selectedIndex,he,ge);if((0,d.Zc)(n.lastNext)){const e=(0,d.cc)(s,re),i=s!==n.reinforcedUID;t((0,y.s5)({uid:s,shouldIncrement:i})).unwrap().then((i=>{var r;const{map:a,prevMap:o}=i,c=o[s]&&(null===(r=o[s])||void 0===r?void 0:r.d),l={[s]:Object.assign(Object.assign({},a[s]),{d:c})},d=(e,n)=>t((0,w.kg)(e,n)),h=void 0!==n.reinforcedUID;void 0!==Me.current?(0,u.lP)(d,e,l,{frequency:h}):(0,u.Ps)(d,e,l,{frequency:h})}))}Se()&&(0,d.u3)(n.lastNext)&&be(),K(null),J(null),Y(null),F([]),A.current=_,O.current=I}}),[t,be,Se,I,_,re,he,ge,Ce]),(0,a.useEffect)((()=>{t((0,w.kg)((0,d.w_)(ue.current,["Random","Alphhabetic","View Date"]),k.x6.DEBUG))}),[t]),(0,m.q)(me,(0,v.cM)(t,y.d1),Ne),(0,j.Z)("Phrases Loop",Ce,be,xe,we);const{HTMLDivElementSwipeRef:Ae}=(0,b.M)(me,Ne);if(he.length<1||ge.length<1)return(0,s.jsx)(T.n,{addlStyle:"main-panel"});const Re=null!=I?I:(0,d.vr)(_,he,ge),Pe=(0,d.cc)(Re,re),Ee=function(e,n,t,i,r){const a=n?{tl:"en",q:t.english,uid:t.uid+".en"}:{tl:"ja",q:(0,h._I)(t),uid:(0,d.gW)(t)};return(0,s.jsx)(N.Z,{visible:0===e&&0===r,word:a,reCache:i})}(ie,ne,Pe,X,Ce),[Ie,De]=function(e){const n=h.TZ.parse(e);return[n,n.toHTML()]}(Pe),Le=function(e,n,t){return(0,s.jsx)("span",{onClick:e.lit?()=>{t((n=>n?null:e.uid))}:void 0,children:n?e.lit:e.english})}(Pe,B,Y),{topValue:Fe,bottomValue:qe,bottomLabel:Ze}=(0,d.JS)(ne,Le,De,R,P),We=Pe&&((null===(e=Pe.lit)||void 0===e?void 0:e.length)||Pe.english.length)<55,Ge=Ie&&Ie.getSpelling().length<55,{aboveSmallCss:Ve,aboveLargeCss:_e,belowNoInterruptCss:Ue,belowSmallCss:He,belowLargeCss:Ke}=function(e,n,t){const s={"fs-display-5":!0},i=s;return{aboveSmallCss:Object.assign({},e?{[t?"h1":"h3"]:!0}:{[n?"h1":"h3"]:!0}),aboveLargeCss:s,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:Object.assign({},e?{[n?"h1":"h3"]:!0}:{[t?"h1":"h3"]:!0}),belowLargeCss:i}}(ne,Ge,We),ze=!0===(null===(n=te[Pe.uid])||void 0===n?void 0:n.rein),Je=Pe.romaji,Be=(_+1)/he.length*100;return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)("div",{className:"phrases main-panel h-100",children:(0,s.jsxs)("div",{ref:Ae,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(M.Z,{ariaLabel:"Previous",action:fe,children:(0,s.jsx)(r.wyc,{size:16})}),(0,s.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(C.Z,{breakPoint:"md",largeClassName:_e,smallClassName:Ve,children:Fe}),ce.current&&Je&&(0,s.jsx)("h5",{children:(0,s.jsx)("span",{onClick:(0,v.kP)(J,(e=>e?null:Re)),className:"clickable loop-no-interrupt",children:z===Re?Je:"[Romaji]"})}),(0,s.jsx)(C.Z,{className:Ue,breakPoint:"md",onClick:(0,v.kP)(K,(e=>e?null:Re)),largeClassName:Ke,smallClassName:He,children:H===Re?qe:Ze}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:Ee})]}),(0,s.jsx)(M.Z,{ariaLabel:"Next",action:pe,children:(0,s.jsx)(r.XCv,{size:16})})]})}),(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,s.jsx)(S.uY,{toggle:ne,action:(0,v.cM)(t,y.d1)}),(0,s.jsx)(S.Ro,{active:X,action:E(X,ee)}),(0,s.jsx)("div",{className:"sm-icon-grp",children:ye}),(0,s.jsx)("div",{className:"sm-icon-grp",children:ke})]})}),(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)(S.Qp,{visible:void 0!==I&&""!==I})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)(S.D4,{visible:ne&&void 0!==Pe.lit&&""!==Pe.lit,toggle:B===Re,action:(0,v.kP)(Y,(e=>e?null:Re))}),(0,s.jsx)(S.R_,{addFrequencyTerm:e=>{Q((n=>[...n,e])),(0,v.cM)(t,y.Lp)(e)},removeFrequencyTerm:e=>{Q((n=>n.filter((n=>n!==e)))),(0,v.cM)(t,y.gP)(e)},toggle:ze,term:Pe,count:$.length})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,s.jsx)(i.Z,{variant:null===Oe?"determinate":"buffer",value:null===Oe?Be:0,valueBuffer:null!=Oe?Oe:void 0,color:ze?"secondary":"primary"})})]})}const R=(0,s.jsx)("span",{children:"[English]"}),P=(0,s.jsx)("span",{children:"[Japanese]"});function E(e,n){return function(){if(!e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},4567:(e,n,t)=>{t.d(n,{a:()=>u});var s=t(5893),i=(t(7294),t(5697)),r=t.n(i),a=t(5529),o=t(4184),c=t.n(o);function l(e,n,t,i,r){return(0,s.jsxs)("div",{className:c()({"p-0 px-2":!0,clickable:e}),onClick:()=>{e&&r(t)},children:[(0,s.jsxs)("span",{className:"p-1",children:[e&&(0,s.jsx)(a.oOx,{className:"incorrect-color",size:"small","aria-label":"remove"}),!e&&(0,s.jsx)(a.aNF,{size:"small","aria-label":"inactive"})]}),(0,s.jsx)("span",{className:"p-1",children:i})]},n)}function u(e){let n=[];const t=e.termsFreq.reduce(((t,s)=>{const i=e.terms.find((e=>e.uid===s));return i?t=[...t,i]:n=[...n,s],t}),[]).reduce(((e,n)=>{const t=n.grp?n.grp:"undefined";return e[t]?e[t]=[...e[t],n]:e[t]=[n],e}),{});return(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{children:"Frequency"},0),(0,s.jsx)("div",{children:Object.keys(t).map(((n,i)=>{const r=e.termsActive.includes(n);return(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("span",{className:c()({"font-weight-bold":r}),onClick:()=>e.toggleTermActiveGrp(n),children:n}),(0,s.jsx)("div",{children:t[n].map(((n,t)=>l(r,t,n.uid,n.english,e.removeFrequencyTerm)))})]},n)}))},1),n.length>0&&(0,s.jsxs)("div",{className:"mt-5 text-break",children:[(0,s.jsx)("span",{className:"font-weight-bold",children:"Manual cleanup"}),n.map(((n,t)=>l(!0,t,n,n,e.removeFrequencyTerm)))]})]})}u.propTypes={termsActive:r().array,termsFreq:r().array,terms:r().array,removeFrequencyTerm:r().func,toggleTermActiveGrp:r().func}},6176:(e,n,t)=>{t.d(n,{E:()=>g,F:()=>h});var s=t(5893),i=t(5472),r=t.n(i),a=t(3174),o=t.n(a),c=t(5697),l=t.n(c),u=t(7294),d=t(8737);function h(e){return e.includes("_")&&Number.isInteger(parseInt(e.split("_")[1],10))}function g(e){const{termsActive:n,termsTags:t,toggleTermActive:i,selectedCount:a}=e;(0,u.useEffect)((()=>{n.forEach((e=>{t.includes(e)||i(e)}))}),[n,t,i]);const[c,l]=o()(t,(e=>h(e))),g=Object.values(c.reduce(((e,n)=>{const t=n.split("_")[0];return e[t]?e[t]=[...e[t],n]:e[t]=[n],e}),{})),v=[...r()(l),...g.reduce(((e,n)=>[...e,...r()(n,(e=>{const[,n]=e.split("_");return Number.isInteger(parseInt(n,10))?parseInt(n,10):e}))]),[])],p=a&&a>0&&"("+a+")"||"";return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h5",{children:["Tag List ",p]},0),v.map(((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(d.M,{active:n.includes(e),onClick:()=>{i(e)},children:e},t)},t+1)))]})}g.propTypes={termsTags:l().array,termsActive:l().array,toggleTermActive:l().func,selectedCount:l().number}},3102:(e,n,t)=>{t.r(n),t.d(n,{SettingsMeta:()=>R,default:()=>L});var s=t(5893),i=t(5529),r=t(4184),a=t.n(r),o=t(7294),c=t(743),l=t(4567),u=t(6176),d=t(9983),h=t(2850),g=t(8670),v=t(8056),p=t(1659),f=t(8673),m=t(9385),j=t(7988),b=t(7652),x=t(4133),w=t(7891),y=t(5697),k=t.n(y),N=t(245),T=t(195);function S(e){const[n]=(0,o.useState)(e.initial),t=32;let i=[],r={};for(let e=4;e<17;e++){const n=(e-4)/13*75;i=[...i,{value:n,raw:e}],r["r"+n]=e,r["s"+e]=n}i=[...i,{value:100,raw:t}],r.r100=t,r.s32=100;const a=e=>r["r"+e];return(0,s.jsxs)("div",{className:"kana-slider",children:[(0,s.jsx)(N.Z,{id:"discrete-slider-restrict",gutterBottom:!0,children:"Difficulty"}),(0,s.jsx)(T.ZP,{defaultValue:(c=n,r["s"+c]),valueLabelFormat:a,getAriaValueText:e=>""+a(e),"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:i,onChangeCommitted:(n,s)=>{"number"==typeof s&&(n=>{const s=e.initial,i=a(n);i!==t&&s!==t&&i!==s||i!==t&&s===t&&i!==s?(e.setChoiceN(i),!0===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide()):i===t&&i!==s&&(e.setChoiceN(i),!1===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide())})(s)}})]});var c}S.propTypes={initial:k().number,wideMode:k().bool,setChoiceN:k().func,toggleWide:k().func};var C=t(6537),M=t(7567);const O=(0,o.lazy)((()=>Promise.all([t.e(557),t.e(251)]).then(t.bind(t,598)))),A=(0,o.lazy)((()=>Promise.all([t.e(816),t.e(557),t.e(196)]).then(t.bind(t,4196)))),R={location:"/settings/",label:"Settings"};function P(e,n){const t=n.cause;switch(e((0,v.zA)(x.x6.DEBUG)),null==t?void 0:t.code){case"StaleVocabActiveGrp":{const s=t.value;e((0,v.kg)("Error: "+n.message,x.x6.ERROR)),e((0,v.kg)("Group "+JSON.stringify(s)+" Removed",x.x6.ERROR)),e((0,w.sG)(s))}break;case"StalePhraseActiveGrp":{const s=t.value;e((0,v.kg)("Error: "+n.message,x.x6.ERROR)),e((0,v.kg)("Group "+JSON.stringify(s)+" Removed",x.x6.ERROR)),e((0,b.cz)(s))}break;case"DeviceMotionEvent":e((0,v.kg)("Error: "+n.message,x.x6.ERROR)),e((0,v.cv)(0))}}function E(e,n,t){return function(s){try{(0,d.Mm)(s,n,(e=>{t(Number(e.toFixed(2))),setTimeout((()=>{t(void 0)}),300)}))}catch(n){n instanceof Error&&P(e,n)}}}function I(e,n){const t=e?(0,s.jsx)(i.oOx,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,s.jsx)(i.wl8,{className:"clickable",size:"medium","aria-label":"expand"});return(0,s.jsx)("h2",{onClick:()=>n((e=>!e)),children:t})}const D=a()({"mb-5":!0});function L(){const e=(0,c.I0)(),n=(0,o.useRef)(void 0),{darkMode:t,swipeThreshold:r,motionThreshold:y,memory:k,debug:N,kanjiFilter:T,kanjiReinforce:R,kanjiActiveTags:L,kanjiChoiceN:F,kanjiFadeInAnswers:q,oppositesQRomaji:Z,oppositesARomaji:W,oppositeFadeInAnswers:G,choiceN:V,wideMode:_,easyMode:U,charSet:H,particlesARomaji:K,particleFadeInAnswer:z,vocabList:J,kanjiTagObj:B,phraseList:Y,KanjiList:$,vocabMeta:Q,phraseMeta:X,kanjiMeta:ee}=function(){const[e,n,t,s]=(0,c.v9)((({global:e})=>{const{darkMode:n,swipeThreshold:t,motionThreshold:s,debug:i}=e;return[n,t,s,i]}),c.wU),i=(0,c.v9)((({global:e})=>{const{memory:n}=e;return n}),((e,n)=>e.usage===n.usage)),[r,a,o,l,u]=(0,c.v9)((({kanji:e})=>{const{choiceN:n,fadeInAnswers:t,filter:s,reinforce:i,activeTags:r}=e.setting;return[n,t,s,i,r]}),c.wU),[d,h,g]=(0,c.v9)((({opposite:e})=>{const{qRomaji:n,aRomaji:t,fadeInAnswers:s}=e;return[n,t,s]}),c.wU),[v,p,f,m]=(0,c.v9)((({kana:e})=>{const{choiceN:n,wideMode:t,easyMode:s,charSet:i}=e.setting;return[n,t,s,i]}),c.wU),[j,b]=(0,c.v9)((({particle:e})=>{const{aRomaji:n,fadeInAnswers:t}=e.setting;return[n,t]}),c.wU),{value:x}=(0,c.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:w}=(0,c.v9)((({vocabulary:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),{value:y}=(0,c.v9)((({phrases:e})=>e),((e,n)=>e.version===n.version)),{repetition:k}=(0,c.v9)((({phrases:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),{value:N}=(0,c.v9)((({kanji:e})=>e),((e,n)=>e.version===n.version)),T=(0,c.v9)((({kanji:e})=>e.tagObj),c.wU),{repetition:S}=(0,c.v9)((({kanji:e})=>e.setting),((e,n)=>e.repTID===n.repTID));return{darkMode:e,swipeThreshold:n,motionThreshold:t,memory:i,debug:s,kanjiChoiceN:r,kanjiFadeInAnswers:a,kanjiFilter:o,kanjiReinforce:l,kanjiActiveTags:u,oppositesQRomaji:d,oppositesARomaji:h,oppositeFadeInAnswers:g,choiceN:v,wideMode:p,easyMode:f,charSet:m,particlesARomaji:j,particleFadeInAnswer:b,vocabList:x,kanjiTagObj:T,phraseList:y,KanjiList:N,vocabMeta:w,phraseMeta:k,kanjiMeta:S}}(),[ne,te]=(0,o.useState)(!1),[se,ie]=(0,o.useState)(!1),[re,ae]=(0,o.useState)(!1),[oe,ce]=(0,o.useState)(!1),[le,ue]=(0,o.useState)(!1),[de,he]=(0,o.useState)(""),[ge,ve]=(0,o.useState)(""),[pe,fe]=(0,o.useState)(""),[me,je]=(0,o.useState)(!1),[be,xe]=(0,o.useState)([]),[we,ye]=(0,o.useState)(0);(0,o.useEffect)((()=>{var t;return e((0,v.M4)()),0===J.length&&e((0,w.Rz)()),0===B.length&&e((0,f.tk)()),0===Y.length&&e((0,b.cC)()),navigator.serviceWorker.addEventListener("message",ke),null===(t=navigator.serviceWorker.controller)||void 0===t||t.postMessage({type:"SW_VERSION"}),()=>{navigator.serviceWorker.removeEventListener("message",ke),n.current&&window.removeEventListener("devicemotion",n.current)}}),[]),(0,o.useEffect)((()=>{y>0&&void 0===n.current?(n.current=E(e,y,ye),(0,d.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>P(e,n)))):0===y&&void 0!==n.current?(window.removeEventListener("devicemotion",n.current),n.current=void 0):(n.current&&window.removeEventListener("devicemotion",n.current),n.current=E(e,y,ye),(0,d.HG)((()=>{n.current&&window.addEventListener("devicemotion",n.current)}),(n=>P(e,n))))}),[e,y]);const ke=(0,o.useCallback)((n=>{if("DO_HARD_REFRESH"===n.data.type){const{error:t}=n.data;t&&e((0,v.kg)(t,x.x6.ERROR)),setTimeout((()=>{te(!1),je(!0)}),2e3)}else if("SW_VERSION"===n.data.type){const{swVersion:e,jsVersion:t,bundleVersion:s}=n.data;he(e),ve(t),fe(s)}}),[e]),{keys:Ne,list:Te}=(0,o.useMemo)((()=>(0,d.XQ)(Q,J,"[Stale Vocabulary]")),[J,Q]),{keys:Se,list:Ce}=(0,o.useMemo)((()=>(0,d.XQ)(X,Y,"[Stale Phrase]")),[Y,X]),{keys:Me,list:Oe}=(0,o.useMemo)((()=>(0,d.XQ)(ee,$,"[Stale Kanji]")),[$,ee]),Ae=(0,o.useMemo)((()=>{return(e=[...Y,...J]).reduce(((n,t,i)=>{const r=h.TZ.parse(t);if(r.hasFurigana())try{(0,h.Wp)(r.getPronunciation(),r.getSpelling())}catch(a){if(a instanceof Error&&"cause"in a){const o=a.cause;if("ParseError"===o.code||"InputError"===o.code){const c=(0,s.jsx)("hr",{},`parse-err-sep-${t.uid}`),l=(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("span",{className:"col p-0",children:r.toHTML({showError:!1})}),(0,s.jsx)("span",{className:"col p-0",children:t.english}),(0,s.jsxs)("span",{className:"col p-0 app-sm-fs-xx-small",children:[(0,s.jsx)("div",{children:a.message}),(0,s.jsx)("div",{children:o.info?JSON.stringify(o.info):""})]})]},`parse-err-${t.uid}`);return n.length>0&&i<e.length-1?[...n,c,l]:[...n,l]}}}return n}),[]);var e}),[J,Y]),Re=(0,o.useMemo)((()=>new Set([...Ne,...Se,...Me])),[Ne,Se,Me]),Pe=(0,o.useMemo)((()=>{return(e=[...Te,...Ce,...Oe]).reduce(((n,t,i)=>{const r=(0,s.jsx)("hr",{},`stale-meta-${t.uid}`),a=(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("span",{className:"col p-0",children:t.key}),(0,s.jsx)("span",{className:"col p-0",children:t.english}),(0,s.jsx)("span",{className:"col p-0 app-sm-fs-xx-small",children:(0,s.jsx)("div",{children:t.uid})})]},t.uid);return n.length>0&&i<e.length?[...n,r,a]:[...n,a]}),[]);var e}),[Te,Ce,Oe]);if(J.length<1||Y.length<1||B.length<1)return(0,s.jsx)(C.n,{addlStyle:"main-panel"});const Ee=Object.values($).filter((e=>{var n;return null===(n=e.tag)||void 0===n?void 0:n.some((e=>L.includes(e)))})),Ie=Ee.map((e=>e.uid)),De=Object.keys(ee).filter((e=>{var n;return!0===(null===(n=ee[e])||void 0===n?void 0:n.rein)})),Le=De.filter((e=>!Ie.includes(e)));return(0,s.jsx)("div",{className:"settings",children:(0,s.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,s.jsxs)("div",{className:D,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Global"}),(0,s.jsx)("h2",{})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,s.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===r}),children:[(0,s.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(r-1<=0?(0,v.nh)(0):(0,v.nh)(r-1))},children:"-"}),(0,s.jsx)("div",{className:"px-2",children:r}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>e((0,v.nh)(r+1)),children:"+"})]}),(0,s.jsxs)("div",{className:a()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===y}),children:[(0,s.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{e(y-.5<=0?(0,v.cv)(0):(0,v.cv)(y-.5))},children:"-"}),(0,s.jsx)("div",{className:a()({"px-2":!0,"correct-color":we>y&&we<=y+1,"question-color":we>y+1&&we<=y+2,"incorrect-color":we>y+2}),children:null!=we?we:y}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>{e((0,v.cv)(y+.5))},children:"+"})]})]}),(0,s.jsxs)("div",{className:"column-2",children:[(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(M.Z,{active:t,action:(0,g.cM)(e,v.In),statusText:(t?"Dark":"Light")+" Mode"})}),(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(M.Z,{active:r>0,action:()=>{e(r>0?(0,v.nh)(0):(0,v.nh)(1))},statusText:"Touch Swipes"})}),(0,s.jsx)("div",{className:"setting-block",children:(0,s.jsx)(M.Z,{active:y>0,action:()=>{e(0===y?(0,v.cv)(6):(0,v.cv)(0))},statusText:"Accelerometer"})})]})]})})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Phrases"}),I(oe,ce)]}),oe&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(C.n,{addlStyle:"phrases-settings",text:"Loading..."}),children:(0,s.jsx)(O,{})})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Vocabulary"}),I(re,ae)]}),re&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(C.n,{addlStyle:"vocabulary-settings",text:"Loading..."}),children:(0,s.jsx)(A,{})})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h2",{children:"Kanji"}),I(se,ie)]}),se&&(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsxs)("div",{className:"column-1",children:[(0,s.jsx)("h4",{children:(0,d.w_)(T,["Kanji Group","Frequency List","Tags"])}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:T%2==0,action:(0,g.cM)(e,f.cy),color:"default",statusText:"Filter by"})}),T===x.Lx.FREQUENCY&&0===De.length&&(0,s.jsx)("div",{className:"fst-italic",children:"No words have been chosen"}),T===x.Lx.TAGS&&(0,s.jsx)(u.E,{selectedCount:0===Ee.length?Object.values($).length:Ee.length,termsTags:B,termsActive:L,toggleTermActive:(0,g.cM)(e,f.X8)}),T===x.Lx.FREQUENCY&&De.length>0&&(0,s.jsx)(l.a,{termsActive:L,termsFreq:De,terms:$,removeFrequencyTerm:(0,g.cM)(e,f.SI),toggleTermActiveGrp:(0,g.cM)(e,f.LD)})]}),(0,s.jsx)("div",{className:"column-2 setting-block",children:(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:R,action:(0,g.cM)(e,f.vT),disabled:T===x.Lx.FREQUENCY,statusText:(R?`(+${Le.length} ) `:"")+"Reinforcement"})})})]})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Opposites Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:Z,action:(0,g.cM)(e,m.Cz),statusText:"Question Romaji"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:W,action:(0,g.cM)(e,m.CO),statusText:"Answer Romaji"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:G,action:(0,g.cM)(e,m.tI),statusText:"Fade in answers"})})]})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Kana Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)("div",{children:(0,s.jsx)(M.Z,{active:H===x.kS.HIRAGANA,action:(0,g.cM)(e,p.I_),statusText:(0,d.w_)(H,["Hiragana","Katakana","Mixed"])})}),(0,s.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,s.jsx)(S,{initial:V,wideMode:_,setChoiceN:(0,g.cM)(e,p.Bs),toggleWide:(0,g.cM)(e,p.PD)})}),(0,s.jsx)("div",{children:(0,s.jsx)(M.Z,{active:U,action:(0,g.cM)(e,p._S),statusText:"Kana Hints"})})]})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Kanji Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,s.jsx)(S,{initial:F,setChoiceN:(0,g.cM)(e,f.ow)})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:q,action:(0,g.cM)(e,f.im),statusText:"Fade in answers"})})]})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Particles Game"})}),(0,s.jsxs)("div",{className:"setting-block",children:[(0,s.jsx)(M.Z,{active:K,action:(0,g.cM)(e,j.ro),statusText:"Answer Romaji"}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(M.Z,{active:z,action:(0,g.cM)(e,j.C_),statusText:"Fade in answers"})})]})]}),(0,s.jsxs)("div",{className:D,children:[(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("h2",{children:"Application"})}),(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsx)("div",{className:"column-1",children:(0,s.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between clickable",onClick:()=>{he(""),ve(""),fe(""),setTimeout((()=>{var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"SW_VERSION"})}),1e3)},children:[(0,s.jsxs)("div",{className:"pe-2",children:[(0,s.jsx)("div",{children:"swVersion:"}),(0,s.jsx)("div",{children:"jsVersion:"}),(0,s.jsx)("div",{children:"bundleVersion:"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:de}),(0,s.jsx)("div",{children:ge}),(0,s.jsx)("div",{children:pe})]})]})})}),(0,s.jsxs)("div",{className:"column-2",children:[(0,s.jsx)("div",{className:"setting-block mb-2",children:(0,s.jsx)(M.Z,{active:N>x.x6.OFF,action:(0,g.cM)(e,v.zA),color:"default",statusText:(0,d.w_)(N,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,s.jsxs)("div",{className:a()({"d-flex justify-content-end mb-2":!0,"disabled-color":me}),children:[(0,s.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,s.jsx)("div",{className:a()({"spin-a-bit":ne}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:()=>{var e;te(!0),je(!1),setTimeout((()=>{ne&&(te(!1),je(!0))}),3e3),null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"DO_HARD_REFRESH"})},children:(0,s.jsx)(i.bnu,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,s.jsx)("div",{className:"setting-block mb-2",children:(0,s.jsx)(M.Z,{active:k.persistent,action:(0,g.cM)(e,v.TJ),disabled:k.persistent,color:"default",statusText:k.persistent?`Persistent ${~~(k.usage/1024/1024)}\n                        /\n                        ${~~(k.quota/1024/1024)}\n                        MB`:"Persistent off"})})]})]}),Pe.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("h5",{children:"Stale Space Repetition"}),I(le,ue)]}),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsx)("span",{children:"keys: "+JSON.stringify(Array.from(Re))})}),le&&(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(C.n,{addlStyle:"failed-spacerep-view"}),children:(0,s.jsx)("div",{className:"failed-spacerep-view container mt-2 p-0",children:Pe})})]}),Ae.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("h5",{children:"Failed Furigana Parse"}),(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)(C.n,{addlStyle:"failed-furigana-view"}),children:(0,s.jsx)("div",{className:"failed-furigana-view container mt-2 p-0",children:Ae})})]})]})]})})}},1241:(e,n,t)=>{t.r(n),t.d(n,{VocabularyMeta:()=>$,default:()=>Q});var s=t(5893),i=t(9041),r=t(6514),a=t(8223),o=t(5529),c=t(3174),l=t.n(c),u=t(7294),d=t(743),h=t(4184),g=t.n(h),v=t(5697),p=t.n(v),f=t(9983),m=t(2850),j=t(9841),b=t(7891),x=t(4933),w=t(3968),y=t(9775);function k(e,n){const t=Math.trunc(e.length/2)+(e.length%2==0?0:1)-n;return Math.trunc(e.length/2)+t}function N(e){const n=(0,d.I0)(),{verb:t,reCache:i,linkToOtherTerm:r,showHint:a}=e,[o,c]=(0,u.useState)(void 0),[l,h]=(0,u.useState)(void 0),{verbForm:v,swipeThreshold:p,repetition:N,romajiEnabled:T,englishSideUp:S,hintEnabled:C,verbFormsOrder:M,verbColSplit:O}=(0,x.Z)();(0,u.useEffect)((()=>{const e=t.uid;c((n=>n===e?n:void 0)),h((n=>n===e?n:void 0))}),[t]);const A=(e,t)=>{const i=g()({"pt-3 pe-sm-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"text-end":0!==e}),r=t.map((e=>{const t=g()({clickable:!0}),i=g()({invisible:v===e.name});return(0,s.jsxs)("div",{className:t,onClick:()=>{v===e.name?n((0,b.rZ)("dictionary")):n((0,b.rZ)(e.name))},children:[(0,s.jsx)("span",{className:i,children:"["}),(0,s.jsx)("span",{children:e.name}),(0,s.jsx)("span",{className:i,children:"]"})]},e.name)}));return(0,s.jsx)("div",{className:i,children:r},e)},R=(P=t,E=M,(0,u.useMemo)((()=>{var e,n,t,s,i,r,a,o,c,l;const u={dictionary:void 0===P?void 0:j.R.parse(P)},d=[{name:"-masu",value:null===(e=u.dictionary)||void 0===e?void 0:e.masuForm()},{name:"-mashou",value:null===(n=u.dictionary)||void 0===n?void 0:n.mashouForm()},{name:"dictionary",value:u.dictionary},{name:"-nai",value:null===(t=u.dictionary)||void 0===t?void 0:t.naiForm()},{name:"-saseru",value:null===(s=u.dictionary)||void 0===s?void 0:s.saseruForm()},{name:"-te",value:null===(i=u.dictionary)||void 0===i?void 0:i.teForm()},{name:"-ta",value:null===(r=u.dictionary)||void 0===r?void 0:r.taForm()},...null!==(null===(a=u.dictionary)||void 0===a?void 0:a.chattaForm())?[{name:"-chatta",value:null===(o=u.dictionary)||void 0===o?void 0:o.chattaForm()}]:[],...null!==(null===(c=u.dictionary)||void 0===c?void 0:c.reruForm())?[{name:"-reru",value:null===(l=u.dictionary)||void 0===l?void 0:l.reruForm()}]:[]];let h;return E&&E.length>0&&(h=E.reduce(((e,n)=>{const t=d.find((e=>e.name===n));return void 0!==t&&(e=[...e,t]),e}),[])),null!=h?h:d}),[P,E]));var P,E;const{t1:I,t2:D}=function(e,n){const t=k(e,n);return{t1:e.slice(0,t),t2:e.slice(t)}}(R,O),L=function(e,n,t){var s;const i=(0,d.I0)(),r=!(!1===(null===(s=null==n?void 0:n[e])||void 0===s?void 0:s.f));return(0,u.useMemo)((()=>({furigana:{show:r,toggle:!1===t&&(()=>{i((0,b._n)(e))})||void 0}})),[i,e,r,t])}(t.uid,N,S),{inJapanese:F,inEnglish:q,romaji:Z,japaneseObj:W}=function(e,n,t,s,i){var r,a;const o=null!==(r=e.romaji)&&void 0!==r?r:".",c=k(n,s),l=n.find((e=>e.name===t)),u=null!==(a=null==l?void 0:l.value)&&void 0!==a?a:n[c].value;return{inJapanese:u.toHTML(i),inEnglish:e.english,romaji:o,japaneseObj:u}}(t,R,v,O,L),G=(0,u.useMemo)((()=>j.R.parse(t)),[t]),V=function(e,n,t,i){return(0,u.useMemo)((()=>{var r;const a=!e;let o,c=[],l=!1,u=!1;n.constructor.name===j.R.name&&"isExceptionVerb"in n&&(l=n.isExceptionVerb()||3===n.getVerbClass(),u=n.isIntransitive(),o=null!==(r=n.getTransitivePair())&&void 0!==r?r:n.getIntransitivePair());const d=n.isNaAdj(),h=n.isSlang(),v=n.isKeigo();let p;return a&&(u||o)&&(c=[...c,(0,s.jsx)("span",{className:g()({clickable:o,"question-color":o}),onClick:o&&i?()=>{i(o)}:void 0,children:u?"intr":"trans"},c.length+1)]),a&&h&&(c=[...c,(0,s.jsx)("span",{children:"slang"},c.length+1)]),a&&v&&(c=[...c,(0,s.jsx)("span",{children:"keigo"},c.length+1)]),l&&c.length>0&&(c=[(0,s.jsx)("span",{children:"*"},c.length+1),...c]),p=c.length>0?(0,s.jsxs)("span",{children:[t,d&&(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,s.jsxs)("span",{className:"fs-5",children:[(0,s.jsx)("span",{children:" ("}),c.reduce(((e,n,t)=>t>0&&t<c.length?[...e,(0,s.jsx)("span",{children:" , "},c.length+t),n]:[...e,n]),[]),(0,s.jsx)("span",{children:")"})]})]}):l?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{children:[" ","*"]})]}):d?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t,p}),[e,n,t,i])}(S,G,F,r),_=function(e,n,t,i){return(0,u.useMemo)((()=>{var r;let a,o=[],c=!1;n.constructor.name===j.R.name&&"isExceptionVerb"in n&&(c=n.isIntransitive(),a=null!==(r=n.getTransitivePair())&&void 0!==r?r:n.getIntransitivePair());const l=n.isSlang(),u=n.isKeigo();let d;return e&&(c||a)&&(o=[...o,(0,s.jsx)("span",{className:g()({clickable:a,"question-color":a}),onClick:a&&i?()=>{i(a)}:void 0,children:c?"intr":"trans"},o.length+1)]),e&&l&&(o=[...o,(0,s.jsx)("span",{children:"slang"},o.length+1)]),e&&u&&(o=[...o,(0,s.jsx)("span",{children:"keigo"},o.length+1)]),d=o.length>0?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{children:" ("}),o.reduce(((e,n,t)=>t>0&&t<o.length?[...e,(0,s.jsx)("span",{children:" , "},o.length+t),n]:[...e,n]),[]),(0,s.jsx)("span",{children:")"})]})]}):t,d}),[e,n,t,i])}(S,G,q,r),{jLabel:U,eLabel:H}=(0,u.useMemo)((()=>{let e=(0,s.jsx)("span",{children:"[English]"}),n=(0,s.jsx)(y.Z,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(C&&a)if(S){const e=(0,f.tu)(W);e&&(n=e)}else{const n=(0,f.iz)(t);n&&(e=n)}return{jLabel:n,eLabel:e}}),[C,a,S,W,t]),{topValue:K,bottomValue:z,bottomLabel:J}=function(e,n,t,s,i){return(0,u.useMemo)((()=>{let r,a,o,c;return e?(r=n,a=t,o=s,c=i):(r=t,a=n,o=i,c=s),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:c}}),[e,n,t,s,i])}(S,_,V,H,U),B=(0,u.useMemo)((()=>Object.assign(Object.assign({},t),{japanese:W.toString(),pronounce:t.pronounce&&W.getPronunciation(),form:v})),[t,W,v]),Y=(0,u.useMemo)((()=>S?{tl:"en",q:B.english,uid:B.uid+".en"}:{tl:"ja",q:(0,m._I)(B),uid:(0,f.gW)(B)}),[S,B]),$=(0,s.jsx)(w.Z,{visible:0===p,word:Y,reCache:i});return(0,s.jsxs)(s.Fragment,{children:[A(0,I),(0,s.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(y.Z,{breakPoint:"md",smallClassName:Object.assign({},S?{h5:!0}:{"fs-display-6":!0}),largeClassName:{"fs-display-6":!0},children:K}),T&&Z&&(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"clickable loop-no-interrupt",onClick:()=>h((e=>e===t.uid?void 0:t.uid)),children:l===t.uid?Z:"[romaji]"})}),(0,s.jsx)(y.Z,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:Object.assign({},S?{"fs-display-6":!0}:{h5:!0}),largeClassName:{"fs-display-6":!0},onClick:()=>c((e=>e===t.uid?void 0:t.uid)),children:o===t.uid?z:J}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:$})]},1),A(2,D)]})}N.propTypes={verb:p().object.isRequired,reCache:p().bool,linkToOtherTerm:p().func,showHint:p().bool};var T=t(8670);function S(e){var n;const t=(0,d.I0)(),{vocabulary:i,reCache:r,showHint:a}=e,[o,c]=(0,u.useState)(void 0),[l,h]=(0,u.useState)(void 0),[g,v]=(0,u.useState)(void 0),{swipeThreshold:p,repetition:j,romajiEnabled:k,englishSideUp:N,hintEnabled:S,bareKanji:C}=(0,x.Z)();(0,u.useEffect)((()=>{const e=i.uid;c((n=>n===e?n:void 0)),h((n=>n===e?n:void 0))}),[i]);const M=(0,u.useCallback)((e=>t((0,b._n)(e))),[t]),O=(0,u.useMemo)((()=>(0,f.$q)(i.uid,j,N,M)),[M,i.uid,j,N]);let A=(0,s.jsx)("span",{children:"[Japanese]"}),R=(0,s.jsx)("span",{children:"[English]"});const P=m.TZ.parse(i),E=P.toHTML(O),I=(0,s.jsx)(u.Fragment,{children:i.english}),D=i.romaji,L=(0,f.hF)(N,P,E),F=(0,f.yT)(N,P,I);if(S&&a)if(N){const e=(0,f.tu)(P);A=null!=e?e:A}else{const e=(0,f.iz)(i);R=null!=e?e:R}const{topValue:q,bottomValue:Z,bottomLabel:W}=(0,f.JS)(N,F,L,R,A),G=N&&C&&!1===(null===(n=j[i.uid])||void 0===n?void 0:n.f),V=(0,u.useMemo)((()=>{let e=i;if(m.TZ.parse(i).isNaAdj()){const n=m.TZ.parse(i).append(g&&"な");e=Object.assign(Object.assign({},i),{japanese:n.toString(),pronounce:i.pronounce&&n.getPronunciation(),form:g})}return N?{tl:"en",q:i.english,uid:i.uid+".en"}:{tl:N?"en":"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)}}),[i,N,g]),_=(0,u.useCallback)((()=>v((e=>e?void 0:"-na"))),[]),U=(0,s.jsx)(w.Z,{visible:0===p,word:V,reCache:r,onPushedPlay:_}),H=i.english.length<55;return(0,s.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,s.jsx)(y.Z,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},N?Object.assign({[H?"fs-display-6":"h3"]:!0},H?{"lh-xs":!0}:{}):{"fs-display-6":!0}),children:q}),k&&D&&(0,s.jsx)("h5",{children:(0,s.jsx)("span",{onClick:(0,T.kP)(h,(e=>e===i.uid?void 0:i.uid)),className:"clickable loop-no-interrupt",children:l===i.uid?D:"[Romaji]"})}),(0,s.jsx)(y.Z,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Object.assign({},N?{"fs-display-6":!0}:{[H?"fs-display-6":"h3"]:!0}),onClick:G?void 0:(0,T.kP)(c,(e=>e===i.uid?void 0:i.uid)),children:o===i.uid||G?Z:W}),(0,s.jsx)("div",{className:"d-flex justify-content-center",children:U})]})}S.propTypes={vocabulary:p().object.isRequired,reCache:p().bool,showHint:p().bool};var C=t(7186),M=t(5965),O=t(5863),A=t(5439),R=t(7962),P=t(8218),E=t(9226),I=t(3518),D=t(6693),L=t(6281),F=t(8056),q=t(4133),Z=t(2409),W=t(8301),G=t(1436),V=t(7625),_=t(195),U=t(6892),H=t(8916);function K(e){var n,t,i;const r=null!==(n=e.value)&&void 0!==n?n:30,[a,o]=(0,u.useState)(r);(0,u.useEffect)((()=>{o(r)}),[r]);const c=a/100,[l,d,h]=[13,110,256],v=[255,(0,U.t7)(0,255,c),0],p=[(0,U.t7)(255,0,c),255,0],m=[l,(0,U.t7)(255,d,c),(0,U.t7)(0,h,c)],j=[(0,U.t7)(v[0],p[0],c),(0,U.t7)(v[1],p[1],c),(0,U.t7)(v[2],p[2],c)],b=[(0,U.t7)(p[0],m[0],c),(0,U.t7)(p[1],m[1],c),(0,U.t7)(p[2],m[2],c)],x=[(0,U.t7)(j[0],b[0],c),(0,U.t7)(j[1],b[1],c),(0,U.t7)(j[2],b[2],c)],[w,y,k]=x.map((e=>Math.floor(e))),N="rgb("+w+","+y+","+k+",0.25)",S=[{value:f.YZ},{value:f.$t}],C=(0,T.iP)(),[M,O]=(0,u.useState)(-1),A=(0,u.useRef)(null),{x:R,y:P,strategy:E,refs:I,middlewareData:D,update:L}=(0,Z.YF)({placement:"top",middleware:[(0,W.cv)({mainAxis:8,crossAxis:10}),(0,W.uY)(),(0,Z.x7)({element:A})]});return(0,u.useEffect)((()=>{L()}),[L,C.height,C.width,e.manualUpdate]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:I.setReference,className:"sm-icon-grp clickable","aria-label":"Set difficulty",onClick:()=>{O((e=>{e>0&&clearTimeout(e);const n=setTimeout((()=>O(-1)),3500);return Number(n)}))},children:(0,s.jsx)(V.G,{icon:G.scR})}),(0,s.jsxs)("div",{id:"tooltip",ref:I.setFloating,style:{height:"200px",position:E,top:null!=P?P:0,left:null!=R?R:0,width:"max-content"},className:g()({invisible:M<0,"tooltip-fade":M<0,[H.pK]:!0}),children:[(0,s.jsx)(_.ZP,{sx:{color:N},orientation:"vertical",value:a,onChange:(e,n)=>{clearTimeout(M),O(0),"number"==typeof n&&o(n)},onChangeCommitted:(n,t)=>{const s=setTimeout((()=>O(-1)),1e3);O(Number(s)),"function"==typeof e.onChange&&"number"==typeof t&&e.onChange(t)},marks:S,step:10,valueLabelFormat:e=>e>f.$t?"Pass":"Fail"}),(0,s.jsx)("div",{ref:A,id:"arrow",style:{position:E,height:8,width:8,bottom:-4,left:8+(null!==(i=null===(t=D.arrow)||void 0===t?void 0:t.x)&&void 0!==i?i:0)}})]})]})}K.propTypes={value:p().number,onChange:p().func,manualUpdate:p().string};var z=t(6537),J=t(2405),B=t(7127);function Y(e){const n=e.list.length-1,[t,i]=(0,u.useState)((()=>Math.min(n,e.initial)));return(0,s.jsx)("div",{className:"vocabulary-slider",children:(0,s.jsx)(_.ZP,{defaultValue:t,valueLabelFormat:n=>e.list[n].label,getAriaValueText:n=>e.list[n].label,"aria-label":"Alphabetic quick scroll",step:1,min:0,max:n,valueLabelDisplay:"auto",onChangeCommitted:(n,t)=>{"number"==typeof t&&(e.setIndex(t),i(t))}},t)})}Y.propTypes={initial:p().number.isRequired,list:p().array.isRequired,setIndex:p().func.isRequired};const $={location:"/vocabulary/",label:"Vocabulary"};function Q(){var e,n,t;const c=(0,d.I0)(),[h,g]=(0,u.useState)(!1),v=(0,u.useRef)(!1),p=(0,u.useRef)(void 0),j=(0,u.useRef)(0),[w,y]=(0,u.useState)(void 0),[k,Z]=(0,u.useState)(Date.now()),W=(0,u.useRef)(Date.now()),[G,V]=(0,u.useState)(0),[_,U]=(0,u.useState)(void 0),[H,$]=(0,u.useState)([]),[Q,ee]=(0,u.useState)(!1),ne=(0,u.useRef)(),[te,se]=(0,u.useState)(!1),{motionThreshold:ie,vocabList:re,memoThreshold:ae,reinforce:oe,filterType:ce,hintEnabled:le,sortMethod:ue,activeGroup:de,autoVerbView:he,englishSideUp:ge,verbForm:ve,repetition:pe}=(0,x.Z)(),fe=(0,u.useRef)(pe);fe.current=pe,(0,u.useEffect)((()=>{0===re.length&&c((0,b.Rz)())}),[]);const me=(0,u.useMemo)((()=>{if(0===re.length)return[];if(0===Object.keys(fe.current).length&&0===de.length)return re;const e=Object.keys(fe.current).reduce(((e,n)=>{var t;return!0===(null===(t=fe.current[n])||void 0===t?void 0:t.rein)&&(e=[...e,n]),e}),[]);let n=(0,f.Dm)(ce.current,re,e,de,(0,T.cM)(c,b.ZZ));switch(ue.current){case q.vl.DIFFICULTY:{const e=n.filter((e=>{var n;const t=ae.current,s=null===(n=fe.current[e.uid])||void 0===n?void 0:n.difficulty;let i=!1,r=!1;return void 0===s?i=t<0?-1*t<f.$t:t>f.$t:r=t<0?s>-1*t:s<t,i||r}));e.length>0?n=e:console.warn("Excluded all terms. Discarding memorized subfiltering.");break}case q.vl.GAME:if(oe.current){const[e,t]=l()(n,(e=>{var n;return!0===(null===(n=fe.current[e.uid])||void 0===n?void 0:n.rein)}));n=[...t,...e]}}const t=n.reduce(((e,n)=>{var t;return!0===(null===(t=fe.current[n.uid])||void 0===t?void 0:t.rein)&&(e=[...e,n.uid]),e}),[]);return $(t),n}),[c,re,de]),{newOrder:je,ebare:be,jbare:xe}=(0,u.useMemo)((()=>{if(0===me.length)return{newOrder:[]};let e,n,t;switch(ue.current){case q.vl.RANDOM:e=(0,f.tq)(me);break;case q.vl.VIEW_DATE:e=(0,f.EL)(me,fe.current);break;case q.vl.GAME:if(oe.current){let n=-1;for(let e=me.length-1;e>-1;e--){const t=fe.current[me[e].uid],s=e-1>-1?e-1:0,i=fe.current[me[s].uid];if(!0===(null==t?void 0:t.rein)&&!(null==i?void 0:i.rein)){n=e;break}}if(-1!==n){const t=me.slice(0,n),s=me.slice(n);e=[...(0,f.rU)(t,fe.current),...s.map(((e,n)=>t.length+n))]}}void 0===e&&(e=(0,f.rU)(me,fe.current));break;case q.vl.DIFFICULTY:e=(0,f.J0)(me,fe.current);break;default:({order:e,jOrder:n,eOrder:t}=(0,f.fx)(me))}return se(!0),{newOrder:e,jbare:n,ebare:t}}),[me]),we=(0,u.useCallback)((()=>{const e=me.length;let n=(G+1)%e;W.current=k,Z(Date.now()),j.current=G,V(n),y(void 0)}),[me,G,k]),ye=(0,u.useCallback)((()=>{(0,f.hY)(oe.current,ce.current,H,me,fe.current,w,(e=>{p.current=w,y(e)}),we)}),[c,H,me,w,we]),ke=(0,u.useCallback)((()=>{const e=me.length;let n;n=w?G:(e+(G-1))%e,W.current=k,Z(Date.now()),j.current=G,V(n),y(void 0)}),[me,G,w,k]),Ne=function(e,n,t,s,i,r,a,o,c,l){return function(u,d){let h;if("left"===u)e(),h=Promise.all([Promise.resolve()]);else if("right"===u)n(),h=Promise.all([Promise.resolve()]);else{const e=null!=t?t:(0,f.vr)(s,o,a),n=(0,f.cc)(e,i),g=c?"/override_cache":"";if("up"===u){let e;if((0,A.gI)("playing"),"Verb"===n.grp&&"dictionary"!==r){const t=(0,f.dP)(n,r);e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:r})}else if(m.TZ.parse(n).isNaAdj()){const t=m.TZ.parse(n).append(l.current&&"な");e=Object.assign(Object.assign({},n),{japanese:t.toString(),pronounce:n.pronounce&&t.getPronunciation(),form:l.current}),l.current=l.current?void 0:"-na"}else e=n;const t=(0,R.b1)(C.vT+g,{tl:"ja",q:(0,m._I)(e),uid:(0,f.gW)(e)});h=(0,M.R$)(t,d)}else if("down"===u){(0,A.gI)("playing");const e=n.english,t=(0,R.b1)(C.vT+g,{tl:"en",q:e,uid:n.uid+".en"});h=(0,M.R$)(t,d)}}return null!=h?h:Promise.reject()}}(ye,ke,w,G,re,ve,je,me,Q,ne),Te=(0,P.E)(ie),{beginLoop:Se,abortLoop:Ce,looperSwipe:Me,loopSettingBtn:Oe,loopActionBtn:Ae,timedPlayVerifyBtn:Re,timedPlayAnswerHandlerWrapper:Pe,gradeTimedPlayEvent:Ee,resetTimedPlay:Ie,loop:De,tpAnswered:Le,tpAnimation:Fe}=(0,L.T)(Ne,ge,Te);(0,E.q)(Ne,(0,T.cM)(c,b.$u),Pe);const{HTMLDivElementSwipeRef:qe}=(0,D.M)(Ne,Pe);if((0,I.Z)("Vocabulary Loop",De,Se,Ce,Me),(0,u.useEffect)((()=>{var e;const n={selectedIndex:j.current,reinforcedUID:p.current,lastNext:W.current};if(w!==n.reinforcedUID||G!==n.selectedIndex){const t=null!==(e=n.reinforcedUID)&&void 0!==e?e:(0,f.vr)(n.selectedIndex,me,je);if(Ee(c,t,fe.current),(0,f.Zc)(n.lastNext)){const e=(0,f.cc)(t,re),s=t!==n.reinforcedUID,i=void 0!==n.reinforcedUID;c((0,b.Wo)({uid:t,shouldIncrement:s})).unwrap().then((n=>{var s;const{map:r,prevMap:a}=n,o=null===(s=a[t])||void 0===s?void 0:s.d,l={[t]:Object.assign(Object.assign({},r[t]),{d:o})},u=(e,n)=>c((0,F.kg)(e,n));void 0!==Le.current?(0,O.lP)(u,e,l,{frequency:i}):(0,O.Ps)(u,e,l,{frequency:i})}))}Ie()&&(0,f.u3)(n.lastNext)&&Se(),U(void 0),j.current=G,p.current=w}}),[c,Se,Ee,Ie,re,w,G,me,je]),me.length<1||je.length<1)return(0,s.jsx)(z.n,{addlStyle:"main-panel"});const Ze=null!=w?w:(0,f.vr)(G,me,je),We=(0,f.cc)(Ze,re),Ge=!0===(null===(e=fe.current[We.uid])||void 0===e?void 0:e.rein),Ve="Verb"===We.grp,_e=m.TZ.parse(We),Ue=_e.hasFurigana(),He=_e.isHintable(3),Ke=void 0!==We.grp&&""!==We.grp,ze=_!==Ze&&ge?He:Ke;let Je=G,Be=[];te?xe&&(Be=xe):(xe&&(Je=xe[G].idx),be&&(Be=be));const Ye=(G+1)/me.length*100;let $e=(0,s.jsx)(u.Fragment,{children:(0,s.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,s.jsxs)("div",{ref:qe,className:"d-flex justify-content-between h-100",children:[(0,s.jsx)(B.Z,{ariaLabel:"Previous",action:ke,children:(0,s.jsx)(o.wyc,{size:16})}),Ve&&he?(0,s.jsx)(N,{verb:We,reCache:Q,linkToOtherTerm:e=>y(e),showHint:_===Ze}):(0,s.jsx)(S,{vocabulary:We,reCache:Q,showHint:_===Ze}),(0,s.jsx)(B.Z,{ariaLabel:"Next",action:ye,children:(0,s.jsx)(o.XCv,{size:16})})]})})});return $e=h?(0,s.jsxs)(u.Fragment,{children:[$e,(0,s.jsx)(r.Z,{in:h,timeout:500,children:(0,s.jsx)(a.Z,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,s.jsx)("div",{onClick:(0,T.kP)(se,(e=>!e)),children:te?"JP":"EN"})})}),(0,s.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:()=>{v.current=!0},onTouchEnd:()=>{v.current=!1},onMouseDown:()=>{v.current=!0},onMouseUp:()=>{v.current=!1},children:(0,s.jsx)(Y,{initial:Je,list:Be,setIndex:e=>{if(te)V(e);else if(be){const n=be[e].idx;V(n)}}})})]}):(0,s.jsxs)(u.Fragment,{children:[$e,(0,s.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,s.jsxs)("div",{className:"row opts-max-h",children:[(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,s.jsx)(J.uY,{toggle:ge,action:()=>{Ce()&&Ie(),c((0,b.$u)())}}),(0,s.jsx)(J.Ro,{active:Q,action:X(Q,ee)}),(0,s.jsx)(J.ph,{visible:Ve,toggleAutoVerbView:(0,T.cM)(c,b.eK),autoVerbView:he}),(0,s.jsx)("div",{className:"sm-icon-grp",children:Oe}),(0,s.jsx)("div",{className:"sm-icon-grp",children:Ae})]})}),(0,s.jsx)("div",{className:"col text-center",children:(0,s.jsx)(J.Qp,{visible:void 0!==w&&""!==w})}),(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[Re(!0===(null===(n=fe.current[Ze])||void 0===n?void 0:n.pron)),(0,s.jsx)(K,{value:null===(t=fe.current[Ze])||void 0===t?void 0:t.difficulty,onChange:(0,T.cM)(c,(e=>(0,b.kn)(Ze,e))),manualUpdate:Ze}),(0,s.jsx)(J.y8,{visible:le.current,active:ze,setShowHint:(0,T.kP)(U,(e=>e?void 0:Ze))}),(0,s.jsx)(J.A,{active:Ue,toggle:(0,f.$q)(We.uid,fe.current).furigana.show,toggleFurigana:(0,T.cM)(c,b._n),vocabulary:We}),(0,s.jsx)(J.R_,{addFrequencyTerm:e=>{$((n=>[...n,e])),(0,T.cM)(c,b.S5)(e)},removeFrequencyTerm:e=>{$((n=>n.filter((n=>n!==e)))),(0,T.cM)(c,b.xz)(e)},toggle:Ge,term:We,count:H.length})]})})]})}),(0,s.jsx)("div",{className:"progress-line flex-shrink-1",onClick:()=>{if(ue.current===q.vl.ALPHABETIC){const e=4e3;g(!0);const n=()=>{v.current?setTimeout(n,e):g(!1)};setTimeout(n,e)}},children:(0,s.jsx)(i.Z,{variant:null===Fe?"determinate":"buffer",value:null===Fe?Ye:0,valueBuffer:null!=Fe?Fe:void 0,color:Ge?"secondary":"primary"})})]}),$e}function X(e,n){return function(){if(!e){const e=2e3;n(!0),setTimeout((()=>{n(!1)}),e)}}}},5665:(e,n,t)=>{t.d(n,{L6:()=>r,jP:()=>s,kh:()=>i});const s="add_frequency_word",i="add_frequency_phrase",r="service_worker_logger_msg"},5741:(e,n,t)=>{t.d(n,{_:()=>s});const s="userSettings"},2850:(e,n,t)=>{t.d(n,{TZ:()=>c,Wp:()=>u,_I:()=>h});var s=t(5893),i=t(4184),r=t.n(i),a=(t(7294),t(9815)),o=t(3996);class c{constructor(e,n){this._furigana=e,this._kanji=n,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}get[Symbol.toStringTag](){return"JapaneseText"}get furigana(){return this._furigana}set furigana(e){this._furigana=e}get kanji(){return this._kanji}set kanji(e){this._kanji=e}get parseObj(){return 0!==this._parseObj.furiganas.length||0!==this._parseObj.kanjis.length||0!==this._parseObj.okuriganas.length||this._parseObj.startsWKana||(this.hasFurigana()?this._parseObj=u(this.getPronunciation(),this.getSpelling()):this._parseObj={okuriganas:[this.getSpelling()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj}hasFurigana(){return!!this._kanji}getSpelling(){return this._kanji?this._kanji:this._furigana}getPronunciation(){return this._furigana}getObject(){return{furigana:this._furigana,kanji:this._kanji}}isSlang(){return this.slang}isKeigo(){return this.keigo}isNaAdj(){return"na"===this.adj}isIAdj(){return"i"===this.adj}debug(){return JSON.stringify(this)}append(e=""){return this.hasFurigana()?new c(this.getPronunciation()+e,this.getSpelling()+e):new c(this.getSpelling()+e)}toString(){return this._furigana+(this._kanji?"\n"+this._kanji:"")}isHintable(e=3){let n=!0;if(!this.toString().split("").every((e=>(0,a.AF)(e)||(0,a.f_)(e)||(0,a.xn)(e)||"\n"===e)))return!1;if(this.hasFurigana()){const t=this.getPronunciation(),s=this.getSpelling();if(t.length<e)n=!1;else try{u(t,s)}catch(e){console.log(e),n=!1}}else this.getSpelling().length<e&&(n=!1);return n}getHint(e,n,t=3,s=1){const i={shown:"hint-mora",hidden:"invisible"};let r;if(this.isHintable(t))if(this.hasFurigana()){const e=this.getPronunciation(),t=this.getSpelling(),{kanjis:a,furiganas:o,okuriganas:c,startsWKana:l}=u(e,t);r=n(i,a,o,c,l,s)}else r=e(i,this.getSpelling(),s);else r=null;return r}toHTML(e){var n,t;let i;const a=!1===(null===(n=null==e?void 0:e.furigana)||void 0===n?void 0:n.show),c=null===(t=null==e?void 0:e.furigana)||void 0===t?void 0:t.toggle,l=r()({"incorrect-color":!0,"d-block":!0}),u=(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:l,children:this.getPronunciation()}),(0,s.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{const{kanjis:e,furiganas:n,okuriganas:t,startsWKana:l}=this.parseObj,u=(0,o.je)(this.parseObj),d=r()({clickable:!!c})||void 0,h=c||void 0,g=a?"transparent-font":void 0;i=(0,s.jsx)("span",{className:d,onClick:h,children:u.map(((s,i)=>{const r=(0,o.re)(e[i]),a=(0,o.re)(),c=(0,o.re)(n[i],g),u=(0,o.re)(),d=(0,o.re)(t[i]),h=(0,o.re)();return(0,o.v5)(i,{sk:r,hk:a},{sf:c,hf:u},{so:d,ho:h},l)}))})}catch(n){!1!==(null==e?void 0:e.showError)&&console.error(n),i=u}else i=(0,s.jsx)("span",{children:this.getSpelling()});return i}}function l(e,n){const t=e.japanese.split("\n");let s;if("function"==typeof n)s=n(e);else{const[e,n]=t;s=new c(e,n)}return e.slang&&e.slang&&(s.slang=!0),e.keigo&&e.keigo&&(s.keigo=!0),!e.adj||"na"!==e.adj&&"i"!==e.adj||(s.adj=e.adj),s}function u(e,n){let t,s,i,r;try{({kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}=d(e,n))}catch(o){const c=o.cause;if(o instanceof Error&&"ParseError"===(null==c?void 0:c.code))try{const o=e.split("").reverse().join(""),c=n.split("").reverse().join(""),{kanjis:l,furiganas:u,okuriganas:h}=d(o,c);return t=l.map((e=>e.split("").reverse().join(""))).reverse(),s=u.map((e=>e.split("").reverse().join(""))).reverse(),i=h.map((e=>e.split("").reverse().join(""))).reverse(),r=!(0,a.AF)(n.charAt(0)),{kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}}catch(e){}throw o}return{kanjis:t,furiganas:s,okuriganas:i,startsWKana:r}}function d(e,n){if(n.split("").every((e=>(0,a.AF)(e)||(0,a.BE)(e))))return{kanjis:[n],furiganas:[e],okuriganas:[],startsWKana:!1};const t=new RegExp(/\s/g),s=t.test(e)||t.test(n),i=!(0,a.AF)(n.charAt(0))&&!(0,a.IE)(n.charAt(0));let r=0,o=[],c=[],l=[],u="",d="",h="",g=!1;n.split("").forEach(((t,i)=>{if((0,a.AF)(t)||function(e,n,t){const s=t.charAt(e);return Number.isInteger((0,a.F8)(s))||Number.isInteger(Number.parseInt(s))&&!n.includes(s)&&!(0,a.AF)(s)&&!(0,a.f_)(s)&&!(0,a.xn)(s)&&e<t.length-1}(i,e,n))" "!==e.charAt(r)&&(u+=e.charAt(r))," "!==t&&(d+=t),g=!0,r++,""!==h&&(l.push(h),h=""),n.length-i==1&&(" "!==e.slice(r)&&(u+=e.slice(r)),o.push(u),c.push(d));else{if(g){for(;e.charAt(r)!=t;)if(" "!==e.charAt(r)&&(u+=e.charAt(r)),r++,r>e.length)throw new Error("The two phrases do not match"+(s?" (contains white space)":""),{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:n},kanjis:c,furiganas:o,okuriganas:l}}});o.push(u),u=""}" "!==t&&(h+=t),""!==d&&(c.push(d),d=""),r++,g=!1}})),""!==h&&l.push(h);const[v,p]=function(e,n,t,s){let i,r;return s?(r=t.reduce(((n,t,s)=>n+t+(e[s]||"")),""),i=t.reduce(((e,t,s)=>e+t+(n[s]||"")),"")):(r=e.reduce(((e,n,s)=>e+n+(t[s]||"")),""),i=n.reduce(((e,n,s)=>e+n+(t[s]||"")),"")),[i,r]}(c,o,l,i),f=e.replaceAll(" ",""),m=n.replaceAll(" ","");if(v!==f||p!==m)throw new Error("Failed to parse text to build furigana"+(s?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:n},output:{pronunciation:v,orthography:p}}}});return{kanjis:c,furiganas:o,okuriganas:l,startsWKana:i}}function h(e){let n;if(e.pronounce){if(!e.pronounce.split("").every((e=>(0,a.f_)(e)||(0,a.xn)(e))))throw new Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});n=e.pronounce}else n=c.parse(e).getSpelling().replaceAll(" ","");return n}c.parse=e=>l(e),c.parser=l},9841:(e,n,t)=>{t.d(n,{R:()=>a});var s=t(6954),i=t(9815),r=t(2850);class a extends r.TZ{constructor(e,n){super(e,n),this.trans=void 0,this.intr=void 0,this.exv=void 0}get[Symbol.toStringTag](){return"JapaneseVerb"}isExceptionVerb(){return void 0!==this.exv}isIntransitive(){return void 0!==this.trans||!0===this.intr}getTransitivePair(){return this.isIntransitive()&&this.trans?this.trans:void 0}getIntransitivePair(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr}getVerbClass(){const e=super.getPronunciation(),n=super.getSpelling();if(this.exv&&this.isExceptionVerb())return this.exv;const t=e.slice(-1),s=e.slice(-2,-1),{iVowel:r}=(0,i.dv)(s);return"する"===n.slice(-2)||"くる"===e||"だ"===e||"ある"===e?3:1===r&&"る"===t||3===r&&"る"===t?2:1}getStem(){let e;const n=s.Bw;let t;super.hasFurigana()&&(t=super.getSpelling().slice(0,-1));const r=super.getPronunciation().slice(-1),a=super.getPronunciation().slice(0,-1);if(1===this.getVerbClass()||"る"!==r){const s=1,{iConsonant:o}=(0,i.dv)(r);e=t?[a+n[o][s],t+n[o][s]]:[a+n[o][s]]}else{if("る"!==r)throw new Error("Unknown verb type");e=t?[a,t]:[a]}return e}naiForm(){let e,n="ない";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],c=s.Bw,l=s.Be.indexOf("a"),{iConsonant:u}=(0,i.dv)(t),d=c[0===u?14:u][l]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){const[t,s]=this.getStem();e=s?new r.TZ(t+n,s+n):new r.TZ(t+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こない","来ない");else if("する"===a)e=new r.TZ("しない");else if("ある"===a)e=new r.TZ("ない");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"しない",n+"しない")}else e=new r.TZ(n+"しない")}}return e}saseruForm(){let e,n="せる";const t=this.getVerbClass();let a=super.getSpelling(),o=super.hasFurigana();if(1===t){const t=a[a.length-1],c=s.Bw,l=s.Be.indexOf("a"),{iConsonant:u}=(0,i.dv)(t),d=c[0===u?14:u][l]+n,h=super.getSpelling().slice(0,-1);if(o){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+d,h+d)}else e=new r.TZ(h+d)}else if(2===t){"居る"!==a&&"いる"!==a||(e=new r.TZ("いる","居る"));const[t,s]=this.getStem();e=o?new r.TZ(t+"さ"+n,s+"さ"+n):new r.TZ(t+"さ"+n)}else if("来る"===a||"くる"===a)e=new r.TZ("こさせる","来させる");else if("する"===a)e=new r.TZ("させる");else if("ある"===a)e=new r.TZ("ある");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=super.getSpelling().slice(0,-2);if(o){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"させる",n+"させる")}else e=new r.TZ(n+"させる")}}return e}reruForm(){let e;const n=this.getVerbClass();let t=super.getSpelling(),a=super.hasFurigana();if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===n){const n=t[t.length-1],o=s.Bw,c=s.Be.indexOf("e"),{iConsonant:l}=(0,i.dv)(n),u=o[l][c]+"る",d=super.getSpelling().slice(0,-1);if(a){const n=super.getPronunciation().slice(0,-1);e=new r.TZ(n+u,d+u)}else e=new r.TZ(d+u)}else if(2===n){const[n,t]=this.getStem();e=a?new r.TZ(n+"られる",t+"られる"):new r.TZ(n+"られる")}else if("来る"===t||"くる"===t)e=new r.TZ("こられる","来られる");else if("する"===t)e=new r.TZ("できる");else if("する"===t.slice(-2)){const n=super.getSpelling().slice(0,-2);if(a){const t=super.getPronunciation().slice(0,-2);e=new r.TZ(t+"できる",n+"できる")}else e=new r.TZ(n+"できる")}else{if("ある"!==t&&"いる"!==t)throw new Error("Unknown exception verb type");e=null}return e}masuForm(){const e="ます";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きます","来ます");break;case"ある":n=new r.TZ("あります");break;case"だ":n=new r.TZ("です")}if("する"===super.getSpelling().slice(-2)){const e="します",t=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,s+e):new r.TZ(t+e)}if(!n){const[t,s]=this.getStem();n=s?new r.TZ(t+e,s+e):new r.TZ(t+e)}return n}mashouForm(){const e="ましょう";let n;switch(this.toString()){case"くる\n来る":n=new r.TZ("きましょう","来ましょう");break;case"ある":n=new r.TZ("ありましょう");break;case"だ":n=new r.TZ("でしょう")}if("する"===super.getSpelling().slice(-2)){const e="しましょう",t=super.getPronunciation().slice(0,-2),s=super.getSpelling().slice(0,-2);n=super.hasFurigana()?new r.TZ(t+e,s+e):new r.TZ(t+e)}if(!n){const[t,s]=this.getStem();n=s?new r.TZ(t+e,s+e):new r.TZ(t+e)}return n}taForm(){return this.t_Form(o)}chattaForm(){if(3===this.getVerbClass())return null;const e=super.hasFurigana()?super.getSpelling():super.getPronunciation();let n;switch(e[e.length-1]){case"ぶ":case"む":case"ぬ":case"ぐ":n="じゃった";break;default:n="ちゃった"}const t=this.t_Form(o);return new r.TZ(t.getPronunciation().slice(0,-1)+n,t.getSpelling().slice(0,-1)+n)}teForm(){return this.t_Form(c)}t_Form(e){const n=this.getVerbClass();let t,s,i,a=this.furigana;this.hasFurigana()&&this.kanji&&(s=this.furigana,a=this.kanji);const o=a[a.length-1];if(1===n)if("行く"===a||"いく"===a)t=r.TZ.parse({japanese:e.g1.iku});else{switch(o){case"う":case"つ":case"る":i=e.g1.u_tsu_ru;break;case"く":i=e.g1.ku;break;case"ぐ":i=e.g1.gu;break;case"ぬ":case"ぶ":case"む":i=e.g1.mu_nu_bu;break;case"す":i=e.g1.su}t=s?new r.TZ(s.slice(0,-1)+i,a.slice(0,-1)+i):new r.TZ(a.slice(0,-1)+i)}else if(2===n)i=e.g2.ru,t=s?new r.TZ(s.slice(0,-1)+i,a.slice(0,-1)+i):new r.TZ(a.slice(0,-1)+i);else if("来る"===a||"くる"===a)t=r.TZ.parse({japanese:e.g3.kuru});else if("する"===a)t=r.TZ.parse({japanese:e.g3.suru});else if("だ"===a)t=r.TZ.parse({japanese:e.g3.da});else if("ある"===a)t=r.TZ.parse({japanese:e.g3.aru});else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");{const n=e.g3.suru,i=a.slice(0,-2);if(s){const e=s.slice(0,-2);t=new r.TZ(e+n,i+n)}else t=new r.TZ(i+n)}}return t}}a.parse=e=>{const n=r.TZ.parser(e,(e=>{const[n,t]=e.japanese.split("\n");return new a(n,t)}));return e.intr&&(n.intr=e.intr),e.trans&&(n.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(n.exv=e.exv),n};const o={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},c={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}}},8916:(e,n,t)=>{t.d(n,{IY:()=>a,Kd:()=>c,Si:()=>o,Yg:()=>r,pK:()=>s});const s="slick-swipe-ignore";function i(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()}function r(e,n=!1){var t,s,i,r;return t=e.startX-e.curX,s=e.startY-e.curY,i=Math.atan2(s,t),(r=Math.round(180*i/Math.PI))<0&&(r=360-Math.abs(r)),r<=45&&r>=0||r<=360&&r>=315?"left":r>=135&&r<=225?"right":!0===n?r>=35&&r<=135?"up":"down":"vertical"}function a(e,{verticalSwiping:n,touchThreshold:t}={verticalSwiping:!1,touchThreshold:5}){return"IMG"===e.target.tagName&&i(e),{verticalSwiping:n,touchThreshold:t,touchObject:{startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}function o(e,n){var t=n.verticalSwiping,s=n.touchThreshold,a=n.swiped,o=n.swiping,c=n.touchObject,l=n.swipeEvent;c.curX="touches"in e?e.touches[0].pageX:e.clientX,c.curY="touches"in e?e.touches[0].pageY:e.clientY,c.swipeLength=Math.abs(c.curX-c.startX);var u=Math.abs(c.curY-c.startY);if(!t&&!o&&u>10)return{touchObject:c,touchThreshold:s,scrolling:!0};t&&(c.swipeLength=Math.sqrt(Math.pow(u,2)+Math.pow(c.swipeLength,2)));var d=r(n.touchObject,t),h={touchObject:c,verticalSwiping:t,touchThreshold:s,swiped:!1,swiping:!1};return!a&&l&&(l(d),h=Object.assign(Object.assign({},h),{swiped:!0})),c.swipeLength>10&&(h=Object.assign(Object.assign({},h),{swiping:!0}),i(e)),h}function c(e,n){var t=n.touchObject,s=n.touchThreshold,a=n.verticalSwiping,o=n.onSwipe,c=s;let l;return t.swipeLength&&(l=r(t,a)),t.swipeLength>c&&(i(e),o&&o(l)),Object.assign({swipeDirection:l},n)}},6892:(e,n,t)=>{function s(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}function i(e,n,t,{clamped:s=!0}={}){const i=Math.min(1,t),r=s?Math.max(i,0):t;return(1-r)*e+r*n}t.d(n,{Sy:()=>s,t7:()=>i})},5965:(e,n,t)=>{t.d(n,{R$:()=>r});const s=new Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),i=new AudioContext;function r(e,n){const t=i.createBufferSource(),r=fetch(e).then((e=>e.arrayBuffer())).then((e=>i.decodeAudioData(e).then((e=>{t.buffer=e,t.connect(i.destination),t.start()})))),a=new Promise(((e,i)=>{const r=()=>{t.stop(),i(s)};t.addEventListener("ended",(()=>{null==n||n.signal.removeEventListener("abort",r),e()})),(null==n?void 0:n.signal.aborted)&&r(),null==n||n.signal.addEventListener("abort",r)}));return Promise.all([a,r])}},2647:(e,n,t)=>{function s(){return window}t.d(n,{J:()=>s})},5863:(e,n,t)=>{t.d(n,{Gd:()=>a,O5:()=>r,Ps:()=>o,lP:()=>c});var s=t(4133);function i(e,n){const t=Math.ceil(n/2);return e.length<n?e:e.slice(0,t)+"..."+e.slice(-(n-t))}function r(e){const[n]=e.split("T"),t=Date.parse(n),s=Math.abs(Date.now()-t);return Math.ceil(s/864e5)}function a(e){const n=Date.parse(e),t=Math.abs(Date.now()-n);return Math.ceil(t/6e4)}function o(e,n,t,a){var o,c,l;const u=null===(o=t[n.uid])||void 0===o?void 0:o.d;if(u){const o=i(n.english,30),d=(null==a?void 0:a.frequency)?" F[w]":"",h=` ${r(u)-1}d`,g=null===(c=t[n.uid])||void 0===c?void 0:c.vC,v=` ${null!=g?g:0}v`,p=null===(l=t[n.uid])||void 0===l?void 0:l.tpAcc;e("Space Rep ["+o+"]"+d+h+v+(void 0!==p?" "+(100*p).toFixed(0)+"%":""),s.x6.DEBUG)}}function c(e,n,t,a){var o,c,l,u;const d=null===(o=t[n.uid])||void 0===o?void 0:o.d;if(d){const o=i(n.english,30),g=(null==a?void 0:a.frequency)?" F[w]":"",v=` ${r(d)-1}d`,p=null===(c=t[n.uid])||void 0===c?void 0:c.tpPc,f=void 0!==p?` ${p}v`:"",m=null===(l=t[n.uid])||void 0===l?void 0:l.tpAcc,j=void 0!==m?" "+(100*m).toFixed(0)+"%":"",b=null===(u=t[n.uid])||void 0===u?void 0:u.tpCAvg;e("Timed Play ["+o+"]"+g+v+f+j+(void 0!==b?" "+(h=b,(Math.round(h)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"")+"s"):""),s.x6.DEBUG)}var h}},9983:(e,n,t)=>{t.d(n,{$q:()=>_,$t:()=>O,Dm:()=>j,EL:()=>C,HG:()=>z,II:()=>I,J0:()=>A,JS:()=>Z,Mm:()=>K,XQ:()=>w,YZ:()=>M,Zc:()=>y,cc:()=>m,dP:()=>L,fx:()=>R,gW:()=>V,hF:()=>F,hY:()=>p,iz:()=>W,kf:()=>D,nD:()=>H,rU:()=>N,tq:()=>P,tu:()=>G,u3:()=>k,vr:()=>f,wG:()=>x,wO:()=>U,w_:()=>E,yT:()=>q});var s=t(5893),i=t(4184),r=t.n(i),a=t(5472),o=t.n(a),c=(t(7294),t(6892)),l=t(5863),u=t(2850),d=t(9841),h=t(9815),g=t(3996),v=t(4133);function p(e,n,t,s,i,r,a,o){const c=e&&Math.random()<1/3;if(n!==v.Lx.FREQUENCY&&c&&t.length>0){const e=0,n=t.filter((e=>{var n;return(0,l.Gd)(null===(n=i[e])||void 0===n?void 0:n.d)>t.length})),o=n.length,c=Math.floor(Math.random()*(o-e)+e),u=s.find((e=>n[c]===e.uid));if(u&&r!==u.uid)return void a(u.uid)}o()}function f(e,n,t){let s;if(s=t?n[t[e]]:n[e],!s)throw new Error("No term found");return s.uid}function m(e,n){const t=n.find((n=>e===n.uid));if(!t)throw new Error("No term found");return t}function j(e,n,t=[],s,i){let r=n;if(e===v.Lx.FREQUENCY){if(!t)throw new TypeError("Filter type requires frequencyList");t.length>0?r=s.length>0?n.filter((e=>t.includes(e.uid)&&b(s,e))):n.filter((e=>t.includes(e.uid))):"function"==typeof i&&i(v.Lx.GROUP)}else e===v.Lx.TAGS?s.length>0&&(r=n.filter((e=>{var n;return null===(n=e.tag)||void 0===n?void 0:n.some((e=>s.includes(e)))}))):s.length>0&&(r=n.filter((e=>b(s,e))));return r}function b(e,n){return void 0!==n.grp&&(e.includes(n.grp)||void 0!==n.subGrp&&e.includes(`${n.grp}.${n.subGrp}`))||void 0===n.grp&&(e.includes("undefined")||void 0!==n.subGrp&&e.includes(`undefined.${n.subGrp}`))}function x(e,n){const t=Object.keys(e).reduce(((n,t)=>[...n,t,...e[t].map((e=>t+"."+e))]),[]);return n.reduce(((e,n)=>(t.includes(n)||(e=[...e,n]),e)),[])}function w(e,n,t){const s=new Set(Object.keys({d:null,difficulty:null,nextReview:null,vC:null,f:null,rein:null,pron:null,tpPc:null,tpAcc:null,tpCAvg:null}));let i=new Set,r=[];return Object.keys(e).forEach((a=>{Object.keys(e[a]).forEach((e=>{let o;if(!s.has(e)){let s;try{s=m(a,n)}catch(e){s={english:t}}o={key:e,uid:a,english:s.english}}void 0!==o&&(i.add(e),r=[...r,o])}))})),{keys:i,list:r}}function y(e){return~~(Date.now()-e)>1500}function k(e){return~~(Date.now()-e)>300}function N(e,n){let t=[],s=[],i=[],r=[],a=[];for(const o in e){const c=e[o].uid,l=n[c];if(void 0!==l){if(void 0===l.tpAcc)r=[...r,{date:l.d,views:l.vC,uid:c,index:Number(o)}];else if(!0===l.pron){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);s=[...s,{staleness:e,correctness:n,uid:c,index:Number(o)}]}else if(l.tpAcc>=.65){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);a=[...a,{staleness:e,correctness:n,uid:c,index:Number(o)}]}else if(l.tpAcc<.65){const e=T(l.d,l.tpAcc,l.vC),n=S(l.tpPc,l.tpCAvg);t=[...t,{staleness:e,correctness:n,uid:c,index:Number(o)}]}}else i=[...i,Number(o)]}const c=o()(t,["staleness","correctness","uid"],["desc","asc","asc"]),l=o()(s,["staleness","correctness","uid"],["desc","asc","asc"]),u=o()(r,["date","views","uid"],["asc","asc","asc"]),d=o()(a,["staleness","correctness","uid"],["desc","asc","asc"]),h=c.map((e=>e.index)),g=l.map((e=>e.index)),v=u.map((e=>e.index)),p=d.map((e=>e.index));return[...h,...g,...i,...v,...p]}function T(e,n,t=1){let s=Number.MAX_SAFE_INTEGER;return void 0!==e&&n>0&&t>0&&(s=(0,l.O5)(e)*(1/n)*(1/t)),s}function S(e=0,n=0){let t=Number.MIN_SAFE_INTEGER;return e>0&&n>0&&(t=e*(1/n)),t}function C(e,n){let t=[],s=[];for(const i in e){const r=e[i].uid,a=n[r];void 0!==(null==a?void 0:a.d)?s=[...s,{date:a.d,uid:r,index:Number(i)}]:t=[...t,Number(i)]}const i=o()(s,["date","uid"],["asc","asc"]).map((e=>e.index));return[...t,...i]}const M=80,O=30;function A(e,n){let t=[],s=[],i=[];for(const r in e){const a=e[r].uid,o=n[a];if(void 0!==(null==o?void 0:o.difficulty)){const e=Number(o.difficulty);e<M?s=[...s,{difficulty:e,uid:a,index:Number(r)}]:i=[...i,Number(r)]}else t=[...t,Number(r)]}return[...o()(s,["difficulty","uid"],["asc","asc"]).map((e=>e.index)),...t,...i]}function R(e){let n={},t=[];e.forEach(((e,s)=>{n[e.uid]=s,t=[...t,{uid:e.uid,japanese:e.japanese,english:e.english}]}));let s=[],i=[],r=[];return t=o()(t,["japanese"],["asc"]),t.forEach(((e,t)=>{s=[...s,n[e.uid]],r=[...r,{uid:e.uid,label:u.TZ.parse(e).getPronunciation(),idx:-1}],i=[...i,{uid:e.uid,label:e.english.toLowerCase(),idx:t}]})),i=o()(i,["label"],["asc"]),i.forEach(((e,n)=>{r[e.idx]=Object.assign(Object.assign({},r[e.idx]),{idx:n})})),{order:s,jOrder:r,eOrder:i}}function P(e){const n=e.map(((e,n)=>n));return(0,c.Sy)(n),n}function E(e,n){return n[e]}function I(e,n){return e+1<n.length?e+1:0}function D(e,n){var t,s,i,r,a,o,c,l,u,h;const g={dictionary:void 0===e?void 0:d.R.parse(e)},v=[{name:"-masu",value:null===(t=g.dictionary)||void 0===t?void 0:t.masuForm()},{name:"-mashou",value:null===(s=g.dictionary)||void 0===s?void 0:s.mashouForm()},{name:"dictionary",value:g.dictionary},{name:"-nai",value:null===(i=g.dictionary)||void 0===i?void 0:i.naiForm()},{name:"-saseru",value:null===(r=g.dictionary)||void 0===r?void 0:r.saseruForm()},{name:"-te",value:null===(a=g.dictionary)||void 0===a?void 0:a.teForm()},{name:"-ta",value:null===(o=g.dictionary)||void 0===o?void 0:o.taForm()},...null!==(null===(c=g.dictionary)||void 0===c?void 0:c.chattaForm())?[{name:"-chatta",value:null===(l=g.dictionary)||void 0===l?void 0:l.chattaForm()}]:[],...null!==(null===(u=g.dictionary)||void 0===u?void 0:u.reruForm())?[{name:"-reru",value:null===(h=g.dictionary)||void 0===h?void 0:h.reruForm()}]:[]];let p;return n&&n.length>0&&(p=n.reduce(((e,n)=>{const t=v.find((e=>e.name===n));return void 0!==t&&(e=[...e,t]),e}),[])),null!=p?p:v}function L(e,n){const t=D(e).find((e=>e.name===n));if(!t)throw new Error("Invalid targetForm");return t.value}function F(e,n,t,i){var a;const o=!e;let c,l=[],u=!1,h=!1;n.constructor.name===d.R.name&&"isExceptionVerb"in n&&(u=n.isExceptionVerb()||3===n.getVerbClass(),h=n.isIntransitive(),c=null!==(a=n.getTransitivePair())&&void 0!==a?a:n.getIntransitivePair());const g=n.isNaAdj(),v=n.isSlang(),p=n.isKeigo();let f;return o&&(h||c)&&(l=[...l,(0,s.jsx)("span",{className:r()({clickable:c,"question-color":c}),onClick:c&&i?()=>{i(c)}:void 0,children:h?"intr":"trans"},l.length+1)]),o&&v&&(l=[...l,(0,s.jsx)("span",{children:"slang"},l.length+1)]),o&&p&&(l=[...l,(0,s.jsx)("span",{children:"keigo"},l.length+1)]),u&&l.length>0&&(l=[(0,s.jsx)("span",{children:"*"},l.length+1),...l]),f=l.length>0?(0,s.jsxs)("span",{children:[t,g&&(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,s.jsxs)("span",{className:"fs-5",children:[(0,s.jsx)("span",{children:" ("}),l.reduce(((e,n,t)=>t>0&&t<l.length?[...e,(0,s.jsx)("span",{children:" , "},l.length+t),n]:[...e,n]),[]),(0,s.jsx)("span",{children:")"})]})]}):u?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{children:[" ","*"]})]}):g?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t,f}function q(e,n,t,i){var a;let o,c=[],l=!1;n.constructor.name===d.R.name&&"isExceptionVerb"in n&&(l=n.isIntransitive(),o=null!==(a=n.getTransitivePair())&&void 0!==a?a:n.getIntransitivePair());const u=n.isSlang(),h=n.isKeigo();let g;return e&&(l||o)&&(c=[...c,(0,s.jsx)("span",{className:r()({clickable:o,"question-color":o}),onClick:o&&i?()=>{i(o)}:void 0,children:l?"intr":"trans"},c.length+1)]),e&&u&&(c=[...c,(0,s.jsx)("span",{children:"slang"},c.length+1)]),e&&h&&(c=[...c,(0,s.jsx)("span",{children:"keigo"},c.length+1)]),g=c.length>0?(0,s.jsxs)("span",{children:[t,(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{children:" ("}),c.reduce(((e,n,t)=>t>0&&t<c.length?[...e,(0,s.jsx)("span",{children:" , "},c.length+t),n]:[...e,n]),[]),(0,s.jsx)("span",{children:")"})]})]}):t,g}function Z(e,n,t,s,i){let r,a,o,c;return e?(r=n,a=t,o=s,c=i):(r=t,a=n,o=i,c=s),{topValue:r,topLabel:o,bottomValue:a,bottomLabel:c}}function W(e){return e.grp&&""!==e.grp?(0,s.jsx)("span",{className:"hint",children:e.grp+(e.subGrp?", "+e.subGrp:"")}):void 0}function G(e){const n=e.getPronunciation().slice(1,2);let t;return t=(0,h.BM)(n)?e.getHint(h.Ot,g.AG,3,2):e.getHint(h.Ot,g.AG,3,1),t}function V(e){let{uid:n}=e;if(!n)throw console.warn(JSON.stringify(e)),new Error("Missing uid");return e.form&&(n+="dictionary"!==e.form?e.form.replace("-","."):""),n}function _(e,n,t,s){var i;let r;return r={furigana:{show:!(!1===(null===(i=null==n?void 0:n[e])||void 0===i?void 0:i.f)),toggle:!1===t&&s&&(()=>{s(e)})||void 0}},r}function U(e,{signal:n},t){return new Promise(((s,i)=>{const r=()=>{clearTimeout(o),clearInterval(a),i(new Error("Aborted"))},a="function"==typeof t?setInterval(t,200,200,e):-1,o=setTimeout((()=>{null==n||n.removeEventListener("abort",r),clearInterval(a),s()}),e);(null==n?void 0:n.aborted)&&r(),null==n||n.addEventListener("abort",r)}))}function H(e,n,t,{signal:s}){return new Promise(((i,r)=>{const a=()=>{clearTimeout(o);const e=new Error("User interrupted loop.",{cause:{code:"UserAborted"}});r(e)},o=setTimeout((()=>{e>0?n().then((()=>H(e-1,n,t,{signal:s}).then((()=>{null==s||s.removeEventListener("abort",a),i()})))).catch((e=>{r(e)})):(null==s||s.removeEventListener("abort",a),i())}),t);(null==s?void 0:s.aborted)&&a(),null==s||s.addEventListener("abort",a)}))}function K(e,n,t){var s,i;const r=null===(s=e.acceleration)||void 0===s?void 0:s.y,a=null===(i=e.acceleration)||void 0===i?void 0:i.z;if(null==r||null==a)throw new Error("Device does not support DeviceMotionEvent",{cause:{code:"DeviceMotionEvent"}});{const e=Math.sqrt(r*r+a*a);e>n&&"function"==typeof t&&t(e)}}function z(e,n){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((n=>{"granted"===n&&e()})).catch(n):e()}},9815:(e,n,t)=>{t.d(n,{AF:()=>r,BE:()=>u,BM:()=>c,C5:()=>h,F8:()=>g,IE:()=>l,Ot:()=>p,Vj:()=>d,dv:()=>v,f_:()=>a,xn:()=>o});var s=t(5893),i=(t(7294),t(6954));function r(e){return new RegExp("[一-龯㐀-䶿々]").test(e)}function a(e){return new RegExp("[ぁ-ゟ]").test(e)}function o(e){return new RegExp("[゠-ヿ]").test(e)}function c(e){return new RegExp("^[ゃャゅュょョ]$").test(e)}function l(e){return new RegExp("[０-９]").test(e)}function u(e){return new RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(e)}function d(e){let n=e;if(a(e)){const t=e.codePointAt(0);if(t){const e=t+96;n=String.fromCharCode(e)}}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96;n=String.fromCharCode(e)}}return n}function h(e){let n;switch(e){case"は":n="wa";break;case"には":n="niwa";break;case"を":n="o";break;case"って":n="tte";break;default:n=e.split("").map((e=>function(e){let n=e;if(a(e)){const{iConsonant:t,iVowel:s}=v(e);n=i.sH[t]+i.Be[s]}else if(o(e)){const t=e.codePointAt(0);if(t){const e=t-96,s=String.fromCharCode(e),{iConsonant:r,iVowel:a}=v(s);n=i.sH[r]+i.Be[a]}}return n}(e))).join("")}return n}function g(e){let n=Number.NaN;if(l(e)){const t=e.codePointAt(0);if(t){const e=t-65249;n=Number.parseInt(String.fromCharCode(e))}}return n}function v(e){const n=i.Bw,t=n[0].length,s=n.length;let r=-1,a=-1;if(" "===e||""===e)return{iConsonant:r,iVowel:a};if("ん"===e)return{iConsonant:15,iVowel:a};for(let i=0;i<t&&r<0;i++)for(let t=0;t<s;t++)if(n[t][i]===e){r=t,a=i;break}return{iConsonant:r,iVowel:a}}function p(e,n,t){return(0,s.jsxs)("span",{className:"hint",children:[(0,s.jsx)("span",{className:e.shown,children:n.slice(0,t)}),(0,s.jsx)("span",{className:e.hidden,children:n.slice(t)})]})}},3996:(e,n,t)=>{t.d(n,{AG:()=>a,je:()=>o,re:()=>l,tn:()=>c,v5:()=>u});var s=t(5893),i=t(4184),r=t.n(i);function a(e,n,t,i,r,a=1){const o=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},i){let r,a,o=i;return n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]),n.reduce(((i,c,l)=>{const u=Math.trunc(n[l].length/e[l].length);if(o>0)if(s)if(r=t[l],a=n[l],r.length<=o){let n;o-=r.length;let t=o;a.length<=o?(o-=a.length,n=e[l].length,t=a.length):(n=Math.ceil(o/u),o=0),i=[...i,{k:n,f:t,o:r.length}]}else i=[...i,{k:0,f:0,o}],o=0;else if(r=n[l],a=t[l],r.length<=o){let n;o-=r.length,a.length<o?(o-=a.length,n=a.length):(n=o,o=0),i=[...i,{k:e[l].length,f:r.length,o:n}]}else{const e=Math.ceil(o/u);i=[...i,{k:e,f:o,o:0}],o=0}else i=[...i,{k:0,f:0,o:0}];return i}),[])}({kanjis:n,furiganas:t,okuriganas:i,startsWKana:r},a);t.length>i.length?i=[...i,""]:t.length<i.length&&(n=[...n,""],t=[...t,""]);const c=(e,n,t=1)=>n?[(0,s.jsx)("span",{className:e,children:n},t)]:[],l=o.map(((s,a)=>u(a,{sk:s.k>0?c(e.shown,n[a].slice(0,s.k)):[],hk:s.k<n[a].length?c(e.hidden,n[a].slice(s.k)):[]},{sf:s.f>0?c(e.shown,t[a].slice(0,s.f)):[],hf:s.f<t[a].length?c(e.hidden,t[a].slice(s.f)):[]},{so:s.o>0?c(e.shown,i[a].slice(0,s.o)):[],ho:s.o<i[a].length?c(e.hidden,i[a].slice(s.o)):[]},r)));return(0,s.jsx)("span",{className:"hint",children:l})}function o(e){let{kanjis:n,furiganas:t,okuriganas:s}=e;return t.length>s.length?s=[...s,""]:t.length<s.length&&(n=[...n,""],t=[...t,""]),t.map(((e,i)=>({k:n[i].length,f:t[i].length,o:s[i].length})))}function c({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},r,a,c=a+1){const{shown:l,hidden:d}=r,h=function({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s},i,r=i+1){let a=r-i;n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const c=o({kanjis:e,furiganas:n,okuriganas:t,startsWKana:s});let l=[0];return c.map(((e,n)=>{let{k:t,o}=e,c=0,u=0;if(l=[...l,l[n]+t+o],s){if(l[n]+o>i)if(l[n]+o<r){const e=i-(l[n]+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0;if(l[n]+o+t>i)if(l[n]+o+t<r){const e=i-(l[n]+o+t);c=Math.min(t,Math.abs(e)),a-=c}else c=a,a=0}else{if(l[n]+t>i)if(l[n]+t<r){const e=i-(l[n]+t);c=Math.min(t,Math.abs(e)),a-=c}else c=a,a=0;if(l[n]+t+o>i)if(l[n]+t+o<r){const e=i-(l[n]+t+o);u=Math.min(o,Math.abs(e)),a-=u}else u=a,a=0}return{k:c,f:0,o:u}}))}({kanjis:e,furiganas:n,okuriganas:t,startsWKana:i},a,c);n.length>t.length?t=[...t,""]:n.length<t.length&&(e=[...e,""],n=[...n,""]);const g=(e,n,t=1)=>n?[(0,s.jsx)("span",{className:e,children:n},t)]:[],v=(e,n,t,s)=>{let i=[],r=[];const o=e.length;if(o>0)if(0===n)r=g(l,e);else if(n===o)i=g(d,e),t-=o;else if(n<o)if(t<n)i=g(d,e.slice(0,n)),r=g(l,e.slice(n-o)),t=0;else if(t===n){const n=s,i=a-n,c=i+t;r=[...g(l,e.slice(0,i),n+1),...g(d,e.slice(i,c),n+2),...g(l,e.slice(c,o),n+3)],t=0}else t>n&&(r=g(l,e.slice(0,n)),i=g(d,e.slice(n-o)),t-=n);return{s:r,h:i,spliceLen:t}};let p=c-a,f=[0];const m=h.map(((s,r)=>{const a=e[r].length,o=t[r].length;let c,d;f=[...f,f[r]+o+a],({s:c,h:d,spliceLen:p}=v(e[r],s.k,p,f[r]+(i?o:0)));const h=g(l,n[r]);let m,j;return({s:m,h:j,spliceLen:p}=v(t[r],s.o,p,f[r]+(i?0:a))),u(r,{sk:c,hk:d},{sf:h,hf:[]},{so:m,ho:j},i)}));return(0,s.jsx)("span",{className:"decorated",children:m})}function l(e,n,t=1){return e?[(0,s.jsx)("span",{className:n,children:e},t)]:[]}function u(e,{sk:n,hk:t},{sf:i,hf:a},{so:o,ho:c},l){const u=n.length>0||t.length>0,d=i.length>0||a.length>0,h=o.length>0||c.length>0,g=u&&d&&(0,s.jsxs)("ruby",{children:[n,t,(0,s.jsxs)("rt",{children:[i,a]})]})||void 0,v=h&&(0,s.jsxs)("span",{children:[o,c]})||void 0,p=l?v:g,f=l?g:v,m=r()({"lh-furigana":u&&d})||void 0;return(p||f)&&(0,s.jsxs)("span",{className:m,children:[p,f]},e)||void 0}t(7294)},3859:(e,n,t)=>{t.d(n,{JW:()=>o,xr:()=>c});var s=t(5741),i=t(2647);function r(e,n){var t;if(1===n.length)return e[n[0]];const[s,...i]=n;return r(null!==(t=e[s])&&void 0!==t?t:{},i)}function a(e,n,t){var s;if(1===n.length){const s=n[0];return Object.assign(Object.assign({},e),{[s]:t})}const[i,...r]=n,o=null!==(s=e[i])&&void 0!==s?s:{};return Object.assign(Object.assign({},e),{[i]:a(o,r,t)})}function o(e,n,t,o,l){var u;let d=null!==(u=c(s._))&&void 0!==u?u:{};const h=[...t.split("/").filter((e=>""!==e)),o];void 0===l&&(l=!r(n,h));const g=a(Object.assign({},d),h,l),v=r(g,h);return function(e,n){const{localStorage:t}=(0,i.J)();t.setItem(e,JSON.stringify(n))}(s._,Object.assign(Object.assign({},g),{lastModified:e})),v}function c(e){let n=null;const{localStorage:t}=(0,i.J)(),s=t.getItem(e);let r=null;return null!==s&&(r=JSON.parse(s)),"object"!=typeof r||Array.isArray(r)||null===r||(n=r),n}},5439:(e,n,t)=>{function s(e,n="Nmemonica App",t){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:n,album:t,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]}))}function i(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{n.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}function r(e){if("mediaSession"in navigator){const n=navigator.mediaSession;try{for(const[t,s]of e)try{n.setActionHandler(t,s)}catch(e){console.error(e)}}catch(e){console.error(e)}}else console.error("mediaSession not available")}function a(){if("mediaSession"in navigator){const e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}t.d(n,{$T:()=>s,CU:()=>a,aw:()=>r,gI:()=>i})},1059:(e,n,t)=>{function s(e){let n={},t=Object.keys(e).map((t=>{const s=e[t].trans;return s&&(n[s]={intr:t,trans:e[t].trans}),Object.assign(Object.assign({},e[t]),{uid:t})}));return t=t.map((e=>n[e.uid]?Object.assign(Object.assign({},e),{intr:n[e.uid].intr}):e)),t}function i(e){const n="grp",t="subGrp";return Object.values(e).reduce(((e,s)=>s[n]?e[s[n]]?s[t]&&!e[s[n]].includes(s[t])?Object.assign(Object.assign({},e),{[s[n]]:[...e[s[n]],s[t]]}):e:s[t]?Object.assign(Object.assign({},e),{[s[n]]:[s[t]]}):Object.assign(Object.assign({},e),{[s[n]]:[]}):Object.assign({},e)),{})}function r(e){const n="tag";let t=[];return Object.values(e).forEach((e=>{var s;e[n]&&(null===(s=e[n])||void 0===s?void 0:s.length)>0&&(t=[...t,...e[n]])})),Array.from(new Set(t))}t.d(n,{MS:()=>s,by:()=>i,fh:()=>r})},7962:(e,n,t)=>{function s(e,n){const[t,s]=e.includes("?")?e.split("?"):[e,""],i=new URLSearchParams(s);for(const[e,t]of Object.entries(n))void 0!==t&&i.append(e,t);return[t,i.toString()].join("?")}t.d(n,{b1:()=>s})},8670:(e,n,t)=>{t.d(n,{cM:()=>l,dH:()=>r,iP:()=>o,kP:()=>c,oU:()=>a});var s=t(7294),i=t(2647);function r(e){const[n,t]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{let s;return e>0&&(s=setTimeout((()=>{n&&t(!1)}),e)),()=>{e>0&&clearTimeout(s)}})),e>0?[!n,()=>t(!0)]:[void 0,()=>{}]}function a(){const[e,n]=(0,s.useState)(!0);return()=>n(!e)}function o(){const[e,n]=(0,s.useState)({width:void 0,height:void 0});return(0,s.useEffect)((()=>{const e=(0,i.J)();function t(){n({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",t),t(),()=>e.removeEventListener("resize",t)}),[]),e}function c(e,n){return function(){(n||"function"==typeof n)&&e(n)}}function l(e,n,t){return function(s){e(t?n(t):s instanceof Object&&"_reactName"in s?n():s?n(s):n())}}},6278:(e,n,t)=>{t.d(n,{R:()=>r});var s=t(7294),i=t(743);function r(){const e=(0,i.v9)((({global:e})=>e.swipeThreshold)),{value:n}=(0,i.v9)((({kanji:e})=>e),((e,n)=>e.version===n.version)),{value:t}=(0,i.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:r}=(0,i.v9)((({kanji:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[a,o,c,l]=(0,i.v9)((({kanji:e})=>{const{reinforce:n,filter:t,choiceN:s,fadeInAnswers:i}=e.setting;return[n,t,s,i]}),i.wU),u=(0,i.v9)((({kanji:e})=>{const{activeTags:n}=e.setting;return n}),i.wU),d=(0,s.useRef)(a);d.current=a;const h=(0,s.useRef)(o);return h.current=o,{repetition:r,swipeThreshold:e,kanjiList:n,vocabList:t,activeTags:u,choiceN:c,fadeInAnswers:l,reinforce:d,filterType:h}}},158:(e,n,t)=>{t.d(n,{Q:()=>r});var s=t(7294),i=t(743);function r(){const[e,n,t]=(0,i.v9)((({global:e})=>[e.debug,e.motionThreshold,e.swipeThreshold]),i.wU),{value:r,grpObj:a}=(0,i.v9)((({phrases:e})=>e),((e,n)=>e.version===n.version)),{repetition:o}=(0,i.v9)((({phrases:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),c=(0,i.v9)((({phrases:e})=>{const{practiceSide:n}=e.setting;return n})),[l,u,d,h]=(0,i.v9)((({phrases:e})=>{const{reinforce:n,filter:t,ordered:s,romaji:i}=e.setting;return[n,t,s,i]}),i.wU),g=(0,i.v9)((({phrases:e})=>{const{activeGroup:n}=e.setting;return n}),i.wU),v=(0,s.useRef)(l);v.current=l;const p=(0,s.useRef)(u);p.current=u;const f=(0,s.useRef)(d);f.current=d;const m=(0,s.useRef)(h);return m.current=h,{englishSideUp:c,repetition:o,debugLevel:e,motionThreshold:n,swipeThreshold:t,phraseList:r,phraseGroups:a,activeGroup:g,reinforce:v,romajiActive:m,filterType:p,sortMethod:f}}},4933:(e,n,t)=>{t.d(n,{Z:()=>r});var s=t(7294),i=t(743);function r(){const[e,n,t]=(0,i.v9)((({global:e})=>[e.debug,e.swipeThreshold,e.motionThreshold]),i.wU),{value:r,grpObj:a}=(0,i.v9)((({vocabulary:e})=>e),((e,n)=>e.version===n.version)),{repetition:o}=(0,i.v9)((({vocabulary:e})=>e.setting),((e,n)=>e.repTID===n.repTID)),[c,l,u]=(0,i.v9)((({vocabulary:e})=>{const{practiceSide:n,autoVerbView:t}=e.setting,{verbForm:s}=e;return[n,t,s]}),i.wU),[d,h,g,v,p,f,m,j]=(0,i.v9)((({vocabulary:e})=>{const{memoThreshold:n,reinforce:t,filter:s,hintEnabled:i,romaji:r,bareKanji:a,verbColSplit:o,ordered:c}=e.setting;return[n,t,s,i,r,a,o,c]}),i.wU),b=(0,i.v9)((({vocabulary:e})=>{const{verbFormsOrder:n}=e.setting;return n}),i.wU),x=(0,i.v9)((({vocabulary:e})=>{const{activeGroup:n}=e.setting;return n}),i.wU),w=(0,s.useRef)(d);w.current=d;const y=(0,s.useRef)(h);y.current=h;const k=(0,s.useRef)(g);k.current=g;const N=(0,s.useRef)(v);N.current=v;const T=(0,s.useRef)(j);return T.current=j,{englishSideUp:c,autoVerbView:l,verbForm:u,repetition:o,debugLevel:e,swipeThreshold:n,motionThreshold:t,vocabList:r,vocabGroups:a,romajiEnabled:p,bareKanji:f,verbFormsOrder:b,verbColSplit:m,activeGroup:x,reinforce:y,hintEnabled:N,filterType:k,sortMethod:T,memoThreshold:w}}},8218:(e,n,t)=>{t.d(n,{E:()=>i});var s=t(9983);function i(e){return function(n){const t=t=>{try{(0,s.Mm)(t,e,n)}catch(e){Error}};return{addDeviceMotionEvent:function(){e>0&&(0,s.HG)((()=>{window.addEventListener("devicemotion",t)}),(()=>{}))},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",t)}}}}},9226:(e,n,t)=>{t.d(n,{q:()=>i});var s=t(7294);function i(e,n,t){(0,s.useEffect)((()=>{const s=function(e,n,t){return function(s){const i=[["ArrowRight",()=>e("left")],["ArrowLeft",()=>e("right")],["ArrowUp",()=>e("up")],["ArrowDown",()=>e("down")],[" ",n]];for(const[n,r]of i)if(n===s.key){let s=r;" "!==n&&"function"==typeof t&&(s=t({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[n]||"",(n=>{n?e(n):r()}))),s();break}}}(e,n,t);return document.addEventListener("keydown",s,!0),()=>{document.removeEventListener("keydown",s,!0)}}),[e,n,t])}},3518:(e,n,t)=>{t.d(n,{Z:()=>r});var s=t(7294),i=t(5439);function r(e,n,t,r,a){(0,s.useEffect)((()=>{(0,i.$T)(e);const s=[["play",()=>{n&&(t(),(0,i.gI)("playing"))}],["pause",()=>{n&&(r(),(0,i.gI)("paused"))}],["stop",()=>{n&&(r(),(0,i.gI)("paused"))}],["previoustrack",()=>{n&&(r(),a("right"))}],["nexttrack",()=>{n&&(r(),a("left"))}]];return(0,i.aw)(s),()=>{(0,i.CU)()}}),[e,n,t,r,a])}},6693:(e,n,t)=>{t.d(n,{M:()=>a});var s=t(7294),i=t(743),r=t(8916);function a(e,n){const t=(0,i.v9)((({global:e})=>e.swipeThreshold)),a=(0,s.useRef)({}),o=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const s=function(e,n){return function(t){n.current=(0,r.IY)(t,{verticalSwiping:!0,touchThreshold:e})}}(t,a),i=function(e){return function(n){e.current&&(e.current=(0,r.Si)(n,e.current))}}(a),c=function(e,n,t,s){return function(i){var a;let o=t;const c=i.target,l=Array.from(document.getElementsByClassName("loop-stop-btn")).some((e=>e.contains(c))),u=Array.from(document.getElementsByClassName("loop-no-interrupt")).some((e=>e.contains(c))),d=void 0===(null===(a=e.current.touchObject)||void 0===a?void 0:a.swipeLength)||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!(l||u&&d)){const a=(0,r.Yg)(e.current.touchObject,!0);"function"==typeof s&&(o=s(a,t)),n(i,Object.assign(Object.assign({},e.current),{onSwipe:o}))}}}(a,r.Kd,e,n);o.current&&(o.current.addEventListener("touchstart",s),o.current.addEventListener("touchmove",i),o.current.addEventListener("touchend",c));const l=o.current;return()=>{null==l||l.removeEventListener("touchstart",s),null==l||l.removeEventListener("touchmove",i),null==l||l.removeEventListener("touchend",c)}}),[a,t,e,n]),{HTMLDivElementSwipeRef:o}}},6281:(e,n,t)=>{t.d(n,{T:()=>w});var s=t(5893),i=t(7294),r=t(8670),a=t(4184),o=t.n(a),c=t(5697),l=t.n(c),u=t(5529),d=t(7625),h=t(6024);function g(e){return e.visible?null:(0,s.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,s.jsx)(u.reW,{className:o()({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,s.jsx)("span",{className:"notification",children:e.loop})]})}function v(e){const{className:n}=e;return e.visible?null:(0,s.jsxs)("div",{className:o()(Object.assign({"loop-btn loop-start-btn clickable":!0},n||{})),"aria-label":"Loop start button",children:[(0,s.jsx)(d.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:h.aQ}),null!=e.countDown&&(0,s.jsx)("span",{className:"notification",children:e.countDown})]})}function p(e){const{className:n}=e;return e.visible?null:(0,s.jsx)("div",{className:o()(Object.assign({"loop-btn loop-stop-btn clickable":!0},n||{})),"aria-label":"Loop stop button",children:(0,s.jsx)(d.G,{size:"sm",onClick:()=>{e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:h.oD})})}g.propTypes={visible:l().bool,active:l().bool,loop:l().number,onClick:l().func},v.propTypes={visible:l().bool,onClick:l().func,className:l().object,countDown:l().number},p.propTypes={visible:l().bool,onClick:l().func,className:l().object};var f=t(2405),m=t(9983),j=t(5439),b=t(7891);const x=15e3;function w(e,n,t){var a;const o=(0,i.useRef)(void 0),c=(0,i.useRef)(null),[l,u]=(0,i.useState)(0),[d,h]=(0,i.useState)(x/1e3),w=(0,i.useRef)(void 0),[k,N]=(0,i.useState)(null),T=(0,i.useRef)(void 0),S=(0,i.useRef)(void 0),[C,M]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{const e=o;return()=>{var n;null===(n=e.current)||void 0===n||n.forEach((e=>e.abort()))}}),[]);const O=(0,r.oU)();let A;0===l?A=null:0===(null===(a=o.current)||void 0===a?void 0:a.length)?A=(0,s.jsx)(p,{}):void 0===o.current?A=(0,s.jsx)(v,{countDown:Array.isArray(c.current)?d:void 0,onClick:()=>{if(Array.isArray(o.current));else{if(Array.isArray(c.current)){const[e]=c.current;clearInterval(e),h(x/1e3)}w.current=void 0,M(void 0),o.current=[],setTimeout(P,100),O()}}}):void 0!==o.current&&(A=(0,s.jsx)(p,{onClick:()=>{E(),L(),u(0)}}));const R=(0,s.jsx)(g,{active:l>0,loop:l,onClick:()=>{const e=E();c.current=null,e&&y(k,N),u((e=>{const n=3===e;return w.current=n?void 0:w.current,n?0:e+1}))}});function P(){E();const e=new AbortController,s=new AbortController,i=new AbortController,r=new AbortController,a=new AbortController,c=()=>{void 0!==T&&(E(),L(),u(0))};let d,h,g;if("function"==typeof t){const{addDeviceMotionEvent:e,removeDeviceMotionEvent:n}=t(c);e(),d=n}o.current=[e,s,i,r,a],n?(h=e=>I("down",e),g=e=>(0,m.nD)(l,(()=>I("up",e)),1500,e)):(h=e=>I("up",e),g=e=>(0,m.nD)(l,(()=>I("down",e)),1500,e));const v=(e,n)=>{N((t=>{let s;return s=null===t||100-t<1?e/n*100:t+e/n*100,s}))};(0,m.wO)(700,e).then((()=>(T.current=Date.now(),h(s).catch((e=>{var n;if("UserAborted"===(null===(n=e.cause)||void 0===n?void 0:n.code))throw e}))))).then((()=>(0,m.wO)(3e3,i,v))).then((()=>(N(null),T.current=void 0,g(r).then((()=>(o.current=void 0,I("left")))).catch((e=>{const n=e.cause;if("UserAborted"!==(null==n?void 0:n.code))return o.current=void 0,I("left")}))))).then((()=>(0,m.wO)(100,a))).catch((()=>{})).then((()=>{"function"==typeof d&&d()}))}const E=(0,i.useCallback)((()=>{var e;let n=!1;return null===(e=o.current)||void 0===e||e.forEach((e=>{n=!0,e.abort()})),o.current=void 0,n}),[o]);function I(n,t){let s;return l>0&&(s=e(n,t)),s||Promise.reject("loop disabled")}function D(){let e;if(void 0!==T.current){const n=T.current;e=Math.abs(Date.now()-n)}return{tpElapsed:e}}function L(){var e;let n=!1;return l>0&&void 0===o.current&&(null===(e=c.current)||void 0===e||e.forEach((e=>{clearTimeout(e)})),c.current=null,h(x/1e3),w.current=void 0,M(void 0),T.current=void 0,S.current=void 0,N(null),n=!0),n}return{beginLoop:P,abortLoop:E,looperSwipe:I,gradeTimedPlayEvent:function(e,n,t){var s;if(l>0&&void 0!==w.current)if("reset"===C)!0===(null===(s=t[n])||void 0===s?void 0:s.pron)&&void 0!==S.current&&e((0,b.Gy)(n,S.current,{pronunciation:void 0}));else if(w.current)void 0!==S.current&&e((0,b.Gy)(n,S.current));else{const t={pronunciation:"pronunciation"===C||void 0};e((0,b.d1)(n,t))}},resetTimedPlay:L,loopSettingBtn:R,loopActionBtn:A,timedPlayVerifyBtn:e=>(0,s.jsx)(f.lh,{visible:void 0!==w.current,hover:C,prevMissPronu:e,onPronunciation:()=>{e?(w.current=!1,M((e=>"reset"===e?void 0:"reset"))):(w.current=!1,M((e=>"pronunciation"===e?void 0:"pronunciation")))},onIncorrect:()=>{w.current=!1,M((e=>"incorrect"===e?void 0:"incorrect"))},onReset:()=>{w.current=!1,M((e=>"reset"===e?void 0:"reset"))}}),timedPlayAnswerHandlerWrapper:function(e,t){if(0===l)return t;let s=t;if("up"===e||"down"===e){const e=n?"up":"down";s=()=>t(e)}const i=function(e,n,t,s,i,r,a,o,c,l,u,d){let h=n;const g=()=>{};let v=()=>y(s,i);if(c()){const n=null===s&&void 0!==o.current,c=null!==s&&void 0!==o.current,p=null===s&&void 0===o.current;if("up"===e||"down"===e){const e=l();d.current=e.tpElapsed,u.current=!0,n?(v=g,u.current=void 0,setTimeout((()=>{u.current=!0}),1500),i(0),setTimeout((()=>{i(null)}),1500)):c||p&&(u.current=!1,h=g,v=g)}else{p&&(v=g);const e=function(e,n){const t=setInterval((()=>{n((n=>{const s=1===n;return e((e=>s?0:e)),s&&clearTimeout(t),s?x/1e3:n-1}))}),1e3);return t}(t,r);a.current=[e]}v(),(0,j.gI)("paused")}return h}(e,s,u,k,N,h,c,T,E,D,w,S);return i},loop:l,setLoop:u,tpAnimation:k,tpAnswered:w}}function y(e,n){null!==e&&setTimeout((()=>{n(0),setTimeout((()=>{n((e=>0===e?null:e))}),1e3)}),1500)}},5707:(e,n,t)=>{var s=t(5893),i=t(7294),r=t(745),a=t(743),o=t(9829),c=t(8056),l=t(1659),u=t(8673),d=t(9385),h=t(7988),g=t(7652),v=t(5665);const p=(0,o.hg)("serviceWorker/serviceWorkerRegistered",(()=>{return e=void 0,n=void 0,s=function*(){return"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then((e=>{var n;return null===(n=e.active)||void 0===n?void 0:n.state})):Promise.reject("No Service Worker")},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}));var e,n,t,s})),f=(0,o.oM)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded(e,n){const{newestWords:t}=n.payload;for(let e in t){const{freq:n,dic:s}=t[e];let i=v.jP,r="GET_VOCABULARY";"phrases"===e&&(i=v.kh,r="GET_PHRASES"),console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(`${n.length} new ${e}`)}}},extraReducers:e=>{e.addCase(p.fulfilled,(e=>{e.registered=!0}))}}),{serviceWorkerNewTermsAdded:m}=f.actions,j=f.reducer;var b=t(7186);const x=(0,o.hg)("version/getVersions",(()=>{return e=void 0,n=void 0,s=function*(){return fetch(b.qe.databaseURL+"/lambda/cache.json").then((e=>e.json()))},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}));var e,n,t,s})),w=(0,o.oM)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:e=>{e.addCase(x.fulfilled,((e,n)=>n.payload))}}).reducer;var y=t(7891);const k=(0,o.xC)({reducer:{global:c.ZP,sw:j,version:w,kana:l.ZP,vocabulary:y.ZP,opposite:d.ZP,phrases:g.ZP,kanji:u.ZP,particle:h.ZP}});var N=t(4184),T=t.n(N),S=t(9655),C=t(6335),M=t(5697),O=t.n(M),A=t(4133);function R(e){let n=[],t=0;return e.forEach(((s,i)=>{if(i>0&&s.msg===e[i-1].msg)t++;else if(t>0){const e=n.slice(0,-1),i=n.slice(-1)[0];n=[...e,Object.assign(Object.assign({},i),{msg:`${i.msg} ${t+1} +`}),s],t=0}else n=[...n,s]})),n}function P(e){const n=!0===e.connected,t=(0,a.v9)((({global:t})=>!n&&e.messages?A.x6.DEBUG:t.debug)),r=(0,a.v9)((({global:t})=>!n&&e.messages?e.messages:t.console),a.wU),[o,c]=(0,i.useState)(6),[l,u]=(0,i.useState)(0),[d,h]=(0,i.useState)(R(r)),g=(0,i.useRef)();(0,i.useMemo)((()=>{if(t===A.x6.OFF)u(0),h([]);else{const e=R(r);if(u(0),h(e),c(6),void 0!==g.current&&clearTimeout(g.current),n){const e=setTimeout((()=>{c(3),g.current=void 0}),3e3);g.current=Number(e)}}}),[n,t,r]);const v=-o-l,p=l>0?-1*l:void 0,f=d.slice(v,p),m=(0,i.useCallback)((()=>{const e=d.length-o>-1?d.length-o:0;if(l<e){c(6),u((e=>e+1)),void 0!==g.current&&clearTimeout(g.current);const e=setTimeout((()=>{c(3),u(0),g.current=void 0}),1e4);g.current=Number(e)}}),[o,l,d]);return(0,s.jsx)("div",{className:T()({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected}),children:f.map((e=>{const n=T()(Object.assign(Object.assign({"app-sm-fs-xx-small":!0},e.css?{[e.css]:!0}:{}),{"correct-color":e.lvl===A.x6.DEBUG,"question-color":e.lvl===A.x6.WARN,"incorrect-color":e.lvl===A.x6.ERROR}));return(0,s.jsx)("div",{className:n,onClick:m,children:e.msg},`${e.msg} ${e.lvl}`)}))})}P.propTypes={connected:O().bool,messages:O().array};var E=t(8012),I=t(4766),D=t(1540),L=t(4921),F=t(1436),q=t(7625),Z=t(9983),W=t(8670),G=t(8859),V=t(6291),_=t(9406),U=t(3102),H=t(1241);function K(){const e=(0,a.I0)(),n=(0,a.v9)((e=>e.kana.setting.charSet)),[t,r]=(0,i.useState)(!0),[o,c]=(0,i.useState)(0),[u,d]=(0,i.useState)(0),h=(0,i.useCallback)((()=>{t?(r(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(r(!0),document.body.classList.remove("no-scroll"))}),[t]),g=(0,i.useCallback)((e=>{if(e.target){const n=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(n))h();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(n))return h(),!1}}),[h]);let v=(0,i.useMemo)((()=>[{meta:Object.assign(Object.assign({},G.KanaGameMeta),{label:(0,Z.w_)(n,G.KanaGameMeta.label)}),icon:(0,s.jsx)("div",{className:"not-a-real-icon",children:(0,Z.w_)(n,["あ","ア","*"])}),wrap:n=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.cM)(e,l.I_),children:n})},{meta:D.OppositesGameMeta,icon:(0,s.jsx)(q.G,{icon:F.ejD,size:"2x"})},{meta:[H.VocabularyMeta,_.PhrasesMeta][o],icon:(0,s.jsx)(q.G,{icon:F.yGG,size:"2x"}),wrap:e=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.kP)(c,(e=>(0,Z.II)(e,["Vocab","Phrases"]))),children:e})},{meta:L.ParticlesGameMeta,icon:(0,s.jsx)(q.G,{icon:F._zQ,size:"2x"})},{meta:[V.KanjiMeta,E.KanjiGameMeta][u],icon:(0,s.jsx)("div",{className:"not-a-real-icon",children:(0,Z.w_)(u,["漢","G"])}),wrap:e=>(0,s.jsx)("div",{className:"clickable prevent-collapse",onClick:(0,W.kP)(d,(e=>(0,Z.II)(e,["Kanji","KanjiGame"]))),children:e})},{meta:U.SettingsMeta,icon:(0,s.jsx)(q.G,{icon:F.klh,size:"2x"})}]),[e,n,u,o]);return(0,s.jsx)("div",{className:"navigation",children:(0,s.jsxs)("nav",{className:"my-navbar",children:[(0,s.jsx)(S.rU,{"aria-label":"Home",to:"/"}),(0,s.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:h,children:(0,s.jsxs)("button",{className:T()({"nav-menu-btn":!0,collapsed:t}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,s.jsx)("span",{className:"nav-btn-line"}),(0,s.jsx)("span",{className:"nav-btn-line"}),(0,s.jsx)("span",{className:"nav-btn-line"})]})}),(0,s.jsx)("div",{className:T()({"mobile d-lg-none":!0,collapse:t}),id:"nav-menu-mobile",onClick:g,children:(0,s.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:v.map((e=>(0,s.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,s.jsx)(S.rU,{to:e.meta.location,children:(0,s.jsx)("div",{className:"icon force-collapse mb-2",children:e.icon})}),(0,s.jsx)("div",{className:"caption",children:e.wrap?e.wrap(e.meta.label):e.meta.label})]},`${e.meta.location}`)))})}),(0,s.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,s.jsx)("ul",{className:"d-flex",children:v.map((e=>(0,s.jsx)("li",{children:(0,s.jsx)(S.rU,{className:"desktop-link",to:e.meta.location,children:e.wrap?e.wrap(e.meta.label):e.meta.label})},`${e.meta.location}`)))})})]})})}const z=(0,i.lazy)((()=>t.e(237).then(t.bind(t,8237)))),J=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,9406)))),B=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,1241)))),Y=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,1540)))),$=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,8859)))),Q=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,6291)))),X=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,8012)))),ee=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,4766)))),ne=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,4921)))),te=(0,i.lazy)((()=>Promise.resolve().then(t.bind(t,3102)))),se=document.querySelector("#app-container");(0,r.s)(se).render((0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(a.zt,{store:k,children:(0,s.jsx)((function(){const e=(0,a.I0)();(0,i.useEffect)((()=>{e(x()),e((0,c.gK)()),e(p()).then((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(n=>{const t=n.data;t.type===v.L6&&e((0,c.kg)(t.msg,t.lvl,v.L6))}))}))}),[]);const n=(0,a.v9)((({global:e})=>e.darkMode)),t=T()({"d-flex flex-column":!0,"dark-mode":n});return(0,s.jsx)(S.UT,{basename:"/",children:(0,s.jsxs)("div",{id:"page-content",className:t,children:[(0,s.jsx)(P,{connected:!0}),(0,s.jsx)(K,{}),(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{}),children:(0,s.jsxs)(C.Z5,{children:[(0,s.jsx)(C.AW,{path:"/",element:(0,s.jsx)(B,{})}),(0,s.jsx)(C.AW,{path:_.PhrasesMeta.location,element:(0,s.jsx)(J,{})}),(0,s.jsx)(C.AW,{path:H.VocabularyMeta.location,element:(0,s.jsx)(B,{})}),(0,s.jsx)(C.AW,{path:D.OppositesGameMeta.location,element:(0,s.jsx)(Y,{})}),(0,s.jsx)(C.AW,{path:G.KanaGameMeta.location,element:(0,s.jsx)($,{})}),(0,s.jsx)(C.AW,{path:V.KanjiMeta.location,element:(0,s.jsx)(Q,{})}),(0,s.jsx)(C.AW,{path:E.KanjiGameMeta.location,element:(0,s.jsx)(X,{})}),(0,s.jsx)(C.AW,{path:I.KanjiGridMeta.location,element:(0,s.jsx)(ee,{})}),(0,s.jsx)(C.AW,{path:L.ParticlesGameMeta.location,element:(0,s.jsx)(ne,{})}),(0,s.jsx)(C.AW,{path:U.SettingsMeta.location,element:(0,s.jsx)(te,{})}),(0,s.jsx)(C.AW,{path:"*",element:(0,s.jsx)(z,{})})]})})]})})}),{})})}))},8056:(e,n,t)=>{t.d(n,{zA:()=>S,ZP:()=>M,M4:()=>b,gK:()=>w,kg:()=>C,cv:()=>N,TJ:()=>x,nh:()=>T,In:()=>k});var s=t(9829),i=t(4613),r=t.n(i),a=t(5741),o=t(3859),c=t(4133);function l(){return new Promise(((e,n)=>{"webkitTemporaryStorage"in navigator?navigator.webkitTemporaryStorage.queryUsageAndQuota(((n,t)=>{e({quota:t,usage:n})}),n):null!=navigator.storage&&null!=navigator.storage.estimate?navigator.storage.estimate().then(e).catch(n):n(new Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}}))}))}var u=t(7652),d=t(8673),h=t(1659),g=t(9385),v=t(7988),p=t(7891),f=t(5665),m=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const j={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},b=(0,s.hg)("setting/getMemoryStorageStatus",((e,n)=>m(void 0,void 0,void 0,(function*(){return function(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then((e=>l().then((({quota:n,usage:t})=>({quota:n,usage:t,persistent:e})))));{const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}}().catch((e=>{if(e instanceof Error)throw n.dispatch(C("Could not get memory storage status",c.x6.WARN)),n.dispatch(C(e.message,c.x6.WARN)),e}))})))),x=(0,s.hg)("setting/setPersistentStorage",((e,n)=>m(void 0,void 0,void 0,(function*(){return function(){const e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then((function(n){return n?l().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:void 0}))):navigator.storage.persist().then((function(n){let t;return n?(t="Storage will not be cleared except by explicit user action",l().then((({quota:e,usage:t})=>({quota:e,usage:t,persistent:n,warning:"Storage will not be cleared except by explicit user action"})))):Promise.reject(e)}))})):Promise.reject(e)}().catch((e=>{if(e instanceof Error)throw n.dispatch(C("Could not set persistent storage",c.x6.WARN)),n.dispatch(C(e.message,c.x6.WARN)),e}))})))),w=(0,s.hg)("setting/localStorageSettingsInitialized",((e,n)=>m(void 0,void 0,void 0,(function*(){let e=null,t=j;try{e=(0,o.xr)(a._)}catch(e){n.dispatch(C("localStorage not supported"))}return null!==e&&(n.dispatch((0,g.DA)(e.opposite)),n.dispatch((0,u.fN)(e.phrases)),n.dispatch((0,d.QJ)(e.kanji)),n.dispatch((0,h.z7)(e.kana)),n.dispatch((0,v.ok)(e.particle)),n.dispatch((0,p.az)(e.vocabulary)),t=r()(j,Object.assign({},e.global))),t})))),y=(0,s.oM)({name:"setting",initialState:j,reducers:{toggleDarkMode(e){const n=new Date;(0,o.JW)(n,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold(e,n){let t=n.payload;const s=new Date;e.swipeThreshold=(0,o.JW)(s,{global:e},"/global/","swipeThreshold",t)},setMotionThreshold(e,n){let t=n.payload;const s=new Date;e.motionThreshold=(0,o.JW)(s,{global:e},"/global/","motionThreshold",t)},debugToggled:{reducer:(e,n)=>{const t=n.payload,s=(0,c.P_)(e.debug+1,Object.values(c.x6),t);e.debug=(0,o.JW)(new Date,{global:e},"/global/","debug",s)},prepare:e=>({payload:e})},logger:{reducer:(e,n)=>{const{debug:t}=e,{msg:s,lvl:i,type:r}=n.payload;if(0!==t&&i<=t){let n;n=r===f.L6?`SW: ${s}`:`UI: ${s}`,e.console=[...e.console,{msg:n,lvl:i}]}},prepare:(e,n=c.x6.DEBUG,t="ui_logger_msg")=>({payload:{msg:e,lvl:n,type:t}})}},extraReducers:e=>{e.addCase(w.fulfilled,((e,n)=>{const t=n.payload;return Object.assign({},t)})),e.addCase(b.fulfilled,((e,n)=>{const{quota:t,usage:s,persistent:i}=n.payload;e.memory={quota:t,usage:s,persistent:i}})),e.addCase(x.fulfilled,((e,n)=>{const{quota:t,usage:s,persistent:i,warning:r}=n.payload;r&&console.warn(r),e.memory={quota:t,usage:s,persistent:i}}))}}),{toggleDarkMode:k,setMotionThreshold:N,setSwipeThreshold:T,debugToggled:S,logger:C}=y.actions,M=y.reducer},1659:(e,n,t)=>{t.d(n,{Bs:()=>g,I_:()=>h,PD:()=>p,ZP:()=>f,_S:()=>v,z7:()=>u});var s=t(9829),i=t(4613),r=t.n(i),a=t(6954),o=t(3859),c=t(4133);const l={hiragana:a.Bw,katakana:a.TU,vowels:a.Be,consonants:a.sH,sounds:a.jX,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},u=(0,s.hg)("kana/kanaFromLocalStorage",(e=>{return n=void 0,t=void 0,i=function*(){return e},new((s=void 0)||(s=Promise))((function(e,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}c((i=i.apply(n,t||[])).next())}));var n,t,s,i})),d=(0,s.oM)({name:"kana",initialState:l,reducers:{toggleKana(e){const{charSet:n}=e.setting,t=n+1<Object.keys(c.kS).length?n+1:c.kS.HIRAGANA;e.setting.charSet=(0,o.JW)(new Date,{kana:e.setting},"/kana/","charSet",t)},setKanaBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,o.JW)(new Date,{kana:e.setting},"/kana/","choiceN",t)},toggleKanaEasyMode(e){e.setting.easyMode=(0,o.JW)(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode(e){e.setting.wideMode=(0,o.JW)(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:e=>{e.addCase(u.fulfilled,((e,n)=>{const t=n.payload,s=r()(l.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},s)})}))}}),{toggleKana:h,setKanaBtnN:g,toggleKanaEasyMode:v,toggleKanaGameWideMode:p}=d.actions,f=d.reducer},8673:(e,n,t)=>{t.d(n,{LD:()=>f,Mh:()=>m,QJ:()=>g,SI:()=>j,X8:()=>p,ZP:()=>k,cy:()=>b,im:()=>y,ow:()=>w,tk:()=>h,vT:()=>x});var s=t(9829),i=t(4613),r=t.n(i),a=t(7186),o=t(1059),c=t(4133),l=t(3859),u=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const d={value:[],version:"",tagObj:[],setting:{filter:2,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],activeTags:[],choiceN:32,fadeInAnswers:!1}},h=(0,s.hg)("kanji/getKanji",((e,n)=>u(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=n.getState().version.kanji)&&void 0!==e?e:"0";return fetch(a.qe.databaseURL+"/lambda/kanji.json",{headers:{"Data-Version":t}}).then((e=>e.json().then((e=>({value:e,version:t})))))})))),g=(0,s.hg)("kanji/kanjiFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e})))),v=(0,s.oM)({name:"kanji",initialState:d,reducers:{toggleKanjiActiveTag(e,n){const t=n.payload,{activeTags:s}=e.setting;let i;i=s.includes(t)?s.filter((e=>e!==t)):[...s,t],e.setting.activeTags=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeTags",i)},toggleKanjiActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,c.c0)(i,s);e.setting.activeGroup=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","activeGroup",r)},addFrequencyKanji(e,n){const t=n.payload,{value:s}=(0,c.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",s)},removeFrequencyKanji(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{value:n}=(0,c.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","repetition",n),n&&(e.setting.repTID=Date.now(),e.setting.repetition=n)}},setKanjiBtnN(e,n){const t=n.payload;e.setting.choiceN=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","choiceN",t)},toggleKanjiFadeInAnswers(e,n){const t=n.payload;e.setting.fadeInAnswers=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","fadeInAnswers",t)},toggleKanjiFilter(e,n){const t=n.payload,{filter:s,reinforce:i}=e.setting,r=(0,c.P_)(s+1,[c.Lx.FREQUENCY,c.Lx.TAGS],t);e.setting.filter=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","filter",r),0!==r&&i&&(e.setting.reinforce=!1)},toggleKanjiReinforcement(e){e.setting.reinforce=(0,l.JW)(new Date,{kanji:e.setting},"/kanji/","reinforce")}},extraReducers:e=>{e.addCase(h.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload,i=Object.keys(t).map((e=>{var n,s,i,r;const a="radical"===(null===(n=t[e].grp)||void 0===n?void 0:n.toLowerCase())||(null===(s=t[e].tag)||void 0===s?void 0:s.find((e=>"radical"===e.toLowerCase())));return Object.assign(Object.assign({},t[e]),{uid:e,tag:void 0===t[e].tag?[]:t[e].tag,radical:a?{example:null!==(r=null===(i=t[e].radex)||void 0===i?void 0:i.split(""))&&void 0!==r?r:[]}:void 0})}));e.tagObj=(0,o.fh)(t),e.value=i,e.version=s})),e.addCase(g.fulfilled,((e,n)=>{const t=n.payload,s=r()(d.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})}))}}),{toggleKanjiActiveTag:p,toggleKanjiActiveGrp:f,addFrequencyKanji:m,removeFrequencyKanji:j,toggleKanjiFilter:b,toggleKanjiReinforcement:x,setKanjiBtnN:w,toggleKanjiFadeInAnswers:y}=v.actions,k=v.reducer},9385:(e,n,t)=>{t.d(n,{CO:()=>u,Cz:()=>d,DA:()=>c,ZP:()=>g,bt:()=>o,tI:()=>h});var s=t(9829),i=t(7186),r=t(3859),a=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const o=(0,s.hg)("opposite/getOpposite",((e,n)=>a(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=n.getState().version.phrases)&&void 0!==e?e:"0";return fetch(i.qe.databaseURL+"/lambda/opposites.json",{headers:{"Data-Version":t}}).then((e=>e.json().then((e=>({value:e,version:t})))))})))),c=(0,s.hg)("opposite/oppositeFromLocalStorage",(e=>a(void 0,void 0,void 0,(function*(){return e})))),l=(0,s.oM)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1,fadeInAnswers:!1},reducers:{setOppositesARomaji(e){const n=new Date,t={opposite:e};e.aRomaji=(0,r.JW)(n,t,"/opposite/","aRomaji")},setOppositesQRomaji(e){const n=new Date,t={opposite:e};(0,r.JW)(n,t,"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji},toggleOppositeFadeInAnswers(e,n){const t=n.payload;e.fadeInAnswers=(0,r.JW)(new Date,{opposite:e},"/opposite/","fadeInAnswers",t)}},extraReducers:e=>{e.addCase(o.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload;e.value=t,e.version=s})),e.addCase(c.fulfilled,((e,n)=>{const t=n.payload;return Object.assign(Object.assign({},e),t)}))}}),{setOppositesARomaji:u,setOppositesQRomaji:d,toggleOppositeFadeInAnswers:h}=l.actions,g=l.reducer},7988:(e,n,t)=>{t.d(n,{C_:()=>m,ZP:()=>j,aq:()=>h,ok:()=>g,ro:()=>f});var s=t(9829),i=t(4613),r=t.n(i),a=t(7652),o=t(2850),c=t(9815),l=t(3859),u=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const d={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1,fadeInAnswers:!1}},h=(0,s.hg)("particle/getParticleGame",((e,n)=>u(void 0,void 0,void 0,(function*(){const e=n.getState().particle,t=n.getState().phrases.value;if(t.length>0){let n;return 0===e.particleGame.phrases.length&&(n=v(t)),{game:n}}return n.dispatch((0,a.cC)()).then((e=>{const n=e.payload.value,t=(0,a.Y1)(n);return{phrase:t,game:v(t)}}))})))),g=(0,s.hg)("particleGame/particleFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e}))));function v(e){let n=[],t={};const s=e.reduce(((e,s)=>{var i;if(s.particles&&(null===(i=s.particles)||void 0===i?void 0:i.length)>0){const i=o.TZ.parse(s).getSpelling();s.particles.forEach((r=>{if(2===i.split(r).length){const t=(0,c.C5)(r),a=i.indexOf(r),o={japanese:r,romaji:t},l={japanese:r,romaji:t,start:a,end:a+r.length};n=[...n,o],e=[...e,{answer:l,question:s,english:s.english,literal:s.lit}]}else t=Object.assign(Object.assign({},t),{[s.english]:{japanese:i,particle:r,times:i.split(r).length}})}))}return e}),[]);return console.error(`More than one match ${Object.keys(t).length}`),console.table(t),{phrases:s,particles:n}}const p=(0,s.oM)({name:"particleGame",initialState:d,reducers:{setParticlesARomaji(e){e.setting.aRomaji=(0,l.JW)(new Date,{particle:e.setting},"/particle/","aRomaji")},toggleParticleFadeInAnswers(e,n){const t=n.payload;e.setting.fadeInAnswers=(0,l.JW)(new Date,{particle:e.setting},"/particle/","fadeInAnswers",t)}},extraReducers:e=>{e.addCase(h.fulfilled,((e,n)=>{const{game:t}=n.payload;t&&(e.particleGame=t)})),e.addCase(g.fulfilled,((e,n)=>{const t=n.payload,s=r()(d.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign({},s)})}))}}),{setParticlesARomaji:f,toggleParticleFadeInAnswers:m}=p.actions,j=p.reducer},7652:(e,n,t)=>{t.d(n,{Lp:()=>y,OJ:()=>j,Y1:()=>h,ZP:()=>T,cC:()=>g,cz:()=>x,d1:()=>m,f6:()=>b,fN:()=>v,gP:()=>k,mW:()=>N,s5:()=>p,vy:()=>w});var s=t(9829),i=t(4613),r=t.n(i),a=t(7186),o=t(1059),c=t(3859),l=t(4133),u=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const d={value:[],version:"",grpObj:{},setting:{ordered:0,practiceSide:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},frequency:{uid:void 0,count:0},activeGroup:[],filter:0}},h=e=>Object.keys(e).map((n=>Object.assign(Object.assign({},e[n]),{uid:n}))),g=(0,s.hg)("phrase/getPhrase",((e,n)=>u(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=n.getState().version.phrases)&&void 0!==e?e:"0";return fetch(a.qe.databaseURL+"/lambda/phrases.json",{headers:{"Data-Version":t}}).then((e=>e.json().then((e=>({value:e,version:t})))))})))),v=(0,s.hg)("phrase/phraseFromLocalStorage",(e=>u(void 0,void 0,void 0,(function*(){return e})))),p=(0,s.hg)("phrase/updateSpaceRepPhrase",((e,n)=>u(void 0,void 0,void 0,(function*(){const{uid:t,shouldIncrement:s}=e,i=n.getState().phrases.setting.repetition;return(0,l.pg)(t,i,{count:s,date:!0})})))),f=(0,s.oM)({name:"phrase",initialState:d,reducers:{togglePhrasesFilter(e,n){const t=n.payload,s=[l.Lx.FREQUENCY,l.Lx.GROUP],{filter:i,reinforce:r}=e.setting,a=(0,l.P_)(i+1,s,t);e.setting.filter=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","filter",a),a!==l.Lx.GROUP&&r&&(e.setting.reinforce=!1)},togglePhraseActiveGrp(e,n){const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,l.c0)(i,s);e.setting.activeGroup=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","activeGroup",r)},togglePhrasesReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","reinforce")},addFrequencyPhrase(e,n){const t=n.payload,{value:s}=(0,l.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",s);let i={uid:t,count:e.setting.frequency.count+1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",i)},removeFrequencyPhrase(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{value:n}=(0,l.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",n);let t={uid:s,count:e.setting.frequency.count-1};e.setting.frequency=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","frequency",t)}},flipPhrasesPracticeSide(e){e.setting.practiceSide=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","practiceSide")},togglePhrasesRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering(e){const n=[l.vl.RANDOM,l.vl.VIEW_DATE],{ordered:t}=e.setting;let s=(0,l.P_)(t+1,n);e.setting.ordered=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","ordered",s)}},extraReducers:e=>{e.addCase(g.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload;e.grpObj=(0,o.by)(t),e.value=h(t),e.version=s})),e.addCase(v.fulfilled,((e,n)=>{const t=n.payload,s=r()(d.setting,t),i=Object.keys(s.repetition).filter((e=>{var n;return!0===(null===(n=s.repetition[e])||void 0===n?void 0:n.rein)}));return s.frequency={uid:void 0,count:i.length},Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})})),e.addCase(p.fulfilled,((e,n)=>{const{value:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{phrases:e.setting},"/phrases/","repetition",t)}))}}),{flipPhrasesPracticeSide:m,togglePhrasesRomaji:j,togglePhrasesFilter:b,togglePhraseActiveGrp:x,togglePhrasesReinforcement:w,addFrequencyPhrase:y,removeFrequencyPhrase:k,togglePhrasesOrdering:N}=f.actions,T=f.reducer},4133:(e,n,t)=>{t.d(n,{Lx:()=>i,P_:()=>c,c0:()=>l,iU:()=>o,kS:()=>a,pg:()=>u,vl:()=>r,x6:()=>s});const s=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),i=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),r=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4}),a=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),o=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty"];function c(e,n,t){const s=Math.max(...n);let i=e;if(void 0!==t&&n.includes(t))i=t;else for(;!n.includes(i)||i>s;)i=i+1>s?0:i+1;return i}function l(e,n){const t=Array.from(new Set(e));let s=Array.from(new Set(n));return t.forEach((e=>{const n=!e.includes(".");s=s.includes(e)?s.filter((n=>n!==e)):[...s,e],n&&s.some((n=>n.includes(e+".")))&&(s=s.filter((n=>!n.startsWith(e+"."))))})),s}function u(e,n,t={count:!0,date:!0},s){var i;const r=n[e];let a=void 0===r?void 0:{[e]:n[e]};const o=null!==(i=null==r?void 0:r.vC)&&void 0!==i?i:-1;let c;c=o>0&&!0===t.count?o+1:o>0&&!1===t.count?o:1;let l={};if(void 0!==s){if(s.toggle){const t=s.toggle.reduce(((t,s)=>{var i,r;let a;return a=["f"].includes(s)?!(!1===(null===(i=n[e])||void 0===i?void 0:i[s])):null===(r=n[e])||void 0===r?void 0:r[s],Object.assign(Object.assign({},t),{[s]:!a})}),{});l=Object.assign(Object.assign({},l),t)}if(void 0!==s.set){const e=Object.keys(s.set).reduce(((e,n)=>(void 0!==s.set&&void 0!==s.set[n]&&(e=null===s.set[n]?Object.assign(Object.assign({},e),{[n]:void 0}):Object.assign(Object.assign({},e),{[n]:s.set[n]})),e)),{});l=Object.assign(Object.assign({},l),e)}}const u=null==r?void 0:r.d,d=void 0!==u&&!1===t.date?u:(new Date).toJSON(),h=Object.assign(Object.assign(Object.assign({},n[e]||{}),{vC:c,d}),l),g={[e]:h};return a=void 0===a?Object.assign({},g):a,{map:g,prevMap:a,value:Object.assign(Object.assign({},n),g)}}},7891:(e,n,t)=>{t.d(n,{$u:()=>A,Gy:()=>I,Hi:()=>x,Rz:()=>g,S5:()=>R,Tn:()=>T,VX:()=>C,Vb:()=>O,Wo:()=>v,ZP:()=>L,ZZ:()=>N,_4:()=>E,_n:()=>j,az:()=>p,d1:()=>D,eK:()=>k,gl:()=>S,kT:()=>h,kn:()=>P,oG:()=>M,rZ:()=>m,sG:()=>y,wf:()=>w,xz:()=>b});var s=t(9829),i=t(4613),r=t.n(i),a=t(7186),o=t(9983),c=t(3859),l=t(1059),u=t(4133),d=function(e,n,t,s){return new(t||(t=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}c((s=s.apply(e,n||[])).next())}))};const h={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,practiceSide:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,memoThreshold:o.YZ,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:(0,o.kf)().map((e=>e.name))}},g=(0,s.hg)("vocabulary/getVocabulary",((e,n)=>d(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=n.getState().version.vocabulary)&&void 0!==e?e:"0";return fetch(a.qe.databaseURL+"/lambda/vocabulary.json",{headers:{"Data-Version":t}}).then((e=>e.json().then((e=>({value:e,version:t})))))})))),v=(0,s.hg)("vocabulary/updateSpaceRepWord",((e,n)=>d(void 0,void 0,void 0,(function*(){const{uid:t,shouldIncrement:s}=e,i=n.getState().vocabulary.setting.repetition;return(0,u.pg)(t,i,{count:s,date:!0})})))),p=(0,s.hg)("vocabulary/vocabularyFromLocalStorage",(e=>d(void 0,void 0,void 0,(function*(){return e})))),f=(0,s.oM)({name:"vocabulary",initialState:h,reducers:{verbFormChanged:(e,n)=>Object.assign(Object.assign({},e),{verbForm:n.payload}),toggleVocabularyActiveGrp:(e,n)=>{const t=n.payload,{activeGroup:s}=e.setting,i=Array.isArray(t)?t:[t],r=(0,u.c0)(i,s);e.setting.activeGroup=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",r)},furiganaToggled(e,n){const t=n.payload,{value:s}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},toggleVocabularyReinforcement(e){e.setting.reinforce=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce")},toggleVocabularyOrdering(e,n){const{ordered:t}=e.setting,s=n.payload,i=[u.vl.ALPHABETIC,u.vl.DIFFICULTY,u.vl.GAME,u.vl.RANDOM,u.vl.VIEW_DATE],r=(0,u.P_)(t+1,i,s);e.setting.ordered=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",r)},flipVocabularyPracticeSide(e){e.setting.practiceSide=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","practiceSide")},toggleVocabularyRomaji(e){e.setting.romaji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji(e){e.setting.bareKanji=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint(e){e.setting.hintEnabled=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter(e,n){const t=[u.Lx.FREQUENCY,u.Lx.GROUP],s=n.payload,{filter:i,reinforce:r}=e.setting,a=(0,u.P_)(i+1,t,s);e.setting.filter=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","filter",a),0!==a&&r&&(e.setting.reinforce=!1)},setVerbFormsOrder(e,n){const t=n.payload;e.setting.verbFormsOrder=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",t)},toggleAutoVerbView(e){e.setting.autoVerbView=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit(e,n){const t=n.payload;e.setting.verbColSplit=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",t)},addFrequencyWord(e,n){const t=n.payload,{value:s}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",s)},removeFrequencyWord(e,n){var t;const s=n.payload,i=e.setting.repetition;if(!0===(null===(t=i[s])||void 0===t?void 0:t.rein)){const{value:n}=(0,u.pg)(s,i,{count:!1,date:!1},{set:{rein:null}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",n)}},setMemorizedThreshold(e,n){const t=n.payload;e.setting.memoThreshold=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","memoThreshold",t)},setWordDifficulty:{reducer:(e,n)=>{const{uid:t,value:s}=n.payload,{value:i}=(0,u.pg)(t,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:s}});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)},prepare:(e,n)=>({payload:{uid:e,value:n}})},setWordTPCorrect:{reducer:(e,n)=>{var t,s,i;const{uid:r,tpElapsed:a,pronunciation:o}=n.payload,l=e.setting.repetition;let u=1,d=1,h=a;const g=l[r];if(void 0!==g){const e=g.tpPc,n=g.tpAcc,s=null!==(t=g.tpCAvg)&&void 0!==t?t:0;if(void 0!==e&&null!=n){u=e+1;const t=e*n;d=(t+1)/u,h=(s*t+a)/(t+1)}}const v=o||null!==(s=null==g?void 0:g.pron)&&void 0!==s&&s,p=Object.assign(Object.assign({},null!==(i=l[r])&&void 0!==i?i:{}),{pron:v||void 0,tpPc:u,tpAcc:d,tpCAvg:h}),f=Object.assign(Object.assign({},l),{[r]:p});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",f)},prepare:(e,n,{pronunciation:t}={})=>({payload:{uid:e,tpElapsed:n,pronunciation:t}})},setWordTPIncorrect:{reducer:(e,n)=>{var t;const{uid:s,pronunciation:i}=n.payload,r=e.setting.repetition;let a=1,o=0;const l=r[s];if(void 0!==l){const e=l.tpPc,n=l.tpAcc;void 0!==e&&null!=n&&(a=e+1,o=(e*n+0)/a)}const u=Object.assign(Object.assign({},null!==(t=r[s])&&void 0!==t?t:{}),{tpPc:a,tpAcc:o,pron:!!i||void 0}),d=Object.assign(Object.assign({},r),{[s]:u});e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",d)},prepare:(e,{pronunciation:n}={})=>({payload:{uid:e,pronunciation:n}})}},extraReducers:e=>{e.addCase(p.fulfilled,((e,n)=>{const t=n.payload,s=r()(h.setting,t);return Object.assign(Object.assign({},e),{setting:Object.assign(Object.assign({},s),{repTID:Date.now()})})})),e.addCase(g.fulfilled,((e,n)=>{const{value:t,version:s}=n.payload;e.grpObj=(0,l.by)(t),e.value=(0,l.MS)(t),e.version=s})),e.addCase(v.fulfilled,((e,n)=>{const{value:t}=n.payload;e.setting.repTID=Date.now(),e.setting.repetition=(0,c.JW)(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)}))}}),{verbFormChanged:m,furiganaToggled:j,removeFrequencyWord:b,setVerbFormsOrder:x,toggleVocabularyOrdering:w,toggleVocabularyActiveGrp:y,toggleAutoVerbView:k,toggleVocabularyFilter:N,toggleVocabularyHint:T,toggleVocabularyReinforcement:S,toggleVocabularyRomaji:C,updateVerbColSplit:M,toggleVocabularyBareKanji:O,flipVocabularyPracticeSide:A,addFrequencyWord:R,setWordDifficulty:P,setMemorizedThreshold:E,setWordTPCorrect:I,setWordTPIncorrect:D}=f.actions,L=f.reducer},6954:e=>{e.exports=JSON.parse('{"Be":["a","i","u","e","o"],"sH":["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],"Bw":[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],"TU":[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],"jX":{"si":"shi","ti":"chi","tu":"tsu","hu":"fu","zi":"ji","di":"dji","du":"dzu","Na":"n"}}')}},e=>{e.O(0,[816,913,794,931,612,697,555,774,25,104,105,418,642,995,86,220,183,323,593,623,617,216,810,260,303,979,655],(()=>(5707,e(e.s=5707)))),e.O()}]);