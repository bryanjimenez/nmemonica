(()=>{"use strict";var e={},t={};function n(r){var c=t[r];if(void 0!==c)return c.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.rv=()=>"1.3.9",n.ruid="bundler=rspack@1.3.9";let r=Object.freeze({SW_GET_VERSIONS:"SW_GET_VERSIONS",SW_REFRESH_HARD:"SW_REFRESH_HARD",DATASET_JSON_SAVE:"DATASET_JSON_SAVE"}),c=(Error("Service Worker not available"),Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3})),s=["main.e1aa3778.css","710.3ae0879a.js","961.36284eef.js","314.68f87d9a.js","13908c713ab5ad0d.woff2","927.7d6dd87b.css","256.fceab921.js","174.0ea30db3.js","main.e1aa3778.js","favicon.ico","911.49626b7c.js","147.93b252cf.css","maskable512.png","147.93b252cf.js","voice-worker-en.js","icon512.png","961.36284eef.css","index.html","voice-worker-ja.js","927.7d6dd87b.js","icon192.png","43.94faba2a.js","341.9dc91f50.js","314.68f87d9a.css","manifest.webmanifest"],i="https://bryanjimenez.github.io/nmemonica",o=globalThis.self;o.addEventListener("install",function(e){o.skipWaiting();let t=l();d(r.SW_GET_VERSIONS,t)}),o.addEventListener("activate",function(e){"clients"in o&&o.clients.matchAll({includeUncontrolled:!0}).then(function(e){let t=e.map(function(e){return e.url});console.log("[ServiceWorker] Matching clients:",t.join(", ")),h("Matching clients:"+t.join(", "),c.DEBUG)}),e.waitUntil(Promise.all([caches.keys().then(e=>Promise.all(e.reduce((e,t)=>["nmemonica-data",a,"nmemonica-media"].includes(t)?e:(console.log("[ServiceWorker] Deleting cache:",t),[...e,caches.delete(t)]),[]))),caches.open(a).then(e=>e.keys().then(t=>Promise.all(t.reduce((t,n)=>{let r=n.url.split("/").pop();return r&&r.indexOf(".")>-1&&!s.includes(r)?(console.log("[ServiceWorker] Removed static asset: "+r),[...t,e.delete(n.url)]):t},[]))))]).then(function(){return console.log("[ServiceWorker] Claiming clients"),h("Claiming clients",c.DEBUG),o.clients.claim()}).then(()=>Promise.all([function(){let e=i+"/";return caches.open(a).then(t=>t.addAll([i,e])).catch(()=>{console.log("[ServiceWorker] / Prefectch failed for some item")})}(),caches.open(a).then(e=>e.addAll([...s])).catch(()=>{console.log("[ServiceWorker] Asset Prefectch failed for some item")})])))}),o.addEventListener("fetch",function(e){if("OPTIONS"===e.request.method)return void e.respondWith(fetch(e.request));if("GET"!==e.request.method)return;let t=e.request.url;if(!0===(t.startsWith(i)&&!t.endsWith(".hot-update.json"))){var n;e.respondWith((n=t,caches.open(a).then(e=>e.match(n)).then(e=>{var t,r;return e||(t=a,r=new Request(n),caches.open(t).then(e=>fetch(r).then(t=>{if(!t.ok)throw Error("Could not fetch");return e.put(r.url,t)}).then(()=>e.match(r.url)).then(e=>{if(!e)throw Error("Could not recache");return e}).catch(()=>{let e=Error("[ServiceWorker] Network unavailable");return console.log(e.message),Promise.reject(e)})))})))}else e.respondWith(fetch(e.request))}),o.addEventListener("message",function(e){let t=e.data;if(t.type===r.SW_REFRESH_HARD&&t.type===r.SW_REFRESH_HARD)return void fetch(i+"/robots.txt").then(e=>{if(e.status<400)return caches.delete(a).then(()=>{o.registration.unregister(),d(r.SW_REFRESH_HARD,{msg:"Hard Refresh",status:e.status})});throw Error("Service Unavailable")}).catch(e=>{d(r.SW_REFRESH_HARD,{msg:"Hard Refresh",error:e})});if(t.type===r.SW_GET_VERSIONS&&t.type===r.SW_GET_VERSIONS){let e=l();d(r.SW_GET_VERSIONS,e);return}h("Unrecognized message",c.ERROR)});let a="nmemonica-static";function l(){return{swVersion:"d41780cd",jsVersion:"e1aa3778",bundleVersion:"51b7fed2"}}function d(e,t){"clients"in o&&o.clients.matchAll({includeUncontrolled:!0,type:"window"}).then(n=>{if(n&&n.length)return n[0].postMessage({type:e,...t})})}function h(e,t){"clients"in o&&o.clients.matchAll({includeUncontrolled:!0,type:"window"}).then(n=>{if(n&&n.length)return n[0].postMessage({type:"SW",msg:e,lvl:t})}).catch(e=>{console.log("[ServiceWorker] clientLogger failed"),console.log(e)})}})();