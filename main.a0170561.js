"use strict";(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([[179],{9582:(e,n,t)=>{var r=t(5893),i=t(7294),a=t(745),o=t(743),s=t(9829),c=t(4613),l=t.n(c);const u=JSON.parse('{"Be":["a","i","u","e","o"],"sH":["","k","g","s","z","t","d","n","h","b","p","m","y","r","w","N"],"Bw":[["あ","い","う","え","お"],["か","き","く","け","こ"],["が","ぎ","ぐ","げ","ご"],["さ","し","す","せ","そ"],["ざ","じ","ず","ぜ","ぞ"],["た","ち","つ","て","と"],["だ","ぢ","づ","で","ど"],["な","に","ぬ","ね","の"],["は","ひ","ふ","へ","ほ"],["ば","び","ぶ","べ","ぼ"],["ぱ","ぴ","ぷ","ぺ","ぽ"],["ま","み","む","め","も"],["や"," ","ゆ"," ","よ"],["ら","り","る","れ","ろ"],["わ","ゐ"," ","ゑ","を"],["ん"," "," "," "," "]],"TU":[["ア","イ","ウ","エ","オ"],["カ","キ","ク","ケ","コ"],["ガ","ギ","グ","ゲ","ゴ"],["サ","シ","ス","セ","ソ"],["ザ","ジ","ズ","ゼ","ゾ"],["タ","チ","ツ","テ","ト"],["ダ","ヂ","ヅ","デ","ド"],["ナ","ニ","ヌ","ネ","ノ"],["ハ","ヒ","フ","ヘ","ホ"],["バ","ビ","ブ","ベ","ボ"],["パ","ピ","プ","ペ","ポ"],["マ","ミ","ム","メ","モ"],["ヤ"," ","ユ"," ","ヨ"],["ラ","リ","ル","レ","ロ"],["ワ","ヰ"," ","ヱ","ヲ"],["ン"," "," "," "," "]],"jX":{"si":"shi","ti":"chi","tu":"tsu","hu":"fu","zi":"ji","di":"dji","du":"dzu","Na":"n"}}');var d="userSettings";function f(){return window.localStorage}var v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},v.apply(this,arguments)},h=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function p(e,n){if(1===n.length)return e[n[0]];var t=n[0],r=n.slice(1);return p(e[t],r)}function g(e,n,t){var r,i;if(1===n.length){var a=n[0];return v(v({},e),((r={})[a]=t,r))}var o=n[0],s=n.slice(1);return v(v({},e),((i={})[o]=g(e[o]||{},s,t),i))}function m(e,n,t,r,i){var a=b(d)||{},o=h(h([],t.split("/").filter((function(e){return""!==e})),!0),[r],!1);void 0===i&&(i=!p(n,o));var s=g(v({},a),o,i),c=p(s,o);return function(e,n){try{f().setItem(e,JSON.stringify(n))}catch(e){console.log("setLocalStorage failed"),console.error(e)}}(d,v(v({},s),{lastModified:e})),c}function b(e){var n;try{var t=f().getItem(e),r=void 0;try{t&&(r=JSON.parse(t))}catch(e){console.error("localStore parse failed"),console.error(e)}"object"!=typeof r||Array.isArray(r)||null===r||(n=r)}catch(e){console.error("localStore getItem failed"),console.error(e)}return n}var j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},j.apply(this,arguments)},x=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},y=Object.freeze({OFF:0,ERROR:1,WARN:2,DEBUG:3}),w=Object.freeze({GROUP:0,FREQUENCY:1,TAGS:2}),k=Object.freeze({RANDOM:0,ALPHABETIC:1,VIEW_DATE:2,GAME:3,DIFFICULTY:4}),N=Object.freeze({HIRAGANA:0,KATAKANA:1,MIXED:2}),S=["Randomized","Alphabetic","Staleness","Space Rep","Difficulty"];function T(e,n,t){var r=Math.max.apply(Math,n),i=e;if(void 0!==t&&n.includes(t))i=t;else for(;!n.includes(i)||i>r;)i=i+1>r?0:i+1;return i}function C(e,n){var t=Array.from(new Set(e)),r=Array.from(new Set(n));return t.forEach((function(e){var n=!e.includes(".");r=r.includes(e)?r.filter((function(n){return n!==e})):x(x([],r,!0),[e],!1),n&&r.some((function(n){return n.includes(e+".")}))&&(r=r.filter((function(n){return!n.startsWith(e+".")})))})),r}function A(e,n,t,r){var i,a,o;void 0===t&&(t={count:!0,date:!0});var s,c=void 0===n[e]?void 0:((i={})[e]=n[e],i);s=n[e]&&n[e].vC>0&&!0===t.count?n[e].vC+1:n[e]&&n[e].vC>0&&!1===t.count?n[e].vC:1;var l={};if(void 0!==r){if(r.toggle){var u=r.toggle.reduce((function(t,r){var i,a;return a=["f"].includes(r)?!(n[e]&&!1===n[e][r]):n[e]&&n[e][r],j(j({},t),((i={})[r]=!a,i))}),{});l=j(j({},l),u)}if(void 0!==r.set){var d=Object.keys(r.set).reduce((function(e,n){var t,i;return void 0!==r.set&&void 0!==r.set[n]&&(e=null===r.set[n]?j(j({},e),((t={})[n]=void 0,t)):j(j({},e),((i={})[n]=r.set[n],i))),e}),{});l=j(j({},l),d)}}var f=void 0!==(null===(o=n[e])||void 0===o?void 0:o.d)&&!1===t.date?n[e].d:(new Date).toJSON(),v=j(j(j({},n[e]||{}),{vC:s,d:f}),l),h=((a={})[e]=v,a);return{map:h,prevMap:c=void 0===c?j({},h):c,value:j(j({},n),h)}}var R,E=function(){return E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},E.apply(this,arguments)},O=(0,s.hg)("kana/kanaFromLocalStorage",(function(e){return e})),M={hiragana:u.Bw,katakana:u.TU,vowels:u.Be,consonants:u.sH,sounds:u.jX,setting:{choiceN:16,wideMode:!1,easyMode:!1,charSet:0}},P=(0,s.oM)({name:"kana",initialState:M,reducers:{toggleKana:function(e){var n=e.setting.charSet,t=n+1<Object.keys(N).length?n+1:N.HIRAGANA;e.setting.charSet=m(new Date,{kana:e.setting},"/kana/","charSet",t)},setKanaBtnN:function(e,n){var t=n.payload;e.setting.choiceN=m(new Date,{kana:e.setting},"/kana/","choiceN",t)},toggleKanaEasyMode:function(e){e.setting.easyMode=m(new Date,{kana:e.setting},"/kana/","easyMode")},toggleKanaGameWideMode:function(e){e.setting.wideMode=m(new Date,{kana:e.setting},"/kana/","wideMode")}},extraReducers:function(e){e.addCase(O.fulfilled,(function(e,n){var t=n.payload,r=l()(M.setting,t);return E(E({},e),{setting:E({},r)})}))}}),F=(R=P.actions).toggleKana,D=R.setKanaBtnN,L=R.toggleKanaEasyMode,q=R.toggleKanaGameWideMode;const I=P.reducer,G="nmemonica-9d977",V="https://"+G+".firebaseio.com",U="https://us-east1-"+G+".cloudfunctions.net/g_translate_pronounce";var _=function(){return _=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},_.apply(this,arguments)},H=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function W(e){var n="grp",t="subGrp";return Object.values(e).reduce((function(e,r){var i,a,o;return r[n]?e[r[n]]?r[t]&&!e[r[n]].includes(r[t])?_(_({},e),((i={})[r[n]]=H(H([],e[r[n]],!0),[r[t]],!1),i)):e:r[t]?_(_({},e),((a={})[r[n]]=[r[t]],a)):_(_({},e),((o={})[r[n]]=[],o)):_({},e)}),{})}var K,z=function(){return z=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},z.apply(this,arguments)},B=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},Y=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},X=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Q=(0,s.hg)("kanji/getKanji",(function(e,n){return B(void 0,void 0,void 0,(function(){var e,t;return Y(this,(function(r){return e=n.getState(),"0"===(t=e.version.kanji||"0")&&console.error("fetching kanji: 0"),[2,fetch(V+"/lambda/kanji.json",{headers:{"Data-Version":t}}).then((function(e){return e.json().then((function(e){return{value:e,version:t}}))}))]}))}))})),Z=(0,s.hg)("kanji/kanjiFromLocalStorage",(function(e){return B(void 0,void 0,void 0,(function(){return Y(this,(function(n){return[2,e]}))}))})),J={value:[],version:"",tagObj:[],setting:{choiceN:32,filter:2,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],activeTags:[]}},$=(0,s.oM)({name:"kanji",initialState:J,reducers:{toggleKanjiActiveTag:function(e,n){var t,r=n.payload,i=e.setting.activeTags;t=i.includes(r)?i.filter((function(e){return e!==r})):X(X([],i,!0),[r],!1),e.setting.activeTags=m(new Date,{kanji:e.setting},"/kanji/","activeTags",t)},toggleKanjiActiveGrp:function(e,n){var t=n.payload,r=e.setting.activeGroup,i=C(Array.isArray(t)?t:[t],r);e.setting.activeGroup=m(new Date,{kaji:e.setting},"/kanji/","activeGroup",i)},addFrequencyKanji:function(e,n){var t=A(n.payload,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{kanji:e.setting},"/kanji/","repetition",t)},removeFrequencyKanji:function(e,n){var t=n.payload,r=e.setting.repetition;if(!0===r[t].rein){var i=A(t,r,{count:!1,date:!1},{set:{rein:null}}).value;m(new Date,{kanji:e.setting},"/kanji/","repetition",i),i&&(e.setting.repTID=Date.now(),e.setting.repetition=i)}},setKanjiBtnN:function(e,n){var t=n.payload;e.setting.choiceN=m(new Date,{kanji:e.setting},"/kanji/","choiceN",t)},toggleKanjiFilter:function(e,n){var t=n.payload,r=e.setting,i=r.filter,a=r.reinforce,o=T(i+1,[w.FREQUENCY,w.TAGS],t);e.setting.filter=m(new Date,{kanji:e.setting},"/kanji/","filter",o),0!==o&&a&&(e.setting.reinforce=!1)},toggleKanjiReinforcement:function(e){e.setting.reinforce=m(new Date,{kanji:e.setting},"/kanji/","reinforce")}},extraReducers:function(e){e.addCase(Q.fulfilled,(function(e,n){var t,r,i,a=n.payload,o=a.value,s=a.version,c=Object.keys(o).map((function(e){return z(z({},o[e]),{uid:e,tag:void 0===o[e].tag?[]:o[e].tag})}));e.tagObj=(t=o,r="tag",i=[],Object.values(t).forEach((function(e){e[r]&&e[r].length>0&&(i=H(H([],i,!0),e[r],!0))})),Array.from(new Set(i))),e.value=c,e.version=s})),e.addCase(Z.fulfilled,(function(e,n){var t=n.payload,r=l()(J.setting,t);return z(z({},e),{setting:z(z({},r),{repTID:Date.now()})})}))}}),ee=(K=$.actions).toggleKanjiActiveTag,ne=K.toggleKanjiActiveGrp,te=K.addFrequencyKanji,re=K.removeFrequencyKanji,ie=K.setKanjiBtnN,ae=K.toggleKanjiFilter,oe=K.toggleKanjiReinforcement;const se=$.reducer;var ce,le=function(){return le=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},le.apply(this,arguments)},ue=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},de=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},fe=(0,s.hg)("opposite/getOpposite",(function(e,n){return ue(void 0,void 0,void 0,(function(){var e,t;return de(this,(function(r){return e=n.getState(),"0"===(t=e.version.phrases||"0")&&console.error("fetching opposite: 0"),[2,fetch(V+"/lambda/opposites.json",{headers:{"Data-Version":t}}).then((function(e){return e.json().then((function(e){return{value:e,version:t}}))}))]}))}))})),ve=(0,s.hg)("opposite/oppositeFromLocalStorage",(function(e){return ue(void 0,void 0,void 0,(function(){return de(this,(function(n){return[2,e]}))}))})),he=(0,s.oM)({name:"opposite",initialState:{value:[],version:"",aRomaji:!1,qRomaji:!1},reducers:{setOppositesARomaji:function(e){var n=new Date,t={opposite:e};e.aRomaji=m(n,t,"/opposite/","aRomaji")},setOppositesQRomaji:function(e){m(new Date,{opposite:e},"/opposite/","qRomaji",!e.qRomaji),e.qRomaji=!e.qRomaji}},extraReducers:function(e){e.addCase(fe.fulfilled,(function(e,n){var t=n.payload,r=t.value,i=t.version;e.value=r,e.version=i})),e.addCase(ve.fulfilled,(function(e,n){var t=n.payload;return le(le({},e),t)}))}}),pe=(ce=he.actions).setOppositesARomaji,ge=ce.setOppositesQRomaji;const me=he.reducer;var be,je=function(){return je=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},je.apply(this,arguments)},xe=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},ye=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},we=function(e){return Object.keys(e).map((function(n){return je(je({},e[n]),{uid:n})}))},ke=(0,s.hg)("phrase/getPhrase",(function(e,n){return xe(void 0,void 0,void 0,(function(){var e,t;return ye(this,(function(r){return e=n.getState(),"0"===(t=e.version.phrases||"0")&&console.error("fetching phrase: 0"),[2,fetch(V+"/lambda/phrases.json",{headers:{"Data-Version":t}}).then((function(e){return e.json().then((function(e){return{value:e,version:t}}))}))]}))}))})),Ne=(0,s.hg)("phrase/phraseFromLocalStorage",(function(e){return xe(void 0,void 0,void 0,(function(){return ye(this,(function(n){return[2,e]}))}))})),Se=(0,s.hg)("phrase/updateSpaceRepPhrase",(function(e,n){return xe(void 0,void 0,void 0,(function(){var t,r,i,a;return ye(this,(function(o){return t=e.uid,r=e.shouldIncrement,i=n.getState().phrases,a=i.setting.repetition,[2,A(t,a,{count:r,date:!0})]}))}))})),Te={value:[],version:"",grpObj:{},setting:{ordered:0,practiceSide:!1,romaji:!1,reinforce:!1,repTID:-1,repetition:{},frequency:{uid:void 0,count:0},activeGroup:[],filter:0}},Ce=(0,s.oM)({name:"phrase",initialState:Te,reducers:{togglePhrasesFilter:function(e,n){var t=n.payload,r=[w.FREQUENCY,w.GROUP],i=e.setting,a=i.filter,o=i.reinforce,s=T(a+1,r,t);e.setting.filter=m(new Date,{phrases:e.setting},"/phrases/","filter",s),s!==w.GROUP&&o&&(e.setting.reinforce=!1)},togglePhraseActiveGrp:function(e,n){var t=n.payload,r=e.setting.activeGroup,i=C(Array.isArray(t)?t:[t],r);e.setting.activeGroup=m(new Date,{phrases:e.setting},"/phrases/","activeGroup",i)},togglePhrasesReinforcement:function(e){e.setting.reinforce=m(new Date,{phrases:e.setting},"/phrases/","reinforce")},addFrequencyPhrase:function(e,n){var t=n.payload,r=A(t,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{phrases:e.setting},"/phrases/","repetition",r);var i={uid:t,count:e.setting.frequency.count+1};e.setting.frequency=m(new Date,{phrases:e.setting},"/phrases/","frequency",i)},removeFrequencyPhrase:function(e,n){var t=n.payload,r=e.setting.repetition;if(!0===r[t].rein){var i=A(t,r,{count:!1,date:!1},{set:{rein:null}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{phrases:e.setting},"/phrases/","repetition",i);var a={uid:t,count:e.setting.frequency.count-1};e.setting.frequency=m(new Date,{phrases:e.setting},"/phrases/","frequency",a)}},flipPhrasesPracticeSide:function(e){e.setting.practiceSide=m(new Date,{phrases:e.setting},"/phrases/","practiceSide")},togglePhrasesRomaji:function(e){e.setting.romaji=m(new Date,{phrases:e.setting},"/phrases/","romaji")},togglePhrasesOrdering:function(e){var n=[k.RANDOM,k.VIEW_DATE],t=T(e.setting.ordered+1,n);e.setting.ordered=m(new Date,{phrases:e.setting},"/phrases/","ordered",t)}},extraReducers:function(e){e.addCase(ke.fulfilled,(function(e,n){var t=n.payload,r=t.value,i=t.version;e.grpObj=W(r),e.value=we(r),e.version=i})),e.addCase(Ne.fulfilled,(function(e,n){var t=n.payload,r=l()(Te.setting,t),i=Object.keys(r.repetition).filter((function(e){return!0===r.repetition[e].rein}));return r.frequency={uid:void 0,count:i.length},je(je({},e),{setting:je(je({},r),{repTID:Date.now()})})})),e.addCase(Se.fulfilled,(function(e,n){var t=n.payload.value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{phrases:e.setting},"/phrases/","repetition",t)}))}}),Ae=(be=Ce.actions).flipPhrasesPracticeSide,Re=be.togglePhrasesRomaji,Ee=be.togglePhrasesFilter,Oe=be.togglePhraseActiveGrp,Me=be.togglePhrasesReinforcement,Pe=be.addFrequencyPhrase,Fe=be.removeFrequencyPhrase,De=be.togglePhrasesOrdering;const Le=Ce.reducer;var qe=(0,s.hg)("version/getVersions",(function(e,n){return t=void 0,r=void 0,a=function(){return function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return[2,fetch(V+"/lambda/cache.json").then((function(e){return e.json()}))]}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}c((a=a.apply(t,r||[])).next())}));var t,r,i,a}));const Ie=(0,s.oM)({name:"version",initialState:{vocabulary:void 0,phrases:void 0,kanji:void 0,opposites:void 0,particles:void 0,suffixes:void 0},reducers:{},extraReducers:function(e){e.addCase(qe.fulfilled,(function(e,n){return n.payload}))}}).reducer;var Ge=t(4184),Ve=t.n(Ge),Ue=t(5472),_e=t.n(Ue);function He(e){for(var n,t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1));n=[e[r],e[t]],e[t]=n[0],e[r]=n[1]}return e}function We(e,n,t,r){var i=(void 0===r?{}:r).clamped,a=void 0===i||i,o=Math.min.apply(Math,[1,t]),s=a?Math.max.apply(Math,[o,0]):t;return(1-s)*e+s*n}function Ke(e){return new RegExp("[一-龯㐀-䶿々]").test(e)}function ze(e){return new RegExp("[ぁ-ゟ]").test(e)}function Be(e){return new RegExp("[゠-ヿ]").test(e)}function Ye(e){return new RegExp("[０-９]").test(e)}function Xe(e){var n=e;if(ze(e)){if(r=e.codePointAt(0)){var t=r+96;n=String.fromCharCode(t)}}else if(Be(e)){var r;if(r=e.codePointAt(0)){var i=r-96;n=String.fromCharCode(i)}}return n}function Qe(e){var n=u.Bw,t=n[0].length,r=n.length,i=-1,a=-1;if(" "===e||""===e)return{iConsonant:i,iVowel:a};if("ん"===e)return{iConsonant:15,iVowel:a};for(var o=0;o<t&&i<0;o++)for(var s=0;s<r;s++)if(n[s][o]===e){i=s,a=o;break}return{iConsonant:i,iVowel:a}}function Ze(e,n,t){return(0,r.jsxs)("span",{className:"hint",children:[(0,r.jsx)("span",{className:e.shown,children:n.slice(0,t)}),(0,r.jsx)("span",{className:e.hidden,children:n.slice(t)})]})}var Je=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function $e(e,n,t,i,a,o){void 0===o&&(o=1);var s=function(e,n){var t,r,i=e.kanjis,a=e.furiganas,o=e.okuriganas,s=e.startsWKana,c=n;return a.length>o.length?o=Je(Je([],o,!0),[""],!1):a.length<o.length&&(i=Je(Je([],i,!0),[""],!1),a=Je(Je([],a,!0),[""],!1)),a.reduce((function(e,n,l){var u=Math.trunc(a[l].length/i[l].length);if(c>0)if(s)if(t=o[l],r=a[l],t.length<=c){v=void 0;var d=c-=t.length;r.length<=c?(c-=r.length,v=i[l].length,d=r.length):(v=Math.ceil(c/u),c=0),e=Je(Je([],e,!0),[{k:v,f:d,o:t.length}],!1)}else e=Je(Je([],e,!0),[{k:0,f:0,o:c}],!1),c=0;else if(t=a[l],r=o[l],t.length<=c){c-=t.length;var f=void 0;r.length<c?(c-=r.length,f=r.length):(f=c,c=0),e=Je(Je([],e,!0),[{k:i[l].length,f:t.length,o:f}],!1)}else{var v=Math.ceil(c/u);e=Je(Je([],e,!0),[{k:v,f:c,o:0}],!1),c=0}else e=Je(Je([],e,!0),[{k:0,f:0,o:0}],!1);return e}),[])}({kanjis:n,furiganas:t,okuriganas:i,startsWKana:a},o);t.length>i.length?i=Je(Je([],i,!0),[""],!1):t.length<i.length&&(n=Je(Je([],n,!0),[""],!1),t=Je(Je([],t,!0),[""],!1));var c=function(e,n,t){return void 0===t&&(t=1),n?[(0,r.jsx)("span",{className:e,children:n},t)]:[]},l=s.map((function(r,o){return tn(o,{sk:r.k>0?c(e.shown,n[o].slice(0,r.k)):[],hk:r.k<n[o].length?c(e.hidden,n[o].slice(r.k)):[]},{sf:r.f>0?c(e.shown,t[o].slice(0,r.f)):[],hf:r.f<t[o].length?c(e.hidden,t[o].slice(r.f)):[]},{so:r.o>0?c(e.shown,i[o].slice(0,r.o)):[],ho:r.o<i[o].length?c(e.hidden,i[o].slice(r.o)):[]},a)}));return(0,r.jsx)("span",{className:"hint",children:l})}function en(e){var n=e.kanjis,t=e.furiganas,r=e.okuriganas;return t.length>r.length?r=Je(Je([],r,!0),[""],!1):t.length<r.length&&(n=Je(Je([],n,!0),[""],!1),t=Je(Je([],t,!0),[""],!1)),t.map((function(e,i){return{k:n[i].length,f:t[i].length,o:r[i].length}}))}function nn(e,n,t){return void 0===t&&(t=1),e?[(0,r.jsx)("span",{className:n,children:e},t)]:[]}function tn(e,n,t,i,a){var o=n.sk,s=n.hk,c=t.sf,l=t.hf,u=i.so,d=i.ho,f=o.length>0||s.length>0,v=c.length>0||l.length>0,h=u.length>0||d.length>0,p=f&&v&&(0,r.jsxs)("ruby",{children:[o,s,(0,r.jsxs)("rt",{children:[c,l]})]})||void 0,g=h&&(0,r.jsxs)("span",{children:[u,d]})||void 0,m=a?g:p,b=a?p:g,j=Ve()({"lh-furigana":f&&v})||void 0;return(m||b)&&(0,r.jsxs)("span",{className:j,children:[m,b]},e)||void 0}var rn=function(){function e(e,n){this._furigana=e,this._kanji=n,this._parseObj={furiganas:[],kanjis:[],okuriganas:[],startsWKana:!1},this.slang=!1,this.keigo=!1,this.adj=""}return Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"JapaneseText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"furigana",{get:function(){return this._furigana},set:function(e){this._furigana=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kanji",{get:function(){return this._kanji},set:function(e){this._kanji=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parseObj",{get:function(){return 0===this._parseObj.furiganas.length&&0===this._parseObj.kanjis.length&&0===this._parseObj.okuriganas.length&&!1===this._parseObj.startsWKana&&(this.hasFurigana()?this._parseObj=on(this.getPronunciation(),this.getSpelling()):this._parseObj={okuriganas:[this.getSpelling()],startsWKana:!0,kanjis:[],furiganas:[]}),this._parseObj},enumerable:!1,configurable:!0}),e.prototype.hasFurigana=function(){return!!this._kanji},e.prototype.getSpelling=function(){return this._kanji?this._kanji:this._furigana},e.prototype.getPronunciation=function(){return this._furigana},e.prototype.getObject=function(){return{furigana:this._furigana,kanji:this._kanji}},e.prototype.isSlang=function(){return!0===this.slang},e.prototype.isKeigo=function(){return!0===this.keigo},e.prototype.isNaAdj=function(){return"na"===this.adj},e.prototype.isIAdj=function(){return"i"===this.adj},e.prototype.debug=function(){return JSON.stringify(this)},e.prototype.append=function(n){return void 0===n&&(n=""),this.hasFurigana()?new e(this.getPronunciation()+n,this.getSpelling()+n):new e(this.getSpelling()+n)},e.prototype.toString=function(){return this._furigana+(this._kanji?"\n"+this._kanji:"")},e.prototype.isHintable=function(e){void 0===e&&(e=3);var n=!0,t=this;if(!t.toString().split("").every((function(e){return Ke(e)||ze(e)||Be(e)||"\n"===e})))return!1;if(t.hasFurigana()){var r=t.getPronunciation(),i=t.getSpelling();if(r.length<e)n=!1;else try{on(r,i)}catch(e){console.log(e),n=!1}}else t.getSpelling().length<e&&(n=!1);return n},e.prototype.getHint=function(e,n,t,r){var i;void 0===t&&(t=3),void 0===r&&(r=1);var a={shown:"hint-mora",hidden:"invisible"};return this.isHintable(t)?this.hasFurigana()?n(a,(i=on(this.getPronunciation(),this.getSpelling())).kanjis,i.furiganas,i.okuriganas,i.startsWKana,r):e(a,this.getSpelling(),r):void 0},e.prototype.toHTML=function(e){var n,t,i,a,o=!1===(null===(t=null==e?void 0:e.furigana)||void 0===t?void 0:t.show),s=null===(i=null==e?void 0:e.furigana)||void 0===i?void 0:i.toggle,c=Ve()({"incorrect-color":!0,"d-block":!0}),l=(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:c,children:this.getPronunciation()}),(0,r.jsx)("span",{children:this.getSpelling()})]});if(this.hasFurigana())try{var u=(n=this.parseObj).kanjis,d=n.furiganas,f=n.okuriganas,v=n.startsWKana,h=en(this.parseObj),p=Ve()({clickable:!!s})||void 0,g=s||void 0,m=o?"transparent-font":void 0;a=(0,r.jsx)("span",{className:p,onClick:g,children:h.map((function(e,n){return tn(n,{sk:nn(u[n]),hk:nn()},{sf:nn(d[n],m),hf:nn()},{so:nn(f[n]),ho:nn()},v)}))})}catch(n){!1!==(null==e?void 0:e.showError)&&console.error(n),a=l}else a=(0,r.jsx)("span",{children:this.getSpelling()});return a},e.parse=function(e){return an(e)},e.parser=an,e}();function an(e,n){var t,r=e.japanese.split("\n");if("function"==typeof n)t=n(e);else{var i=r[0],a=r[1];t=new rn(i,a)}return e.slang&&!0===e.slang&&(t.slang=!0),e.keigo&&!0===e.keigo&&(t.keigo=!0),!e.adj||"na"!==e.adj&&"i"!==e.adj||(t.adj=e.adj),t}function on(e,n){var t,r,i,a,o,s;try{i=(t=sn(e,n)).kanjis,a=t.furiganas,o=t.okuriganas,s=t.startsWKana}catch(t){if(t instanceof Error&&"ParseError"===(null===(r=t.cause)||void 0===r?void 0:r.code))try{var c=sn(e.split("").reverse().join(""),n.split("").reverse().join("")),l=c.kanjis,u=c.furiganas,d=c.okuriganas;return{kanjis:i=l.map((function(e){return e.split("").reverse().join("")})).reverse(),furiganas:a=u.map((function(e){return e.split("").reverse().join("")})).reverse(),okuriganas:o=d.map((function(e){return e.split("").reverse().join("")})).reverse(),startsWKana:s=!Ke(n.charAt(0))}}catch(e){}throw t}return{kanjis:i,furiganas:a,okuriganas:o,startsWKana:s}}function sn(e,n){if(n.split("").every((function(e){return Ke(e)||(n=e,new RegExp("[　-〄〆-〿｡-･！-／：-＠［-｀｛-～]").test(n));var n})))return{kanjis:[n],furiganas:[e],okuriganas:[],startsWKana:!1};var t=new RegExp(/\s/g),r=t.test(e)||t.test(n),i=!Ke(n.charAt(0))&&!Ye(n.charAt(0)),a=0,o=[],s=[],c=[],l="",u="",d="",f=!1;n.split("").forEach((function(t,i){if(Ke(t)||function(e,n,t){var r=t.charAt(e);return Number.isInteger(function(e){var n=Number.NaN;if(Ye(e)){var t=e.codePointAt(0);if(t){var r=t-65249;n=Number.parseInt(String.fromCharCode(r))}}return n}(r))||Number.isInteger(Number.parseInt(r))&&!n.includes(r)&&!Ke(r)&&!ze(r)&&!Be(r)&&e<t.length-1}(i,e,n))" "!==e.charAt(a)&&(l+=e.charAt(a))," "!==t&&(u+=t),f=!0,a++,""!==d&&(c.push(d),d=""),n.length-i==1&&(" "!==e.slice(a)&&(l+=e.slice(a)),o.push(l),s.push(u));else{if(f){for(;e.charAt(a)!=t;)if(" "!==e.charAt(a)&&(l+=e.charAt(a)),++a>e.length)throw new Error("The two phrases do not match"+(r?" (contains white space)":""),{cause:{code:"InputError",info:{input:{pronunciation:e,orthography:n},kanjis:s,furiganas:o,okuriganas:c}}});o.push(l),l=""}" "!==t&&(d+=t),""!==u&&(s.push(u),u=""),a++,f=!1}})),""!==d&&c.push(d);var v=function(e,n,t,r){var i,a;return r?(a=t.reduce((function(n,t,r){return n+t+(e[r]||"")}),""),i=t.reduce((function(e,t,r){return e+t+(n[r]||"")}),"")):(a=e.reduce((function(e,n,r){return e+n+(t[r]||"")}),""),i=n.reduce((function(e,n,r){return e+n+(t[r]||"")}),"")),[i,a]}(s,o,c,i),h=v[0],p=v[1],g=e.replaceAll(" ",""),m=n.replaceAll(" ","");if(h!==g||p!==m)throw new Error("Failed to parse text to build furigana"+(r?" (contains white space)":""),{cause:{code:"ParseError",info:{input:{pronunciation:e,orthography:n},output:{pronunciation:h,orthography:p}}}});return{kanjis:s,furiganas:o,okuriganas:c,startsWKana:i}}function cn(e){var n;if(e.pronounce){if(!e.pronounce.split("").every((function(e){return ze(e)||Be(e)})))throw new Error("No valid pronunciation",{cause:{code:"InvalidPronunciation",value:e}});n=e.pronounce}else n=rn.parse(e).getSpelling().replaceAll(" ","");return n}var ln,un=(ln=function(e,n){return ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},ln(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}ln(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),dn=function(e){function n(n,t){var r=e.call(this,n,t)||this;return r.trans=void 0,r.intr=void 0,r.exv=void 0,r}return un(n,e),Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return"JapaneseVerb"},enumerable:!1,configurable:!0}),n.prototype.isExceptionVerb=function(){return void 0!==this.exv},n.prototype.isIntransitive=function(){return void 0!==this.trans||!0===this.intr},n.prototype.getTransitivePair=function(){return this.isIntransitive()&&this.trans?this.trans:void 0},n.prototype.getIntransitivePair=function(){return this.isIntransitive()||"string"!=typeof this.intr?void 0:this.intr},n.prototype.getVerbClass=function(){var n=e.prototype.getPronunciation.call(this),t=e.prototype.getSpelling.call(this);if(this.exv&&this.isExceptionVerb())return this.exv;var r=n.slice(-1),i=Qe(n.slice(-2,-1)).iVowel;return"する"===t.slice(-2)||"くる"===n||"だ"===n||"ある"===n?3:1===i&&"る"===r||3===i&&"る"===r?2:1},n.prototype.getStem=function(){var n,t,r=u.Bw;e.prototype.hasFurigana.call(this)&&(t=e.prototype.getSpelling.call(this).slice(0,-1));var i=e.prototype.getPronunciation.call(this).slice(-1),a=e.prototype.getPronunciation.call(this).slice(0,-1);if(1===this.getVerbClass()||"る"!==i){var o=Qe(i).iConsonant;n=t?[a+r[o][1],t+r[o][1]]:[a+r[o][1]]}else{if("る"!==i)throw new Error("Unknown verb type");n=t?[a,t]:[a]}return n},n.prototype.naiForm=function(){var n,t,r="ない",i=this.getVerbClass(),a=e.prototype.getSpelling.call(this),o=e.prototype.hasFurigana.call(this);if(1===i){var s=a[a.length-1],c=u.Bw,l=u.Be.indexOf("a"),d=Qe(s).iConsonant,f=c[0===d?14:d][l]+r,v=e.prototype.getSpelling.call(this).slice(0,-1);if(o){var h=e.prototype.getPronunciation.call(this).slice(0,-1);t=new rn(h+f,v+f)}else t=new rn(v+f)}else if(2===i)h=(n=this.getStem())[0],t=(v=n[1])?new rn(h+r,v+r):new rn(h+r);else if("来る"===a||"くる"===a)t=new rn("こない","来ない");else if("する"===a)t=new rn("しない");else if("ある"===a)t=new rn("ない");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");v=e.prototype.getSpelling.call(this).slice(0,-2),o?(h=e.prototype.getPronunciation.call(this).slice(0,-2),t=new rn(h+"しない",v+"しない")):t=new rn(v+"しない")}return t},n.prototype.saseruForm=function(){var n,t,r="せる",i=this.getVerbClass(),a=e.prototype.getSpelling.call(this),o=e.prototype.hasFurigana.call(this);if(1===i){var s=a[a.length-1],c=u.Bw,l=u.Be.indexOf("a"),d=Qe(s).iConsonant,f=c[0===d?14:d][l]+r,v=e.prototype.getSpelling.call(this).slice(0,-1);if(o){var h=e.prototype.getPronunciation.call(this).slice(0,-1);t=new rn(h+f,v+f)}else t=new rn(v+f)}else if(2===i)"居る"!==a&&"いる"!==a||(t=new rn("いる","居る")),h=(n=this.getStem())[0],v=n[1],t=o?new rn(h+"さ"+r,v+"さ"+r):new rn(h+"さ"+r);else if("来る"===a||"くる"===a)t=new rn("こさせる","来させる");else if("する"===a)t=new rn("させる");else if("ある"===a)t=new rn("ある");else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");v=e.prototype.getSpelling.call(this).slice(0,-2),o?(h=e.prototype.getPronunciation.call(this).slice(0,-2),t=new rn(h+"させる",v+"させる")):t=new rn(v+"させる")}return t},n.prototype.reruForm=function(){var n,t,r=this.getVerbClass(),i=e.prototype.getSpelling.call(this),a=e.prototype.hasFurigana.call(this);if(this.isIntransitive()||void 0!==this.getIntransitivePair())return null;if(1===r){var o=i[i.length-1],s=u.Bw,c=u.Be.indexOf("e"),l=s[Qe(o).iConsonant][c]+"る",d=e.prototype.getSpelling.call(this).slice(0,-1);if(a){var f=e.prototype.getPronunciation.call(this).slice(0,-1);t=new rn(f+l,d+l)}else t=new rn(d+l)}else if(2===r)f=(n=this.getStem())[0],d=n[1],t=a?new rn(f+"られる",d+"られる"):new rn(f+"られる");else if("来る"===i||"くる"===i)t=new rn("こられる","来られる");else if("する"===i)t=new rn("できる");else if("する"===i.slice(-2))d=e.prototype.getSpelling.call(this).slice(0,-2),a?(f=e.prototype.getPronunciation.call(this).slice(0,-2),t=new rn(f+"できる",d+"できる")):t=new rn(d+"できる");else{if("ある"!==i&&"いる"!==i)throw new Error("Unknown exception verb type");t=null}return t},n.prototype.masuForm=function(){var n,t,r="ます";switch(this.toString()){case"くる\n来る":t=new rn("きます","来ます");break;case"ある":t=new rn("あります");break;case"だ":t=new rn("です")}if("する"===e.prototype.getSpelling.call(this).slice(-2)){var i="します",a=e.prototype.getPronunciation.call(this).slice(0,-2),o=e.prototype.getSpelling.call(this).slice(0,-2);t=e.prototype.hasFurigana.call(this)?new rn(a+i,o+i):new rn(a+i)}if(!t){var s=(n=this.getStem())[0],c=n[1];t=c?new rn(s+r,c+r):new rn(s+r)}return t},n.prototype.mashouForm=function(){var n,t,r="ましょう";switch(this.toString()){case"くる\n来る":t=new rn("きましょう","来ましょう");break;case"ある":t=new rn("ありましょう");break;case"だ":t=new rn("でしょう")}if("する"===e.prototype.getSpelling.call(this).slice(-2)){var i="しましょう",a=e.prototype.getPronunciation.call(this).slice(0,-2),o=e.prototype.getSpelling.call(this).slice(0,-2);t=e.prototype.hasFurigana.call(this)?new rn(a+i,o+i):new rn(a+i)}if(!t){var s=(n=this.getStem())[0],c=n[1];t=c?new rn(s+r,c+r):new rn(s+r)}return t},n.prototype.taForm=function(){return this.t_Form(fn)},n.prototype.chattaForm=function(){if(3===this.getVerbClass())return null;var n,t=e.prototype.hasFurigana.call(this)?e.prototype.getSpelling.call(this):e.prototype.getPronunciation.call(this);switch(t[t.length-1]){case"ぶ":case"む":case"ぬ":case"ぐ":n="じゃった";break;default:n="ちゃった"}var r=this.t_Form(fn);return new rn(r.getPronunciation().slice(0,-1)+n,r.getSpelling().slice(0,-1)+n)},n.prototype.teForm=function(){return this.t_Form(vn)},n.prototype.t_Form=function(e){var n,t,r,i=this.getVerbClass(),a=this.furigana;this.hasFurigana()&&this.kanji&&(t=this.furigana,a=this.kanji);var o=a[a.length-1];if(1===i)if("行く"===a||"いく"===a)n=rn.parse({japanese:e.g1.iku});else{switch(o){case"う":case"つ":case"る":r=e.g1.u_tsu_ru;break;case"く":r=e.g1.ku;break;case"ぐ":r=e.g1.gu;break;case"ぬ":case"ぶ":case"む":r=e.g1.mu_nu_bu;break;case"す":r=e.g1.su}n=t?new rn(t.slice(0,-1)+r,a.slice(0,-1)+r):new rn(a.slice(0,-1)+r)}else if(2===i)r=e.g2.ru,n=t?new rn(t.slice(0,-1)+r,a.slice(0,-1)+r):new rn(a.slice(0,-1)+r);else if("来る"===a||"くる"===a)n=rn.parse({japanese:e.g3.kuru});else if("する"===a)n=rn.parse({japanese:e.g3.suru});else if("だ"===a)n=rn.parse({japanese:e.g3.da});else if("ある"===a)n=rn.parse({japanese:e.g3.aru});else{if("する"!==a.slice(-2))throw new Error("Unknown exception verb type");var s=e.g3.suru,c=a.slice(0,-2);if(t){var l=t.slice(0,-2);n=new rn(l+s,c+s)}else n=new rn(c+s)}return n},n.parse=function(e){var t=rn.parser(e,(function(e){var t=e.japanese.split("\n");return new n(t[0],t[1])}));return e.intr&&(t.intr=e.intr),e.trans&&(t.trans=e.trans),e.exv&&e.exv>0&&e.exv<4&&(t.exv=e.exv),t},n}(rn),fn={g1:{u_tsu_ru:"った",mu_nu_bu:"んだ",ku:"いた",gu:"いだ",su:"した",iku:"いった\n行った"},g2:{ru:"た"},g3:{suru:"した",kuru:"きた\n来た",da:"だった",aru:"あった",iru:"いた"}},vn={g1:{u_tsu_ru:"って",mu_nu_bu:"んで",ku:"いて",gu:"いで",su:"して",iku:"いって\n行って"},g2:{ru:"て"},g3:{suru:"して",kuru:"きて\n来て",da:"で",aru:"あって",iru:"いて"}};function hn(e,n){var t=Math.ceil(n/2);return e.length<n?e:e.slice(0,t)+"..."+e.slice(-(n-t))}function pn(e){var n=e.split("T")[0],t=Date.parse(n),r=Math.abs(Date.now()-t);return Math.ceil(r/864e5)}function gn(e,n,t,r){if(t[n.uid]&&t[n.uid].d){var i=hn(n.english,30),a=!0===(null==r?void 0:r.frequency)?" F[w]":"",o=" "+(pn(t[n.uid].d)-1)+"d",s=" "+t[n.uid].vC+"v",c=t[n.uid].tpAcc;e("Space Rep ["+i+"]"+a+o+s+(void 0!==c?" "+(100*c).toFixed(0)+"%":""),y.DEBUG)}}function mn(e,n,t,r){if(t[n.uid]&&t[n.uid].d){var i=hn(n.english,30),a=!0===(null==r?void 0:r.frequency)?" F[w]":"",o=" "+(pn(t[n.uid].d)-1)+"d",s=t[n.uid].tpPc,c=void 0!==s?" "+s+"v":"",l=t[n.uid].tpAcc,u=void 0!==l?" "+(100*l).toFixed(0)+"%":"",d=t[n.uid].tpCAvg;e("Timed Play ["+i+"]"+a+o+c+u+(void 0!==d?" "+(f=d,(Math.round(f)/1e3).toFixed(2)+"".replace("0.",".").replace(".00","").replace(/0$/,"")+"s"):""),y.DEBUG)}var f}var bn=function(){return bn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},bn.apply(this,arguments)},jn=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function xn(e,n,t,r,i,a,o,s){var c=e&&Math.random()<1/3;if(n!==w.FREQUENCY&&c&&t.length>0){var l=t.filter((function(e){return n=i[e].d,r=Date.parse(n),a=Math.abs(Date.now()-r),Math.ceil(a/6e4)>t.length;var n,r,a})),u=l.length,d=Math.floor(Math.random()*(u-0)+0),f=r.find((function(e){return l[d]===e.uid}));if(f&&a!==f.uid)return void o(f.uid)}s()}function yn(e,n,t){var r;if(!(r=t?n[t[e]]:n[e]))throw new Error("No term found");return r.uid}function wn(e,n){var t=n.find((function(n){return e===n.uid}));if(!t)throw new Error("No term found");return t}function kn(e,n,t,r,i){void 0===t&&(t=[]);var a=n;if(e===w.FREQUENCY){if(!t)throw new TypeError("Filter type requires frequencyList");if(!i)throw new TypeError("Filter type requires toggleFilterType");t.length>0?a=r.length>0?n.filter((function(e){return t.includes(e.uid)&&Nn(r,e)})):n.filter((function(e){return t.includes(e.uid)})):i(w.GROUP)}else e===w.TAGS?r.length>0&&(a=n.filter((function(e){return e.tag&&e.tag.some((function(e){return r.includes(e)}))}))):r.length>0&&(a=n.filter((function(e){return Nn(r,e)})));return a}function Nn(e,n){return n.grp&&e.includes(n.grp)||e.includes(n.grp+"."+n.subGrp)||void 0===n.grp&&(e.includes("undefined")||e.includes("undefined."+n.subGrp))}function Sn(e,n){var t=Object.keys(e).reduce((function(n,t){return jn(jn(jn([],n,!0),[t],!1),e[t].map((function(e){return t+"."+e})),!0)}),[]);return n.reduce((function(e,n){return t.includes(n)||(e=jn(jn([],e,!0),[n],!1)),e}),[])}function Tn(e,n,t){var r=new Set(Object.keys({d:null,difficulty:null,nextReview:null,vC:null,f:null,rein:null,pron:null,tpPc:null,tpAcc:null,tpCAvg:null})),i=new Set,a=[];return Object.keys(e).forEach((function(o){Object.keys(e[o]).forEach((function(e){var s;if(!r.has(e)){var c=void 0;try{c=wn(o,n)}catch(e){c={english:t}}s={key:e,uid:o,english:c.english}}void 0!==s&&(i.add(e),a=jn(jn([],a,!0),[s],!1))}))})),{keys:i,list:a}}function Cn(e){return~~(Date.now()-e)>1500}function An(e){return~~(Date.now()-e)>300}function Rn(e,n){var t=[],r=[],i=[],a=[],o=[];for(var s in e){var c=e[s].uid,l=n[c];if(void 0!==l)if(void 0===l.tpAcc)a=jn(jn([],a,!0),[{date:l.d,views:l.vC,uid:c,index:Number(s)}],!1);else if(!0===l.pron){var u=En(l.d,l.tpAcc,l.vC),d=On(l.tpPc,l.tpCAvg);r=jn(jn([],r,!0),[{staleness:u,correctness:d,uid:c,index:Number(s)}],!1)}else l.tpAcc>=.65?(u=En(l.d,l.tpAcc,l.vC),d=On(l.tpPc,l.tpCAvg),o=jn(jn([],o,!0),[{staleness:u,correctness:d,uid:c,index:Number(s)}],!1)):l.tpAcc<.65&&(u=En(l.d,l.tpAcc,l.vC),d=On(l.tpPc,l.tpCAvg),t=jn(jn([],t,!0),[{staleness:u,correctness:d,uid:c,index:Number(s)}],!1));else i=jn(jn([],i,!0),[Number(s)],!1)}var f=_e()(t,["staleness","correctness","uid"],["desc","asc","asc"]),v=_e()(r,["staleness","correctness","uid"],["desc","asc","asc"]),h=_e()(a,["date","views","uid"],["asc","asc","asc"]),p=_e()(o,["staleness","correctness","uid"],["desc","asc","asc"]),g=f.map((function(e){return e.index})),m=v.map((function(e){return e.index})),b=h.map((function(e){return e.index})),j=p.map((function(e){return e.index}));return jn(jn(jn(jn(jn([],g,!0),m,!0),i,!0),b,!0),j,!0)}function En(e,n,t){void 0===t&&(t=1);var r=Number.MAX_SAFE_INTEGER;return void 0!==e&&n>0&&t>0&&(r=pn(e)*(1/n)*(1/t)),r}function On(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var t=Number.MIN_SAFE_INTEGER;return e>0&&n>0&&(t=e*(1/n)),t}function Mn(e,n){var t=[],r=[];for(var i in e){var a=e[i].uid,o=n[a];void 0!==o&&void 0!==o.d?r=jn(jn([],r,!0),[{date:o.d,uid:a,index:Number(i)}],!1):t=jn(jn([],t,!0),[Number(i)],!1)}var s=_e()(r,["date","uid"],["asc","asc"]).map((function(e){return e.index}));return jn(jn([],t,!0),s,!0)}var Pn=80,Fn=30;function Dn(e){var n={},t=[];e.forEach((function(e,r){n[e.uid]=r,t=jn(jn([],t,!0),[{uid:e.uid,japanese:e.japanese,english:e.english}],!1)}));var r=[],i=[],a=[];return(t=_e()(t,["japanese"],["asc"])).forEach((function(e,t){r=jn(jn([],r,!0),[n[e.uid]],!1),a=jn(jn([],a,!0),[{uid:e.uid,label:rn.parse(e).getPronunciation(),idx:-1}],!1),i=jn(jn([],i,!0),[{uid:e.uid,label:e.english.toLowerCase(),idx:t}],!1)})),(i=_e()(i,["label"],["asc"])).forEach((function(e,n){a[e.idx]=bn(bn({},a[e.idx]),{idx:n})})),{order:r,jOrder:a,eOrder:i}}function Ln(e){var n=e.map((function(e,n){return n}));return He(n),n}function qn(e,n){return n[e]}function In(e,n){return e+1<n.length?e+1:0}function Gn(e,n){var t,r,i,a,o,s,c,l,u,d,f,v={dictionary:void 0===e?void 0:dn.parse(e)},h=jn(jn([{name:"-masu",value:null===(t=v.dictionary)||void 0===t?void 0:t.masuForm()},{name:"-mashou",value:null===(r=v.dictionary)||void 0===r?void 0:r.mashouForm()},{name:"dictionary",value:v.dictionary},{name:"-nai",value:null===(i=v.dictionary)||void 0===i?void 0:i.naiForm()},{name:"-saseru",value:null===(a=v.dictionary)||void 0===a?void 0:a.saseruForm()},{name:"-te",value:null===(o=v.dictionary)||void 0===o?void 0:o.teForm()},{name:"-ta",value:null===(s=v.dictionary)||void 0===s?void 0:s.taForm()}],null!==(null===(c=v.dictionary)||void 0===c?void 0:c.chattaForm())?[{name:"-chatta",value:null===(l=v.dictionary)||void 0===l?void 0:l.chattaForm()}]:[],!0),null!==(null===(u=v.dictionary)||void 0===u?void 0:u.reruForm())?[{name:"-reru",value:null===(d=v.dictionary)||void 0===d?void 0:d.reruForm()}]:[],!0);return n&&n.length>0&&(f=n.reduce((function(e,n){var t=h.find((function(e){return e.name===n}));return void 0!==t&&(e=jn(jn([],e,!0),[t],!1)),e}),[])),null!=f?f:h}function Vn(e,n,t,r,i){var a,o,s,c;return e?(a=n,o=t,s=r,c=i):(a=t,o=n,s=i,c=r),{topValue:a,topLabel:s,bottomValue:o,bottomLabel:c}}function Un(e){return e.grp&&""!==e.grp?(0,r.jsx)("span",{className:"hint",children:e.grp+(e.subGrp?", "+e.subGrp:"")}):void 0}function _n(e){var n;return n=e.getPronunciation().slice(1,2),new RegExp("^[ゃャゅュょョ]$").test(n)?e.getHint(Ze,$e,3,2):e.getHint(Ze,$e,3,1)}function Hn(e){var n=e.uid;if(!n)throw console.warn(JSON.stringify(e)),new Error("Missing uid");return e.form&&(n+="dictionary"!==e.form?e.form.replace("-","."):""),n}function Wn(e,n,t,r){return{furigana:{show:!(n&&n[e]&&!1===n[e].f),toggle:!1===t&&r&&function(){r(e)}||void 0}}}function Kn(e,n,t){var r=n.signal;return new Promise((function(n,i){var a=function(){clearTimeout(s),clearInterval(o),i(new Error("Aborted"))},o="function"==typeof t?setInterval(t,200,200,e):-1,s=setTimeout((function(){null==r||r.removeEventListener("abort",a),clearInterval(o),n()}),e);(null==r?void 0:r.aborted)&&a(),null==r||r.addEventListener("abort",a)}))}function zn(e,n,t,r){var i=r.signal,a=new Promise((function(r,a){var o=function(){clearTimeout(s);var e=new Error("User interrupted loop.",{cause:{code:"UserAborted"}});a(e)},s=setTimeout((function(){e>0?n().then((function(){return zn(e-1,n,t,{signal:i}).then((function(){null==i||i.removeEventListener("abort",o),r()}))})).catch((function(e){a(e)})):(null==i||i.removeEventListener("abort",o),r())}),t);(null==i?void 0:i.aborted)&&o(),null==i||i.addEventListener("abort",o)}));return a}function Bn(e,n,t){var r,i,a=null===(r=e.acceleration)||void 0===r?void 0:r.y,o=null===(i=e.acceleration)||void 0===i?void 0:i.z;if(null==a||null==o)throw new Error("Device does not support DeviceMotionEvent",{cause:{code:"DeviceMotionEvent"}});var s=Math.sqrt(a*a+o*o);s>n&&"function"==typeof t&&t(s)}function Yn(e,n){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(n){"granted"===n&&e()})).catch(n):e()}var Xn,Qn=function(){return Qn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Qn.apply(this,arguments)},Zn=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},Jn=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},$n=(0,s.hg)("vocabulary/getVocabulary",(function(e,n){return Zn(void 0,void 0,void 0,(function(){var e,t;return Jn(this,(function(r){return e=n.getState(),"0"===(t=e.version.vocabulary||"0")&&console.error("fetching vocabulary: 0"),[2,fetch(V+"/lambda/vocabulary.json",{headers:{"Data-Version":t}}).then((function(e){return e.json().then((function(e){return{value:e,version:t}}))}))]}))}))})),et=(0,s.hg)("vocabulary/updateSpaceRepWord",(function(e,n){return Zn(void 0,void 0,void 0,(function(){var t,r,i,a;return Jn(this,(function(o){return t=e.uid,r=e.shouldIncrement,i=n.getState().vocabulary,a=i.setting.repetition,[2,A(t,a,{count:r,date:!0})]}))}))})),nt=(0,s.hg)("vocabulary/vocabularyFromLocalStorage",(function(e){return Zn(void 0,void 0,void 0,(function(){return Jn(this,(function(n){return[2,e]}))}))})),tt={value:[],version:"",grpObj:{},verbForm:"dictionary",setting:{ordered:0,practiceSide:!1,romaji:!1,bareKanji:!1,hintEnabled:!1,filter:0,memoThreshold:Pn,reinforce:!1,repTID:-1,repetition:{},activeGroup:[],autoVerbView:!1,verbColSplit:0,verbFormsOrder:Gn().map((function(e){return e.name}))}},rt=(0,s.oM)({name:"vocabulary",initialState:tt,reducers:{verbFormChanged:function(e,n){return Qn(Qn({},e),{verbForm:n.payload})},toggleVocabularyActiveGrp:function(e,n){var t=n.payload,r=e.setting.activeGroup,i=C(Array.isArray(t)?t:[t],r);e.setting.activeGroup=m(new Date,{vocabulary:e.setting},"/vocabulary/","activeGroup",i)},furiganaToggled:function(e,n){var t=A(n.payload,e.setting.repetition,{count:!1,date:!1},{toggle:["f"]}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)},toggleVocabularyReinforcement:function(e){e.setting.reinforce=m(new Date,{vocabulary:e.setting},"/vocabulary/","reinforce")},toggleVocabularyOrdering:function(e,n){var t=e.setting.ordered,r=n.payload,i=T(t+1,[k.ALPHABETIC,k.DIFFICULTY,k.GAME,k.RANDOM,k.VIEW_DATE],r);e.setting.ordered=m(new Date,{vocabulary:e.setting},"/vocabulary/","ordered",i)},flipVocabularyPracticeSide:function(e){e.setting.practiceSide=m(new Date,{vocabulary:e.setting},"/vocabulary/","practiceSide")},toggleVocabularyRomaji:function(e){e.setting.romaji=m(new Date,{vocabulary:e.setting},"/vocabulary/","romaji")},toggleVocabularyBareKanji:function(e){e.setting.bareKanji=m(new Date,{vocabulary:e.setting},"/vocabulary/","bareKanji")},toggleVocabularyHint:function(e){e.setting.hintEnabled=m(new Date,{vocabulary:e.setting},"/vocabulary/","hintEnabled")},toggleVocabularyFilter:function(e,n){var t=[w.FREQUENCY,w.GROUP],r=n.payload,i=e.setting,a=i.filter,o=i.reinforce,s=T(a+1,t,r);e.setting.filter=m(new Date,{vocabulary:e.setting},"/vocabulary/","filter",s),0!==s&&o&&(e.setting.reinforce=!1)},setVerbFormsOrder:function(e,n){var t=n.payload;e.setting.verbFormsOrder=m(new Date,{vocabulary:e.setting},"/vocabulary/","verbFormsOrder",t)},toggleAutoVerbView:function(e){e.setting.autoVerbView=m(new Date,{vocabulary:e.setting},"/vocabulary/","autoVerbView")},updateVerbColSplit:function(e,n){var t=n.payload;e.setting.verbColSplit=m(new Date,{vocabulary:e.setting},"/vocabulary/","verbColSplit",t)},addFrequencyWord:function(e,n){var t=A(n.payload,e.setting.repetition,{count:!1,date:!1},{set:{rein:!0}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)},removeFrequencyWord:function(e,n){var t=n.payload,r=e.setting.repetition;if(!0===r[t].rein){var i=A(t,r,{count:!1,date:!1},{set:{rein:null}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",i)}},setMemorizedThreshold:function(e,n){var t=n.payload;e.setting.memoThreshold=m(new Date,{vocabulary:e.setting},"/vocabulary/","memoThreshold",t)},setWordDifficulty:{reducer:function(e,n){var t=n.payload,r=t.uid,i=t.value,a=A(r,e.setting.repetition,{count:!1,date:!1},{set:{difficulty:i}}).value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",a)},prepare:function(e,n){return{payload:{uid:e,value:n}}}},setWordTPCorrect:{reducer:function(e,n){var t,r=n.payload,i=r.uid,a=r.tpElapsed,o=r.pronunciation,s=e.setting.repetition,c=1,l=1,u=a;if(s[i]){var d=s[i].tpPc,f=s[i].tpAcc,v=s[i].tpCAvg||0;if(void 0!==d&&null!=f){var h=d*f;l=(h+1)/(c=d+1),u=(v*h+a)/(h+1)}}var p=Qn(Qn({},s[i]||{}),{pron:null===o||void 0===s[i]?void 0:s[i].pron,tpPc:c,tpAcc:l,tpCAvg:u}),g=Qn(Qn({},s),((t={})[i]=p,t));e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",g)},prepare:function(e,n,t){return{payload:{uid:e,tpElapsed:n,pronunciation:(void 0===t?{}:t).pronunciation}}}},setWordTPIncorrect:{reducer:function(e,n){var t,r=n.payload,i=r.uid,a=r.pronunciation,o=e.setting.repetition,s=1,c=0;if(o[i]){var l=o[i].tpPc,u=o[i].tpAcc;void 0!==l&&null!=u&&(c=(l*u+0)/(s=l+1))}var d=Qn(Qn({},o[i]||{}),{tpPc:s,tpAcc:c,pron:!!a||void 0}),f=Qn(Qn({},o),((t={})[i]=d,t));e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",f)},prepare:function(e,n){return{payload:{uid:e,pronunciation:(void 0===n?{}:n).pronunciation}}}}},extraReducers:function(e){e.addCase(nt.fulfilled,(function(e,n){var t=n.payload,r=l()(tt.setting,t);return Qn(Qn({},e),{setting:Qn(Qn({},r),{repTID:Date.now()})})})),e.addCase($n.fulfilled,(function(e,n){var t,r,i=n.payload,a=i.value,o=i.version;e.grpObj=W(a),e.value=(t=a,r={},Object.keys(t).map((function(e){var n=t[e].trans;return n&&(r[n]={intr:e,trans:t[e].trans}),_(_({},t[e]),{uid:e})})).map((function(e){return r[e.uid]?_(_({},e),{intr:r[e.uid].intr}):e}))),e.version=o})),e.addCase(et.fulfilled,(function(e,n){var t=n.payload.value;e.setting.repTID=Date.now(),e.setting.repetition=m(new Date,{vocabulary:e.setting},"/vocabulary/","repetition",t)}))}}),it=(Xn=rt.actions).verbFormChanged,at=Xn.furiganaToggled,ot=Xn.removeFrequencyWord,st=Xn.setVerbFormsOrder,ct=Xn.toggleVocabularyOrdering,lt=Xn.toggleVocabularyActiveGrp,ut=Xn.toggleAutoVerbView,dt=Xn.toggleVocabularyFilter,ft=Xn.toggleVocabularyHint,vt=Xn.toggleVocabularyReinforcement,ht=Xn.toggleVocabularyRomaji,pt=Xn.updateVerbColSplit,gt=Xn.toggleVocabularyBareKanji,mt=Xn.flipVocabularyPracticeSide,bt=Xn.addFrequencyWord,jt=Xn.setWordDifficulty,xt=Xn.setMemorizedThreshold,yt=Xn.setWordTPCorrect,wt=Xn.setWordTPIncorrect;const kt=rt.reducer;var Nt="service_worker_logger_msg",St=(0,s.hg)("serviceWorker/serviceWorkerRegistered",(function(){return e=void 0,n=void 0,r=function(){return function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return"serviceWorker"in navigator?[2,navigator.serviceWorker.register("sw.js").then((function(e){var n;return null===(n=e.active)||void 0===n?void 0:n.state}))]:[2,Promise.reject("No Service Worker")]}))},new((t=void 0)||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}));var e,n,t,r})),Tt=(0,s.oM)({name:"serviceWorker",initialState:{registered:!1},reducers:{serviceWorkerNewTermsAdded:function(e,n){var t=n.payload.newestWords;for(var r in t){var i=t[r],a=i.freq;i.dic,console.warn("serviceWorkerNewTermsAdded Disabled"),console.warn(a.length+" new "+r)}}},extraReducers:function(e){e.addCase(St.fulfilled,(function(e){e.registered=!0}))}});Tt.actions.serviceWorkerNewTermsAdded;const Ct=Tt.reducer;var At=function(){return At=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},At.apply(this,arguments)},Rt=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},Et=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Ot=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Mt=(0,s.hg)("particle/getParticleGame",(function(e,n){return Rt(void 0,void 0,void 0,(function(){var e,t,r,i;return Et(this,(function(a){return e=n.getState().particle,(t=n.getState().phrases.value).length>0?(r=0===e.particleGame.phrases.length,i=void 0,r&&(i=Ft(t)),[2,{game:i}]):[2,n.dispatch(ke()).then((function(e){var n=e.payload.value,t=we(n);return{phrase:t,game:Ft(t)}}))]}))}))})),Pt=(0,s.hg)("particleGame/particleFromLocalStorage",(function(e){return Rt(void 0,void 0,void 0,(function(){return Et(this,(function(n){return[2,e]}))}))}));function Ft(e){var n=[],t={},r=e.reduce((function(e,r){if(r.particles&&r.particles.length>0){var i=rn.parse(r).getSpelling();r.particles.forEach((function(a){var o;if(2===i.split(a).length){var s=function(e){var n;switch(e){case"は":n="wa";break;case"には":n="niwa";break;case"を":n="o";break;case"って":n="tte";break;default:n=e.split("").map((function(e){return function(e){var n=e;if(ze(e)){var t=Qe(e),r=t.iConsonant,i=t.iVowel;n=u.sH[r]+u.Be[i]}else if(Be(e)){var a=e.codePointAt(0);if(a){var o=a-96,s=Qe(String.fromCharCode(o));r=s.iConsonant,i=s.iVowel,n=u.sH[r]+u.Be[i]}}return n}(e)})).join("")}return n}(a),c=i.indexOf(a),l={japanese:a,romaji:s,html:a},d={japanese:a,romaji:s,start:c,end:c+a.length,html:a};n=Ot(Ot([],n,!0),[l],!1),e=Ot(Ot([],e,!0),[{answer:d,question:r,english:r.english,literal:r.lit}],!1)}else t=At(At({},t),((o={})[r.english]={japanese:i,particle:a,times:i.split(a).length},o))}))}return e}),[]);return console.error("More than one match "+Object.keys(t).length),console.table(t),{phrases:r,particles:n}}var Dt={particleGame:{phrases:[],particles:[]},setting:{aRomaji:!1}},Lt=(0,s.oM)({name:"particleGame",initialState:Dt,reducers:{setParticlesARomaji:function(e){e.setting.aRomaji=m(new Date,{particle:e.setting},"/particle/","aRomaji")}},extraReducers:function(e){e.addCase(Mt.fulfilled,(function(e,n){var t=n.payload.game;t&&(e.particleGame=t)})),e.addCase(Pt.fulfilled,(function(e,n){var t=n.payload,r=l()(Dt.setting,t);return At(At({},e),{setting:At({},r)})}))}}),qt=Lt.actions.setParticlesARomaji;const It=Lt.reducer;function Gt(){if("storage"in navigator&&"persist"in navigator.storage)return navigator.storage.persisted().then((function(e){return Vt().then((function(n){return{quota:n.quota,usage:n.usage,persistent:e}}))}));var e=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}});return Promise.reject(e)}function Vt(){return new Promise((function(e,n){"webkitTemporaryStorage"in navigator?navigator.webkitTemporaryStorage.queryUsageAndQuota((function(n,t){e({quota:t,usage:n})}),n):null!=navigator.storage&&null!=navigator.storage.estimate?navigator.storage.estimate().then(e).catch(n):n(new Error("Quota info unsupported",{cause:{code:"QuotaInfoUnsupported"}}))}))}var Ut,_t=function(){return _t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},_t.apply(this,arguments)},Ht=function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}c((r=r.apply(e,n||[])).next())}))},Wt=function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Kt=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},zt={darkMode:!1,memory:{quota:0,usage:0,persistent:!1},debug:0,console:[],swipeThreshold:0,motionThreshold:0},Bt=(0,s.hg)("setting/getMemoryStorageStatus",(function(e,n){return Ht(void 0,void 0,void 0,(function(){return Wt(this,(function(e){return[2,Gt().catch((function(e){throw n.dispatch(nr("Could not get memory storage status",y.WARN)),n.dispatch(nr(e.message,y.WARN)),e}))]}))}))})),Yt=(0,s.hg)("setting/setPersistentStorage",(function(e,n){return Ht(void 0,void 0,void 0,(function(){return Wt(this,(function(e){return[2,(t=new Error("Browser does not support persistent storage",{cause:{code:"PersistentStorageUnsupported"}}),"storage"in navigator&&"persist"in navigator.storage?navigator.storage.persisted().then((function(e){return e?Vt().then((function(n){return{quota:n.quota,usage:n.usage,persistent:e,warning:void 0}})):navigator.storage.persist().then((function(e){return e?("Storage will not be cleared except by explicit user action",Vt().then((function(n){return{quota:n.quota,usage:n.usage,persistent:e,warning:"Storage will not be cleared except by explicit user action"}}))):Promise.reject(t)}))})):Promise.reject(t)).catch((function(e){throw n.dispatch(nr("Could not set persistent storage",y.WARN)),n.dispatch(nr(e.message,y.WARN)),e}))];var t}))}))})),Xt=(0,s.hg)("setting/localStorageSettingsInitialized",(function(e,n){return Ht(void 0,void 0,void 0,(function(){var e;return Wt(this,(function(t){return e=b(d),n.dispatch(ve(e.opposite)),n.dispatch(Ne(e.phrases)),n.dispatch(Z(e.kanji)),n.dispatch(O(e.kana)),n.dispatch(Pt(e.particle)),n.dispatch(nt(e.vocabulary)),[2,l()(zt,_t({},e.global))]}))}))})),Qt=(0,s.oM)({name:"setting",initialState:zt,reducers:{toggleDarkMode:function(e){m(new Date,{global:e},"/global/","darkMode",!e.darkMode),e.darkMode=!e.darkMode},setSwipeThreshold:function(e,n){var t=n.payload,r=new Date;e.swipeThreshold=m(r,{global:e},"/global/","swipeThreshold",t)},setMotionThreshold:function(e,n){var t=n.payload,r=new Date;e.motionThreshold=m(r,{global:e},"/global/","motionThreshold",t)},debugToggled:{reducer:function(e,n){var t=n.payload,r=T(e.debug+1,Object.values(y),t);e.debug=m(new Date,{global:e},"/global/","debug",r)},prepare:function(e){return{payload:e}}},logger:{reducer:function(e,n){var t=e.debug,r=n.payload,i=r.msg,a=r.lvl,o=r.type;if(0!==t&&a<=t){var s;s=o===Nt?"SW: "+i:"UI: "+i,e.console=Kt(Kt([],e.console,!0),[{msg:s,lvl:a}],!1)}},prepare:function(e,n,t){return void 0===n&&(n=y.DEBUG),void 0===t&&(t="ui_logger_msg"),{payload:{msg:e,lvl:n,type:t}}}}},extraReducers:function(e){e.addCase(Xt.fulfilled,(function(e,n){var t=n.payload;return _t({},t)})),e.addCase(Bt.fulfilled,(function(e,n){var t=n.payload,r=t.quota,i=t.usage,a=t.persistent;e.memory={quota:r,usage:i,persistent:a}})),e.addCase(Yt.fulfilled,(function(e,n){var t=n.payload,r=t.quota,i=t.usage,a=t.persistent,o=t.warning;o&&console.warn(o),e.memory={quota:r,usage:i,persistent:a}}))}}),Zt=(Ut=Qt.actions).toggleDarkMode,Jt=Ut.setMotionThreshold,$t=Ut.setSwipeThreshold,er=Ut.debugToggled,nr=Ut.logger;const tr=Qt.reducer;var rr=(0,s.xC)({reducer:{global:tr,sw:Ct,version:Ie,kana:I,vocabulary:kt,opposite:me,phrases:Le,kanji:se,particle:It}}),ir=t(9655),ar=t(5697),or=t.n(ar),sr=function(){return sr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},sr.apply(this,arguments)},cr=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function lr(e){var n=[],t=0;return e.forEach((function(r,i){if(i>0&&r.msg===e[i-1].msg)t++;else if(t>0){var a=n.slice(0,-1),o=n.slice(-1)[0];n=cr(cr([],a,!0),[sr(sr({},o),{msg:"".concat(o.msg," ").concat(t+1," +")}),r],!1),t=0}else n=cr(cr([],n,!0),[r],!1)})),n}function ur(e){var n=!0===e.connected,t=(0,o.v9)((function(t){var r=t.global;return!n&&e.messages?y.DEBUG:r.debug})),a=(0,o.v9)((function(t){var r=t.global;return!n&&e.messages?e.messages:r.console}),o.wU),s=(0,i.useState)(6),c=s[0],l=s[1],u=(0,i.useState)(0),d=u[0],f=u[1],v=(0,i.useState)(lr(a)),h=v[0],p=v[1],g=(0,i.useRef)();(0,i.useMemo)((function(){if(t===y.OFF)f(0),p([]);else{var e=lr(a);if(f(0),p(e),l(6),void 0!==g.current&&clearTimeout(g.current),n){var r=setTimeout((function(){l(3),g.current=void 0}),3e3);g.current=Number(r)}}}),[n,t,a]);var m=-c-d,b=d>0?-1*d:void 0,j=h.slice(m,b),x=(0,i.useCallback)((function(){var e=h.length-c>-1?h.length-c:0;if(d<e){l(6),f((function(e){return e+1})),void 0!==g.current&&clearTimeout(g.current);var n=setTimeout((function(){l(3),f(0),g.current=void 0}),1e4);g.current=Number(n)}}),[c,d,h]);return(0,r.jsx)("div",{className:Ve()({"console p-1":!0,"position-absolute":!0===e.connected,"mw-50":!0===e.connected}),children:j.map((function(e,n){var t,i=Ve()(sr(sr({"app-sm-fs-xx-small":!0},e.css?((t={})[e.css]=!0,t):{}),{"correct-color":e.lvl===y.DEBUG,"question-color":e.lvl===y.WARN,"incorrect-color":e.lvl===y.ERROR}));return(0,r.jsx)("div",{className:i,onClick:x,children:e.msg},"".concat(e.msg," ").concat(e.lvl))}))})}ur.propTypes={connected:or().bool,messages:or().array};var dr=t(9041);function fr(){var e=(0,o.v9)((function(e){return e.global.swipeThreshold})),n=(0,o.v9)((function(e){return e.kanji}),(function(e,n){return e.version===n.version})).value,t=(0,o.v9)((function(e){return e.vocabulary}),(function(e,n){return e.version===n.version})).value,r=(0,o.v9)((function(e){return e.kanji.setting}),(function(e,n){return e.repTID===n.repTID})).repetition,a=(0,o.v9)((function(e){var n=e.kanji.setting;return[n.reinforce,n.filter,n.choiceN]}),o.wU),s=a[0],c=a[1],l=a[2],u=(0,o.v9)((function(e){return e.kanji.setting.activeTags}),o.wU),d=(0,i.useRef)(s);d.current=s;var f=(0,i.useRef)(c);return f.current=c,{repetition:r,swipeThreshold:e,kanjiList:n,vocabList:t,activeTags:u,choiceN:l,reinforce:d,filterType:f}}function vr(e){var n,t=Ve()(((n={})[e.addlStyle]=!0,n["d-flex flex-column justify-content-around text-center h-100"]=!0,n));return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{children:"Awaiting data ..."})})}vr.propTypes={addlStyle:or().string};var hr=t(5529),pr=t(7625),gr=t(1436);function mr(){var e=(0,i.useState)(!0),n=e[0],t=e[1];return function(){return t(!n)}}function br(){var e=(0,i.useState)({width:void 0,height:void 0}),n=e[0],t=e[1];return(0,i.useEffect)((function(){var e=window;function n(){t({width:e.innerWidth,height:e.innerHeight})}return e.addEventListener("resize",n),n(),function(){return e.removeEventListener("resize",n)}}),[]),n}function jr(e,n){return function(){(n||"function"==typeof n)&&e(n)}}function xr(e,n,t){return function(r){e(t?n(t):r instanceof Object&&"_reactName"in r?n():r?n(r):n())}}function yr(e){var n=e.active,t=e.toggle,i=e.toggleFurigana,a=e.vocabulary;return!1===e.visible?null:(0,r.jsx)("div",{className:Ve()({clickable:n,"sm-icon-grp":!0,"sm-kanji":n}),onClick:n?function(){return i(a.uid)}:void 0,"aria-label":"Toggle furigana",children:n?(0,r.jsxs)("ruby",{children:["漢",(0,r.jsx)("rt",{className:Ve()({"disabled disabled-color":!t}),children:"ふりがな"})]}):(0,r.jsx)("span",{className:"disabled disabled-color",children:"あ"})})}function wr(e){var n=(0,i.useRef)(0),t=e.addFrequencyTerm,a=e.removeFrequencyTerm,o=e.toggle,s=e.term,c=e.count,l=void 0===c?n.current:c,u=mr(),d=n.current===l;return(0,i.useEffect)((function(){n.current=void 0!==l?l:0,!1===d&&u()}),[l,d,u]),!1===e.visible?null:(0,r.jsxs)("div",{"aria-label":o?"Remove term":"Add term",className:"sm-icon-grp clickable",onClick:function(){o?a(s.uid):t(s.uid)},children:[o?(0,r.jsx)(hr.oOx,{size:"small"}):(0,r.jsx)(hr.wl8,{size:"small"}),void 0!==l&&l>-1&&(0,r.jsx)("span",{className:Ve()({notification:!0,"notification-fade":d}),children:l})]})}yr.propTypes={visible:or().bool,active:or().bool,toggle:or().bool,toggleFurigana:or().func,hasFurigana:or().bool,vocabulary:or().object},wr.propTypes={visible:or().bool,active:or().bool,addFrequencyTerm:or().func,removeFrequencyTerm:or().func,toggle:or().bool,term:or().object,count:or().number};var kr=(0,i.memo)(wr);function Nr(e){var n=e.active,t=e.setShowHint;return e.visible?(0,r.jsx)("div",{className:Ve()({"sm-icon-grp":!0,clickable:n,"disabled disabled-color":!n}),onClick:n?function(){t(!0),setTimeout((function(){t(!1)}),1500)}:void 0,"aria-label":n?"Show hint":"Hint unavailable",children:(0,r.jsx)(hr.OgN,{size:"small"})}):null}function Sr(e){var n=e.toggleAutoVerbView,t=e.autoVerbView;return e.visible?(0,r.jsx)("div",{className:"sm-icon-grp clickable",onClick:function(){return n()},"aria-label":"Toggle auto verb view",children:(0,r.jsx)(pr.G,{icon:t?gr.gPx:gr.Bxq})}):null}function Tr(e){var n=e.active,t=e.action;return!1===e.visible?null:(0,r.jsx)("div",{className:Ve()({clickable:!0,"sm-icon-grp":!0,"disabled-color":n}),onClick:function(){"function"==typeof t&&t()},"aria-label":"Override audio",children:(0,r.jsx)(pr.G,{icon:gr.TZC})})}function Cr(e){var n=e.action,t=e.toggle;return!1===e.visible?null:(0,r.jsxs)("div",{"aria-label":"Toggle practice side",children:[(0,r.jsx)(pr.G,{className:"clickable",onClick:n,icon:t?gr.dzc:gr.UJf}),(0,r.jsx)("span",{className:"notification",children:(0,r.jsx)(pr.G,{icon:t?gr.UJf:gr.dzc})})]})}function Ar(e){var n=e.action,t=e.toggle;return e.visible?(0,r.jsx)("div",{className:Ve()({clickable:!0,"sm-icon-grp":!0,"info-color":t}),onClick:function(){"function"==typeof n&&n()},"aria-label":"Literal english translation",children:(0,r.jsx)(hr.Rg1,{size:"small"})}):null}function Rr(e){return e.visible?(0,r.jsx)("div",{children:(0,r.jsx)(pr.G,{icon:gr.RJo})}):null}function Er(e){return e.visible?(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("div",{className:"sm-icon-grp",onClick:function(){"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onIncorrect&&e.onIncorrect()},children:(0,r.jsx)("span",{className:Ve()({"border-bottom":"incorrect"===e.hover}),children:"-1"})},0),(0,r.jsx)("div",{className:"sm-icon-grp",onClick:function(){"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onPronunciation&&e.onPronunciation()},children:(0,r.jsx)("span",{className:Ve()({"border-bottom":"pronunciation"===e.hover||"reset"!==e.hover&&!0===e.prevMissPronu}),children:"P"})},1),(0,r.jsx)("div",{className:"sm-icon-grp",onClick:function(){"function"==typeof e.onClick&&e.onClick(),"function"==typeof e.onReset&&e.onReset()},children:(0,r.jsx)("span",{className:Ve()({"border-bottom":"reset"===e.hover}),children:"0"})},2)]}):null}Nr.propTypes={visible:or().bool,active:or().bool,setShowHint:or().func},Sr.propTypes={visible:or().bool,active:or().bool,toggleAutoVerbView:or().func,autoVerbView:or().bool},Tr.propTypes={visible:or().bool,active:or().bool,action:or().func},Cr.propTypes={visible:or().bool,active:or().bool,toggle:or().bool,action:or().func},Ar.propTypes={visible:or().bool,active:or().bool,toggle:or().bool,action:or().func},Rr.propTypes={visible:or().bool},Er.propTypes={visible:or().bool,hover:or().string,onClick:or().func,onIncorrect:or().func,onPronunciation:or().func,onReset:or().func,prevMissPronu:or().bool};var Or=t(6914);function Mr(e){return(0,r.jsx)(Or.Z,{size:"small",color:e.color,"aria-label":e.ariaLabel,sx:{color:e.color?void 0:"unset"},onClick:e.action,children:e.children})}Mr.propTypes={action:or().func.isRequired,color:or().string,ariaLabel:or().string.isRequired,children:or().object.isRequired};const Pr=Mr;var Fr=function(){return Fr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Fr.apply(this,arguments)},Dr=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function Lr(e){var n=(0,i.useReducer)((function(e,n){return Fr(Fr({},e),n)}),{showMeaning:!1,incorrect:[],correct:!1}),t=n[0],a=n[1],o=function(){a({showMeaning:!1,correct:!1,incorrect:[]})},s=e.question,c=e.choices,l=void 0!==s.english?"[English]":"";return void 0===e.hint?t.showMeaning&&s.english&&(l=s.english):l=t.showMeaning&&s.english?s.english:e.hint,(0,r.jsx)("div",{className:"pick4game main-panel h-100",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:function(){o(),e.gotoPrev()},children:(0,r.jsx)(hr.wyc,{size:16})}),(0,r.jsxs)("div",{className:Ve()({"question d-flex flex-column justify-content-center text-center w-50":!0}),children:[(0,r.jsx)("h1",{children:s.toHTML(t.correct)}),(0,r.jsx)("span",{className:Ve()({invisible:!e.qRomaji}),children:s.romaji}),void 0!==l&&(0,r.jsx)("span",{className:"clickable",onClick:function(){a({showMeaning:!t.showMeaning})},children:l})]}),(0,r.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-50",children:c.map((function(n,i){var s=e.isCorrect(c[i])&&t.correct,l=t.incorrect.includes(i),u=Ve()({"w-50 h-50 pt-3 d-flex flex-column justify-content-evenly text-center clickable":!0,"correct-color":s,"incorrect-color":l});return(0,r.jsx)("div",{className:u,onClick:function(){!function(n,r){e.isCorrect(n)?(a({correct:!0,showMeaning:!0}),setTimeout((function(){o(),e.gotoNext()}),1e3)):2===t.incorrect.length?(a({incorrect:Dr(Dr([],t.incorrect,!0),[r],!1),correct:!0,showMeaning:!0}),setTimeout((function(){o(),e.gotoNext()}),1e3)):a({incorrect:Dr(Dr([],t.incorrect,!0),[r],!1)})}(n,i)},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{children:n.toHTML()}),s&&(0,r.jsx)("div",{children:n.english}),(0,r.jsx)("span",{className:Ve()({invisible:!e.aRomaji}),children:n.romaji})]})},i)}))}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:function(){o(),e.gotoNext()},children:(0,r.jsx)(hr.XCv,{size:16})})]})},0)}Lr.propTypes={question:or().object,hint:or().string,isCorrect:or().func.isRequired,choices:or().array,gotoNext:or().func.isRequired,gotoPrev:or().func.isRequired,qRomaji:or().bool,aRomaji:or().bool};const qr=Lr;var Ir=function(){return Ir=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ir.apply(this,arguments)},Gr=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function Vr(e){var n=(0,i.useReducer)((function(e,n){return Ir(Ir({},e),n)}),{showMeaning:!1,incorrect:[],correct:-1}),t=n[0],a=n[1],o=(0,i.useCallback)((function(){a({showMeaning:!1,correct:-1,incorrect:[]})}),[a]),s=e.isCorrect,c=e.choices,l=e.gotoNext,u=e.gotoPrev,d=(0,i.useCallback)((function(){o(),u()}),[o,u]),f=(0,i.useCallback)((function(){o(),l()}),[o,l]),v=Ve()({"pickXgame main-panel h-100":!0});return(0,r.jsx)("div",{className:v,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:d,children:(0,r.jsx)(hr.wyc,{size:16})}),(0,r.jsx)("div",{className:"choices d-flex justify-content-around flex-wrap w-100",children:c.map((function(e,n){return i=n,u=c.length,d=t.incorrect.includes(i),f=t.correct===i,v=Ve()({clickable:!0,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":f,"incorrect-color":d}),h=Ve()({"mb-0":!0}),p=Math.trunc(1/Math.ceil(Math.sqrt(u))*.75*100)+"%",(0,r.jsx)("div",{onClick:function(){return function(e,n){var r=s(e),i=r[0],c=r[1];i?(a({correct:n,showMeaning:!0}),setTimeout((function(){o(),l()}),1e3)):2===t.incorrect.length?(a({incorrect:Gr(Gr([],t.incorrect,!0),[n],!1),correct:c,showMeaning:!0}),setTimeout((function(){o(),l()}),2500)):a({incorrect:Gr(Gr([],t.incorrect,!0),[n],!1)})}(c[i],i)},className:v,style:{width:p},children:(0,r.jsx)("h2",{className:h,children:c[i].toHTML()})},i);var i,u,d,f,v,h,p}))}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:f,children:(0,r.jsx)(hr.XCv,{size:16})})]})},0)}Vr.propTypes={question:or().object,isCorrect:or().func.isRequired,choices:or().array,gotoNext:or().func.isRequired,gotoPrev:or().func.isRequired};var Ur=t(2409),_r=t(8301),Hr=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Wr="/kanji-grid/";function Kr(){var e,n=(0,o.I0)(),t=fr(),a=t.kanjiList,s=t.activeTags,c=t.repetition,l=t.filterType,u=t.reinforce,d=t.choiceN;(0,i.useEffect)((function(){0===a.length&&n(Q())}),[]);var f=(0,i.useRef)(c);f.current=c;var v=(0,i.useState)([]),h=v[0],p=v[1],g=(0,i.useState)(0),m=g[0],b=g[1],j=(0,i.useState)(void 0),x=j[0],y=j[1],k=(0,i.useRef)(""),N=(0,i.useState)(!1),S=N[0],T=N[1],C=(0,i.useRef)([]),A=(0,i.useState)(null),R=A[0],E=A[1],O=(0,i.useMemo)((function(){if(0===a.length)return[];if(0===Object.keys(f.current).length&&0===s.length)return a;var e=Object.keys(f.current).reduce((function(e,n){return!0===f.current[n].rein&&(e=Hr(Hr([],e,!0),[n],!1)),e}),[]),n=kn(l.current,a,e,l.current===w.TAGS?s:[],(function(){}));if(u.current&&l.current===w.TAGS){var t=n.map((function(e){return e.uid})),r=a.filter((function(n){return e.includes(n.uid)&&!t.includes(n.uid)}));n=Hr(Hr([],n,!0),r,!0)}var i=n.reduce((function(e,n){var t;return!0===(null===(t=f.current[n.uid])||void 0===t?void 0:t.rein)?Hr(Hr([],e,!0),[n.uid],!1):e}),[]);return p(i),n}),[a,s,u,l]),M=(0,i.useMemo)((function(){return Ln(O)}),[O]),P=(0,i.useCallback)((function(){var e=O.length;b((m+1)%e),y(void 0),E(null)}),[O,m]),F=(0,i.useCallback)((function(){xn(u.current,l.current,h,O,f.current,x,(function(e){y(e)}),P)}),[h,O,x,P,u,l]),D=(0,i.useCallback)((function(){var e=O.length;b(x?m:(e+(m-1))%e),y(void 0),E(null)}),[O,m,x]),L=(0,i.useRef)(-1),q=function(){var e=(0,i.useState)(""),n=e[0],t=e[1],a=(0,i.useState)({w:0,h:0}),o=a[0],s=a[1],c=br(),l=(0,Ur.YF)({placement:"bottom",middleware:[(0,_r.cv)({mainAxis:void 0===c.height?0:c.height/2-o.h,crossAxis:0}),(0,_r.uY)()]}),u=l.x,d=l.y,f=l.strategy,v=l.refs,h=l.update;return(0,i.useEffect)((function(){var e,t,r=null===(e=v.floating.current)||void 0===e?void 0:e.clientWidth,i=null===(t=v.floating.current)||void 0===t?void 0:t.clientHeight;n.length>0&&r&&r>0&&i&&i>0&&(s({w:r,h:i}),h())}),[n,s,v.floating,h]),{blastEl:(0,r.jsx)("div",{ref:v.setFloating,style:{position:f,top:null!=d?d:0,left:null!=u?u:0,width:"max-content",fontWeight:"bold",fontSize:"xxx-large"},className:Ve()({"dark-mode-color":!0,"notification-fade":n.length>0}),children:n}),anchorElRef:v.setReference,text:n,setText:t}}(),I=q.blastEl,G=q.anchorElRef,V=q.text,U=q.setText,_=(0,i.useCallback)((function(e){p((function(n){return Hr(Hr([],n,!0),[e],!1)})),n(te(e))}),[n]),H=(0,i.useCallback)((function(e){p((function(n){return n.filter((function(n){return n!==e}))})),n(re(e))}),[n]);if(0===M.length)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var W,K=wn(x||yn(m,O,M),a);k.current!==K.uid?(k.current=K.uid,C.current=function(e,n,t,r){for(var i=[t],a=function(){var e=Math.floor(Math.random()*r.length),t=r[e];i.every((function(e){return e[n]!==t[n]}))&&(i=Hr(Hr([],i,!0),[t],!1))};i.length<e;)a();return He(i),i}(d,"english",K,a),W=Xr(K.english)):W=null!=R?R:Xr(K.english);var z=function(e,n,t){return function(){if(null==e?void 0:e.english.includes(",")){for(var r=Xr(e.english);r===n;)r=Xr(e.english);t(r)}}}(K,W,E),B=function(e,n,t,i){var a=i[0],o=i[1],s=e.english,c=e.kanji,l=e.on,u=e.kun,d=e.uid,f=a!==s;return{question:{toHTML:function(e){return t?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:Ve()({"correct-color":e}),children:(0,r.jsx)("span",{children:c})}),(void 0!==l||void 0!==u)&&(0,r.jsxs)("div",{className:Ve()({"d-flex flex-column mt-3 h4":!0,"transparent-color":!e,"correct-color":e}),children:[(0,r.jsx)("span",{children:l}),(0,r.jsx)("span",{children:u})]})]}):(0,r.jsx)("div",{onClick:f?o:void 0,children:a+(f?"...":"")})}},answer:d,choices:n.map((function(e){return{compare:e.uid,toHTML:function(n){return(null!=n?n:t)?e.english:e.kanji}}}))}}(K,C.current,S,[W,z]),Y=function(e,n,t,r,i){return function(a){var o=a.compare===(null==n?void 0:n.answer),s=(null==n?void 0:n.choices.findIndex((function(e){return e.compare===(null==n?void 0:n.answer)})))||-1;return o||(i.current>-1&&t.length>0?(clearTimeout(i.current),r(""),setTimeout((function(){return r(a.toHTML(!e))}),100)):(r(a.toHTML(!e)),i.current=window.setTimeout((function(){return r("")}),2500))),[o,s]}}(S,B,V,U,L),X=K&&!0===(null===(e=c[K.uid])||void 0===e?void 0:e.rein),Z=(m+1)/O.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"tooltip-anchor",ref:G}),I,(0,r.jsx)(Vr,{question:B.question,isCorrect:Y,choices:B.choices,gotoPrev:D,gotoNext:F}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start",children:(0,r.jsx)(ir.rU,{to:S?Wr:Yr.location,children:(0,r.jsx)(Cr,{toggle:S,action:jr(T,(function(e){return!e}))})})})}),(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)(Rr,{visible:X&&K.uid!==O[M[m]].uid})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)("span",{children:B.question.toHTML(!1)}),(0,r.jsx)(kr,{addFrequencyTerm:_,removeFrequencyTerm:H,toggle:X,term:K})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:"determinate",value:Z,color:X?"secondary":"primary"})})]})}var zr=function(){return zr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},zr.apply(this,arguments)},Br=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Yr={location:"/kanji-game/",label:"Kanji Game"};function Xr(e){var n=e,t=e.split(",");if(t.length>1){var r=t[Math.floor(Math.random()*t.length)].trim();n=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}return n}function Qr(){var e,n=(0,o.I0)(),t=fr(),a=t.kanjiList,s=t.activeTags,c=t.repetition,l=t.filterType,u=t.reinforce;(0,i.useEffect)((function(){0===a.length&&n(Q())}),[]);var d=(0,i.useRef)(c);d.current=c;var f=(0,i.useState)([]),v=f[0],h=f[1],p=(0,i.useState)(0),g=p[0],m=p[1],b=(0,i.useState)(void 0),j=b[0],x=b[1],y=(0,i.useMemo)((function(){if(0===a.length)return[];if(0===Object.keys(d.current).length&&0===s.length)return a;var e=Object.keys(d.current).reduce((function(e,n){return!0===d.current[n].rein&&(e=Br(Br([],e,!0),[n],!1)),e}),[]),n=kn(l.current,a,e,l.current===w.TAGS?s:[],(function(){}));if(u.current&&l.current===w.TAGS){var t=n.map((function(e){return e.uid})),r=a.filter((function(n){return e.includes(n.uid)&&!t.includes(n.uid)}));n=Br(Br([],n,!0),r,!0)}var i=n.reduce((function(e,n){var t;return!0===(null===(t=d.current[n.uid])||void 0===t?void 0:t.rein)?Br(Br([],e,!0),[n.uid],!1):e}),[]);return h(i),n}),[a,s,u,l]),k=(0,i.useMemo)((function(){return Ln(y)}),[y]),N=(0,i.useCallback)((function(){var e=y.length;m((g+1)%e),x(void 0)}),[y,g]),S=(0,i.useCallback)((function(){xn(u.current,l.current,v,y,d.current,j,(function(e){x(e)}),N)}),[v,y,j,N,u,l]),T=(0,i.useCallback)((function(){var e=y.length;m(j?g:(e+(g-1))%e),x(void 0)}),[y,g,j]),C=(0,i.useCallback)((function(e){h((function(n){return Br(Br([],n,!0),[e],!1)})),n(te(e))}),[n]),A=(0,i.useCallback)((function(e){h((function(n){return n.filter((function(n){return n!==e}))})),n(re(e))}),[n]);if(0===k.length)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var R=wn(j||yn(g,y,k),a),E=R&&!0===(null===(e=c[R.uid])||void 0===e?void 0:e.rein),O=function(e,n){var t=e.uid,i=e.kanji,a=e.on,o=e.kun,s=function(e,n){for(var t=function(e){return e.split(",").map((function(e){return e.trim()}))},r=[zr(zr({},e),{english:Xr(e.english)})],i=t(e.english);r.length<4;){var a=n[Math.floor(Math.random()*n.length)],o=t(a.english);o.every((function(e){return i.every((function(n){return n!==e}))}))&&o.every((function(e){return r.every((function(n){return e!==n.english}))}))&&(r=Br(Br([],r,!0),[zr(zr({},a),{english:Xr(a.english)})],!1))}return He(r),r}(e,n);return{question:{toHTML:function(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:Ve()({"correct-color":e}),children:(0,r.jsx)("span",{children:i})}),(void 0!==a||void 0!==o)&&(0,r.jsxs)("div",{className:Ve()({"d-flex flex-column mt-3 h4":!0,invisible:!e,"correct-color":e}),children:[(0,r.jsx)("span",{children:a}),(0,r.jsx)("span",{children:o})]})]})}},answer:t,choices:s.map((function(e){return{compare:e.uid,toHTML:function(){return e.english}}}))}}(R,a),M=(g+1)/y.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(qr,{question:O.question,isCorrect:function(e){return e.compare===O.answer},choices:O.choices,gotoPrev:T,gotoNext:S}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start",children:(0,r.jsx)(ir.rU,{to:Wr,children:(0,r.jsx)(Cr,{toggle:!0,action:function(){}})})})}),(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)(Rr,{visible:E&&R.uid!==y[k[g]].uid})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-end",children:(0,r.jsx)(kr,{addFrequencyTerm:C,removeFrequencyTerm:A,toggle:E,term:R})})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:"determinate",value:M,color:E?"secondary":"primary"})})]})}var Zr=function(){return Zr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Zr.apply(this,arguments)},Jr=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},$r={location:"/opposites/",label:"Opposites Game"};function ei(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.opposite}),(function(e,n){return e.version===n.version})).value,t=(0,o.v9)((function(e){var n=e.opposite;return[n.qRomaji,n.aRomaji]}),o.wU),a=t[0],s=t[1];(0,i.useEffect)((function(){0===n.length&&e(fe())}),[]);var c=(0,i.useMemo)((function(){return 0===n.length?[]:Ln(n)}),[n]),l=(0,i.useState)(0),u=l[0],d=l[1];if(0===c.length)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var f=function(e,n,t){for(var i=e[n[t]],a=i[0],o=i[1],s=rn.parse(a),c=rn.parse(o),l=Zr(Zr({},a),{toHTML:function(e){return(0,r.jsx)("span",{className:Ve()({"correct-color":e}),children:s.toHTML()})}}),u=Zr(Zr({},o),{compare:o.japanese,toHTML:function(){return c.toHTML()}}),d=[u],f=[u.romaji,l.romaji],v=function(){var n=Math.floor(Math.random()*e.length),t=e[n],r=t[0],i=t[1];if(!f.includes(r.romaji)&&!f.includes(i.romaji))if(0===Math.floor(2*Math.random())){var a=rn.parse(r);d=Jr(Jr([],d,!0),[Zr(Zr({},r),{compare:r.japanese,toHTML:function(){return a.toHTML()}})],!1),f=Jr(Jr([],f,!0),[r.romaji],!1)}else{var o=rn.parse(i);d=Jr(Jr([],d,!0),[Zr(Zr({},i),{compare:i.japanese,toHTML:function(){return o.toHTML()}})],!1),f=Jr(Jr([],f,!0),[i.romaji],!1)}};d.length<4;)v();return He(d),{question:l,answer:u,choices:d}}(n,c,u),v=(u+1)/n.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(qr,{question:f.question,isCorrect:function(e){return e.compare===f.answer.compare},choices:f.choices,qRomaji:a,aRomaji:s,gotoPrev:function(){var e=n.length,t=u-1;d(t<0?(e+t)%e:t%e)},gotoNext:function(){var e=n.length;d((u+1)%e)}},0),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:"determinate",value:v})},1)]})}var ni=function(){return ni=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ni.apply(this,arguments)},ti=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},ri={location:"/particles/",label:"Particles Game"};function ii(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.particle.particleGame})),t=n.phrases,a=n.particles;(0,i.useEffect)((function(){0===t.length&&e(Mt())}),[]);var s=(0,i.useRef)([]),c=(0,i.useState)(0),l=c[0],u=c[1],d=function(e,n,t){var i=n.start,a=n.end,o=t?"correct-color":"transparent-font underline";return function(e,n,t,i){var a=e.kanjis,o=e.furiganas,s=e.okuriganas,c=e.startsWKana;void 0===i&&(i=t+1);var l=n.shown,u=n.hidden,d=function(e,n,t){var r=e.kanjis,i=e.furiganas,a=e.okuriganas,o=e.startsWKana;void 0===t&&(t=n+1);var s=t-n;i.length>a.length?a=Je(Je([],a,!0),[""],!1):i.length<a.length&&(r=Je(Je([],r,!0),[""],!1),i=Je(Je([],i,!0),[""],!1));var c=en({kanjis:r,furiganas:i,okuriganas:a,startsWKana:o}),l=[0];return c.map((function(e,r){var i=e.k,a=e.o,c=0,u=0;if(l=Je(Je([],l,!0),[l[r]+i+a],!1),o){if(l[r]+a>n)if(l[r]+a<t){var d=n-(l[r]+a);u=Math.min.apply(Math,[a,Math.abs(d)]),s-=u}else u=s,s=0;l[r]+a+i>n&&(l[r]+a+i<t?(d=n-(l[r]+a+i),c=Math.min.apply(Math,[i,Math.abs(d)]),s-=c):(c=s,s=0))}else l[r]+i>n&&(l[r]+i<t?(d=n-(l[r]+i),c=Math.min.apply(Math,[i,Math.abs(d)]),s-=c):(c=s,s=0)),l[r]+i+a>n&&(l[r]+i+a<t?(d=n-(l[r]+i+a),u=Math.min.apply(Math,[a,Math.abs(d)]),s-=u):(u=s,s=0));return{k:c,f:0,o:u}}))}({kanjis:a,furiganas:o,okuriganas:s,startsWKana:c},t,i);o.length>s.length?s=Je(Je([],s,!0),[""],!1):o.length<s.length&&(a=Je(Je([],a,!0),[""],!1),o=Je(Je([],o,!0),[""],!1));var f=function(e,n,t){return void 0===t&&(t=1),n?[(0,r.jsx)("span",{className:e,children:n},t)]:[]},v=function(e,n,r,i){var a=[],o=[],s=e.length;if(s>0)if(0===n)o=f(l,e);else if(n===s)a=f(u,e),r-=s;else if(n<s)if(r<n)a=f(u,e.slice(0,n)),o=f(l,e.slice(n-s)),r=0;else if(r===n){var c=i,d=t-c,v=d+r,h=f(l,e.slice(0,d),c+1),p=f(u,e.slice(d,v),c+2),g=f(l,e.slice(v,s),c+3);o=Je(Je(Je([],h,!0),p,!0),g,!0),r=0}else r>n&&(o=f(l,e.slice(0,n)),a=f(u,e.slice(n-s)),r-=n);return{s:o,h:a,spliceLen:r}},h=i-t,p=[0],g=d.map((function(e,n){var t,r,i,u,d=a[n].length,g=s[n].length;p=Je(Je([],p,!0),[p[n]+g+d],!1),i=(t=v(a[n],e.k,h,p[n]+(c?g:0))).s,u=t.h,h=t.spliceLen;var m,b,j=f(l,o[n]);return m=(r=v(s[n],e.o,h,p[n]+(c?0:d))).s,b=r.h,h=r.spliceLen,tn(n,{sk:i,hk:u},{sf:j,hf:[]},{so:m,ho:b},c)}));return(0,r.jsx)("span",{className:"decorated",children:g})}(e.parseObj,{hidden:o},i,a)},f=(0,o.v9)((function(e){return e.particle.setting.aRomaji})),v=function(e,n,t){if(0!==n.length&&0!==t.length){0===s.current.length&&(s.current=Ln(n));var r=n[s.current[e]],i=r.answer,a=r.question,o=r.english,c=r.literal,l=ni(ni({},i),{toHTML:function(){return i.html}});t=t.map((function(e){return ni(ni({},e),{toHTML:function(){return e.html}})}));var u=function(e,n){for(var t=[e],r=function(){var e=Math.floor(Math.random()*n.length),r=n[e];t.every((function(e){return e.japanese!==r.japanese}))&&(t=ti(ti([],t,!0),[r],!1))};t.length<4;)r();return He(t),t}(l,t);return{question:{english:o,toHTML:function(e){return d(rn.parse(a),l,e)}},answer:l,choices:u,literal:c}}}(l,t,a);if(void 0===v)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var h=(l+1)/t.length*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(qr,{question:v.question,isCorrect:function(e){return e.japanese===v.answer.japanese},hint:v.literal,choices:v.choices,aRomaji:f,gotoPrev:function(){var e=t.length,n=l-1;u(n<0?(e+n)%e:n%e)},gotoNext:function(){var e=t.length;u((l+1)%e)}},0),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:"determinate",value:h})},1)]})}var ai=function(){return ai=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ai.apply(this,arguments)},oi=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},si={location:"/kana/",label:["平仮名 Game","片仮名 Game","仮名 Game"]};function ci(){var e=function(){var e=(0,o.v9)((function(e){return e.global.debug})),n=(0,o.v9)((function(e){var n=e.kana;return[n.hiragana,n.katakana,n.vowels,n.consonants,n.sounds]}),(function(){return!0})),t=n[0],r=n[1],i=n[2],a=n[3],s=n[4],c=(0,o.v9)((function(e){var n=e.kana.setting;return[n.wideMode,n.easyMode,n.charSet,n.choiceN]}),o.wU),l=c[0],u=c[1],d=c[2],f=c[3];return{debug:e,hiragana:t,katakana:r,vowels:i,consonants:a,sounds:s,choiceN:l?31:f,wideMode:l,easyMode:u,charSet:d}}(),n=e.hiragana,t=e.katakana,a=e.vowels,s=e.consonants,c=e.sounds,l=e.choiceN,u=e.wideMode,d=e.easyMode,f=e.charSet,v=(0,i.useRef)(a),h=(0,i.useRef)(s),p=(0,i.useRef)(c),g=(0,i.useRef)(n),m=(0,i.useRef)(t),b=(0,i.useRef)(u),j=(0,i.useRef)(d),x=(0,i.useRef)(l),y=(0,i.useState)(0),w=y[0],k=y[1],S=(0,i.useState)([]),T=S[0],C=S[1],A=(0,i.useState)(!1),R=A[0],E=A[1],O=function(e){var n=e.charSet,t=e.choiceN,r=e.wideMode,a=e.vowelsR,o=e.consonantsR,s=e.soundsR,c=e.hiraganaR,l=e.katakanaR,u=e.practiceSide,d=e.reinforce,f=e.selectedIndex,v=(0,i.useState)("undefined"),h=v[0],p=v[1],g=(0,i.useState)({val:"",hint:"",cSet:N.HIRAGANA}),m=g[0],b=g[1],j=(0,i.useState)([]),x=j[0],y=j[1],w=(0,i.useState)([]),k=w[0],S=w[1],T=(0,i.useState)([]),C=T[0],A=T[1],R=(0,i.useState)(!1),E=R[0],O=R[1],M=(0,i.useCallback)((function(){var e,i,v,h=c.current,g=l.current;e=k.length>0?k:function(e){for(var n=[],t=e[0].length,r=e.length,i=0;i<t;i++)for(var a=0;a<r;a++)1==i&&12==a||3==i&&12==a||2==i&&14==a||0!==i&&15==a||(n=oi(oi([],n,!0),[{vowel:i,consonant:a}],!1));return He(n),n}(h);var m=Math.random()<1/3,j=function(e){var n=e.vowels,t=e.consonants,r=e.sounds;return function(e,i){var a=t[e]+n[i];return r[a]||a}}({vowels:a.current,consonants:o.current,sounds:s.current}),x=function(e){var n=e.hiragana,t=e.katakana;return function(e,r,i){return i===N.HIRAGANA?n[e][r]:t[e][r]}}({hiragana:h,katakana:g});if(m&&d.length>0){var w=d[d.length-1];if(u===w.practiceSide)v=w;else{var T=w.val;v={val:w.hint,hint:T,cSet:w.cSet}}}else{var C=e[f],R=C.consonant,E=C.vowel,M=li(n),P=j(R,E),F=x(R,E,M);v=u?{val:F,hint:P,cSet:M}:{val:P,hint:F,cSet:M}}i=v.hint;var D=function(e,n,t){for(var r=e.getPronunciation,i=e.getKanaCharacter,a=e.charSet,o=e.choiceN,s=[n],c=e.practiceSide,l=function(){var e,n=t.length,o=Math.floor(Math.random()*(n-0)+0),l=li(a),u=r(t[o].consonant,t[o].vowel),d=i(t[o].consonant,t[o].vowel,l);e=c?{val:d,hint:u,cSet:l}:{val:u,hint:d,cSet:l},(c&&!s.some((function(n){return n.hint===e.hint}))||!c&&!s.some((function(n){return n.val===e.val})))&&(s=oi(oi([],s,!0),[e],!1))};s.length<o;)l();return He(s),s}({getPronunciation:j,getKanaCharacter:x,charSet:n,choiceN:t,practiceSide:u},v,e);r&&(D=oi(oi([],D,!0),[{val:i,hint:i,cSet:v.cSet,q:!0}],!1)),p(i),b(v),y(D),S(e),A([]),O(!1)}),[n,k,o,a,s,c,l,u,d,f,r,t]);return{prepareGame:M,setWrongs:A,setCorrect:O,answer:m,correct:E,wrongs:C,question:h,choices:x,gameOrder:k}}({charSet:f,choiceN:x.current,wideMode:b.current,practiceSide:R,reinforce:T,selectedIndex:w,vowelsR:v,consonantsR:h,soundsR:p,hiraganaR:g,katakanaR:m}),M=O.prepareGame,P=O.setWrongs,F=O.setCorrect,D=O.answer,L=O.correct,q=O.question,I=O.wrongs,G=O.choices,V=O.gameOrder,U=(0,i.useCallback)((function(){var e=V.length;k((w+1)%e),P([]),F(!1)}),[F,P,V,w]),_=(0,i.useCallback)((function(){var e=V.length,n=w-1;k(n<0?(e+n)%e:n%e),P([]),F(!1)}),[F,P,V,w]),H=function(e){var n=e.setCorrect,t=e.setWrongs,r=e.setReinforce,i=e.gotoNext,a=e.answer,o=e.choices,s=e.wrongs,c=e.reinforce,l=e.practiceSide;return function(e){if(e.val===(null==a?void 0:a.val))n(!0),setTimeout(i,500);else{var u=o.findIndex((function(n){return n.val===e.val}));t(oi(oi([],s,!0),[u],!1)),r(oi(oi([],c,!0),[ai(ai({},e),{practiceSide:l})],!1))}}}({setCorrect:F,setWrongs:P,setReinforce:C,gotoNext:U,practiceSide:R,answer:D,choices:G,wrongs:I,reinforce:T}),W=function(e){var n=e.checkAnswer,t=e.wideMode,i=e.easyMode,a=e.charSet,o=e.practiceSide,s=e.wrongs,c=e.choices,l=e.answer,u=e.correct,d=e.choiceN;return function(e){var f,v=s.includes(e),h=c[e].val===l.val&&u,p=Ve()({clickable:!c[e].q,"text-center":!0,"d-flex flex-column justify-content-center":!0,"correct-color":h||t&&c[e].q&&u,"incorrect-color":v,"question-color":t&&c[e].q&&!u}),g=Ve()({"mb-0":t}),m="d-flex justify-content-around",b=Ve()({"mb-0":!0,invisible:!v}),j=t?3/4:1,x=Math.trunc(1/Math.ceil(Math.sqrt(d))*j*100)+"%",y=!o;return f=!i||i&&!y?i&&!y&&!0!==c[e].q&&a===N.MIXED?(0,r.jsxs)("div",{className:m,children:[(0,r.jsx)("h6",{className:b,children:c[e].hint}),(0,r.jsx)("h6",{className:b,children:Xe(c[e].val)})]}):!0!==c[e].q?(0,r.jsx)("div",{className:m,children:(0,r.jsx)("h6",{className:b,children:c[e].cSet===l.cSet?c[e].hint:Xe(c[e].hint)})}):(0,r.jsx)("div",{className:m,children:(0,r.jsx)("h6",{className:"mb-0 invisible",children:Xe(c[e].val)})}):!0!==c[e].q?(0,r.jsxs)("div",{className:m,children:[(0,r.jsx)("h6",{className:b,children:c[e].cSet===N.HIRAGANA?c[e].hint:Xe(c[e].hint)}),(0,r.jsx)("h6",{className:b,children:c[e].cSet===N.HIRAGANA?Xe(c[e].hint):c[e].hint})]}):(0,r.jsx)("div",{className:m,children:(0,r.jsx)("h6",{className:"mb-0",children:Xe(c[e].val)})}),(0,r.jsxs)("div",{onClick:function(){c[e].q||n(c[e])},className:p,style:{width:x},children:[(0,r.jsx)("h2",{className:g,children:c[e].val}),f]},e)}}({checkAnswer:H,charSet:f,practiceSide:R,wrongs:I,choices:G,answer:D,correct:L,wideMode:b.current,easyMode:j.current,choiceN:x.current});if((0,i.useEffect)((function(){g.current.length>0&&M()}),[w,R,f]),!q)return(0,r.jsx)(vr,{addlStyle:"kana"});var K=Ve()({"kana main-panel h-100":!0}),z=Ve()({"choices-row d-flex justify-content-around":!0,"w-50":!b.current,"w-100":b.current});return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("div",{className:K,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:_,children:(0,r.jsx)(hr.wyc,{size:16})}),!b.current&&(0,r.jsxs)("div",{className:Ve()({"pt-3 d-flex flex-column justify-content-center text-center w-50":!0,"correct-color":L}),children:[(0,r.jsx)("h1",{className:"clickable",children:q}),j.current&&!R&&(0,r.jsx)("div",{className:"d-flex justify-content-around",children:(0,r.jsx)("h6",{children:Xe(q)})})]}),(0,r.jsx)("div",{className:z,children:(0,r.jsx)("div",{className:"choices-column w-100 d-flex flex-wrap ",children:G.map((function(e,n){return W(n)}))})}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:U,children:(0,r.jsx)(hr.XCv,{size:16})})]})}),(0,r.jsx)("div",{className:"options-bar mb-2 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(Cr,{toggle:R,action:jr(E,(function(e){return!e}))})}),(0,r.jsx)("div",{className:"col"}),(0,r.jsx)("div",{className:"col"})]})})]})}function li(e){return e===N.MIXED?Math.floor(2*Math.random()):e}var ui=t(3174),di=t.n(ui);function fi(e){var n,t=Ve()(((n={})[""+e.addlStyle]=!!e.addlStyle,n["p-0 px-2"]=!0,n["font-weight-bold"]=e.active,n));return(0,r.jsxs)("div",{className:t,onClick:e.onClick,children:[(0,r.jsx)("span",{className:"p-1",children:e.active?(0,r.jsx)(hr.oOx,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,r.jsx)(hr.wl8,{className:"clickable",size:"small","aria-label":"add"})}),(0,r.jsx)("span",{className:"p-1",children:e.children})]})}fi.propTypes={addlStyle:or().string,active:or().bool,onClick:or().func,children:or().string};var vi=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function hi(e){return e.includes("_")&&Number.isInteger(parseInt(e.split("_")[1],10))}function pi(e){var n=e.termsActive,t=e.termsTags,a=e.toggleTermActive,o=e.selectedCount;(0,i.useEffect)((function(){n.forEach((function(e){t.includes(e)||a(e)}))}),[n,t,a]);var s=di()(t,(function(e){return hi(e)})),c=s[0],l=s[1],u=Object.values(c.reduce((function(e,n){var t=n.split("_")[0];return e[t]?e[t]=vi(vi([],e[t],!0),[n],!1):e[t]=[n],e}),{})),d=vi(vi([],_e()(l),!0),u.reduce((function(e,n){var t=_e()(n,(function(e){var n=e.split("_")[1];return Number.isInteger(parseInt(n,10))?parseInt(n,10):e}));return vi(vi([],e,!0),t,!0)}),[]),!0),f=o&&o>0&&"("+o+")"||"";return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h5",{children:["Tag List ",f]},0),d.map((function(e,t){return(0,r.jsx)("div",{children:(0,r.jsx)(fi,{active:n.includes(e),onClick:function(){a(e)},children:e},t)},t+1)}))]})}pi.propTypes={termsTags:or().array,termsActive:or().array,toggleTermActive:or().func,selectedCount:or().number};var gi=function(){return gi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},gi.apply(this,arguments)},mi="slick-swipe-ignore";function bi(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()}function ji(e,n){var t,r,i,a;return void 0===n&&(n=!1),t=e.startX-e.curX,r=e.startY-e.curY,i=Math.atan2(r,t),(a=Math.round(180*i/Math.PI))<0&&(a=360-Math.abs(a)),a<=45&&a>=0||a<=360&&a>=315?"left":a>=135&&a<=225?"right":!0===n?a>=35&&a<=135?"up":"down":"vertical"}function xi(e,n){var t,r=n.touchObject,i=n.touchThreshold,a=n.verticalSwiping,o=n.onSwipe,s=i;return r.swipeLength&&(t=ji(r,a)),r.swipeLength>s&&(bi(e),o&&o(t)),gi({swipeDirection:t},n)}var yi=function(){return yi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},yi.apply(this,arguments)};function wi(e,n){var t=(0,o.v9)((function(e){return e.global.swipeThreshold})),r=(0,i.useRef)({}),a=(0,i.useRef)(null);return(0,i.useEffect)((function(){var i=function(e,n){return function(t){n.current=function(e,n){var t=void 0===n?{verticalSwiping:!1,touchThreshold:5}:n,r=t.verticalSwiping,i=t.touchThreshold;return"IMG"===e.target.tagName&&bi(e),{verticalSwiping:r,touchThreshold:i,touchObject:{startX:"touches"in e?e.touches[0].pageX:e.clientX,startY:"touches"in e?e.touches[0].pageY:e.clientY,curX:"touches"in e?e.touches[0].pageX:e.clientX,curY:"touches"in e?e.touches[0].pageY:e.clientY}}}(t,{verticalSwiping:!0,touchThreshold:e})}}(t,r),o=function(e){return function(n){e.current&&(e.current=function(e,n){var t=n.verticalSwiping,r=n.touchThreshold,i=n.swiped,a=n.swiping,o=n.touchObject,s=n.swipeEvent;o.curX="touches"in e?e.touches[0].pageX:e.clientX,o.curY="touches"in e?e.touches[0].pageY:e.clientY,o.swipeLength=Math.abs(o.curX-o.startX);var c=Math.abs(o.curY-o.startY);if(!t&&!a&&c>10)return{touchObject:o,touchThreshold:r,scrolling:!0};t&&(o.swipeLength=Math.sqrt(Math.pow(c,2)+Math.pow(o.swipeLength,2)));var l=ji(n.touchObject,t),u={touchObject:o,verticalSwiping:t,touchThreshold:r,swiped:!1,swiping:!1};return!i&&s&&(s(l),u=gi(gi({},u),{swiped:!0})),o.swipeLength>10&&(u=gi(gi({},u),{swiping:!0}),bi(e)),u}(n,e.current))}}(r),s=function(e,n,t,r){return function(i){var a,o=t,s=i.target,c=Array.from(document.getElementsByClassName("loop-stop-btn")).some((function(e){return e.contains(s)})),l=Array.from(document.getElementsByClassName("loop-no-interrupt")).some((function(e){return e.contains(s)})),u=void 0===(null===(a=e.current.touchObject)||void 0===a?void 0:a.swipeLength)||e.current.touchObject.swipeLength<e.current.touchThreshold;if(!(c||l&&u)){var d=ji(e.current.touchObject,!0);"function"==typeof r&&(o=r(d,t)),n(i,yi(yi({},e.current),{onSwipe:o}))}}}(r,xi,e,n);a.current&&(a.current.addEventListener("touchstart",i),a.current.addEventListener("touchmove",o),a.current.addEventListener("touchend",s));var c=a.current;return function(){null==c||c.removeEventListener("touchstart",i),null==c||c.removeEventListener("touchmove",o),null==c||c.removeEventListener("touchend",s)}}),[r,t,e,n]),{HTMLDivElementSwipeRef:a}}var ki=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Ni={location:"/kanji/",label:"Kanji"};function Si(){var e,n,t,a=(0,o.I0)(),s=(0,i.useCallback)((function(e){T((function(n){return ki(ki([],n,!0),[e],!1)})),a(te(e))}),[a]),c=(0,i.useCallback)((function(e){T((function(n){return n.filter((function(n){return n!==e}))})),a(re(e))}),[a]),l=fr(),u=l.kanjiList,d=l.vocabList,f=l.filterType,v=l.reinforce,h=l.activeTags,p=l.repetition;(0,i.useEffect)((function(){0===u.length&&a(Q()),0===d.length&&a($n())}),[]);var g=(0,i.useRef)(p);g.current=p;var m=(0,i.useState)(0),b=m[0],j=m[1],x=(0,i.useState)(void 0),y=x[0],k=x[1],N=(0,i.useState)([]),S=N[0],T=N[1],C=(0,i.useState)(!1),A=C[0],R=C[1],E=(0,i.useState)(!1),O=E[0],M=E[1],P=(0,i.useState)(!1),F=P[0],D=P[1],L=(0,i.useState)(!1),q=L[0],I=L[1],G=(0,i.useMemo)((function(){if(0===u.length)return[];if(0===Object.keys(g.current).length&&0===h.length)return u;var e=Object.keys(g.current).reduce((function(e,n){return!0===g.current[n].rein&&(e=ki(ki([],e,!0),[n],!1)),e}),[]),n=kn(f.current,u,e,f.current===w.TAGS?h:[],xr(a,ae)),t=n.reduce((function(e,n){var t;return!0===(null===(t=g.current[n.uid])||void 0===t?void 0:t.rein)&&(e=ki(ki([],e,!0),[n.uid],!1)),e}),[]);return T(t),n}),[a,u,f,h]),V=(0,i.useMemo)((function(){return 0===G.length?[]:Ln(G)}),[G]),U=(0,i.useCallback)((function(){var e=G.length;j((b+1)%e),k(void 0),R(!1),M(!1),D(!1),I(!1)}),[G,b]),_=(0,i.useCallback)((function(){var e=G;if(v.current&&f.current===w.TAGS){var n=Object.keys(p).reduce((function(e,n){return!0===p[n].rein&&(e=ki(ki([],e,!0),[n],!1)),e}),[]),t=u.filter((function(e){return n.includes(e.uid)}));e=ki(ki([],G,!0),t,!0)}xn(v.current,f.current,S,e,p,y,k,U)}),[U,u,G,S,y,p,v,f]),H=(0,i.useCallback)((function(){var e=G.length,n=b-1;j(n<0?(e+n)%e:n%e),k(void 0),R(!1),M(!1),D(!1),I(!1)}),[G,b]),W=wi((0,i.useCallback)((function(e){"left"===e?_():"right"===e&&H()}),[_,H])).HTMLDivElementSwipeRef;if(V.length<1)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var K=wn(y||yn(b,G,V),u),z=d.filter((function(e){return rn.parse(e).getSpelling().includes(K.kanji)&&e.english.toLowerCase()===K.english.toLowerCase()||rn.parse(e).getSpelling().includes(K.kanji)&&e.english.toLowerCase().includes(K.english.toLowerCase())&&"Verb"===e.grp||rn.parse(e).getSpelling()===K.kanji&&(e.english.toLowerCase().includes(K.english.toLowerCase())||K.english.toLowerCase().includes(e.english.toLowerCase()))})),B=[];if(z.length>0){var Y=_e()(z,(function(e){return e.english.length})),X=Y[0],Z=Y.slice(1);B=ki([X],He(Z),!0)}var J=(null===(e=K.tag.find((function(e){return h.includes(e)&&hi(e)})))||void 0===e?void 0:e.replace("_"," "))||(null===(n=K.tag.find((function(e){return hi(e)})))||void 0===n?void 0:n.replace("_"," "))||"",$=!0===(null===(t=p[K.uid])||void 0===t?void 0:t.rein),ee=B.slice(0,3).map((function(e,n,t){return(0,r.jsxs)(i.Fragment,{children:[e.english+" ",rn.parse(e).toHTML(),n<t.length-1?"; ":"",(0,r.jsx)("wbr",{})]},e.uid)})),ne=(0,r.jsx)("span",{children:K.english}),ie=(b+1)/G.length*100;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("div",{className:"kanji main-panel h-100",children:(0,r.jsxs)("div",{ref:W,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:H,children:(0,r.jsx)(hr.wyc,{size:16})}),(0,r.jsx)("div",{className:"grp-info",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:K.grp}),(0,r.jsx)("div",{children:J})]})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"pt-0",children:(0,r.jsx)("span",{children:K.kanji})}),K.on&&(0,r.jsx)("h4",{className:"pt-0",onClick:jr(R,(function(e){return!e})),children:(0,r.jsx)("span",{children:A?K.on:"[On]"})})||(0,r.jsx)("h4",{className:"pt-0",children:"."}),K.kun&&(0,r.jsx)("h4",{className:"pt-2",onClick:jr(M,(function(e){return!e})),children:(0,r.jsx)("span",{children:O?K.kun:"[Kun]"})})||(0,r.jsx)("h4",{className:"pt-2 mb-0",children:"."}),(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(0,r.jsx)("span",{className:Ve()({"example-blk align-self-center clickable h6 pt-2":!0,"disabled-color":0===ee.length}),onClick:jr(D,(function(e){return!e})),children:(0,r.jsx)("span",{className:"text-nowrap",children:F&&ee.length>0?ee:"[Examples]"})}),(0,r.jsx)("h4",{className:"align-self-center pt-2 clickable",onClick:jr(I,(function(e){return!e})),children:q?ne:(0,r.jsx)("span",{children:"[Meaning]"})})]})]}),(0,r.jsx)("div",{className:"right-info"}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:_,children:(0,r.jsx)(hr.XCv,{size:16})})]})}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-start"})}),(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)(Rr,{visible:void 0!==y&&""!==y})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"d-flex justify-content-end",children:(0,r.jsx)(kr,{addFrequencyTerm:s,removeFrequencyTerm:c,toggle:$,term:K,count:S.length})})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:"determinate",value:ie,color:$?"secondary":"primary"})})]})}var Ti=new Error("User interrupted audio playback.",{cause:{code:"UserAborted"}}),Ci=new AudioContext;function Ai(e,n){var t=Ci.createBufferSource(),r=fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return Ci.decodeAudioData(e).then((function(e){t.buffer=e,t.connect(Ci.destination),t.start()}))})),i=new Promise((function(e,r){var i=function(){t.stop(),r(Ti)};t.addEventListener("ended",(function(){null==n||n.signal.removeEventListener("abort",i),e()})),(null==n?void 0:n.signal.aborted)&&i(),null==n||n.signal.addEventListener("abort",i)}));return Promise.all([i,r])}function Ri(e,n){for(var t=e.includes("?")?e.split("?"):[e,""],r=t[0],i=t[1],a=new URLSearchParams(i),o=0,s=Object.entries(n);o<s.length;o++){var c=s[o],l=c[0],u=c[1];void 0!==u&&a.append(l,u)}return[r,a.toString()].join("?")}function Ei(e){return function(n){var t=function(t){try{Bn(t,e,n)}catch(e){Error}};return{addDeviceMotionEvent:function(){e>0&&Yn((function(){window.addEventListener("devicemotion",t)}),(function(){}))},removeDeviceMotionEvent:function(){e>0&&window.removeEventListener("devicemotion",t)}}}}function Oi(e,n,t){(0,i.useEffect)((function(){var r=function(e,n,t){return function(r){for(var i=function(n,i){if(n===r.key){var a=i;return" "!==n&&"function"==typeof t&&(a=t({ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"}[n]||"",(function(n){n?e(n):i()}))),a(),"break"}},a=0,o=[["ArrowRight",function(){return e("left")}],["ArrowLeft",function(){return e("right")}],["ArrowUp",function(){return e("up")}],["ArrowDown",function(){return e("down")}],[" ",n]];a<o.length;a++){var s=o[a];if("break"===i(s[0],s[1]))break}}}(e,n,t);return document.addEventListener("keydown",r,!0),function(){document.removeEventListener("keydown",r,!0)}}),[e,n,t])}function Mi(e){if("mediaSession"in navigator){var n=navigator.mediaSession;try{n.playbackState=e}catch(e){console.error(e)}}else console.error("mediaSession not available")}function Pi(e,n,t,r,a){(0,i.useEffect)((function(){var i,o;return i=e,void 0===o&&(o="Nmemonica App"),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:i,artist:o,album:undefined,artwork:[{src:"icon192.png",sizes:"192x192",type:"image/png"},{src:"icon512.png",sizes:"512x512",type:"image/png"}]})),function(e){if("mediaSession"in navigator){var n=navigator.mediaSession;try{for(var t=0,r=e;t<r.length;t++){var i=r[t],a=i[0],o=i[1];try{n.setActionHandler(a,o)}catch(e){console.error(e)}}}catch(e){console.error(e)}}else console.error("mediaSession not available")}([["play",function(){n&&(t(),Mi("playing"))}],["pause",function(){n&&(r(),Mi("paused"))}],["stop",function(){n&&(r(),Mi("paused"))}],["previoustrack",function(){n&&(r(),a("right"))}],["nexttrack",function(){n&&(r(),a("left"))}]]),function(){!function(){if("mediaSession"in navigator){var e=navigator.mediaSession;try{e.metadata=null,e.playbackState="none",navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("stop",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null)}catch(e){console.error(e)}}else console.error("mediaSession not available")}()}}),[e,n,t,r,a])}var Fi=t(6024),Di=function(){return Di=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Di.apply(this,arguments)};function Li(e){return e.visible?null:(0,r.jsxs)("div",{className:"loop-btn loop-setting-btn clickable","aria-label":"Loop repeat settings button",onClick:function(){e.onClick&&"function"==typeof e.onClick&&e.onClick()},children:[(0,r.jsx)(hr.reW,{className:Ve()({"rotate-135":!0,"disabled-color":!e.active}),size:"small"}),e.active&&(0,r.jsx)("span",{className:"notification",children:e.loop})]})}function qi(e){var n=e.className;return e.visible?null:(0,r.jsxs)("div",{className:Ve()(Di({"loop-btn loop-start-btn clickable":!0},n||{})),"aria-label":"Loop start button",children:[(0,r.jsx)(pr.G,{size:"sm",onClick:function(){e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:Fi.aQ}),null!=e.countDown&&(0,r.jsx)("span",{className:"notification",children:e.countDown})]})}function Ii(e){var n=e.className;return e.visible?null:(0,r.jsx)("div",{className:Ve()(Di({"loop-btn loop-stop-btn clickable":!0},n||{})),"aria-label":"Loop stop button",children:(0,r.jsx)(pr.G,{size:"sm",onClick:function(){e.onClick&&"function"==typeof e.onClick&&e.onClick()},icon:Fi.oD})})}Li.propTypes={visible:or().bool,active:or().bool,loop:or().number,onClick:or().func},qi.propTypes={visible:or().bool,onClick:or().func,className:or().object,countDown:or().number},Ii.propTypes={visible:or().bool,onClick:or().func,className:or().object};var Gi=15e3;function Vi(e,n,t){var a,o=(0,i.useRef)(void 0),s=(0,i.useRef)(null),c=(0,i.useState)(0),l=c[0],u=c[1],d=(0,i.useState)(Gi/1e3),f=d[0],v=d[1],h=(0,i.useRef)(void 0),p=(0,i.useState)(null),g=p[0],m=p[1],b=(0,i.useRef)(void 0),j=(0,i.useRef)(void 0),x=(0,i.useState)(void 0),y=x[0],w=x[1];(0,i.useEffect)((function(){var e=o;return function(){var n;null===(n=e.current)||void 0===n||n.forEach((function(e){return e.abort()}))}}),[]);var k,N=mr();0===l?k=null:0===(null===(a=o.current)||void 0===a?void 0:a.length)?k=(0,r.jsx)(Ii,{}):void 0===o.current?k=(0,r.jsx)(qi,{countDown:Array.isArray(s.current)?f:void 0,onClick:function(){if(Array.isArray(o.current));else{if(Array.isArray(s.current)){var e=s.current[0];clearInterval(e),v(Gi/1e3)}h.current=void 0,w(void 0),o.current=[],setTimeout(T,100),N()}}}):void 0!==o.current&&(k=(0,r.jsx)(Ii,{onClick:function(){C(),E(),u(0)}}));var S=(0,r.jsx)(Li,{active:l>0,loop:l,onClick:function(){var e=C();s.current=null,e&&Ui(g,m),u((function(e){var n=3===e;return h.current=n?void 0:h.current,n?0:e+1}))}});function T(){C();var e,r,i,a=new AbortController,s=new AbortController,c=new AbortController,d=new AbortController,f=new AbortController;if("function"==typeof t){var v=t((function(){void 0!==b&&(C(),E(),u(0))})),h=v.addDeviceMotionEvent,p=v.removeDeviceMotionEvent;h(),e=p}o.current=[a,s,c,d,f],n?(r=function(e){return A("down",e)},i=function(e){return zn(l,(function(){return A("up",e)}),1500,e)}):(r=function(e){return A("up",e)},i=function(e){return zn(l,(function(){return A("down",e)}),1500,e)});var g=function(e,n){m((function(t){return null===t||100-t<1?e/n*100:t+e/n*100}))};Kn(700,a).then((function(){return b.current=Date.now(),r(s).catch((function(e){var n;if("UserAborted"===(null===(n=e.cause)||void 0===n?void 0:n.code))throw e}))})).then((function(){return Kn(3e3,c,g)})).then((function(){return m(null),b.current=void 0,i(d).then((function(){return o.current=void 0,A("left")})).catch((function(e){var n;if("UserAborted"!==(null===(n=e.cause)||void 0===n?void 0:n.code))return o.current=void 0,A("left")}))})).then((function(){return Kn(100,f)})).catch((function(){})).then((function(){"function"==typeof e&&e()}))}var C=(0,i.useCallback)((function(){var e,n=!1;return null===(e=o.current)||void 0===e||e.forEach((function(e){n=!0,e.abort()})),o.current=void 0,n}),[o]);function A(n,t){var r;return l>0&&(r=e(n,t)),r||Promise.reject("loop disabled")}function R(){var e;if(void 0!==b.current){var n=b.current;e=Math.abs(Date.now()-n)}return{tpElapsed:e}}function E(){var e,n=!1;return l>0&&void 0===o.current&&(null===(e=s.current)||void 0===e||e.forEach((function(e){clearTimeout(e)})),s.current=null,v(Gi/1e3),h.current=void 0,w(void 0),b.current=void 0,j.current=void 0,m(null),n=!0),n}return{beginLoop:T,abortLoop:C,looperSwipe:A,gradeTimedPlayEvent:function(e,n,t){var r;l>0&&void 0!==h.current&&("reset"===y?!0===(null===(r=t[n])||void 0===r?void 0:r.pron)&&void 0!==j.current&&e(yt(n,j.current,{pronunciation:void 0})):!0===h.current?void 0!==j.current&&e(yt(n,j.current)):e(wt(n,{pronunciation:"pronunciation"===y||void 0})))},resetTimedPlay:E,loopSettingBtn:S,loopActionBtn:k,timedPlayVerifyBtn:function(e){return(0,r.jsx)(Er,{visible:void 0!==h.current,hover:y,prevMissPronu:e,onPronunciation:function(){e?(h.current=!1,w((function(e){return"reset"===e?void 0:"reset"}))):(h.current=!1,w((function(e){return"pronunciation"===e?void 0:"pronunciation"})))},onIncorrect:function(){h.current=!1,w((function(e){return"incorrect"===e?void 0:"incorrect"}))},onReset:function(){h.current=!1,w((function(e){return"reset"===e?void 0:"reset"}))}})},timedPlayAnswerHandlerWrapper:function(e,t){if(0===l)return t;var r=t;if("up"===e||"down"===e){var i=n?"up":"down";r=function(e){return t(i)}}var a=function(e,n,t,r,i,a,o,s,c,l,u,d){var f=n,v=function(){},h=function(){return Ui(r,i)};if(c()){var p=null===r&&void 0!==s.current,g=null!==r&&void 0!==s.current,m=null===r&&void 0===s.current;if("up"===e||"down"===e){var b=l();d.current=b.tpElapsed,u.current=!0,p?(h=v,u.current=void 0,setTimeout((function(){u.current=!0}),1500),i(0),setTimeout((function(){i(null)}),1500)):g||m&&(u.current=!1,f=v,h=v)}else{m&&(h=v);var j=function(e,n){var t=setInterval((function(){n((function(n){var r=1===n;return e((function(e){return r?0:e})),r&&clearTimeout(t),r?Gi/1e3:n-1}))}),1e3);return t}(t,a);o.current=[j]}h(),Mi("paused")}return f}(e,r,u,g,m,v,s,b,C,R,h,j);return a},loop:l,setLoop:u,tpAnimation:g,tpAnswered:h}}function Ui(e,n){null!==e&&setTimeout((function(){n(0),setTimeout((function(){n((function(e){return 0===e?null:e}))}),1e3)}),1500)}function _i(e){var n,t=e.word;return(0,r.jsx)("div",{className:"clickable",onTouchStart:e.visible?function(){n=Date.now(),e.onPushedPlay&&"function"==typeof e.onPushedPlay&&e.onPushedPlay()}:void 0,onTouchEnd:e.visible?function(){var r=~~(Date.now()-n)<500&&!e.reCache?"":"/override_cache";Ai(Ri(U+r,t))}:void 0,children:e.visible&&(0,r.jsx)(hr.Ibz,{size:"medium","aria-label":"pronunciation"})})}_i.defaultProps={visible:!1},_i.propTypes={word:or().shape({tl:or().string.isRequired,q:or().string.isRequired,uid:or().string.isRequired}).isRequired,reCache:or().bool,onPushedPlay:or().func,visible:or().bool};var Hi=function(){return Hi=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Hi.apply(this,arguments)};function Wi(e){var n,t,a,o;e.children&&(a=e.children,o=e.children),e.largeValue&&(a=e.largeValue),e.smallValue&&(o=e.smallValue);var s=void 0!==e.rootClassName&&Ve()(e.rootClassName)||void 0,c=void 0!==e.className&&e.className||{},l="d-none d-"+e.breakPoint+"-inline"+(void 0!==e.largeClassName?" "+Ve()(e.largeClassName):""),u="d-inline d-"+e.breakPoint+"-none"+(void 0!==e.smallClassName?" "+Ve()(e.smallClassName):""),d=function(){"function"==typeof e.onClick&&e.onClick()},f=[(0,r.jsx)("span",{"data-name":"large",className:Ve()(Hi(Hi((n={},n[l]=!0,n),c),{clickable:"function"==typeof e.onClick}))||void 0,onClick:d,children:a},0),(0,r.jsx)("span",{"data-name":"small",className:Ve()(Hi(Hi((t={},t[u]=!0,t),c),{clickable:"function"==typeof e.onClick}))||void 0,onClick:d,children:o},1)];return!0===e.fragment?(0,r.jsx)(i.Fragment,{children:f}):(0,r.jsx)("div",{className:s,children:f})}Wi.propTypes={fragment:or().bool,breakPoint:or().string,rootClassName:or().object,className:or().object,largeClassName:or().object,smallClassName:or().object,onClick:or().func,children:or().oneOfType([or().string,or().element]),largeValue:or().oneOfType([or().string,or().element]),smallValue:or().oneOfType([or().string,or().element])};var Ki=function(){return Ki=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ki.apply(this,arguments)},zi=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Bi={location:"/phrases/",label:"Phrases"};function Yi(){var e,n,t=(0,o.I0)(),a=(0,i.useRef)(void 0),s=(0,i.useRef)(0),c=(0,i.useState)(void 0),l=c[0],u=c[1],d=(0,i.useState)([]),f=(d[0],d[1]),v=(0,i.useState)(-1),h=v[0],p=(v[1],(0,i.useState)(Date.now())),g=p[0],m=p[1],b=(0,i.useRef)(Date.now()),j=(0,i.useState)(0),x=j[0],w=j[1],N=(0,i.useState)(null),S=N[0],T=N[1],C=(0,i.useState)(null),A=C[0],R=C[1],E=(0,i.useState)(null),O=E[0],M=E[1],P=(0,i.useState)([]),F=P[0],D=P[1],L=(0,i.useState)(!1),q=L[0],I=L[1],G=function(){var e=(0,o.v9)((function(e){var n=e.global;return[n.debug,n.motionThreshold,n.swipeThreshold]}),o.wU),n=e[0],t=e[1],r=e[2],a=(0,o.v9)((function(e){return e.phrases}),(function(e,n){return e.version===n.version})).value,s=(0,o.v9)((function(e){return e.phrases.setting}),(function(e,n){return e.repTID===n.repTID})).repetition,c=(0,o.v9)((function(e){return e.vocabulary.setting.practiceSide})),l=(0,o.v9)((function(e){var n=e.phrases.setting;return[n.reinforce,n.filter,n.ordered,n.romaji]}),o.wU),u=l[0],d=l[1],f=l[2],v=l[3],h=(0,o.v9)((function(e){return e.vocabulary.setting.activeGroup}),o.wU),p=(0,i.useRef)(u);p.current=u;var g=(0,i.useRef)(d);g.current=d;var m=(0,i.useRef)(f);m.current=f;var b=(0,i.useRef)(v);return b.current=v,{englishSideUp:c,repetition:s,debugLevel:n,motionThreshold:t,swipeThreshold:r,phraseList:a,activeGroup:h,reinforce:p,romajiActive:b,filterType:g,sortMethod:m}}(),V=G.englishSideUp,_=G.repetition,H=G.motionThreshold,W=G.swipeThreshold,K=G.phraseList,z=G.activeGroup,B=G.reinforce,Y=G.romajiActive,X=G.filterType,Q=G.sortMethod,Z=(0,i.useRef)(_);Z.current=_,(0,i.useEffect)((function(){0===K.length&&t(ke())}),[]);var J=(0,i.useMemo)((function(){var e=Z.current;if(0===K.length)return[];if(0===Object.keys(e).length&&0===z.length)return K;var n=Object.keys(e).reduce((function(n,t){return!0===e[t].rein&&(n=zi(zi([],n,!0),[t],!1)),n}),[]),r=kn(X.current,K,n,z,xr(t,Ee)),i=r.reduce((function(n,t){var r;return!0===(null===(r=e[t.uid])||void 0===r?void 0:r.rein)&&(n=zi(zi([],n,!0),[t.uid],!1)),n}),[]);return D(i),r}),[t,K,X,z]),$=(0,i.useMemo)((function(){var e,n=Z.current;if(0===J.length)return[];switch(Q.current){case k.RANDOM:e=Ln(J);break;case k.VIEW_DATE:e=Mn(J,n);break;default:e=Dn(J).order}return e}),[J]),ee=(0,i.useCallback)((function(){var e=J.length,n=(x+1)%e;n===h&&(n=(e+n+1)%e),b.current=g,m(Date.now()),s.current=x,w(n),u(void 0)}),[J,x,g,h]),ne=(0,i.useCallback)((function(){xn(B.current,X.current,F,J,Z.current,l,(function(e){a.current=l,u(e)}),ee)}),[t,B,X,F,J,l,ee]),te=(0,i.useCallback)((function(){var e,n=J.length;(e=l?x:(n+(x-1))%n)===h&&(e=(n+e-1)%n),b.current=g,m(Date.now()),s.current=x,w(e),u(void 0)}),[J,x,l,g,h]),re=function(e,n,t,r,i,a,o,s){return function(c,l){var u;if("left"===c)e(),u=Promise.all([Promise.resolve()]);else if("right"===c)n(),u=Promise.all([Promise.resolve()]);else{var d=t||yn(r,o,a),f=wn(d,i),v=s?"/override_cache":"";if("up"===c){var h=cn(f);u=Ai(Ri(U+v,{tl:"ja",q:h,uid:d}),l)}else if("down"===c){var p=f.english;u=Ai(Ri(U+v,{tl:"en",q:p,uid:f.uid+".en"}),l)}}return u||Promise.reject()}}(ne,te,l,x,K,$,J,q),ie=Vi(re,V,Ei(H)),ae=ie.beginLoop,oe=ie.abortLoop,se=ie.looperSwipe,ce=ie.loopSettingBtn,le=ie.loopActionBtn,ue=ie.timedPlayAnswerHandlerWrapper,de=(ie.gradeTimedPlayEvent,ie.resetTimedPlay),fe=ie.loop,ve=ie.tpAnswered,he=ie.tpAnimation;(0,i.useEffect)((function(){var e={selectedIndex:s.current,reinforcedUID:a.current,lastNext:b.current};if(l!==e.reinforcedUID||x!==e.selectedIndex){var n=e.reinforcedUID||yn(e.selectedIndex,J,$);if(Cn(e.lastNext)){var r=wn(n,K);t(Se({uid:n,shouldIncrement:n!==e.reinforcedUID})).unwrap().then((function(i){var a,o=i.map,s=i.prevMap,c=s[n]&&s[n].d,l=((a={})[n]=Ki(Ki({},o[n]),{d:c}),a),u=function(e,n){return t(nr(e,n))},d=void 0!==e.reinforcedUID;void 0!==ve.current?mn(u,r,l,{frequency:d}):gn(u,r,l,{frequency:d})}))}de()&&An(e.lastNext)&&ae(),T(null),R(null),M(null),f([]),s.current=x,a.current=l}}),[t,ae,de,l,x,K,J,$,fe]),(0,i.useEffect)((function(){t(nr(qn(Q.current,["Random","Alphhabetic","View Date"]),y.DEBUG))}),[t]),Oi(re,xr(t,Ae),ue),Pi("Phrases Loop",fe,ae,oe,se);var pe=wi(re,ue).HTMLDivElementSwipeRef;if(J.length<1||$.length<1)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var ge=l||yn(x,J,$),me=wn(ge,K),be=function(e,n,t,i,a){var o=n?{tl:"en",q:t.english,uid:t.uid+".en"}:{tl:"ja",q:cn(t),uid:Hn(t)};return(0,r.jsx)(_i,{visible:0===e&&0===a,word:o,reCache:i})}(W,V,me,q,fe),je=function(e){var n=rn.parse(e);return[n,n.toHTML()]}(me),xe=je[0],ye=je[1],we=function(e,n,t){return(0,r.jsx)("span",{onClick:e.lit?function(){t((function(n){return n?null:e.uid}))}:void 0,children:n?e.lit:e.english})}(me,O,M),Ne=Vn(V,we,ye,Xi,Qi),Te=Ne.topValue,Ce=Ne.bottomValue,Re=Ne.bottomLabel,Oe=me&&((null===(e=me.lit)||void 0===e?void 0:e.length)||me.english.length)<55,Me=function(e,n,t){var r,i,a,o,s={"fs-display-5":!0},c=s;return{aboveSmallCss:Ki({},e?((i={})[t?"h1":"h3"]=!0,i):((r={})[n?"h1":"h3"]=!0,r)),aboveLargeCss:s,belowNoInterruptCss:{"loop-no-interrupt":!0},belowSmallCss:Ki({},e?((a={})[n?"h1":"h3"]=!0,a):((o={})[t?"h1":"h3"]=!0,o)),belowLargeCss:c}}(V,xe&&xe.getSpelling().length<55,Oe),De=Me.aboveSmallCss,Le=Me.aboveLargeCss,qe=Me.belowNoInterruptCss,Ie=Me.belowSmallCss,Ge=Me.belowLargeCss,Ve=!0===(null===(n=_[me.uid])||void 0===n?void 0:n.rein),Ue=me.romaji,_e=(x+1)/J.length*100;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("div",{className:"phrases main-panel h-100",children:(0,r.jsxs)("div",{ref:pe,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:te,children:(0,r.jsx)(hr.wyc,{size:16})}),(0,r.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(Wi,{breakPoint:"md",largeClassName:Le,smallClassName:De,children:Te}),Y.current&&Ue&&(0,r.jsx)("h5",{children:(0,r.jsx)("span",{onClick:jr(R,(function(e){return e?null:ge})),className:"clickable loop-no-interrupt",children:A===ge?Ue:"[Romaji]"})}),(0,r.jsx)(Wi,{className:qe,breakPoint:"md",onClick:jr(T,(function(e){return e?null:ge})),largeClassName:Ge,smallClassName:Ie,children:S===ge?Ce:Re}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:be})]}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:ne,children:(0,r.jsx)(hr.XCv,{size:16})})]})}),(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,r.jsx)(Cr,{toggle:V,action:xr(t,Ae)}),(0,r.jsx)(Tr,{active:q,action:Zi(q,I)}),(0,r.jsx)("div",{className:"sm-icon-grp",children:ce}),(0,r.jsx)("div",{className:"sm-icon-grp",children:le})]})}),(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)(Rr,{visible:void 0!==l&&""!==l})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)(Ar,{visible:V&&void 0!==me.lit&&""!==me.lit,toggle:O===ge,action:jr(M,(function(e){return e?null:ge}))}),(0,r.jsx)(kr,{addFrequencyTerm:function(e){D((function(n){return zi(zi([],n,!0),[e],!1)})),xr(t,Pe)(e)},removeFrequencyTerm:function(e){D((function(n){return n.filter((function(n){return n!==e}))})),xr(t,Fe)(e)},toggle:Ve,term:me,count:F.length})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",children:(0,r.jsx)(dr.Z,{variant:null===he?"determinate":"buffer",value:null===he?_e:0,valueBuffer:null!=he?he:void 0,color:Ve?"secondary":"primary"})})]})}var Xi=(0,r.jsx)("span",{children:"[English]"}),Qi=(0,r.jsx)("span",{children:"[Japanese]"});function Zi(e,n){return function(){!1===e&&(n(!0),setTimeout((function(){n(!1)}),2e3))}}var Ji=t(245),$i=t(195),ea=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function na(e){for(var n=(0,i.useState)(e.initial)[0],t=32,a=[],o={},s=4;s<17;s++){var c=(s-4)/13*75;a=ea(ea([],a,!0),[{value:c,raw:s}],!1),o["r"+c]=s,o["s"+s]=c}a=ea(ea([],a,!0),[{value:100,raw:t}],!1),o.r100=t,o.s32=100;var l,u=function(e){return o["r"+e]};return(0,r.jsxs)("div",{className:"kana-slider",children:[(0,r.jsx)(Ji.Z,{id:"discrete-slider-restrict",gutterBottom:!0,children:"Difficulty"}),(0,r.jsx)($i.ZP,{defaultValue:(l=n,o["s"+l]),valueLabelFormat:u,getAriaValueText:function(e){return""+u(e)},"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:a,onChangeCommitted:function(n,r){"number"==typeof r&&function(n){var r=e.initial,i=u(n);i!==t&&r!==t&&i!==r||i!==t&&r===t&&i!==r?(e.setChoiceN(i),!0===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide()):i===t&&i!==r&&(e.setChoiceN(i),!1===e.wideMode&&"function"==typeof e.toggleWide&&e.toggleWide())}(r)}})]})}na.propTypes={initial:or().number,wideMode:or().bool,setChoiceN:or().func,toggleWide:or().func};var ta=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function ra(e,n,t,i,a){return(0,r.jsxs)("div",{className:Ve()({"p-0 px-2":!0,clickable:e}),onClick:function(){e&&a(t)},children:[(0,r.jsxs)("span",{className:"p-1",children:[e&&(0,r.jsx)(hr.oOx,{className:"incorrect-color",size:"small","aria-label":"remove"}),!e&&(0,r.jsx)(hr.aNF,{size:"small","aria-label":"inactive"})]}),(0,r.jsx)("span",{className:"p-1",children:i})]},n)}function ia(e){var n=[],t=e.termsFreq.reduce((function(t,r){var i=e.terms.find((function(e){return e.uid===r}));return i?t=ta(ta([],t,!0),[i],!1):n=ta(ta([],n,!0),[r],!1),t}),[]).reduce((function(e,n){var t=n.grp?n.grp:"undefined";return e[t]?e[t]=ta(ta([],e[t],!0),[n],!1):e[t]=[n],e}),{});return(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{children:"Frequency"},0),(0,r.jsx)("div",{children:Object.keys(t).map((function(n,i){var a=e.termsActive.includes(n);return(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("span",{className:Ve()({"font-weight-bold":a}),onClick:function(){return e.toggleTermActiveGrp(n)},children:n}),(0,r.jsx)("div",{children:t[n].map((function(n,t){return ra(a,t,n.uid,n.english,e.removeFrequencyTerm)}))})]},i)}))},1),n.length>0&&(0,r.jsxs)("div",{className:"mt-5 text-break",children:[(0,r.jsx)("span",{className:"font-weight-bold",children:"Manual cleanup"}),n.map((function(n,t){return ra(!0,t,n,n,e.removeFrequencyTerm)}))]})]})}function aa(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{children:"Groups"},0),Object.keys(e.termsGroups).map((function(n,t){var i=e.termsActive.includes(n);return(0,r.jsxs)("div",{children:[(0,r.jsx)(fi,{active:e.termsActive.includes(n),onClick:function(){return e.toggleTermActiveGrp(n)},children:n},t),!i&&_e()(e.termsGroups[n],(function(e){var n=e.split("_")[1];return Number.isInteger(parseInt(n,10))?parseInt(n,10):e})).map((function(t,i){return(0,r.jsx)(fi,{addlStyle:"ms-3",active:e.termsActive.includes(n+"."+t),onClick:function(){e.toggleTermActiveGrp(n+"."+t)},children:t},i)}))]},t+1)}))]})}ia.propTypes={termsActive:or().array,termsFreq:or().array,terms:or().array,removeFrequencyTerm:or().func,toggleTermActiveGrp:or().func},aa.propTypes={termsGroups:or().object,termsActive:or().array,toggleTermActiveGrp:or().func};var oa=t(6259),sa=function(){return sa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},sa.apply(this,arguments)};function ca(e){var n={disabled:!!e.disabled||void 0};return(0,r.jsxs)("div",{className:"settings-switch-root",children:[(0,r.jsx)("p",{className:Ve()({"disabled-color":n.disabled}),children:e.statusText}),(0,r.jsx)(oa.Z,sa({},n,{checked:e.active,onChange:function(){return e.action()},color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}}))]})}ca.propTypes={active:or().bool,action:or().func.isRequired,statusText:or().string.isRequired,color:or().string,disabled:or().bool};const la=ca;function ua(){var e=(0,o.I0)(),n=function(){var e=(0,o.v9)((function(e){return{phrases:e.phrases}})).phrases,n=e.setting,t=n.ordered,r=n.romaji,i=n.reinforce,a=n.activeGroup,s=n.filter,c=n.repetition;return{phrases:e.value,phraseGroups:e.grpObj,phraseOrder:t,phraseRomaji:r,phraseReinforce:i,phraseActive:a,phraseFilter:s,phraseRep:c}}(),t=n.phrases,i=n.phraseGroups,a=n.phraseOrder,s=n.phraseRomaji,c=n.phraseReinforce,l=n.phraseActive,u=n.phraseFilter,d=n.phraseRep;0===t.length&&e(ke());var f=Object.keys(d).filter((function(e){var n;return!0===(null===(n=d[e])||void 0===n?void 0:n.rein)}));if(t.length<1||Object.keys(i).length<1)return(0,r.jsx)(vr,{addlStyle:"phrases-settings"});var v=Sn(i,l);if(v.length>0)throw new Error("Stale phrases active group",{cause:{code:"StalePhraseActiveGrp",value:v}});return(0,r.jsx)("div",{className:"outer",children:(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsxs)("div",{className:"column-1",children:[(0,r.jsx)("h4",{children:qn(u,["Phrases Group","Frequency List","NOT_USED_Tags"])}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:u%2==0,action:xr(e,Ee),color:"default",statusText:"Filter by"})}),u===w.GROUP&&(0,r.jsx)(aa,{termsGroups:i,termsActive:l,toggleTermActiveGrp:function(n){return e(Oe(n))}}),u===w.FREQUENCY&&0===f.length&&(0,r.jsx)("div",{className:"fst-italic",children:"No phrases have been chosen"}),u===w.FREQUENCY&&f.length>0&&(0,r.jsx)(ia,{termsActive:l,termsFreq:f,terms:t,removeFrequencyTerm:function(n){return e(Fe(n))},toggleTermActiveGrp:function(n){return e(Oe(n))}})]}),(0,r.jsx)("div",{className:"column-2",children:(0,r.jsxs)("div",{className:"setting-block",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:a===k.RANDOM,action:xr(e,De),color:"default",statusText:qn(a,S)})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:c,action:xr(e,Me),disabled:u===w.FREQUENCY,statusText:"Reinforcement"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:s,action:xr(e,Re),statusText:"Romaji"})})]})})]})})}var da=t(5834),fa=t(6867),va=t(2440),ha=t(9334),pa=t(1664),ga=t(7182);function ma(e){var n=(0,i.useState)(null),t=n[0],a=n[1],o=(0,i.useState)(e.initial),s=o[0],c=o[1],l=(0,i.useMemo)((function(){return e.options}),[]);(0,i.useMemo)((function(){c(e.initial)}),[e.initial]);var u=Boolean(t),d=function(e){a(e.currentTarget)};return(0,r.jsxs)("div",{className:Ve()({clickable:!0!==e.disabled,"d-flex":!0,"flex-row-reverse":!0===e.flip||void 0,"justify-content-end":!0}),children:[(0,r.jsx)(va.Z,{component:"nav",disablePadding:!0,children:(0,r.jsx)(da.Z,{disableGutters:!0,disabled:!0===e.disabled,id:"filter-button","aria-haspopup":"listbox","aria-controls":"filter-menu","aria-expanded":u?"true":void 0,onClick:d,children:(0,r.jsx)(ha.Z,{primary:e.title,secondary:l[s],secondaryTypographyProps:{color:"unset"}})})}),(0,r.jsx)(pa.Z,{id:"filter-menu",anchorEl:t,open:u,onClose:function(){a(null)},MenuListProps:{"aria-labelledby":"filter-button",role:"listbox"},children:l.map((function(n,t){return(0,r.jsx)(ga.Z,{selected:t===s,onClick:function(n){return function(n,t){c(t),a(null),e.onChange(t)}(0,t)},children:n},n)}))}),(0,r.jsx)(fa.Z,{"aria-labelledby":"filter-button",sx:{color:"unset",minWidth:"55px"},"aria-haspopup":"listbox",disabled:!0===e.disabled,onClick:d,children:(0,r.jsx)(hr.Ui8,{size:"medium",className:Ve()({"rotate-transition":!0,"rotate-90":u})})})]})}ma.propTypes={disabled:or().bool,flip:or().bool,title:or().string,options:or().arrayOf(or().string),initial:or().number,onChange:or().func};var ba=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function ja(e){for(var n=(0,i.useState)(e.initial)[0],t=Math.min(e.max,n),a=e.max,o=[],s={},c=0;c<a+1;c++){var l=(c-0)/(a-0)*100;o=ba(ba([],o,!0),[{value:l,raw:c}],!1),s["r"+l]=c,s["s"+c]=l}var u,d=function(e){return s["r"+e]},f=function(e){var n=d(e),t=Math.trunc(a/2),r="",i=t+Math.abs(t-n);return a%2!=0&&n<=t&&(r=++i+""),a%2==0&&n===t||(r=n<t+1?i+" "+(a-i):a-i+" "+i),r};return(0,r.jsxs)("div",{className:"verb-form-slider-root",children:[(0,r.jsx)(Ji.Z,{id:"discrete-slider-restrict",gutterBottom:!0,children:e.statusText}),(0,r.jsx)($i.ZP,{defaultValue:(u=t,s["s"+u]),valueLabelFormat:f,getAriaValueText:f,"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:o,onChangeCommitted:function(n,r){"number"==typeof r&&function(n){var r=t,i=d(n);i!==r&&e.setChoiceN(i)}(r)}})]})}ja.propTypes={statusText:or().string,initial:or().number.isRequired,max:or().number.isRequired,setChoiceN:or().func.isRequired};var xa=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};function ya(){var e=(0,o.I0)(),n=function(){var e=(0,o.v9)((function(e){return{vocabulary:e.vocabulary}})).vocabulary,n=e.setting,t=n.ordered,r=n.romaji,i=n.bareKanji,a=n.hintEnabled,s=n.activeGroup,c=n.autoVerbView,l=n.verbColSplit,u=n.filter,d=n.memoThreshold,f=n.repetition,v=n.reinforce,h=n.verbFormsOrder;return{vocabulary:e.value,vocabGroups:e.grpObj,vocabOrder:t,vocabRomaji:r,showBareKanji:i,vocabHint:a,vocabActive:s,autoVerbView:c,verbColSplit:l,vocabFilter:u,memoThreshold:d,vocabRep:f,vocabReinforce:v,verbFormsOrder:h}}(),t=n.vocabulary,a=n.vocabGroups,s=n.vocabOrder,c=n.vocabRomaji,l=n.showBareKanji,u=n.vocabHint,d=n.vocabActive,f=n.autoVerbView,v=n.verbColSplit,h=n.vocabFilter,p=n.memoThreshold,g=n.vocabRep,m=n.vocabReinforce,b=n.verbFormsOrder,j=(0,i.useState)(Math.abs(p))[0];0===Object.keys(a).length&&e($n());var x=(0,i.useMemo)((function(){return Object.keys(g).filter((function(e){return!0===g[e].rein}))}),[g]),y=(0,i.useMemo)((function(){var e=tt.setting.verbFormsOrder,n=b.reduce((function(n,t){return e.includes(t)&&(n=xa(xa([],n,!0),[t],!1)),n}),[]),t=e.reduce((function(e,t){return n.includes(t)||(e=xa(xa([],e,!0),[t],!1)),e}),[]);return[n,t]}),[b]),N=y[0],T=y[1];if(t.length<1||Object.keys(a).length<1)return(0,r.jsx)(vr,{addlStyle:"vocabulary-settings"});var C=Sn(a,d);if(C.length>0)throw new Error("Stale vocabulary active group",{cause:{code:"StaleVocabActiveGrp",value:C}});return(0,r.jsx)("div",{className:"outer",children:(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsxs)("div",{className:"column-1",children:[(0,r.jsx)(ma,{flip:!0,title:"Filter by:",options:["Word Group","Frequency List"],initial:h,onChange:xr(e,dt)}),h===w.GROUP&&(0,r.jsx)(aa,{termsGroups:a,termsActive:d,toggleTermActiveGrp:xr(e,lt)}),h===w.FREQUENCY&&0===x.length&&(0,r.jsx)("div",{className:"fst-italic",children:"No words have been chosen"}),h===w.FREQUENCY&&x.length>0&&(0,r.jsx)(ia,{termsActive:d,termsFreq:x,terms:t,removeFrequencyTerm:xr(e,ot),toggleTermActiveGrp:xr(e,lt)})]}),(0,r.jsxs)("div",{className:"column-2 setting-block",children:[(0,r.jsx)(ma,{title:"Sort by:",options:S,initial:s,onChange:xr(e,ct)}),s===k.DIFFICULTY&&(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)($i.ZP,{defaultValue:j,track:p<0?"inverted":void 0,onChangeCommitted:function(n,t){"number"==typeof t&&e(xt((p<0?-1:1)*t))},valueLabelDisplay:"auto"}),(0,r.jsx)("div",{className:"mt-2 ms-3 ",onClick:xr(e,xt,-1*p),children:p<0?(0,r.jsx)(hr.k6S,{}):(0,r.jsx)(hr.aoE,{})})]}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:m,action:xr(e,vt),disabled:h===w.FREQUENCY,statusText:"Reinforcement"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:c,action:xr(e,ht),statusText:"Romaji"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:l,action:xr(e,gt),statusText:"English+Kanji"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:u,action:xr(e,ft),statusText:"Hint"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:f,action:xr(e,ut),statusText:"Auto Verb View"})}),f&&(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("div",{className:"d-flex flex-row justify-content-end",children:(0,r.jsx)("div",{children:[N.map((function(n,t){return(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("div",{className:Ve()({"me-3":!0,"disabled-color":0===t}),onClick:function(){if(t>0){var n=N.slice(0,t-1),r=N[t-1],i=N[t],a=N.slice(t+1);e(st(xa(xa(xa([],n,!0),[i,r],!1),a,!0)))}},children:(0,r.jsx)(hr.g8U,{className:"mt-1",size:"small","aria-label":"move up"})}),(0,r.jsx)("span",{className:"w-100 text-start",children:n}),(0,r.jsx)("div",{onClick:function(){if(N.length>1){var n=xa(xa([],N.slice(0,t),!0),N.slice(t+1),!0);e(st(n))}},children:(0,r.jsx)(hr.oOx,{className:Ve()({"mt-1 ms-3":!0,"incorrect-color":N.length>1,"disabled-color":1===N.length}),size:"small","aria-label":"remove"})})]},t)})),T.map((function(n,t){return(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("div",{className:"me-3 invisible",children:(0,r.jsx)(hr.g8U,{className:"mt-1",size:"small","aria-label":"move up"})}),(0,r.jsx)("span",{className:"w-100 text-start disabled-color",children:n}),(0,r.jsx)("div",{onClick:xr(e,st,xa(xa([],N,!0),[T[t]],!1)),children:(0,r.jsx)(hr.wl8,{className:"mt-1 ms-3",size:"small","aria-label":"add"})})]},N.length+t)}))]})})}),f&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,r.jsx)(ja,{initial:v,setChoiceN:xr(e,pt),max:b.length,statusText:"Column layout"})})})]})]})})}var wa=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},ka={location:"/settings/",label:"Settings"};function Na(e,n){var t=n.cause;switch(e(er(y.DEBUG)),null==t?void 0:t.code){case"StaleVocabActiveGrp":var r=t.value;e(nr("Error: "+n.message,y.ERROR)),e(nr("Group "+JSON.stringify(r)+" Removed",y.ERROR)),e(lt(r));break;case"StalePhraseActiveGrp":r=t.value,e(nr("Error: "+n.message,y.ERROR)),e(nr("Group "+JSON.stringify(r)+" Removed",y.ERROR)),e(Oe(r));break;case"DeviceMotionEvent":e(nr("Error: "+n.message,y.ERROR)),e(Jt(0))}}function Sa(e,n,t){return function(r){try{Bn(r,n,(function(e){t(Number(e.toFixed(2))),setTimeout((function(){t(void 0)}),300)}))}catch(n){n instanceof Error&&Na(e,n)}}}function Ta(e,n){var t=e?(0,r.jsx)(hr.oOx,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,r.jsx)(hr.wl8,{className:"clickable",size:"medium","aria-label":"expand"});return(0,r.jsx)("h2",{onClick:function(){return n((function(e){return!e}))},children:t})}var Ca=Ve()({"mb-5":!0});function Aa(){var e=(0,o.I0)(),n=(0,i.useRef)(void 0),t=function(){var e=(0,o.v9)((function(e){var n=e.global;return[n.darkMode,n.swipeThreshold,n.motionThreshold,n.debug]}),o.wU),n=e[0],t=e[1],r=e[2],i=e[3],a=(0,o.v9)((function(e){return e.global.memory}),(function(e,n){return e.usage===n.usage})),s=(0,o.v9)((function(e){var n=e.kanji.setting;return[n.choiceN,n.filter,n.reinforce,n.activeTags]}),o.wU),c=s[0],l=s[1],u=s[2],d=s[3],f=(0,o.v9)((function(e){var n=e.opposite;return[n.qRomaji,n.aRomaji]}),o.wU),v=f[0],h=f[1],p=(0,o.v9)((function(e){var n=e.kana.setting;return[n.choiceN,n.wideMode,n.easyMode,n.charSet]}),o.wU),g=p[0],m=p[1],b=p[2],j=p[3],x=(0,o.v9)((function(e){return e.particle.setting.aRomaji})),y=(0,o.v9)((function(e){return e.vocabulary}),(function(e,n){return e.version===n.version})).value,w=(0,o.v9)((function(e){return e.vocabulary.setting}),(function(e,n){return e.repTID===n.repTID})).repetition,k=(0,o.v9)((function(e){return e.phrases}),(function(e,n){return e.version===n.version})).value,N=(0,o.v9)((function(e){return e.phrases.setting}),(function(e,n){return e.repTID===n.repTID})).repetition,S=(0,o.v9)((function(e){return e.kanji}),(function(e,n){return e.version===n.version})).value,T=(0,o.v9)((function(e){return e.kanji.tagObj}),o.wU),C=(0,o.v9)((function(e){return e.kanji.setting}),(function(e,n){return e.repTID===n.repTID})).repetition;return{darkMode:n,swipeThreshold:t,motionThreshold:r,memory:a,debug:i,kanjiChoiceN:c,kanjiFilter:l,kanjiReinforce:u,kanjiActiveTags:d,oppositesQRomaji:v,oppositesARomaji:h,choiceN:g,wideMode:m,easyMode:b,charSet:j,particlesARomaji:x,vocabList:y,kanjiTagObj:T,phraseList:k,KanjiList:S,vocabMeta:w,phraseMeta:N,kanjiMeta:C}}(),a=t.darkMode,s=t.swipeThreshold,c=t.motionThreshold,l=t.memory,u=t.debug,d=t.kanjiChoiceN,f=t.kanjiFilter,v=t.kanjiReinforce,h=t.kanjiActiveTags,p=t.oppositesQRomaji,g=t.oppositesARomaji,m=t.choiceN,b=t.wideMode,j=t.easyMode,x=t.charSet,k=t.particlesARomaji,S=t.vocabList,T=t.kanjiTagObj,C=t.phraseList,A=t.KanjiList,R=t.vocabMeta,E=t.phraseMeta,O=t.kanjiMeta,M=(0,i.useState)(!1),P=M[0],I=M[1],G=(0,i.useState)(!1),V=G[0],U=G[1],_=(0,i.useState)(!1),H=_[0],W=_[1],K=(0,i.useState)(!1),z=K[0],B=K[1],Y=(0,i.useState)(!1),X=Y[0],Z=Y[1],J=(0,i.useState)(""),$=J[0],te=J[1],se=(0,i.useState)(""),ce=se[0],le=se[1],ue=(0,i.useState)(""),de=ue[0],fe=ue[1],ve=(0,i.useState)(!1),he=ve[0],me=ve[1],be=(0,i.useState)([]),je=(be[0],be[1],(0,i.useState)(0)),xe=je[0],ye=je[1];(0,i.useEffect)((function(){var t;return e(Bt()),0===S.length&&e($n()),0===T.length&&e(Q()),0===C.length&&e(ke()),navigator.serviceWorker.addEventListener("message",we),null===(t=navigator.serviceWorker.controller)||void 0===t||t.postMessage({type:"SW_VERSION"}),function(){navigator.serviceWorker.removeEventListener("message",we),n.current&&window.removeEventListener("devicemotion",n.current)}}),[]),(0,i.useEffect)((function(){c>0&&void 0===n.current?(n.current=Sa(e,c,ye),Yn((function(){n.current&&window.addEventListener("devicemotion",n.current)}),(function(n){return Na(e,n)}))):0===c&&void 0!==n.current?(window.removeEventListener("devicemotion",n.current),n.current=void 0):(n.current&&window.removeEventListener("devicemotion",n.current),n.current=Sa(e,c,ye),Yn((function(){n.current&&window.addEventListener("devicemotion",n.current)}),(function(n){return Na(e,n)})))}),[e,c]);var we=(0,i.useCallback)((function(n){if("DO_HARD_REFRESH"===n.data.type){var t=n.data.error;t&&e(nr(t,y.ERROR)),setTimeout((function(){I(!1),me(t)}),2e3)}else if("SW_VERSION"===n.data.type){var r=n.data,i=r.swVersion,a=r.jsVersion,o=r.bundleVersion;te(i),le(a),fe(o)}}),[e]),Ne=(0,i.useMemo)((function(){return Tn(R,S,"[Stale Vocabulary]")}),[S,R]),Se=Ne.keys,Te=Ne.list,Ce=(0,i.useMemo)((function(){return Tn(E,C,"[Stale Phrase]")}),[C,E]),Ae=Ce.keys,Re=Ce.list,Ee=(0,i.useMemo)((function(){return Tn(O,A,"[Stale Kanji]")}),[A,O]),Oe=Ee.keys,Me=Ee.list,Pe=(0,i.useMemo)((function(){return(e=wa(wa([],C,!0),S,!0)).reduce((function(n,t,i){var a,o,s,c,l=rn.parse(t);if(l.hasFurigana())try{on(l.getPronunciation(),l.getSpelling())}catch(f){if(f instanceof Error&&("ParseError"===(null===(a=f.cause)||void 0===a?void 0:a.code)||"InputError"===(null===(o=f.cause)||void 0===o?void 0:o.code))){var u=(0,r.jsx)("hr",{},e.length+i),d=(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("span",{className:"col p-0",children:l.toHTML({showError:!1})}),(0,r.jsx)("span",{className:"col p-0",children:t.english}),(0,r.jsxs)("span",{className:"col p-0 app-sm-fs-xx-small",children:[(0,r.jsx)("div",{children:f.message}),(0,r.jsx)("div",{children:(null===(s=f.cause)||void 0===s?void 0:s.info)?JSON.stringify(null===(c=f.cause)||void 0===c?void 0:c.info):""})]})]},i);return n.length>0&&i<e.length-1?wa(wa([],n,!0),[u,d],!1):wa(wa([],n,!0),[d],!1)}}return n}),[]);var e}),[S,C]),Fe=(0,i.useMemo)((function(){return new Set(wa(wa(wa([],Se,!0),Ae,!0),Oe,!0))}),[Se,Ae,Oe]),De=(0,i.useMemo)((function(){return(e=wa(wa(wa([],Te,!0),Re,!0),Me,!0)).reduce((function(n,t,i){var a=(0,r.jsx)("hr",{},e.length+i),o=(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("span",{className:"col p-0",children:t.key}),(0,r.jsx)("span",{className:"col p-0",children:t.english}),(0,r.jsx)("span",{className:"col p-0 app-sm-fs-xx-small",children:(0,r.jsx)("div",{children:t.uid})})]},i);return n.length>0&&i<e.length?wa(wa([],n,!0),[a,o],!1):wa(wa([],n,!0),[o],!1)}),[]);var e}),[Te,Re,Me]);if(S.length<1||C.length<1||T.length<1)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var Le=Object.values(A).filter((function(e){return e.tag.some((function(e){return h.includes(e)}))})),qe=Le.map((function(e){return e.uid})),Ie=Object.keys(O).filter((function(e){var n;return!0===(null===(n=O[e])||void 0===n?void 0:n.rein)})),Ge=Ie.filter((function(e){return!qe.includes(e)}));return(0,r.jsx)("div",{className:"settings",children:(0,r.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("h2",{children:"Global"}),(0,r.jsx)("h2",{})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,r.jsxs)("div",{className:Ve()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===s}),children:[(0,r.jsx)("div",{className:"clickable px-2 pb-2",onClick:function(){e($t(s-1<=0?0:s-1))},children:"-"}),(0,r.jsx)("div",{className:"px-2",children:s}),(0,r.jsx)("div",{className:"clickable px-2",onClick:function(){return e($t(s+1))},children:"+"})]}),(0,r.jsxs)("div",{className:Ve()({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===c}),children:[(0,r.jsx)("div",{className:"clickable px-2 pb-2",onClick:function(){e(Jt(c-.5<=0?0:c-.5))},children:"-"}),(0,r.jsx)("div",{className:Ve()({"px-2":!0,"correct-color":xe>c&&xe<=c+1,"question-color":xe>c+1&&xe<=c+2,"incorrect-color":xe>c+2}),children:null!=xe?xe:c}),(0,r.jsx)("div",{className:"clickable px-2",onClick:function(){e(Jt(c+.5))},children:"+"})]})]}),(0,r.jsxs)("div",{className:"column-2",children:[(0,r.jsx)("div",{className:"setting-block",children:(0,r.jsx)(la,{active:a,action:xr(e,Zt),statusText:(a?"Dark":"Light")+" Mode"})}),(0,r.jsx)("div",{className:"setting-block",children:(0,r.jsx)(la,{active:s>0,action:function(){e($t(s>0?0:1))},statusText:"Touch Swipes"})}),(0,r.jsx)("div",{className:"setting-block",children:(0,r.jsx)(la,{active:c>0,action:function(){e(Jt(0===c?6:0))},statusText:"Accelerometer"})})]})]})})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("h2",{children:"Phrases"}),Ta(z,B)]}),z&&(0,r.jsx)(ua,{})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("h2",{children:"Vocabulary"}),Ta(H,W)]}),H&&(0,r.jsx)(ya,{})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("h2",{children:"Kanji"}),Ta(V,U)]}),V&&(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsxs)("div",{className:"column-1",children:[(0,r.jsx)("h4",{children:qn(f,["Kanji Group","Frequency List","Tags"])}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:f%2==0,action:xr(e,ae),color:"default",statusText:"Filter by"})}),f===w.FREQUENCY&&0===Ie.length&&(0,r.jsx)("div",{className:"fst-italic",children:"No words have been chosen"}),f===w.TAGS&&(0,r.jsx)(pi,{selectedCount:0===Le.length?Object.values(A).length:Le.length,termsTags:T,termsActive:h,toggleTermActive:xr(e,ee)}),f===w.FREQUENCY&&Ie.length>0&&(0,r.jsx)(ia,{termsActive:h,termsFreq:Ie,terms:A,removeFrequencyTerm:xr(e,re),toggleTermActiveGrp:xr(e,ne)})]}),(0,r.jsx)("div",{className:"column-2 setting-block",children:(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:v,action:xr(e,oe),disabled:f===w.FREQUENCY,statusText:(v?"(+"+Ge.length+") ":"")+"Reinforcement"})})})]})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h2",{children:"Opposites Game"})}),(0,r.jsxs)("div",{className:"setting-block",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(la,{active:p,action:xr(e,ge),statusText:"Question Romaji"})}),(0,r.jsx)("div",{children:(0,r.jsx)(la,{active:g,action:xr(e,pe),statusText:"Answer Romaji"})})]})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h2",{children:"Kana Game"})}),(0,r.jsxs)("div",{className:"setting-block",children:[(0,r.jsx)("div",{children:(0,r.jsx)(la,{active:x===N.HIRAGANA,action:xr(e,F),statusText:qn(x,["Hiragana","Katakana","Mixed"])})}),(0,r.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,r.jsx)(na,{initial:m,wideMode:b,setChoiceN:xr(e,D),toggleWide:xr(e,q)})}),(0,r.jsx)("div",{children:(0,r.jsx)(la,{active:j,action:xr(e,L),statusText:"Kana Hints"})})]})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h2",{children:"Kanji Game"})}),(0,r.jsx)("div",{className:"setting-block",children:(0,r.jsx)("div",{className:"d-flex justify-content-end p-2",children:(0,r.jsx)(na,{initial:d,setChoiceN:xr(e,ie)})})})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h2",{children:"Particles Game"})}),(0,r.jsx)("div",{className:"setting-block",children:(0,r.jsx)(la,{active:k,action:xr(e,qt),statusText:"Answer Romaji"})})]}),(0,r.jsxs)("div",{className:Ca,children:[(0,r.jsx)("div",{className:"d-flex justify-content-between",children:(0,r.jsx)("h2",{children:"Application"})}),(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,r.jsx)("div",{className:"column-1",children:(0,r.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between clickable",onClick:function(){te(""),le(""),fe(""),setTimeout((function(){var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"SW_VERSION"})}),1e3)},children:[(0,r.jsxs)("div",{className:"pe-2",children:[(0,r.jsx)("div",{children:"swVersion:"}),(0,r.jsx)("div",{children:"jsVersion:"}),(0,r.jsx)("div",{children:"bundleVersion:"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:$}),(0,r.jsx)("div",{children:ce}),(0,r.jsx)("div",{children:de})]})]})})}),(0,r.jsxs)("div",{className:"column-2",children:[(0,r.jsx)("div",{className:"setting-block mb-2",children:(0,r.jsx)(la,{active:u>y.OFF,action:xr(e,er),color:"default",statusText:qn(u,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,r.jsxs)("div",{className:Ve()({"d-flex justify-content-end mb-2":!0,"disabled-color":he}),children:[(0,r.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,r.jsx)("div",{className:Ve()({"spin-a-bit":P}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:function(){var e;I(!0),me(!1),setTimeout((function(){P&&(I(!1),me(!0))}),3e3),null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage({type:"DO_HARD_REFRESH"})},children:(0,r.jsx)(hr.bnu,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,r.jsx)("div",{className:"setting-block mb-2",children:(0,r.jsx)(la,{active:l.persistent,action:xr(e,Yt),disabled:l.persistent,color:"default",statusText:l.persistent?"Persistent "+~~(l.usage/1024/1024)+"/"+~~(l.quota/1024/1024)+"MB":"Persistent off"})})]})]}),De.length>0&&(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("h5",{children:"Stale Space Repetition"}),Ta(X,Z)]}),(0,r.jsx)("div",{className:"px-4",children:(0,r.jsx)("span",{children:"keys: "+JSON.stringify(Array.from(Fe))})}),X&&(0,r.jsx)("div",{className:"failed-spacerep-view container mt-2 p-0",children:De})]}),Pe.length>0&&(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h5",{children:"Failed Furigana Parse"}),(0,r.jsx)("div",{className:"failed-furigana-view container mt-2 p-0",children:Pe})]})]})]})})}var Ra=t(6514),Ea=t(8223);function Oa(){var e=(0,o.v9)((function(e){var n=e.global;return[n.debug,n.swipeThreshold,n.motionThreshold]}),o.wU),n=e[0],t=e[1],r=e[2],a=(0,o.v9)((function(e){return e.vocabulary}),(function(e,n){return e.version===n.version})).value,s=(0,o.v9)((function(e){return e.vocabulary.setting}),(function(e,n){return e.repTID===n.repTID})).repetition,c=(0,o.v9)((function(e){var n=e.vocabulary,t=n.setting;return[t.practiceSide,t.autoVerbView,n.verbForm]}),o.wU),l=c[0],u=c[1],d=c[2],f=(0,o.v9)((function(e){var n=e.vocabulary.setting;return[n.memoThreshold,n.reinforce,n.filter,n.hintEnabled,n.romaji,n.bareKanji,n.verbColSplit,n.ordered]}),o.wU),v=f[0],h=f[1],p=f[2],g=f[3],m=f[4],b=f[5],j=f[6],x=f[7],y=(0,o.v9)((function(e){return e.vocabulary.setting.verbFormsOrder}),o.wU),w=(0,o.v9)((function(e){return e.vocabulary.setting.activeGroup}),o.wU),k=(0,i.useRef)(v);k.current=v;var N=(0,i.useRef)(h);N.current=h;var S=(0,i.useRef)(p);S.current=p;var T=(0,i.useRef)(g);T.current=g;var C=(0,i.useRef)(x);return C.current=x,{englishSideUp:l,autoVerbView:u,verbForm:d,repetition:s,debugLevel:n,swipeThreshold:t,motionThreshold:r,vocabList:a,romajiEnabled:m,bareKanji:b,verbFormsOrder:y,verbColSplit:j,activeGroup:w,reinforce:N,hintEnabled:T,filterType:S,sortMethod:C,memoThreshold:k}}function Ma(e){var n,t,a,o,s=null!==(t=e.value)&&void 0!==t?t:30,c=(0,i.useState)(s),l=c[0],u=c[1];(0,i.useEffect)((function(){u(s)}),[s]);var d=l/100,f=[13,110,256],v=f[0],h=f[1],p=f[2],g=[255,We(0,255,d),0],m=[We(255,0,d),255,0],b=[v,We(255,h,d),We(0,p,d)],j=[We(g[0],m[0],d),We(g[1],m[1],d),We(g[2],m[2],d)],x=[We(m[0],b[0],d),We(m[1],b[1],d),We(m[2],b[2],d)],y=[We(j[0],x[0],d),We(j[1],x[1],d),We(j[2],x[2],d)].map((function(e){return Math.floor(e)})),w="rgb("+y[0]+","+y[1]+","+y[2]+",0.25)",k=[{value:Pn},{value:Fn}],N=br(),S=(0,i.useState)(-1),T=S[0],C=S[1],A=(0,i.useRef)(null),R=(0,Ur.YF)({placement:"top",middleware:[(0,_r.cv)({mainAxis:8,crossAxis:10}),(0,_r.uY)(),(0,Ur.x7)({element:A})]}),E=R.x,O=R.y,M=R.strategy,P=R.refs,F=R.middlewareData,D=R.update;return(0,i.useEffect)((function(){D()}),[D,N.height,N.width,e.manualUpdate]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:P.setReference,className:"sm-icon-grp clickable","aria-label":"Set difficulty",onClick:function(){C((function(e){e>0&&clearTimeout(e);var n=setTimeout((function(){return C(-1)}),3500);return Number(n)}))},children:(0,r.jsx)(pr.G,{icon:gr.scR})}),(0,r.jsxs)("div",{id:"tooltip",ref:P.setFloating,style:{height:"200px",position:M,top:null!=O?O:0,left:null!=E?E:0,width:"max-content"},className:Ve()((n={invisible:T<0,"tooltip-fade":T<0},n[mi]=!0,n)),children:[(0,r.jsx)($i.ZP,{sx:{color:w},orientation:"vertical",value:l,onChange:function(e,n){clearTimeout(T),C(0),"number"==typeof n&&u(n)},onChangeCommitted:function(n,t){var r=setTimeout((function(){return C(-1)}),1e3);C(Number(r)),"function"==typeof e.onChange&&"number"==typeof t&&e.onChange(t)},marks:k,step:10,valueLabelFormat:function(e){return e>Fn?"Pass":"Fail"}}),(0,r.jsx)("div",{ref:A,id:"arrow",style:{position:M,height:8,width:8,bottom:-4,left:8+(null!==(o=null===(a=F.arrow)||void 0===a?void 0:a.x)&&void 0!==o?o:0)}})]})]})}function Pa(e){var n=e.list.length-1,t=(0,i.useState)((function(){return Math.min(n,e.initial)})),a=t[0],o=t[1];return(0,r.jsx)("div",{className:"vocabulary-slider",children:(0,r.jsx)($i.ZP,{defaultValue:a,valueLabelFormat:function(n){return e.list[n].label},getAriaValueText:function(n){return e.list[n].label},"aria-label":"Alphabetic quick scroll",step:1,min:0,max:n,valueLabelDisplay:"auto",onChangeCommitted:function(n,t){"number"==typeof t&&(e.setIndex(t),o(t))}},a)})}Ma.propTypes={value:or().number,onChange:or().func,manualUpdate:or().string},Pa.propTypes={initial:or().number.isRequired,list:or().array.isRequired,setIndex:or().func.isRequired};var Fa=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},Da=function(){return Da=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Da.apply(this,arguments)};function La(e,n){var t=Math.trunc(e.length/2)+(e.length%2==0?0:1)-n;return Math.trunc(e.length/2)+t}function qa(e){var n=(0,o.I0)(),t=e.verb,a=e.reCache,s=e.linkToOtherTerm,c=e.showHint,l=(0,i.useState)(void 0),u=l[0],d=l[1],f=(0,i.useState)(void 0),v=f[0],h=f[1],p=Oa(),g=p.verbForm,m=p.swipeThreshold,b=p.repetition,j=p.romajiEnabled,x=p.englishSideUp,y=p.hintEnabled,w=p.verbFormsOrder,k=p.verbColSplit;(0,i.useEffect)((function(){var e=t.uid;d((function(n){return n===e?n:void 0})),h((function(n){return n===e?n:void 0}))}),[t]);var N,S,T=function(e,t){var i=Ve()({"pt-3 pe-sm-3 flex-shrink-1 d-flex flex-column justify-content-around text-nowrap":!0,"text-end":0!==e}),a=t.map((function(e,t){var i=Ve()({clickable:!0}),a=Ve()({invisible:g===e.name});return(0,r.jsxs)("div",{className:i,onClick:function(){g===e.name?n(it("dictionary")):n(it(e.name))},children:[(0,r.jsx)("span",{className:a,children:"["}),(0,r.jsx)("span",{children:e.name}),(0,r.jsx)("span",{className:a,children:"]"})]},t)}));return(0,r.jsx)("div",{className:i,children:a},e)},C=(N=t,S=w,(0,i.useMemo)((function(){var e,n,t,r,i,a,o,s,c,l,u,d={dictionary:void 0===N?void 0:dn.parse(N)},f=Fa(Fa([{name:"-masu",value:null===(e=d.dictionary)||void 0===e?void 0:e.masuForm()},{name:"-mashou",value:null===(n=d.dictionary)||void 0===n?void 0:n.mashouForm()},{name:"dictionary",value:d.dictionary},{name:"-nai",value:null===(t=d.dictionary)||void 0===t?void 0:t.naiForm()},{name:"-saseru",value:null===(r=d.dictionary)||void 0===r?void 0:r.saseruForm()},{name:"-te",value:null===(i=d.dictionary)||void 0===i?void 0:i.teForm()},{name:"-ta",value:null===(a=d.dictionary)||void 0===a?void 0:a.taForm()}],null!==(null===(o=d.dictionary)||void 0===o?void 0:o.chattaForm())?[{name:"-chatta",value:null===(s=d.dictionary)||void 0===s?void 0:s.chattaForm()}]:[],!0),null!==(null===(c=d.dictionary)||void 0===c?void 0:c.reruForm())?[{name:"-reru",value:null===(l=d.dictionary)||void 0===l?void 0:l.reruForm()}]:[],!0);return S&&S.length>0&&(u=S.reduce((function(e,n){var t=f.find((function(e){return e.name===n}));return void 0!==t&&(e=Fa(Fa([],e,!0),[t],!1)),e}),[])),null!=u?u:f}),[N,S])),A=function(e,n){var t=La(e,n);return{t1:e.slice(0,t),t2:e.slice(t)}}(C,k),R=A.t1,E=A.t2,O=function(e,n,t){var r=(0,o.I0)(),a=!(n&&n[e]&&!1===n[e].f);return(0,i.useMemo)((function(){return{furigana:{show:a,toggle:!1===t&&function(){r(at(e))}||void 0}}}),[r,e,a,t])}(t.uid,b,x),M=function(e,n,t,r,i){var a=e.romaji||".",o=La(n,r),s=n.find((function(e){return e.name===t})),c=s?s.value:n[o].value;return{inJapanese:c.toHTML(i),inEnglish:e.english,romaji:a,japaneseObj:c}}(t,C,g,k,O),P=M.inJapanese,F=M.inEnglish,D=M.romaji,L=M.japaneseObj,q=(0,i.useMemo)((function(){return dn.parse(t)}),[t]),I=function(e,n,t,a){return(0,i.useMemo)((function(){var i,o=!e,s=[],c=!1,l=!1;n.constructor.name===dn.name&&"isExceptionVerb"in n&&(c=n.isExceptionVerb()||3===n.getVerbClass(),l=n.isIntransitive(),i=n.getTransitivePair()||n.getIntransitivePair());var u=n.isNaAdj(),d=n.isSlang(),f=n.isKeigo();return o&&(l||i)&&(s=Fa(Fa([],s,!0),[(0,r.jsx)("span",{className:Ve()({clickable:i,"question-color":i}),onClick:i&&a?function(){a(i)}:void 0,children:l?"intr":"trans"},s.length+1)],!1)),o&&d&&(s=Fa(Fa([],s,!0),[(0,r.jsx)("span",{children:"slang"},s.length+1)],!1)),o&&f&&(s=Fa(Fa([],s,!0),[(0,r.jsx)("span",{children:"keigo"},s.length+1)],!1)),c&&s.length>0&&(s=Fa([(0,r.jsx)("span",{children:"*"},s.length+1)],s,!0)),s.length>0?(0,r.jsxs)("span",{children:[t,u&&(0,r.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,r.jsxs)("span",{className:"fs-5",children:[(0,r.jsx)("span",{children:" ("}),s.reduce((function(e,n,t){return t>0&&t<s.length?Fa(Fa([],e,!0),[(0,r.jsx)("span",{children:" , "},s.length+t),n],!1):Fa(Fa([],e,!0),[n],!1)}),[]),(0,r.jsx)("span",{children:")"})]})]}):c?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{children:[" ","*"]})]}):u?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t}),[e,n,t,a])}(x,q,P,s),G=function(e,n,t,a){return(0,i.useMemo)((function(){var i,o=[],s=!1;n.constructor.name===dn.name&&"isExceptionVerb"in n&&(s=n.isIntransitive(),i=n.getTransitivePair()||n.getIntransitivePair());var c=n.isSlang(),l=n.isKeigo();return e&&(s||i)&&(o=Fa(Fa([],o,!0),[(0,r.jsx)("span",{className:Ve()({clickable:i,"question-color":i}),onClick:i&&a?function(){a(i)}:void 0,children:s?"intr":"trans"},o.length+1)],!1)),e&&c&&(o=Fa(Fa([],o,!0),[(0,r.jsx)("span",{children:"slang"},o.length+1)],!1)),e&&l&&(o=Fa(Fa([],o,!0),[(0,r.jsx)("span",{children:"keigo"},o.length+1)],!1)),o.length>0?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{children:" ("}),o.reduce((function(e,n,t){return t>0&&t<o.length?Fa(Fa([],e,!0),[(0,r.jsx)("span",{children:" , "},o.length+t),n],!1):Fa(Fa([],e,!0),[n],!1)}),[]),(0,r.jsx)("span",{children:")"})]})]}):t}),[e,n,t,a])}(x,q,F,s),V=(0,i.useMemo)((function(){var e=(0,r.jsx)("span",{children:"[English]"}),n=(0,r.jsx)(Wi,{fragment:!0,breakPoint:"sm",smallValue:"[J]",largeValue:"[Japanese]"});if(y&&c)if(x){var i=_n(L);i&&(n=i)}else{var a=Un(t);a&&(e=a)}return{jLabel:n,eLabel:e}}),[y,c,x,L,t]),U=V.jLabel,_=V.eLabel,H=function(e,n,t,r,a){return(0,i.useMemo)((function(){var i,o,s,c;return e?(i=n,o=t,s=r,c=a):(i=t,o=n,s=a,c=r),{topValue:i,topLabel:s,bottomValue:o,bottomLabel:c}}),[e,n,t,r,a])}(x,G,I,_,U),W=H.topValue,K=H.bottomValue,z=H.bottomLabel,B=(0,i.useMemo)((function(){return Da(Da({},t),{japanese:L.toString(),pronounce:t.pronounce&&L.getPronunciation(),form:g})}),[t,L,g]),Y=(0,i.useMemo)((function(){return x?{tl:"en",q:B.english,uid:B.uid+".en"}:{tl:"ja",q:cn(B),uid:Hn(B)}}),[x,B]),X=(0,r.jsx)(_i,{visible:0===m,word:Y,reCache:a});return(0,r.jsxs)(r.Fragment,{children:[T(0,R),(0,r.jsxs)("div",{className:"pt-3 w-100 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(Wi,{breakPoint:"md",smallClassName:Da({},x?{h5:!0}:{"fs-display-6":!0}),largeClassName:{"fs-display-6":!0},children:W}),j&&D&&(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"clickable loop-no-interrupt",onClick:function(){return h((function(e){return e===t.uid?void 0:t.uid}))},children:v===t.uid?D:"[romaji]"})}),(0,r.jsx)(Wi,{breakPoint:"md",className:{"loop-no-interrupt":!0},smallClassName:Da({},x?{"fs-display-6":!0}:{h5:!0}),largeClassName:{"fs-display-6":!0},onClick:function(){return d((function(e){return e===t.uid?void 0:t.uid}))},children:u===t.uid?K:z}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:X})]},1),T(2,E)]})}qa.propTypes={verb:or().object.isRequired,reCache:or().bool,linkToOtherTerm:or().func,showHint:or().bool};var Ia=function(){return Ia=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ia.apply(this,arguments)};function Ga(e){var n,t,a,s=(0,o.I0)(),c=e.vocabulary,l=e.reCache,u=e.showHint,d=(0,i.useState)(void 0),f=d[0],v=d[1],h=(0,i.useState)(void 0),p=h[0],g=h[1],m=(0,i.useState)(void 0),b=m[0],j=m[1],x=Oa(),y=x.swipeThreshold,w=x.repetition,k=x.romajiEnabled,N=x.englishSideUp,S=x.hintEnabled,T=x.bareKanji;(0,i.useEffect)((function(){var e=c.uid;v((function(n){return n===e?n:void 0})),g((function(n){return n===e?n:void 0}))}),[c]);var C=(0,i.useCallback)((function(e){return s(at(e))}),[s]),A=(0,i.useMemo)((function(){return Wn(c.uid,w,N,C)}),[C,c.uid,w,N]),R=(0,r.jsx)("span",{children:"[Japanese]"}),E=(0,r.jsx)("span",{children:"[English]"}),O=rn.parse(c),M=O.toHTML(A),P=(0,r.jsx)(i.Fragment,{children:c.english}),F=c.romaji,D=function(e,n,t,i){var a,o=!e,s=[],c=!1,l=!1;n.constructor.name===dn.name&&"isExceptionVerb"in n&&(c=n.isExceptionVerb()||3===n.getVerbClass(),l=n.isIntransitive(),a=n.getTransitivePair()||n.getIntransitivePair());var u=n.isNaAdj(),d=n.isSlang(),f=n.isKeigo();return o&&(l||a)&&(s=jn(jn([],s,!0),[(0,r.jsx)("span",{className:Ve()({clickable:a,"question-color":a}),onClick:void 0,children:l?"intr":"trans"},s.length+1)],!1)),o&&d&&(s=jn(jn([],s,!0),[(0,r.jsx)("span",{children:"slang"},s.length+1)],!1)),o&&f&&(s=jn(jn([],s,!0),[(0,r.jsx)("span",{children:"keigo"},s.length+1)],!1)),c&&s.length>0&&(s=jn([(0,r.jsx)("span",{children:"*"},s.length+1)],s,!0)),s.length>0?(0,r.jsxs)("span",{children:[t,u&&(0,r.jsxs)("span",{className:"opacity-25",children:[" ","な"]}),(0,r.jsxs)("span",{className:"fs-5",children:[(0,r.jsx)("span",{children:" ("}),s.reduce((function(e,n,t){return t>0&&t<s.length?jn(jn([],e,!0),[(0,r.jsx)("span",{children:" , "},s.length+t),n],!1):jn(jn([],e,!0),[n],!1)}),[]),(0,r.jsx)("span",{children:")"})]})]}):c?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{children:[" ","*"]})]}):u?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{className:"opacity-25",children:[" ","な"]})]}):t}(N,O,M),L=function(e,n,t,i){var a,o=[],s=!1;n.constructor.name===dn.name&&"isExceptionVerb"in n&&(s=n.isIntransitive(),a=n.getTransitivePair()||n.getIntransitivePair());var c=n.isSlang(),l=n.isKeigo();return e&&(s||a)&&(o=jn(jn([],o,!0),[(0,r.jsx)("span",{className:Ve()({clickable:a,"question-color":a}),onClick:void 0,children:s?"intr":"trans"},o.length+1)],!1)),e&&c&&(o=jn(jn([],o,!0),[(0,r.jsx)("span",{children:"slang"},o.length+1)],!1)),e&&l&&(o=jn(jn([],o,!0),[(0,r.jsx)("span",{children:"keigo"},o.length+1)],!1)),o.length>0?(0,r.jsxs)("span",{children:[t,(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{children:" ("}),o.reduce((function(e,n,t){return t>0&&t<o.length?jn(jn([],e,!0),[(0,r.jsx)("span",{children:" , "},o.length+t),n],!1):jn(jn([],e,!0),[n],!1)}),[]),(0,r.jsx)("span",{children:")"})]})]}):t}(N,O,P);S&&u&&(N?R=_n(O)||R:E=Un(c)||E);var q=Vn(N,L,D,E,R),I=q.topValue,G=q.bottomValue,V=q.bottomLabel,U=!0===N&&!0===T&&!1===(null===(a=w[c.uid])||void 0===a?void 0:a.f),_=(0,i.useMemo)((function(){var e=c;if(rn.parse(c).isNaAdj()){var n=rn.parse(c).append(b&&"な");e=Ia(Ia({},c),{japanese:n.toString(),pronounce:c.pronounce&&n.getPronunciation(),form:b})}return N?{tl:"en",q:c.english,uid:c.uid+".en"}:{tl:N?"en":"ja",q:cn(e),uid:Hn(e)}}),[c,N,b]),H=(0,i.useCallback)((function(){return j((function(e){return e?void 0:"-na"}))}),[]),W=(0,r.jsx)(_i,{visible:0===y,word:_,reCache:l,onPushedPlay:H}),K=c.english.length<55;return(0,r.jsxs)("div",{className:"pt-3 d-flex flex-column justify-content-around text-center",children:[(0,r.jsx)(Wi,{breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Ia({},N?Ia((n={},n[K?"fs-display-6":"h3"]=!0,n),K?{"lh-xs":!0}:{}):{"fs-display-6":!0}),children:I}),k&&F&&(0,r.jsx)("h5",{children:(0,r.jsx)("span",{onClick:jr(g,(function(e){return e===c.uid?void 0:c.uid})),className:"clickable loop-no-interrupt",children:p===c.uid?F:"[Romaji]"})}),(0,r.jsx)(Wi,{className:{"loop-no-interrupt":!0},breakPoint:"md",largeClassName:{"fs-display-5":!0},smallClassName:Ia({},N?{"fs-display-6":!0}:(t={},t[K?"fs-display-6":"h3"]=!0,t)),onClick:U?void 0:jr(v,(function(e){return e===c.uid?void 0:c.uid})),children:f===c.uid||U?G:V}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:W})]})}Ga.propTypes={vocabulary:or().object.isRequired,reCache:or().bool,showHint:or().bool};var Va=function(){return Va=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Va.apply(this,arguments)},Ua=function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))},_a={location:"/vocabulary/",label:"Vocabulary"};function Ha(){var e,n,t,a=(0,o.I0)(),s=(0,i.useState)(!1),c=s[0],l=s[1],u=(0,i.useRef)(!1),d=(0,i.useRef)(void 0),f=(0,i.useRef)(0),v=(0,i.useState)(void 0),h=v[0],p=v[1],g=(0,i.useState)([]),m=(g[0],g[1]),b=(0,i.useState)(-1),j=b[0],x=(b[1],(0,i.useState)(Date.now())),y=x[0],w=x[1],N=(0,i.useRef)(Date.now()),S=(0,i.useState)(0),T=S[0],C=S[1],A=(0,i.useState)(void 0),R=A[0],E=A[1],O=(0,i.useState)([]),M=O[0],P=O[1],F=(0,i.useState)(!1),D=F[0],L=F[1],q=(0,i.useRef)(),I=(0,i.useState)(!1),G=I[0],V=I[1],_=Oa(),H=_.motionThreshold,W=_.vocabList,K=_.memoThreshold,z=_.reinforce,B=_.filterType,Y=_.hintEnabled,X=_.sortMethod,Q=_.activeGroup,Z=_.autoVerbView,J=_.englishSideUp,$=_.verbForm,ee=_.repetition,ne=(0,i.useRef)(ee);ne.current=ee,(0,i.useEffect)((function(){0===W.length&&a($n())}),[]);var te=(0,i.useMemo)((function(){if(0===W.length)return[];if(0===Object.keys(ne.current).length&&0===Q.length)return W;var e=Object.keys(ne.current).reduce((function(e,n){return!0===ne.current[n].rein&&(e=Ua(Ua([],e,!0),[n],!1)),e}),[]),n=kn(B.current,W,e,Q,xr(a,dt));switch(X.current){case k.DIFFICULTY:var t=n.filter((function(e){var n,t=K.current,r=null===(n=ne.current[e.uid])||void 0===n?void 0:n.difficulty;return void 0===r&&(t<0?-1*t<Fn:t>Fn)||(t<0?r>-1*t:r<t)}));t.length>0?n=t:console.warn("Excluded all terms. Discarding memorized subfiltering.");break;case k.GAME:if(!0===z.current){var r=di()(n,(function(e){var n;return!0===(null===(n=ne.current[e.uid])||void 0===n?void 0:n.rein)})),i=r[0],o=r[1];n=Ua(Ua([],o,!0),i,!0)}}var s=n.reduce((function(e,n){var t;return!0===(null===(t=ne.current[n.uid])||void 0===t?void 0:t.rein)&&(e=Ua(Ua([],e,!0),[n.uid],!1)),e}),[]);return P(s),n}),[a,W,Q]),re=(0,i.useMemo)((function(){var e,n,t,r;if(0===te.length)return{newOrder:[]};switch(X.current){case k.RANDOM:n=Ln(te);break;case k.VIEW_DATE:n=Mn(te,ne.current);break;case k.GAME:if(!0===z.current){for(var i=-1,a=te.length-1;a>-1;a--){var o=ne.current[te[a].uid],s=a-1>-1?a-1:0,c=ne.current[te[s].uid];if(!0===(null==o?void 0:o.rein)&&!(null==c?void 0:c.rein)){i=a;break}}if(-1!==i){var l=te.slice(0,i),u=te.slice(i),d=Rn(l,ne.current),f=u.map((function(e,n){return l.length+n}));n=Ua(Ua([],d,!0),f,!0)}}void 0===n&&(n=Rn(te,ne.current));break;case k.DIFFICULTY:n=function(e,n){var t=[],r=[],i=[];for(var a in e){var o=e[a].uid,s=n[o];if(void 0!==s&&void 0!==s.difficulty){var c=Number(s.difficulty);c<Pn?r=jn(jn([],r,!0),[{difficulty:c,uid:o,index:Number(a)}],!1):i=jn(jn([],i,!0),[Number(a)],!1)}else t=jn(jn([],t,!0),[Number(a)],!1)}var l=_e()(r,["difficulty","uid"],["asc","asc"]).map((function(e){return e.index}));return jn(jn(jn([],l,!0),t,!0),i,!0)}(te,ne.current);break;default:n=(e=Dn(te)).order,t=e.jOrder,r=e.eOrder}return V(!0),{newOrder:n,jbare:t,ebare:r}}),[te]),ie=re.newOrder,ae=re.ebare,oe=re.jbare,se=(0,i.useCallback)((function(){var e=te.length,n=(T+1)%e;n===j&&(n=(e+n+1)%e),N.current=y,w(Date.now()),f.current=T,C(n),p(void 0)}),[te,T,y,j]),ce=(0,i.useCallback)((function(){xn(z.current,B.current,M,te,ne.current,h,(function(e){d.current=h,p(e)}),se)}),[a,M,te,h,se]),le=(0,i.useCallback)((function(){var e,n=te.length;(e=h?T:(n+(T-1))%n)===j&&(e=(n+e-1)%n),N.current=y,w(Date.now()),f.current=T,C(e),p(void 0)}),[te,T,h,y,j]),ue=function(e,n,t,r,i,a,o,s,c,l){return function(u,d){var f;if("left"===u)e(),f=Promise.all([Promise.resolve()]);else if("right"===u)n(),f=Promise.all([Promise.resolve()]);else{var v=wn(t||yn(r,s,o),i),h=c?"/override_cache":"";if("up"===u){Mi("playing");var p=void 0;if("Verb"===v.grp&&"dictionary"!==a){var g=function(e,n){var t=Gn(e).find((function(e){return e.name===n}));if(!t)throw new Error("Invalid targetForm");return t.value}(v,a);p=Va(Va({},v),{japanese:g.toString(),pronounce:v.pronounce&&g.getPronunciation(),form:a})}else if(rn.parse(v).isNaAdj()){var m=rn.parse(v).append(l.current&&"な");p=Va(Va({},v),{japanese:m.toString(),pronounce:v.pronounce&&m.getPronunciation(),form:l.current}),l.current=l.current?void 0:"-na"}else p=v;f=Ai(Ri(U+h,{tl:"ja",q:cn(p),uid:Hn(p)}),d)}else if("down"===u){Mi("playing");var b=v.english;f=Ai(Ri(U+h,{tl:"en",q:b,uid:v.uid+".en"}),d)}}return f||Promise.reject()}}(ce,le,h,T,W,$,ie,te,D,q),de=Vi(ue,J,Ei(H)),fe=de.beginLoop,ve=de.abortLoop,he=de.looperSwipe,pe=de.loopSettingBtn,ge=de.loopActionBtn,me=de.timedPlayVerifyBtn,be=de.timedPlayAnswerHandlerWrapper,je=de.gradeTimedPlayEvent,xe=de.resetTimedPlay,ye=de.loop,we=de.tpAnswered,ke=de.tpAnimation;Oi(ue,xr(a,mt),be);var Ne=wi(ue,be).HTMLDivElementSwipeRef;if(Pi("Vocabulary Loop",ye,fe,ve,he),(0,i.useEffect)((function(){var e={selectedIndex:f.current,reinforcedUID:d.current,lastNext:N.current};if(h!==e.reinforcedUID||T!==e.selectedIndex){var n=e.reinforcedUID||yn(e.selectedIndex,te,ie);if(je(a,n,ne.current),Cn(e.lastNext)){var t=wn(n,W),r=void 0!==e.reinforcedUID;a(et({uid:n,shouldIncrement:n!==e.reinforcedUID})).unwrap().then((function(e){var i,o=e.map,s=e.prevMap,c=s[n]&&s[n].d,l=((i={})[n]=Va(Va({},o[n]),{d:c}),i),u=function(e,n){return a(nr(e,n))};void 0!==we.current?mn(u,t,l,{frequency:r}):gn(u,t,l,{frequency:r})}))}xe()&&An(e.lastNext)&&fe(),E(void 0),m([]),f.current=T,d.current=h}}),[a,fe,je,xe,W,h,T,te,ie]),te.length<1||ie.length<1)return(0,r.jsx)(vr,{addlStyle:"main-panel"});var Se=h||yn(T,te,ie),Te=wn(Se,W),Ce=!0===(null===(e=ne.current[Te.uid])||void 0===e?void 0:e.rein),Ae="Verb"===Te.grp,Re=rn.parse(Te),Ee=Re.hasFurigana(),Oe=Re.isHintable(3),Me=void 0!==Te.grp&&""!==Te.grp,Pe=R!==Se&&J?Oe:Me,Fe=T,De=[];G?oe&&(De=oe):(oe&&(Fe=oe[T].idx),ae&&(De=ae));var Le=(T+1)/te.length*100,qe=(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{className:"vocabulary main-panel h-100",children:(0,r.jsxs)("div",{ref:Ne,className:"d-flex justify-content-between h-100",children:[(0,r.jsx)(Pr,{ariaLabel:"Previous",action:le,children:(0,r.jsx)(hr.wyc,{size:16})}),Ae&&Z?(0,r.jsx)(qa,{verb:Te,reCache:D,linkToOtherTerm:function(e){return p(e)},showHint:R===Se}):(0,r.jsx)(Ga,{vocabulary:Te,reCache:D,showHint:R===Se}),(0,r.jsx)(Pr,{ariaLabel:"Next",action:ce,children:(0,r.jsx)(hr.XCv,{size:16})})]})})});return qe=c?(0,r.jsxs)(i.Fragment,{children:[qe,(0,r.jsx)(Ra.Z,{in:c,timeout:500,children:(0,r.jsx)(Ea.Z,{style:{position:"absolute",bottom:"25vh",left:"65vw"},children:(0,r.jsx)("div",{onClick:jr(V,(function(e){return!e})),children:G?"JP":"EN"})})}),(0,r.jsx)("div",{className:"page-bar flex-shrink-1",onTouchStart:function(){u.current=!0},onTouchEnd:function(){u.current=!1},onMouseDown:function(){u.current=!0},onMouseUp:function(){u.current=!1},children:(0,r.jsx)(Pa,{initial:Fe,list:De,setIndex:function(e){if(G)C(e);else if(ae){var n=ae[e].idx;C(n)}}})})]}):(0,r.jsxs)(i.Fragment,{children:[qe,(0,r.jsx)("div",{className:"options-bar mb-3 flex-shrink-1",children:(0,r.jsxs)("div",{className:"row opts-max-h",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,r.jsx)(Cr,{toggle:J,action:function(){ve()&&xe(),a(mt())}}),(0,r.jsx)(Tr,{active:D,action:Wa(D,L)}),(0,r.jsx)(Sr,{visible:Ae,toggleAutoVerbView:xr(a,ut),autoVerbView:Z}),(0,r.jsx)("div",{className:"sm-icon-grp",children:pe}),(0,r.jsx)("div",{className:"sm-icon-grp",children:ge})]})}),(0,r.jsx)("div",{className:"col text-center",children:(0,r.jsx)(Rr,{visible:void 0!==h&&""!==h})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[me(!0===(null===(n=ne.current[Se])||void 0===n?void 0:n.pron)),(0,r.jsx)(Ma,{value:null===(t=ne.current[Se])||void 0===t?void 0:t.difficulty,onChange:xr(a,(function(e){return jt(Se,e)})),manualUpdate:Se}),(0,r.jsx)(Nr,{visible:Y.current,active:Pe,setShowHint:jr(E,(function(e){return e?void 0:Se}))}),(0,r.jsx)(yr,{active:Ee,toggle:Wn(Te.uid,ne.current).furigana.show,toggleFurigana:xr(a,at),vocabulary:Te}),(0,r.jsx)(kr,{addFrequencyTerm:function(e){P((function(n){return Ua(Ua([],n,!0),[e],!1)})),xr(a,bt)(e)},removeFrequencyTerm:function(e){P((function(n){return n.filter((function(n){return n!==e}))})),xr(a,ot)(e)},toggle:Ce,term:Te,count:M.length})]})})]})}),(0,r.jsx)("div",{className:"progress-line flex-shrink-1",onClick:function(){if(X.current===k.ALPHABETIC){l(!0);var e=function(){!1===u.current?l(!1):setTimeout(e,4e3)};setTimeout(e,4e3)}},children:(0,r.jsx)(dr.Z,{variant:null===ke?"determinate":"buffer",value:null===ke?Le:0,valueBuffer:null!=ke?ke:void 0,color:Ce?"secondary":"primary"})})]}),qe}function Wa(e,n){return function(){!1===e&&(n(!0),setTimeout((function(){n(!1)}),2e3))}}var Ka=function(){return Ka=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Ka.apply(this,arguments)};function za(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.kana.setting.charSet})),a=(0,i.useState)(!0),s=a[0],c=a[1],l=(0,i.useState)(0),u=l[0],d=l[1],f=(0,i.useState)(0),v=f[0],h=f[1],p=(0,i.useCallback)((function(){s?(c(!1),document.body.classList.add("no-scroll"),window.scrollTo(0,0)):(c(!0),document.body.classList.remove("no-scroll"))}),[s]),g=(0,i.useCallback)((function(e){if(e.target){var n=e.target;if(Array.from(document.getElementsByClassName("force-collapse")).includes(n))p();else if(!Array.from(document.getElementsByClassName("prevent-collapse")).includes(n))return p(),!1}}),[p]),m=(0,i.useMemo)((function(){return[{meta:Ka(Ka({},si),{label:qn(t,si.label)}),icon:(0,r.jsx)("div",{className:"not-a-real-icon",children:qn(t,["あ","ア","*"])}),wrap:function(e){return(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:xr(n,F),children:e})}},{meta:$r,icon:(0,r.jsx)(pr.G,{icon:gr.ejD,size:"2x"})},{meta:[_a,Bi][u],icon:(0,r.jsx)(pr.G,{icon:gr.yGG,size:"2x"}),wrap:function(e){return(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:jr(d,(function(e){return In(e,["Vocab","Phrases"])})),children:e})}},{meta:ri,icon:(0,r.jsx)(pr.G,{icon:gr._zQ,size:"2x"})},{meta:[Ni,Yr][v],icon:(0,r.jsx)("div",{className:"not-a-real-icon",children:qn(v,["漢","G"])}),wrap:function(e){return(0,r.jsx)("div",{className:"clickable prevent-collapse",onClick:jr(h,(function(e){return In(e,["Kanji","KanjiGame"])})),children:e})}},{meta:ka,icon:(0,r.jsx)(pr.G,{icon:gr.klh,size:"2x"})}]}),[n,t,v,u]);return(0,r.jsx)("div",{className:"navigation",children:(0,r.jsxs)("nav",{className:"my-navbar",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"button d-lg-none mt-2 me-2",onClick:p,children:(0,r.jsxs)("button",{className:Ve()({"nav-menu-btn":!0,collapsed:s}),type:"button","aria-controls":"nav-menu-mobile","aria-expanded":"false","aria-label":"Toggle mobile navigation",children:[(0,r.jsx)("span",{className:"nav-btn-line"}),(0,r.jsx)("span",{className:"nav-btn-line"}),(0,r.jsx)("span",{className:"nav-btn-line"})]})}),(0,r.jsx)("div",{className:Ve()({"mobile d-lg-none":!0,collapse:s}),id:"nav-menu-mobile",onClick:g,children:(0,r.jsx)("ul",{className:"w-100 d-flex justify-content-evenly flex-wrap p-4",children:m.map((function(n,t){return(0,r.jsxs)("li",{className:"w-25 text-center m-3",children:[(0,r.jsx)(ir.rU,{to:n.meta.location,children:(0,r.jsx)("div",{className:"icon force-collapse mb-2",onClick:function(){e.routeTo(n.meta.location)},children:n.icon})}),(0,r.jsx)("div",{className:"caption",children:n.wrap?n.wrap(n.meta.label):n.meta.label})]},t)}))})}),(0,r.jsx)("div",{className:"desktop d-none d-lg-block pt-2 pe-2",children:(0,r.jsx)("ul",{className:"d-flex",children:m.map((function(n,t){return(0,r.jsx)("li",{children:(0,r.jsx)(ir.rU,{className:"desktop-link",to:n.meta.location,children:(0,r.jsx)("div",{onClick:function(){e.routeTo(n.meta.location)},children:n.wrap?n.wrap(n.meta.label):n.meta.label})})},t)}))})})]})})}const Ba=t.p+"0301fbe829087f4e8b91cde9bf9496c5.jpeg",Ya=t.p+"fb3f97e84cbbbf0c3fdedec024222e88.png",Xa=t.p+"1062f5e41ef989b5973a457e55770974.png",Qa=t.p+"35872f035bddb00bb6bed6802ee78d72.png",Za=t.p+"388582fe2fdbf34450b199396860911c.png",Ja=t.p+"edb1f64724de9f6f175c1efab91a9473.png";function $a(){var e=(0,i.useState)(!1),n=e[0],t=e[1];return(0,i.useEffect)((function(){t(!0)}),[]),(0,r.jsxs)("div",{className:Ve()({"position-relative":!0,"notification-fade":!n,"notification-fade-in":n}),children:[(0,r.jsx)("div",{className:"position-absolute overflow-hidden width-full top-0 left-0",children:(0,r.jsx)("img",{alt:"",className:"c404-back","data-invert":"true","data-xrange":"0","data-yrange":"20",height:"415",width:"940",src:Ba})}),(0,r.jsxs)("div",{className:"c404-cont position-relative d-block my-0 mx-auto overflow-hidden",children:[(0,r.jsx)("img",{alt:"404 “This is not the web page you are looking for”",className:"c404-err js-plaxify position-absolute","data-xrange":"20","data-yrange":"10",height:"249",width:"271",src:Xa}),(0,r.jsx)("img",{alt:"",className:"c404-cat js-plaxify position-absolute","data-xrange":"10","data-yrange":"10",height:"230",width:"188",src:Za}),(0,r.jsx)("img",{alt:"",className:"c404-ship js-plaxify position-absolute","data-xrange":"10","data-yrange":"10",height:"156",width:"440",src:Ja}),(0,r.jsx)("img",{alt:"",className:"c404-bhouse js-plaxify position-absolute","data-invert":"true","data-xrange":"50","data-yrange":"20",height:"123",width:"304",src:Ya}),(0,r.jsx)("img",{alt:"",className:"c404-lhouse js-plaxify position-absolute","data-invert":"true","data-xrange":"75","data-yrange":"30",height:"50",width:"116",src:Qa})]})]})}var eo=document.querySelector("#app-container");(0,a.s)(eo).render((0,r.jsx)(i.StrictMode,{children:(0,r.jsx)(o.zt,{store:rr,children:(0,r.jsx)((function(){var e=(0,o.I0)(),n=(0,i.useState)(""),t=n[0],a=n[1];(0,i.useEffect)((function(){e(qe()),e(Xt()),e(St()).then((function(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(function(n){n.data.type===Nt&&e(nr(n.data.msg,n.data.lvl,Nt))}))}))}),[]);var s,c=(0,o.v9)((function(e){return e.global.darkMode})),l=Ve()({"d-flex flex-column":!0,"dark-mode":c}),u=window.location.hash.slice(1);switch(t){case(""===t&&u===ka.location||t===ka.location)&&t:s=(0,r.jsx)(Aa,{});break;case(""===t&&u===Bi.location||t===Bi.location)&&t:s=(0,r.jsx)(Yi,{});break;case(""===t&&u===Ni.location||t===Ni.location)&&t:s=(0,r.jsx)(Si,{});break;case(""===t&&u===Yr.location||t===Yr.location)&&t:s=(0,r.jsx)(Qr,{});break;case(""===t&&u===Wr||t===Wr)&&t:s=(0,r.jsx)(Kr,{});break;case(""===t&&u===si.location||t===si.location)&&t:s=(0,r.jsx)(ci,{});break;case(""===t&&u===$r.location||t===$r.location)&&t:s=(0,r.jsx)(ei,{});break;case(""===t&&u===ri.location||t===ri.location)&&t:s=(0,r.jsx)(ii,{});break;case(""===t&&""===u||t===_a.location||u===_a.location)&&t:s=(0,r.jsx)(Ha,{});break;default:s=(0,r.jsx)($a,{})}return(0,r.jsx)(ir.UT,{children:(0,r.jsxs)("div",{id:"page-content",className:l,children:[(0,r.jsx)(ur,{connected:!0}),(0,r.jsx)(za,{routeTo:a}),s]})})}),{})})}))}},e=>{e.O(0,[913,816,794,931,612,697,555,774,25,104,105,418,642,995,86,220,183,323,593,623,617,216,810,260,303,979,655],(()=>(9582,e(e.s=9582)))),e.O()}]);