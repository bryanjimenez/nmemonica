(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([["232"],{36230:function(e,s,t){},58572:function(e,s,t){},21191:function(e,s,t){},39679:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var n=t("10327"),l=t("78615"),i=t("83169"),a=t("40432"),c=t("42565"),r=t("480"),d=t("58800"),o=t("93197"),u=t("80161"),h=t("16332"),x=t("72530"),j=t("93781"),v=t("97389");function m(){let e=(0,a.useDispatch)(),[s,t]=(0,i.useState)(!1),{vocabList:m,repetition:f}=(0,u.useConnectVocabulary)(),{phraseList:b,repetition:g}=(0,o.useConnectPhrase)(),{kanjiList:p,repetition:N}=(0,d.useConnectKanji)(),{keys:S,list:y}=(0,i.useMemo)(()=>(0,r.getStaleSpaceRepKeys)(f,m,"[Stale Vocabulary]"),[m,f]),{keys:k,list:w}=(0,i.useMemo)(()=>(0,r.getStaleSpaceRepKeys)(g,b,"[Stale Phrase]"),[b,g]),{keys:R,list:M}=(0,i.useMemo)(()=>(0,r.getStaleSpaceRepKeys)(N,p,"[Stale Kanji]"),[p,N]),E=(0,i.useMemo)(()=>new Set([...S,...k,...R]),[S,k,R]),T=(0,i.useMemo)(()=>(function(e){return e.reduce((s,t,l)=>{let i=(0,n.jsx)("hr",{},`stale-meta-${t.uid}`),a=(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("span",{className:"col p-0",children:t.key}),(0,n.jsx)("span",{className:"col p-0",children:t.english}),(0,n.jsx)("span",{className:"col p-0 app-sm-fs-xx-small",children:(0,n.jsx)("div",{children:t.uid})})]},t.uid);return s.length>0&&l<e.length?[...s,i,a]:[...s,a]},[])})([...y,...w,...M]),[y,w,M]),C=(0,i.useMemo)(()=>M.reduce((e,s)=>"uid"===s.key?[...e,s.uid]:e,[]),[M]),D=(0,i.useMemo)(()=>w.reduce((e,s)=>"uid"===s.key?[...e,s.uid]:e,[]),[w]),L=(0,i.useMemo)(()=>y.reduce((e,s)=>"uid"===s.key?[...e,s.uid]:e,[]),[y]),G=(0,i.useCallback)(()=>{D.length>0&&e((0,x.deleteMetaPhrase)(D))},[e,D]),O=(0,i.useCallback)(()=>{L.length>0&&e((0,j.deleteMetaVocab)(L))},[e,L]),P=(0,i.useCallback)(()=>{C.length>0&&e((0,h.deleteMetaKanji)(C))},[e,C]),V=(0,n.jsxs)(n.Fragment,{children:[(D.length>0||L.length>0||C.length>0)&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h5",{children:"Stale Metadata UID"}),(0,n.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,n.jsx)("div",{className:"column-1"}),(0,n.jsx)("div",{className:"column-2",children:(0,n.jsxs)("div",{className:"setting-block",children:[D.length>0&&(0,n.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,n.jsxs)("span",{children:["Phrase: ",D.length]}),(0,n.jsx)("div",{className:"ps-4",onClick:G,children:(0,n.jsx)(l.TrashIcon,{className:"clickable",size:"small","aria-label":"delete"})})]}),L.length>0&&(0,n.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,n.jsxs)("span",{children:["Vocabulary: ",L.length]}),(0,n.jsx)("div",{className:"ps-4",onClick:O,children:(0,n.jsx)(l.TrashIcon,{className:"clickable",size:"small","aria-label":"delete"})})]}),C.length>0&&(0,n.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,n.jsxs)("span",{children:["Kanji: ",C.length]}),(0,n.jsx)("div",{className:"ps-4",onClick:P,children:(0,n.jsx)(l.TrashIcon,{className:"clickable",size:"small","aria-label":"delete"})})]})]})})]})]}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h5",{children:"Stale Space Repetition"}),(0,v.collapseExpandToggler)(s,t)]}),(0,n.jsxs)("div",{children:[D.length>0&&(0,n.jsxs)("div",{onClick:G,children:["Stale Phrase Metadata: ",D.length]}),L.length>0&&(0,n.jsxs)("div",{onClick:O,children:["Stale Vocab Metadata: ",L.length]}),C.length>0&&(0,n.jsxs)("div",{onClick:P,children:["Stale Kanji Metadata: ",C.length]})]}),(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)("span",{children:"keys: "+JSON.stringify(Array.from(E))})}),s&&(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(c.NotReady,{addlStyle:"failed-spacerep-view"}),children:(0,n.jsx)("div",{className:"failed-spacerep-view container mt-2 p-0",children:T})})]})]});return V}},3252:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var n=t("10327"),l=t("58093"),i=t("82511"),a=t.n(i),c=t("42157"),r=t.n(c);function d(e){let s={disabled:!!e.disabled||void 0};return(0,n.jsxs)("div",{className:"settings-switch-root",children:[(0,n.jsx)("p",{className:a({"disabled-color":s.disabled}),children:e.statusText}),(0,n.jsx)(l.Switch,{...s,checked:e.active,onChange:()=>e.action(),color:e.color||"primary",inputProps:{"aria-label":e.statusText+" checkbox"}})]})}t("83169"),t("58572"),d.propTypes={active:r.bool,action:r.func.isRequired,statusText:r.string.isRequired,color:r.string,disabled:r.bool};var o=d},97389:function(e,s,t){"use strict";t.r(s),t.d(s,{collapseExpandToggler:function(){return L},default:function(){return O},SettingsMeta:function(){return T}});var n=t("10327"),l=t("78615"),i=t("82511"),a=t.n(i),c=t("83169"),r=t("40432"),d=t("10776"),o=t("480"),u=t("22839"),h=t("68130"),x=t("75621"),j=t("9871"),v=t("72530"),m=t("40665"),f=t("93781"),b=t("42565"),g=t("3252");t("36230"),t("21191");let p=(0,c.lazy)(()=>t.el("2342").then(t.bind(t,"2342"))),N=(0,c.lazy)(()=>t.el("92404").then(t.bind(t,"92404"))),S=(0,c.lazy)(()=>t.el("49840").then(t.bind(t,"49840"))),y=(0,c.lazy)(()=>t.el("78135").then(t.bind(t,"78135"))),k=(0,c.lazy)(()=>t.el("49557").then(t.bind(t,"49557"))),w=(0,c.lazy)(()=>t.el("35706").then(t.bind(t,"35706"))),R=(0,c.lazy)(()=>t.el("77507").then(t.bind(t,"77507"))),M=(0,c.lazy)(()=>t.el("74616").then(t.bind(t,"74616"))),E=(0,c.lazy)(()=>t.el("33424").then(t.bind(t,"33424"))),T={location:"/settings/",label:"Settings"};function C(e,s){let t=s.cause;switch(e((0,j.debugToggled)(m.DebugLevel.DEBUG)),t?.code){case"StaleVocabActiveGrp":{let n=t.value;e((0,j.logger)("Error: "+s.message,m.DebugLevel.ERROR)),e((0,j.logger)("Group "+JSON.stringify(n)+" Removed",m.DebugLevel.ERROR)),e((0,f.toggleVocabularyActiveGrp)(n))}break;case"StalePhraseActiveGrp":{let n=t.value;e((0,j.logger)("Error: "+s.message,m.DebugLevel.ERROR)),e((0,j.logger)("Group "+JSON.stringify(n)+" Removed",m.DebugLevel.ERROR)),e((0,v.togglePhraseActiveGrp)(n))}break;case"DeviceMotionEvent":e((0,j.logger)("Error: "+s.message,m.DebugLevel.ERROR)),e((0,j.setMotionThreshold)(0))}}function D(e,s,t){return function(n){try{(0,o.motionThresholdCondition)(n,s,e=>{t(Number(e.toFixed(2))),setTimeout(()=>{t(void 0)},300)})}catch(s){s instanceof Error&&C(e,s)}}}function L(e,s){let t=e?(0,n.jsx)(l.XCircleIcon,{className:"clickable",size:"medium","aria-label":"collapse"}):(0,n.jsx)(l.PlusCircleIcon,{className:"clickable",size:"medium","aria-label":"expand"});return(0,n.jsx)("h2",{onClick:()=>s(e=>!e),children:t})}let G=a({"mb-5":!0});function O(){let e=(0,r.useDispatch)(),s=(0,c.useRef)(void 0),{darkMode:t,swipeThreshold:i,motionThreshold:v,memory:f,debug:T}=(0,h.useConnectSetting)(),[O,P]=(0,c.useState)(!1),[V,z]=(0,c.useState)(!1),[A,K]=(0,c.useState)(!1),[W,I]=(0,c.useState)(!1),[q,H]=(0,c.useState)(!1),[F,_]=(0,c.useState)(!1),[B,J]=(0,c.useState)(!1),[U,$]=(0,c.useState)(!1),[X,Q]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(!1),[ee,es]=(0,c.useState)(""),[et,en]=(0,c.useState)(""),[el,ei]=(0,c.useState)(""),[ea,ec]=(0,c.useState)(!1),[er,ed]=(0,c.useState)(0);(0,c.useEffect)(()=>(e((0,j.getMemoryStorageStatus)()),(0,u.swMessageSubscribe)(eo),(0,u.swMessageGetVersions)(),()=>{(0,u.swMessageUnsubscribe)(eo),s.current&&window.removeEventListener("devicemotion",s.current)}),[]),(0,c.useEffect)(()=>{v>0&&void 0===s.current?(s.current=D(e,v,ed),(0,o.getDeviceMotionEventPermission)(()=>{s.current&&window.addEventListener("devicemotion",s.current)},s=>C(e,s))):0===v&&void 0!==s.current?(window.removeEventListener("devicemotion",s.current),s.current=void 0):0===v&&void 0===s.current||(s.current&&window.removeEventListener("devicemotion",s.current),s.current=D(e,v,ed),(0,o.getDeviceMotionEventPermission)(()=>{s.current&&window.addEventListener("devicemotion",s.current)},s=>C(e,s)))},[e,v]);let eo=(0,x.useSWMessageVersionEventHandler)(e,P,ec,es,en,ei);return(0,n.jsx)("div",{className:"settings",children:(0,n.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3",children:[(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Global"}),(0,n.jsx)("h2",{})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,n.jsxs)("div",{className:"column-1 d-flex flex-column justify-content-end",children:[(0,n.jsxs)("div",{className:a({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===i}),children:[(0,n.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{i-1<=0?e((0,j.setSwipeThreshold)(0)):e((0,j.setSwipeThreshold)(i-1))},children:"-"}),(0,n.jsx)("div",{className:"px-2",children:i}),(0,n.jsx)("div",{className:"clickable px-2",onClick:()=>e((0,j.setSwipeThreshold)(i+1)),children:"+"})]}),(0,n.jsxs)("div",{className:a({"w-25 d-flex flex-row justify-content-between":!0,invisible:0===v}),children:[(0,n.jsx)("div",{className:"clickable px-2 pb-2",onClick:()=>{v-.5<=0?e((0,j.setMotionThreshold)(0)):e((0,j.setMotionThreshold)(v-.5))},children:"-"}),(0,n.jsx)("div",{className:a({"px-2":!0,"correct-color":er&&er>v&&er<=v+1,"question-color":er&&er>v+1&&er<=v+2,"incorrect-color":er&&er>v+2}),children:er??v}),(0,n.jsx)("div",{className:"clickable px-2",onClick:()=>{e((0,j.setMotionThreshold)(v+.5))},children:"+"})]})]}),(0,n.jsxs)("div",{className:"column-2",children:[(0,n.jsx)("div",{className:"setting-block",children:(0,n.jsx)(g.default,{active:t,action:(0,d.buildAction)(e,j.toggleDarkMode),statusText:(t?"Dark":"Light")+" Mode"})}),(0,n.jsx)("div",{className:"setting-block",children:(0,n.jsx)(g.default,{active:i>0,action:()=>{i>0?e((0,j.setSwipeThreshold)(0)):e((0,j.setSwipeThreshold)(1))},statusText:"Touch Swipes"})}),(0,n.jsx)("div",{className:"setting-block",children:(0,n.jsx)(g.default,{active:v>0,action:()=>{0===v?e((0,j.setMotionThreshold)(6)):e((0,j.setMotionThreshold)(0))},statusText:"Accelerometer"})})]})]})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Phrases"}),L(W,I)]}),W&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"phrases-settings",text:"Loading..."}),children:(0,n.jsx)(S,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Vocabulary"}),L(A,K)]}),A&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"vocabulary-settings",text:"Loading..."}),children:(0,n.jsx)(y,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Kanji"}),L(V,z)]}),V&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"kanji-settings",text:"Loading..."}),children:(0,n.jsx)(N,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Opposites Game"}),L(q,H)]}),q&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"opposites-settings",text:"Loading..."}),children:(0,n.jsx)(k,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Kana Game"}),L(F,_)]}),F&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"kana-settings",text:"Loading..."}),children:(0,n.jsx)(w,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Kanji Game"}),L(B,J)]}),B&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"kanji-game-settings",text:"Loading..."}),children:(0,n.jsx)(R,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Particles Game"}),L(U,$)]}),U&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"particle-settings",text:"Loading..."}),children:(0,n.jsx)(M,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"Study Stats"}),L(X,Q)]}),X&&(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(b.NotReady,{addlStyle:"stats-settings",text:"Loading..."}),children:(0,n.jsx)(E,{})})]}),(0,n.jsxs)("div",{className:G,children:[(0,n.jsx)("div",{className:"d-flex justify-content-between",children:(0,n.jsx)("h2",{children:"Application"})}),(0,n.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-between",children:[(0,n.jsxs)("div",{className:"column-1",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("div",{onClick:()=>{navigator.serviceWorker&&navigator.serviceWorker.ready.then(()=>{navigator.serviceWorker.controller?.postMessage({type:"INDEXEDDB_MIGRATE"})})},children:"indexedDB-rename"})}),(0,n.jsx)("div",{className:"setting-block mb-2 mt-2",children:(0,n.jsxs)("div",{className:"d-flex flex-row w-50 w-sm-100 justify-content-between clickable",onClick:()=>{es(""),en(""),ei(""),setTimeout(()=>{(0,u.swMessageGetVersions)()},1e3)},children:[(0,n.jsxs)("div",{className:"pe-2",children:[(0,n.jsx)("div",{children:"swVersion:"}),(0,n.jsx)("div",{children:"jsVersion:"}),(0,n.jsx)("div",{children:"bundleVersion:"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:ee}),(0,n.jsx)("div",{children:et}),(0,n.jsx)("div",{children:el})]})]})})]}),(0,n.jsxs)("div",{className:"column-2",children:[(0,n.jsx)("div",{className:"setting-block mb-2",children:(0,n.jsx)(g.default,{active:T>m.DebugLevel.OFF,action:(0,d.buildAction)(e,j.debugToggled),color:"default",statusText:(0,o.labelOptions)(T,["Debug","Debug Error","Debug Warn","Debug"])})}),(0,n.jsxs)("div",{className:a({"d-flex justify-content-end mb-2":!0,"disabled-color":ea}),children:[(0,n.jsx)("p",{id:"hard-refresh",className:"text-right",children:"Hard Refresh"}),(0,n.jsx)("div",{className:a({"spin-a-bit":O}),style:{height:"24px"},"aria-labelledby":"hard-refresh",onClick:()=>{P(!0),ec(!1),setTimeout(()=>{O&&(P(!1),ec(!0))},3e3),(0,u.swMessageDoHardRefresh)()},children:(0,n.jsx)(l.SyncIcon,{className:"clickable",size:24,"aria-label":"Hard Refresh"})})]}),(0,n.jsx)("div",{className:"setting-block mb-2",children:(0,n.jsx)(g.default,{active:f.persistent,action:(0,d.buildAction)(e,j.setPersistentStorage),disabled:f.persistent,color:"default",statusText:f.persistent?`Persistent ${~~(f.usage/1024/1024)}
                        /
                        ${~~(f.quota/1024/1024)}
                        MB`:"Persistent off"})})]})]})]}),navigator.serviceWorker?(0,n.jsxs)("div",{className:G,children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,n.jsx)("h2",{children:"External Data Source"}),L(Y,Z)]}),Y&&(0,n.jsx)(p,{})]}):(0,n.jsx)(b.NotReady,{addlStyle:"stats-settings",text:"Service worker not available"})]})})}},10776:function(e,s,t){"use strict";function n(e,s){return function(){if(s||"function"==typeof s){e(s);return}}}function l(e,s,t){return function(n){if(t){e(s(t));return}if(n instanceof Object&&"_reactName"in n){e(s());return}if(void 0!==n){e(s(n));return}e(s())}}t.r(s),t.d(s,{setStateFunction:function(){return n},buildAction:function(){return l}})},68130:function(e,s,t){"use strict";t.r(s),t.d(s,{useConnectSetting:function(){return l}});var n=t("40432");function l(){let[e,s,t,l,i]=(0,n.useSelector)(({global:e})=>{let{darkMode:s,swipeThreshold:t,motionThreshold:n,debug:l,localServiceURL:i}=e;return[s,t,n,l,i]},n.shallowEqual),a=(0,n.useSelector)(({global:e})=>{let{memory:s}=e;return s},(e,s)=>e.usage===s.usage),[c,r,d]=(0,n.useSelector)(({opposite:e})=>{let{qRomaji:s,aRomaji:t,fadeInAnswers:n}=e;return[s,t,n]},n.shallowEqual),[o,u]=(0,n.useSelector)(({particle:e})=>{let{aRomaji:s,fadeInAnswers:t}=e.setting;return[s,t]},n.shallowEqual);return{darkMode:e,swipeThreshold:s,motionThreshold:t,memory:a,debug:l,localServiceURL:i,oppositesQRomaji:c,oppositesARomaji:r,oppositeFadeInAnswers:d,particlesARomaji:o,particleFadeInAnswer:u}}},75621:function(e,s,t){"use strict";t.r(s),t.d(s,{useSWMessageVersionEventHandler:function(){return c}});var n=t("83169"),l=t("22839"),i=t("9871"),a=t("40665");function c(e,s,t,c,r,d){let o=(0,n.useCallback)(n=>{let{type:o,error:u}=n.data;if(o===l.SWMsgOutgoing.SW_REFRESH_HARD)u&&e((0,i.logger)(u,a.DebugLevel.ERROR)),setTimeout(()=>{s(!1),t(!0)},2e3);else if(o===l.SWMsgOutgoing.SW_GET_VERSIONS){let{swVersion:e,jsVersion:s,bundleVersion:t}=n.data;c(e),r(s),d(t)}},[e,s,t,c,r,d]);return o}}}]);